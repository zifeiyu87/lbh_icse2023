case:concept:name,concept:name,time:timestamp,people,scene,message,description
396,OpenPR,2021-01-02 14:28:20,stefanberger,unfork_merge,,
396,Revise,2021-01-02 14:32:28,stefanberger,unfork_merge,"swtpm: Remove global unused variable input (issue #395)

Remove the global unused variable with name input. This was detected
by cppcheck.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9c5d1e5644726831908793f60aeada6512fd0814"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-02T14:20:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-02T14:32:28Z""}}"
396,CrossReferenced,2021-01-02 14:33:59,stefanberger,unfork_merge,"Unintended global variable ""input"" in ctrlchannel.c","{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/395"", ""is_pull_request"": false}}"
396,Revise,2021-01-02 14:48:47,stefanberger,unfork_merge,"swtpm: Free buffer after failure to realloc (cppcheck)

Free the original buffer after failure to realloc().

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6e3d1f32138b11119b9b5fef491fa6ec4c750020"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-02T14:48:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-02T14:48:47Z""}}"
396,IssueComment,2021-01-02 16:03:56,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2890](https://coveralls.io/builds/36040036)

* **2** of **3**   **(66.67%)**  changed or added relevant lines in **1** file are covered.
* **2** unchanged lines in **1** file lost coverage.
* Overall coverage decreased (**-0.02%**) to **73.495%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/key.c](https://coveralls.io/builds/36040036/source?filename=src%2Fswtpm%2Fkey.c#L319) | 2 | 3 | 66.67%
<!-- | **Total:** | **2** | **3** | **66.67%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/key.c](https://coveralls.io/builds/36040036/source?filename=src%2Fswtpm%2Fkey.c#L311) | 2 | 68.91% |
<!-- | **Total:** | **2** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/36040036/badge)](https://coveralls.io/builds/36040036) |
| :-- | --: |
| Change from base [Build 2881](https://coveralls.io/builds/36004584): |  -0.02% |
| Covered Lines: | 3735 |
| Relevant Lines: | 5082 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/753490734"", ""author_association"": ""NONE""}"
396,MergePR,2021-01-02 17:16:40,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4161844934"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4450856d6d07aeb4c3f9f654cfc794a020aa21d3""}"
397,SubmitCommit,2021-01-03 15:03:40,stefanberger,unfork_merge,"swtpm: Remove unused file_ops_lock from threadpool.c (asan)

Asan reports this error for the CUSE TPM. The file_ops_lock was accidentally
duplicated in a code move of threadpool related code out of cuse_tpm.c
This patch removes the unused file_ops_lock from threadpool.c to resolve
the ASAN issue.

=================================================================
==545493==ERROR: AddressSanitizer: odr-violation (0x000000419340):
  [1] size=8 'file_ops_lock' cuse_tpm.c:112:8
  [2] size=8 'file_ops_lock' threadpool.c:55:8
These globals were registered at these points:
  [1]:
    #0 0x14f6c27f3cc8  (/lib64/libasan.so.6+0x37cc8)
    #1 0x40c2c3 in _sub_I_00099_1 (/home/stefanb/tmp/swtpm/src/swtpm/.libs/lt-swtpm+0x40c2c3)
    #2 0x40c31c in __libc_csu_init (/home/stefanb/tmp/swtpm/src/swtpm/.libs/lt-swtpm+0x40c31c)

  [2]:
    #0 0x14f6c27f3cc8  (/lib64/libasan.so.6+0x37cc8)
    #1 0x14f6c27aad1a in _sub_I_00099_1 (/home/stefanb/tmp/swtpm/src/swtpm/.libs/libswtpm_libtpms.so.0+0x25d1a)
    #2 0x14f6c31dc7b1 in call_init.part.0 (/lib64/ld-linux-x86-64.so.2+0x117b1)

==545493==HINT: if you don't care about these errors you may set ASAN_OPTIONS=detect_odr_violation=0
SUMMARY: AddressSanitizer: odr-violation: global 'file_ops_lock' at cuse_tpm.c:112:8
==545493==ABORTING

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9b0945558a0cda7975b8f064de46c8fcaa6edfa7"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-03T15:03:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-03T15:03:40Z""}}"
397,OpenPR,2021-01-03 19:18:21,stefanberger,unfork_merge,,
397,IssueComment,2021-01-03 19:55:23,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2895](https://coveralls.io/builds/36049065)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.495%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/36049065/badge)](https://coveralls.io/builds/36049065) |
| :-- | --: |
| Change from base [Build 2891](https://coveralls.io/builds/36040742): |  0.0% |
| Covered Lines: | 3735 |
| Relevant Lines: | 5082 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/753668038"", ""author_association"": ""NONE""}"
397,MergePR,2021-01-03 23:42:06,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4162905479"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e753128b27f453d2487e1a68bf27be86ac409060""}"
399,SubmitCommit,2021-01-13 03:19:22,iccaszhulili,fork_merge,"Update the doc of the flag to connect to TPM via UnixIO socket

Modify the flag from ""--unixio"" to ""--unix""

Signed-off-by: Lili Zhu <lizhu@redhat.com>","{""sha"": ""fff578c372b29d08770db6e9110fdddf0a2cf6f5"", ""author"": {""name"": ""Lili Zhu"", ""email"": ""lizhu@redhat.com"", ""date"": ""2021-01-13T03:19:22Z""}, ""committer"": {""name"": ""Lili Zhu"", ""email"": ""lizhu@redhat.com"", ""date"": ""2021-01-13T03:19:22Z""}}"
399,OpenPR,2021-01-13 03:22:12,iccaszhulili,fork_merge,,
399,IssueComment,2021-01-13 03:23:59,iccaszhulili,fork_merge,"@stefanberger please help to review, thanks","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/759179364"", ""author_association"": ""CONTRIBUTOR""}"
399,IssueComment,2021-01-13 04:28:22,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 2906](https://coveralls.io/builds/36282952)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.511%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/36282952/badge)](https://coveralls.io/builds/36282952) |
| :-- | --: |
| Change from base [Build 2899](https://coveralls.io/builds/36063487): |  0.0% |
| Covered Lines: | 3741 |
| Relevant Lines: | 5089 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/759197433"", ""author_association"": ""NONE""}"
399,MergePR,2021-01-13 12:02:19,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4200871869"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/b199d8084e38cc837a98e519d5a8fe7dd383c6ed""}"
399,IssueCommentSupplement,2021-01-13 12:02:28,stefanberger,fork_merge,Thanks!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/759404362"", ""author_association"": ""OWNER""}"
400,SubmitCommit,2021-01-13 12:37:19,iccaszhulili,unfork_merge,"Update the doc of the flag to connect to TPM via UnixIO socket

Modify the flag from ""--unixio"" to ""--unix""

Signed-off-by: Lili Zhu <lizhu@redhat.com>","{""sha"": ""514d08192cf012ec24334955eacfb3e95ac026d8"", ""author"": {""name"": ""Lili Zhu"", ""email"": ""lizhu@redhat.com"", ""date"": ""2021-01-13T03:19:22Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-13T12:37:19Z""}}"
400,SubmitCommit,2021-01-13 12:44:15,stefanberger,unfork_merge,"swtpm: Fix --print-capabilities for 'swtpm chardev'

This patch fixes the following issue:

$ ./src/swtpm/swtpm chardev --print-capabilities --tpm2
swtpm: Error: Missing character device or file descriptor

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""8e0d4e54fff7ca5f63e4c41dcc7e7dfbeb3eca36"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-13T12:17:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-13T12:44:15Z""}}"
400,OpenPR,2021-01-13 13:24:07,stefanberger,unfork_merge,,
400,IssueComment,2021-01-13 15:15:58,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2914](https://coveralls.io/builds/36295621)

* **2** of **6**   **(33.33%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.1%**) to **73.432%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_chardev.c](https://coveralls.io/builds/36295621/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L469) | 2 | 6 | 33.33%
<!-- | **Total:** | **2** | **6** | **33.33%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/36295621/badge)](https://coveralls.io/builds/36295621) |
| :-- | --: |
| Change from base [Build 2873](https://coveralls.io/builds/35951399): |  0.1% |
| Covered Lines: | 3781 |
| Relevant Lines: | 5149 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/759514632"", ""author_association"": ""NONE""}"
400,MergePR,2021-01-13 15:26:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4201794177"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/5fb4d3785cb30b482405b90af499d8f8825d3aff""}"
401,SubmitCommit,2021-01-13 12:34:56,iccaszhulili,unfork_merge,"Update the doc of the flag to connect to TPM via UnixIO socket

Modify the flag from ""--unixio"" to ""--unix""

Signed-off-by: Lili Zhu <lizhu@redhat.com>","{""sha"": ""b7dee1876f871064a5b1706e650e75d4a8c8765d"", ""author"": {""name"": ""Lili Zhu"", ""email"": ""lizhu@redhat.com"", ""date"": ""2021-01-13T03:19:22Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-13T12:34:56Z""}}"
401,SubmitCommit,2021-01-13 12:44:43,stefanberger,unfork_merge,"swtpm: Fix --print-capabilities for 'swtpm chardev'

This patch fixes the following issue:

$ ./src/swtpm/swtpm chardev --print-capabilities --tpm2
swtpm: Error: Missing character device or file descriptor

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""408ea63de14a7e70184190800e5981f22df90c63"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-13T12:17:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-13T12:44:43Z""}}"
401,OpenPR,2021-01-13 13:24:41,stefanberger,unfork_merge,,
401,BaseRefChanged,2021-01-13 13:25:14,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4201200876"", ""commit_url"": null}"
401,MergePR,2021-01-13 15:26:19,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4201792846"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e9acf65456552930e0d008304c40dbca49410682""}"
402,SubmitCommit,2021-01-13 12:45:02,stefanberger,unfork_merge,"swtpm: Fix --print-capabilities for 'swtpm chardev'

This patch fixes the following issue:

$ ./src/swtpm/swtpm chardev --print-capabilities --tpm2
swtpm: Error: Missing character device or file descriptor

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""f29e54b351fd6cfd21542ba17a243bd350e4fcf6"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-13T12:17:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-13T12:45:02Z""}}"
402,OpenPR,2021-01-13 13:25:31,stefanberger,unfork_merge,,
402,IssueComment,2021-01-13 15:55:01,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2915](https://coveralls.io/builds/36296715)

* **2** of **6**   **(33.33%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.1%**) to **73.61%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_chardev.c](https://coveralls.io/builds/36296715/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L479) | 2 | 6 | 33.33%
<!-- | **Total:** | **2** | **6** | **33.33%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/36296715/badge)](https://coveralls.io/builds/36296715) |
| :-- | --: |
| Change from base [Build 2907](https://coveralls.io/builds/36292239): |  0.1% |
| Covered Lines: | 3746 |
| Relevant Lines: | 5089 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/759540558"", ""author_association"": ""NONE""}"
402,MergePR,2021-01-13 16:32:16,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4202129937"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/c396f23f50f1d62e4baa536d6bbf14c3f9447209""}"
403,OpenPR,2021-01-19 02:47:18,stefanberger,unfork_merge,,
403,Revise,2021-01-19 12:14:53,stefanberger,unfork_merge,"build-sys: Check for python cryptography version

We need at least 2.1.x, 2.1.4, that supports OAEP.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""da1d70a665bdbe6123bf3c6952a927964486364d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-01-19T02:45:03Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-01-19T12:14:53Z""}}"
403,IssueComment,2021-01-19 13:31:05,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2923](https://coveralls.io/builds/36428682)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.61%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/36428682/badge)](https://coveralls.io/builds/36428682) |
| :-- | --: |
| Change from base [Build 2918](https://coveralls.io/builds/36300179): |  0.0% |
| Covered Lines: | 3746 |
| Relevant Lines: | 5089 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/762840412"", ""author_association"": ""NONE""}"
403,MergePR,2021-01-19 14:57:56,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4222980097"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/526c9facf6adddf398dafd4bfea018002fcf3e72""}"
404,SubmitCommit,2021-01-29 13:41:57,stefanberger,unfork_merge,"Travis: Upgrade pip to v20.3.3

Pip 21.0.0 seems to be broken when upgraded to on Xenial. So
let's just only upgrade to 20.3.3.

$ sudo pip3 install --upgrade cryptography
Traceback (most recent call last):
  File ""/usr/local/bin/pip3"", line 7, in <module>
    from pip._internal.cli.main import main
  File ""/usr/local/lib/python3.5/dist-packages/pip/_internal/cli/main.py"", line 60
    sys.stderr.write(f""ERROR: {exc}"")

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""39ee7dbffb6db5e71661191d8a54ea1103c16e05"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-01-29T13:34:48Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-01-29T13:41:57Z""}}"
404,OpenPR,2021-01-29 14:58:49,stefanberger,unfork_merge,,
404,IssueComment,2021-01-29 15:37:25,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2929](https://coveralls.io/builds/36701914)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.61%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/36701914/badge)](https://coveralls.io/builds/36701914) |
| :-- | --: |
| Change from base [Build 2924](https://coveralls.io/builds/36431894): |  0.0% |
| Covered Lines: | 3746 |
| Relevant Lines: | 5089 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/769877935"", ""author_association"": ""NONE""}"
404,MergePR,2021-01-29 15:51:31,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4266820841"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e3c6f2ffd68fda8390f8d8cc15525b5d07eaffac""}"
405,SubmitCommit,2021-01-29 15:52:40,stefanberger,unfork_merge,"Travis: Upgrade pip to v20.3.3

Pip 21.0.0 seems to be broken when upgraded to on Xenial. So
let's just only upgrade to 20.3.3.

$ sudo pip3 install --upgrade cryptography
Traceback (most recent call last):
  File ""/usr/local/bin/pip3"", line 7, in <module>
    from pip._internal.cli.main import main
  File ""/usr/local/lib/python3.5/dist-packages/pip/_internal/cli/main.py"", line 60
    sys.stderr.write(f""ERROR: {exc}"")

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""f1a807732bec95413a606a10b978c726c0a0d49d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-01-29T13:34:48Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-01-29T15:52:40Z""}}"
405,OpenPR,2021-01-29 18:54:09,stefanberger,unfork_merge,,
405,IssueComment,2021-01-29 19:31:04,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2933](https://coveralls.io/builds/36707922)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.828%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/36707922/badge)](https://coveralls.io/builds/36707922) |
| :-- | --: |
| Change from base [Build 2916](https://coveralls.io/builds/36297834): |  0.0% |
| Covered Lines: | 3732 |
| Relevant Lines: | 5055 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/770004234"", ""author_association"": ""NONE""}"
405,MergePR,2021-01-29 20:20:25,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4267875734"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/623b118f4d2ce9b687d3598865367b859b545533""}"
406,SubmitCommit,2021-01-29 15:53:14,stefanberger,unfork_merge,"Travis: Upgrade pip to v20.3.3

Pip 21.0.0 seems to be broken when upgraded to on Xenial. So
let's just only upgrade to 20.3.3.

$ sudo pip3 install --upgrade cryptography
Traceback (most recent call last):
  File ""/usr/local/bin/pip3"", line 7, in <module>
    from pip._internal.cli.main import main
  File ""/usr/local/lib/python3.5/dist-packages/pip/_internal/cli/main.py"", line 60
    sys.stderr.write(f""ERROR: {exc}"")

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""46f9764fb62e87f52e234438b007b2fd8b1c9f52"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-01-29T13:34:48Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-01-29T15:53:14Z""}}"
406,OpenPR,2021-01-29 18:54:28,stefanberger,unfork_merge,,
406,IssueComment,2021-01-29 20:10:52,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2934](https://coveralls.io/builds/36708841)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.432%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/36708841/badge)](https://coveralls.io/builds/36708841) |
| :-- | --: |
| Change from base [Build 2917](https://coveralls.io/builds/36298847): |  0.0% |
| Covered Lines: | 3781 |
| Relevant Lines: | 5149 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/770024252"", ""author_association"": ""NONE""}"
406,MergePR,2021-01-29 20:12:58,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4267849425"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/ed20cca5847e833e49a90a8ff5ff9b1261a46f78""}"
408,OpenPR,2021-02-01 17:54:17,stefanberger,unfork_merge,,
408,Revise,2021-02-01 18:08:17,stefanberger,unfork_merge,"swtpm_setup: Probe for supported socketpair domain (cygwin bugfix)

We need to probe for the support socketpair() domain. On Linux only
socket.AF_UNIX is support and on Cygwin AF_INET works.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""703eded2c97546620491c5138b1bf7223ad01b15"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-01T17:14:48Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-01T18:08:17Z""}}"
408,RenameTitle,2021-02-01 19:33:48,stefanberger,unfork_merge,,"{""rename"": {""from"": ""swtpm_setup: Probe for supported socketpair domain (cygwin bugfix)"", ""to"": ""swtpm_setup: Probe for supported socketpair socket domain (cygwin bugfix)""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4275550596""}"
408,IssueComment,2021-02-01 19:43:09,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2942](https://coveralls.io/builds/36765009)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.61%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/36765009/badge)](https://coveralls.io/builds/36765009) |
| :-- | --: |
| Change from base [Build 2930](https://coveralls.io/builds/36703378): |  0.0% |
| Covered Lines: | 3746 |
| Relevant Lines: | 5089 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/771109519"", ""author_association"": ""NONE""}"
408,MergePR,2021-02-01 19:48:33,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4275612339"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/224ee0516313ccdcad69d67802610a5740d81b34""}"
409,OpenPR,2021-02-02 14:54:43,stefanberger,unfork_merge,,
409,Revise,2021-02-02 16:03:02,stefanberger,unfork_merge,"swtpm_setup: Replace OSError with ValueError (Cygwin bugfix)

A wrong domain to socketpair() causes a ValueError, not an OSError.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""4f9663f5900bf21356353149843e62a77cc7a45f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-02T02:11:23Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-02T16:03:02Z""}}"
409,MergePR,2021-02-02 17:37:01,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4280681358"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/fa1b93904e91ad3737971464794c8c3e0859c7d6""}"
409,IssueCommentSupplement,2021-02-03 01:54:44,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2946](https://coveralls.io/builds/36796569)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.61%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/36796569/badge)](https://coveralls.io/builds/36796569) |
| :-- | --: |
| Change from base [Build 2943](https://coveralls.io/builds/36772674): |  0.0% |
| Covered Lines: | 3746 |
| Relevant Lines: | 5089 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/772149142"", ""author_association"": ""NONE""}"
411,SubmitCommit,2021-02-05 19:49:50,stefanberger,unfork_merge,"samples: Fix typo in project URL (swptm->swtpm)

This patch fixes issue #410.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3b3b9b33bfb01187675d41c7dcdb573fda17cb47"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-05T19:48:08Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-05T19:49:50Z""}}"
411,SubmitCommit,2021-02-05 19:50:02,stefanberger,unfork_merge,"swtpm_setup: Fix typo in project URL (swptm->swtpm)

This fixes issue #410.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1c8665af95e4242e5d18bfd5f38b9ee1bc9cfc96"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-05T19:49:11Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-05T19:50:02Z""}}"
411,SubmitCommit,2021-02-05 19:50:57,stefanberger,unfork_merge,"swtpm: Fix spelling in comment (SWPTM->SWTPM)

This patch fixes issue #410.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""ce4180e02b2efe1bc9a6f2e23a92c5eb7f20ffa2"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-05T19:50:53Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-05T19:50:57Z""}}"
411,SubmitCommit,2021-02-05 19:54:47,stefanberger,unfork_merge,"tests: Fix spelling error swptm->swtpm

This patch fixes issue #410.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""645ac05b29fa9ef806840a63fcb4a7b038bdd70b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-05T19:54:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-05T19:54:47Z""}}"
411,OpenPR,2021-02-05 20:00:34,stefanberger,unfork_merge,,
411,IssueComment,2021-02-05 21:12:48,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2952](https://coveralls.io/builds/36911572)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.61%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/36911572/badge)](https://coveralls.io/builds/36911572) |
| :-- | --: |
| Change from base [Build 2949](https://coveralls.io/builds/36800551): |  0.0% |
| Covered Lines: | 3746 |
| Relevant Lines: | 5089 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/774291419"", ""author_association"": ""NONE""}"
411,MergePR,2021-02-05 21:48:56,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4298140441"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/468f7e61c335cc4baebd8b2f0aea135f442f7371""}"
416,SubmitCommit,2021-02-19 13:26:10,stefanberger,unfork_merge,"man: Change 'shell variable' to 'environment variable' in swtpm-localca.conf

Signed-off-by: Stefan Berger <stefanb@linux.vnet.ibm.com>","{""sha"": ""2290f4d354a3c1056be45a2a5cd58df8e6c08e8c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-19T13:26:06Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-19T13:26:10Z""}}"
416,OpenPR,2021-02-19 18:20:00,stefanberger,unfork_merge,,
416,IssueComment,2021-02-19 18:58:33,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2957](https://coveralls.io/builds/37282386)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.61%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/37282386/badge)](https://coveralls.io/builds/37282386) |
| :-- | --: |
| Change from base [Build 2953](https://coveralls.io/builds/36913178): |  0.0% |
| Covered Lines: | 3746 |
| Relevant Lines: | 5089 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/782275532"", ""author_association"": ""NONE""}"
416,MergePR,2021-02-19 20:06:53,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4353861309"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4d8b2c9c7190d72ea45ded63669cb2866bebc195""}"
417,OpenPR,2021-02-20 18:52:00,stefanberger,unfork_merge,,
417,CrossReferenced,2021-02-20 18:52:59,stefanberger,unfork_merge,swtpm_ioctl can hang,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/415"", ""is_pull_request"": false}}"
417,IssueComment,2021-02-20 20:12:19,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2966](https://coveralls.io/builds/37303858)

* **18** of **40**   **(45.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.2%**) to **73.385%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_ioctl/tpm_ioctl.c](https://coveralls.io/builds/37303858/source?filename=src%2Fswtpm_ioctl%2Ftpm_ioctl.c#L147) | 18 | 40 | 45.0%
<!-- | **Total:** | **18** | **40** | **45.0%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/37303858/badge)](https://coveralls.io/builds/37303858) |
| :-- | --: |
| Change from base [Build 2958](https://coveralls.io/builds/37285344): |  -0.2% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5125 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/782742631"", ""author_association"": ""NONE""}"
417,Revise,2021-02-21 12:13:56,stefanberger,unfork_merge,"swtpm_ioctl: Use timeouts for communicating with swtpm (Unix socket)

Start using timeouts when communicating with swtpm over Unix sockets so
that swtpm_ioctl does not just hang when it cannot communicate with swtpm
such as establishing a connection or reading results. This is because swtpm
listens to nlye one control channel connections.

This patch addresses an aspect of the problem reported in issue #415
but may also starting hiding bugs if certain operations are done in
the wrong order, as was the case in libvirt (6.10 & 7.0).

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""a8c305164367706a4a6756f7d47411b3693efc8f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-20T18:40:48Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-21T12:13:56Z""}}"
417,IssueComment,2021-02-22 15:55:54,stefanberger,unfork_merge,@elmarco Let me know if you have any comments. I do not intend to back port it. I think the fact that it was blocking actually helped detect the libvirt issue.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/783475005"", ""author_association"": ""OWNER""}"
417,IssueComment,2021-02-24 07:39:39,elmarco,unfork_merge,"@stefanberger I agree with you hanging makes debugging easier. At the same time, in production for such auxiliary VM task, libvirt shouldn't become unresponsive.

Perhaps this patch isn't helping then, and we should look at improving libvirt code instead (using a thread for subprocess communcation, or process async IO ?).","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/784865048"", ""author_association"": ""CONTRIBUTOR""}"
417,MergePR,2021-02-25 12:28:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4376296015"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/20524cb2137181f37a3a7db5a8d585fee3bd3425""}"
417,IssueCommentSupplement,2021-02-25 12:29:32,stefanberger,unfork_merge,I merged it now anyway. Libvirt had a regression that needed to be fixed anyway.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/785860681"", ""author_association"": ""OWNER""}"
418,SubmitCommit,2021-02-21 16:07:23,stefanberger,unfork_merge,"tests: Wait a bit for pid file content; dump log on failure

test_samples_create_tpmca needs to wait longer for the pid file content
to be there not just until the file is available.

test_tpm2_save_load_state_2 needs to dump the TPM log file on failure.
Failures occurred rarely because the previous instance of swtpm had
not shut down yet and released the lock file while the new instance
wanted to lock the lockfile. So we have to wait a bit until the
previous instance is gone.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5d9f8b89298c499ab3903d9c84676707c4d2abf1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-21T15:43:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-21T16:07:23Z""}}"
418,OpenPR,2021-02-21 16:38:21,stefanberger,unfork_merge,,
418,MergePR,2021-02-21 16:52:05,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4356544233"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/eeb87a86739d704b26082a74c80df620e8e898a8""}"
418,DeleteBranch,2021-05-22 00:19:51,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4781737682"", ""commit_url"": null}"
419,OpenPR,2021-02-22 18:35:25,williamcroberts,fork_close,,
419,Revise,2021-02-22 18:35:43,williamcroberts,fork_close,"configure: use autoconf macros for --enable-debug

Rather than handroll the --enable-debug flag, autoconf comes with
predefined macros for doing this, use them.

Signed-off-by: William Roberts <william.c.roberts@intel.com>","{""sha"": ""3174e1b7fa9d2e867abc441ebc5c5c9ea533c65c"", ""author"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2021-02-22T18:30:57Z""}, ""committer"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2021-02-22T18:35:43Z""}}"
419,IssueComment,2021-02-22 19:01:02,stefanberger,fork_close,Do we have a dependency now on some autotools archive?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/783599374"", ""author_association"": ""OWNER""}"
419,IssueComment,2021-02-22 22:15:31,williamcroberts,fork_close,"> Do we have a dependency now on some autotools archive?

Yes, for some reason I thought it was already in the Travis job.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/783713984"", ""author_association"": ""CONTRIBUTOR""}"
419,Revise,2021-02-22 22:16:07,williamcroberts,fork_close,"travis: add autoconf-archive dependency

Signed-off-by: William Roberts <william.c.roberts@intel.com>","{""sha"": ""107860665355b77630ce3c976e48f21c96cf83ef"", ""author"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2021-02-22T22:16:07Z""}, ""committer"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2021-02-22T22:16:07Z""}}"
419,IssueCommentSupplement,2021-07-26 22:17:10,stefanberger,fork_close,Closing this one.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887064964"", ""author_association"": ""OWNER""}"
419,ClosePR,2021-07-26 22:17:10,stefanberger,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5071026285"", ""commit_url"": null}"
422,SubmitCommit,2021-02-24 15:37:08,stefanberger,unfork_merge,"tests: Use the IBM TSS2 v1.6.0's test suite

Upgrade to use the IBM TSS2 tests from v1.6.0.

Add a patch that eliminates all testing of 3072 bit RSA keys in case
libtpms does not support such keys. Also disable a test case related
to ACT for older revisions.

This test passes with libtpms 0.8.0 as well libtpms 0.6.0 and 0.7.0.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""e1710903b6bb2b3590bed3c64297f5686f2c802e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-24T15:28:15Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-24T15:37:08Z""}}"
422,OpenPR,2021-02-24 16:18:35,stefanberger,unfork_merge,,
422,IssueComment,2021-02-24 17:19:49,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2977](https://coveralls.io/builds/37418354)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.61%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/37418354/badge)](https://coveralls.io/builds/37418354) |
| :-- | --: |
| Change from base [Build 2971](https://coveralls.io/builds/37305464): |  0.0% |
| Covered Lines: | 3746 |
| Relevant Lines: | 5089 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/785236816"", ""author_association"": ""NONE""}"
422,MergePR,2021-02-24 17:23:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4372237589"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4d4d24fb5676a225d918067adc004f9c99737fd7""}"
422,DeleteBranch,2021-02-24 17:30:27,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4372271419"", ""commit_url"": null}"
423,SubmitCommit,2021-02-26 18:55:25,stefanberger,unfork_merge,"tests: Add test for libtpms issue number 195 (needs latest libtpms now)

This patch adds a test case for testing the fix for libtpms
issue 195: https://github.com/stefanberger/libtpms/issues/195

This patch now requires that the latest TPM version from master or the
branches is installed.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1226d8cc5bd0ced1365e3a9b7cdd563bb123fa8c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-26T16:01:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-26T18:55:25Z""}}"
423,OpenPR,2021-02-26 20:10:06,stefanberger,unfork_merge,,
423,IssueComment,2021-02-26 21:21:45,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2982](https://coveralls.io/builds/37491421)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.385%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/37491421/badge)](https://coveralls.io/builds/37491421) |
| :-- | --: |
| Change from base [Build 2979](https://coveralls.io/builds/37445942): |  0.0% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5125 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/786900408"", ""author_association"": ""NONE""}"
423,MergePR,2021-02-26 21:22:02,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4383802822"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/12c35fd016d698e0f3600371ddec7ef392c462e6""}"
425,SubmitCommit,2021-03-01 00:41:38,stefanberger,unfork_merge,"swtpm_setup: Write note about non-standard EK when using --allow-signing

Write a note in swtpm_setup's help screen and man page that the usage
of --allow-signing will lead to a non-standard EK. Be more precise in the
man page.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d15e4e620cf6cea4f7f7b59e533d2052648b67b2"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-28T21:10:11Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-01T00:41:38Z""}}"
425,SubmitCommit,2021-03-01 00:41:38,stefanberger,unfork_merge,"tests: Move setting CERRTOOL variable to tests-common

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""00dbdec9b0054a8676d7bc1f4614ccba8821f73d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-27T01:32:10Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-01T00:41:38Z""}}"
425,SubmitCommit,2021-03-01 00:41:38,stefanberger,unfork_merge,"tests: Apply patches to IBM TSS2 test suite

Apply patches to the IBM TSS2 test suite rather than using sed on its
files and other types of file manipulations.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""bc208258a6b75a7cae5bfd5071d2869e847e773a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-02-28T23:45:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-01T00:41:38Z""}}"
425,OpenPR,2021-03-01 00:44:57,stefanberger,unfork_merge,,
425,IssueComment,2021-03-01 02:04:03,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2987](https://coveralls.io/builds/37515821)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.385%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/37515821/badge)](https://coveralls.io/builds/37515821) |
| :-- | --: |
| Change from base [Build 2983](https://coveralls.io/builds/37492382): |  0.0% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5125 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/787584716"", ""author_association"": ""NONE""}"
425,MergePR,2021-03-01 12:54:27,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4389377786"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e78c9db255ab4078d04d96036d70a9e95ded8186""}"
428,SubmitCommit,2021-03-15 14:08:12,stefanberger,unfork_merge,"build-sys: Check for minimum required gnutls 3.4.0

RHEL 7's gnutls 3.3.29 does not take the private key passwords like later
versions take it. We require at least 3.4.0, though I am not entirely sure
when that change occurred. We may actually require >3.4.0.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1bd2a18043057aed584633b70ff3a922276ede8b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-15T14:06:43Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-15T14:08:12Z""}}"
428,OpenPR,2021-03-15 14:11:18,stefanberger,unfork_merge,,
428,IssueComment,2021-03-15 14:12:36,stefanberger,unfork_merge,This change addresses the issue in #420 directing users to a later version of gnutls.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/799452323"", ""author_association"": ""OWNER""}"
428,IssueComment,2021-03-15 15:34:13,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2992](https://coveralls.io/builds/37941473)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.385%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/37941473/badge)](https://coveralls.io/builds/37941473) |
| :-- | --: |
| Change from base [Build 2988](https://coveralls.io/builds/37533978): |  0.0% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5125 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/799516403"", ""author_association"": ""NONE""}"
428,MergePR,2021-03-15 18:41:24,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4460473229"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e9fd0142df831ac42c66321a65f1c5daffac06c6""}"
428,DeleteBranch,2021-03-15 18:41:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4460473579"", ""commit_url"": null}"
428,CrossReferenced,2021-03-15 18:42:04,stefanberger,unfork_merge,Running 'make check' fails due to Error creating local CA's signing key and cert.,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/420"", ""is_pull_request"": false}}"
430,SubmitCommit,2021-03-17 20:08:14,stefanberger,unfork_merge,"tests: Set test-check local user.name and user.email before git am

If we are running the tests as a user that doesn't have a git config
setup we run into the following issue when trying to apply patches
suing 'git am':

Committer identity unknown

*** Please tell me who you are.

Run

  git config --global user.email ""you@example.com""
  git config --global user.name ""Your Name""

to set your account's default identity.
Omit --global to set the identity only in this repository.

This patch fixes this by setting the git config on the local checkout
before using 'git am'.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""0de3d94152b1ad688ba536537c79c159e9853dd2"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-17T19:56:14Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-17T20:08:14Z""}}"
430,SubmitCommit,2021-03-17 21:53:28,stefanberger,unfork_merge,"tests: Store and also restore the volatile state at every step

Add restoring of the volatile state after having it stored.

Since this is now taking a long time it must be explicitly enabled
by setting the environment variable SWTPM_TEST_STORE_VOLATILE=1.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5ac943c1e9a064f95e6fd34c505fd06f4dd0a2f3"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-17T20:17:03Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-17T21:53:28Z""}}"
430,SubmitCommit,2021-03-17 21:53:28,stefanberger,unfork_merge,"tests: Add a Readme describing how to run the swtpm tests

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""53d17ac7120d9316f803b5f9ba9bae229f7a5366"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-17T21:00:14Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-17T21:53:28Z""}}"
430,OpenPR,2021-03-17 22:06:38,stefanberger,unfork_merge,,
430,IssueComment,2021-03-17 23:12:22,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 2998](https://coveralls.io/builds/38031706)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.385%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/38031706/badge)](https://coveralls.io/builds/38031706) |
| :-- | --: |
| Change from base [Build 2993](https://coveralls.io/builds/37949206): |  0.0% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5125 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/801501078"", ""author_association"": ""NONE""}"
430,MergePR,2021-03-17 23:19:10,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4473007727"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/8e30907db2abc4666eaeab56903f36799dc3365f""}"
431,SubmitCommit,2021-03-21 01:27:21,stefanberger,unfork_merge,"swtpm: Free error that was set by failed options_parse

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2fd0b59f06382a31f68c222c2a8005546b9878a3"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-21T01:17:55Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-03-21T01:27:21Z""}}"
431,OpenPR,2021-03-21 01:31:13,stefanberger,unfork_merge,,
431,IssueComment,2021-03-21 02:48:57,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3003](https://coveralls.io/builds/38112495)

* **0** of **9**   **(0.0%)**  changed or added relevant lines in **1** file are covered.
* **8** unchanged lines in **1** file lost coverage.
* Overall coverage decreased (**-0.2%**) to **73.214%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/common.c](https://coveralls.io/builds/38112495/source?filename=src%2Fswtpm%2Fcommon.c#L290) | 0 | 9 | 0.0%
<!-- | **Total:** | **0** | **9** | **0.0%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/common.c](https://coveralls.io/builds/38112495/source?filename=src%2Fswtpm%2Fcommon.c#L291) | 8 | 59.83% |
<!-- | **Total:** | **8** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/38112495/badge)](https://coveralls.io/builds/38112495) |
| :-- | --: |
| Change from base [Build 2999](https://coveralls.io/builds/38032961): |  -0.2% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5137 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/803502897"", ""author_association"": ""NONE""}"
431,MergePR,2021-03-21 12:18:24,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4486669256"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/debdb136482c65048b429efb9b4fade943d578ab""}"
436,SubmitCommit,2021-05-07 01:27:07,stefanberger,unfork_merge,"Debian: Fix build warnings by updating compat to '10'

Thos patch fixes the following issue when building a Debian package:

dh clean --parallel
dh: warning: Compatibility levels before 10 are deprecated (level 9 in use)
   dh_auto_clean -O--parallel
dh_auto_clean: warning: Compatibility levels before 10 are deprecated (level 9 in use)
   dh_clean -O--parallel
dh_clean: warning: Compatibility levels before 10 are deprecated (level 9 in use)
 dpkg-source -b .

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""88b2a6e422998c992ba9f773663f8ce164ff062f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-07T01:27:03Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-07T01:27:07Z""}}"
436,OpenPR,2021-05-07 01:30:22,stefanberger,unfork_merge,,
436,IssueComment,2021-05-07 03:18:27,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3012](https://coveralls.io/builds/39439627)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.214%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/39439627/badge)](https://coveralls.io/builds/39439627) |
| :-- | --: |
| Change from base [Build 3004](https://coveralls.io/builds/38115236): |  0.0% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5137 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/834032877"", ""author_association"": ""NONE""}"
436,IssueComment,2021-05-07 18:37:06,xypron,unfork_merge,"Building master.next (ed55938606dc236c) on Debian Bullseye shows no problems. swtpm successfully provides TPM to QEMU.
But the patch https://github.com/stefanberger/swtpm/pull/436/commits/88b2a6e422998c992ba9f773663f8ce164ff062f referenced in the  pull request does not match patch ed55938606dc236c.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/834681482"", ""author_association"": ""NONE""}"
436,MergePR,2021-05-07 20:56:15,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4704623827"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/d321bfa6b4f9264f9bef8caba7ef71470e00c1c2""}"
436,IssueCommentSupplement,2021-05-07 20:56:29,stefanberger,unfork_merge,Thanks for testing.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/834774240"", ""author_association"": ""OWNER""}"
438,SubmitCommit,2021-05-12 17:09:01,stefanberger,unfork_merge,"tests: Allow volatile state file >= 9000 bytes in test_tpm2_migration_key

Changes to libtpms will require that the volatile state files
during this test may be larger than 9000 bytes.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""105459d5fcc875bd466198d75c2d9edccfe69b37"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-12T17:03:12Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-12T17:09:01Z""}}"
438,OpenPR,2021-05-12 18:12:36,stefanberger,unfork_merge,,
438,IssueComment,2021-05-12 20:00:23,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3019](https://coveralls.io/builds/39632901)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.214%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/39632901/badge)](https://coveralls.io/builds/39632901) |
| :-- | --: |
| Change from base [Build 3014](https://coveralls.io/builds/39471844): |  0.0% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5137 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/840058766"", ""author_association"": ""NONE""}"
438,MergePR,2021-05-12 20:03:19,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4738473942"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/527a9b60633198467fd70d525f0847e5c6e86b9f""}"
439,SubmitCommit,2021-05-12 17:13:07,stefanberger,unfork_merge,"tests: Allow volatile state file >= 9000 bytes in test_tpm2_migration_key

Changes to libtpms will require that the volatile state files
during this test may be larger than 9000 bytes.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9c4005a165291003f2b1bd8d1fc8048926fa164b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-12T17:03:12Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-12T17:13:07Z""}}"
439,OpenPR,2021-05-12 18:12:46,stefanberger,unfork_merge,,
439,IssueComment,2021-05-12 20:27:39,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3020](https://coveralls.io/builds/39634019)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.432%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/39634019/badge)](https://coveralls.io/builds/39634019) |
| :-- | --: |
| Change from base [Build 2935](https://coveralls.io/builds/36709967): |  0.0% |
| Covered Lines: | 3781 |
| Relevant Lines: | 5149 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/840075093"", ""author_association"": ""NONE""}"
439,MergePR,2021-05-12 21:01:05,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4738714646"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/61b62ac230b42c9ac65839703ec6906d7350cb0a""}"
440,SubmitCommit,2021-05-12 17:13:52,stefanberger,unfork_merge,"tests: Allow volatile state file >= 9000 bytes in test_tpm2_migration_key

Changes to libtpms will require that the volatile state files
during this test may be larger than 9000 bytes.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""341e5fc26183d161afb8755dbe68c399120fbc08"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-12T17:03:12Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-12T17:13:52Z""}}"
440,OpenPR,2021-05-12 18:12:56,stefanberger,unfork_merge,,
440,MergePR,2021-05-12 21:01:23,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4738715927"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/71c4cc1843461783c48616c22079290408cd27d5""}"
440,IssueCommentSupplement,2021-05-12 21:09:56,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3021](https://coveralls.io/builds/39635537)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.828%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/39635537/badge)](https://coveralls.io/builds/39635537) |
| :-- | --: |
| Change from base [Build 2936](https://coveralls.io/builds/36710879): |  0.0% |
| Covered Lines: | 3732 |
| Relevant Lines: | 5055 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/840098958"", ""author_association"": ""NONE""}"
441,SubmitCommit,2021-05-13 13:19:49,stefanberger,unfork_merge,"tests: Allow volatile state file >= 9000 bytes in test_tpm2_migration_key

Changes to libtpms will require that the volatile state files
during this test may be larger than 9000 bytes.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""c3b3712b8e97eebd43c42b80b4d782c3528e87e1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-12T17:03:12Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-13T13:19:49Z""}}"
441,OpenPR,2021-05-13 13:28:57,stefanberger,unfork_merge,,
441,IssueComment,2021-05-13 14:49:17,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3026](https://coveralls.io/builds/39660949)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.0%**) to **72.755%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/39660949/badge)](https://coveralls.io/builds/39660949) |
| :-- | --: |
| Change from base [Build 2606](https://coveralls.io/builds/33509399): |  0.0% |
| Covered Lines: | 3525 |
| Relevant Lines: | 4845 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/840612918"", ""author_association"": ""NONE""}"
441,MergePR,2021-05-13 20:34:36,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4743791401"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a0e5d1572d075e336d1b323b8d8fb813a7439ee7""}"
442,SubmitCommit,2021-05-18 13:19:05,elmarco,fork_merge,"build-sys: leave CFLAGS/LDFLAGS for user to be defined

This allows user to set specific flags during compilation, without
overriding configure-time cflags necessary for compilation.

See also:
https://www.gnu.org/software/automake/manual/html_node/User-Variables.html
https://www.gnu.org/software/automake/manual/html_node/Flag-Variables-Ordering.html

Signed-off-by: Marc-André Lureau <marcandre.lureau@redhat.com>","{""sha"": ""9643768284d4f1b4c396af1d4a277b0c40268939"", ""author"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-05-18T13:18:55Z""}, ""committer"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-05-18T13:19:05Z""}}"
442,OpenPR,2021-05-18 19:46:15,elmarco,fork_merge,,
442,IssueComment,2021-05-18 20:25:56,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3029](https://coveralls.io/builds/39793840)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.214%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/39793840/badge)](https://coveralls.io/builds/39793840) |
| :-- | --: |
| Change from base [Build 3022](https://coveralls.io/builds/39636785): |  0.0% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5137 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/843533822"", ""author_association"": ""NONE""}"
442,MergePR,2021-05-18 22:24:51,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4763315746"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/da2d2f39966ce6636c6cfc49767df320b4d08a7c""}"
443,SubmitCommit,2021-05-19 08:30:41,diabonas,fork_merge,"swtpm_cert: rename deprecated libtasn1 types

These types have been renamed in libtasn1 version 3.0 (released 2012-10-28).
The most recent libtasn1 version 4.17.0 (released 2021-05-13) now prints
deprecation warnings that are made fatal by -Werror:

ek-cert.c:76:13: error: 'ASN1_ARRAY_TYPE' macro is deprecated, use 'asn1_static_node' instead. [-Werror]
   76 | extern const ASN1_ARRAY_TYPE tpm_asn1_tab[];
      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[...]

The new types were introduced almost ten years ago, so they should be pretty
universally available by now.

Signed-off-by: Jonas Witschel <diabonas@archlinux.org>","{""sha"": ""0b0041bda9df8bf704d7aff8c32da0d18cd9eb28"", ""author"": {""name"": ""Jonas Witschel"", ""email"": ""diabonas@archlinux.org"", ""date"": ""2021-05-19T08:30:41Z""}, ""committer"": {""name"": ""Jonas Witschel"", ""email"": ""diabonas@archlinux.org"", ""date"": ""2021-05-19T08:30:41Z""}}"
443,OpenPR,2021-05-19 08:32:24,diabonas,fork_merge,,
443,IssueComment,2021-05-19 09:11:12,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3031](https://coveralls.io/builds/39809761)

* **10** of **10**   **(100.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.214%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/39809761/badge)](https://coveralls.io/builds/39809761) |
| :-- | --: |
| Change from base [Build 3030](https://coveralls.io/builds/39798371): |  0.0% |
| Covered Lines: | 3761 |
| Relevant Lines: | 5137 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/843908778"", ""author_association"": ""NONE""}"
443,IssueComment,2021-05-21 17:26:04,stefanberger,fork_merge,Thank you!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/846119735"", ""author_association"": ""OWNER""}"
443,MergePR,2021-05-21 17:26:11,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4780533650"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4b825a3d9444c9ee6ed3df09531acfca8f44be3d""}"
443,DeleteBranch,2021-05-21 21:42:35,diabonas,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4781461062"", ""commit_url"": null}"
444,OpenPR,2021-05-22 13:51:07,stefanberger,unfork_merge,,
444,Revise,2021-05-22 13:57:17,stefanberger,unfork_merge,"swtpm: Initialize key structure before calling OpenSSL function (Coverity)

Initialize the key structure before loading the key into it. This
resolves an issue raised by Coverity, but doesn't seem to be really
necessary.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d7a6b9d4bf383a66e14a7f33798944b24f18b8c9"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-22T13:45:15Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-22T13:57:17Z""}}"
444,RenameTitle,2021-05-22 13:57:59,stefanberger,unfork_merge,,"{""rename"": {""from"": ""Add defines for flags to header and address a Coverity issue"", ""to"": ""Address a Coverity issue""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4782368743""}"
444,IssueComment,2021-05-22 15:16:32,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3048](https://coveralls.io/builds/39918713)

* **2** of **2**   **(100.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.01%**) to **73.224%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/39918713/badge)](https://coveralls.io/builds/39918713) |
| :-- | --: |
| Change from base [Build 3033](https://coveralls.io/builds/39900039): |  0.01% |
| Covered Lines: | 3763 |
| Relevant Lines: | 5139 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/846422410"", ""author_association"": ""NONE""}"
444,MergePR,2021-05-22 15:28:53,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4782452762"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3be2ad28552c5dd59de6574026ab3935b1c912ed""}"
445,SubmitCommit,2021-05-24 13:55:09,stefanberger,unfork_merge,"build-sys: Fix cleanup issue complain by 'make distcheck'

Fix the following `make distcheck` cleanup issue:

ERROR: files left in build directory after distclean:
./man/man8/swtpm_cuse.8

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""65707a7fe8afc71866732e5cf2718cf8d17ccf4f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-24T13:55:05Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-24T13:55:09Z""}}"
445,SubmitCommit,2021-05-24 14:00:27,stefanberger,unfork_merge,"build-sys: Only define single .PHONY

Fix the following issue due to multiple .PHONY definitions.

Makefile.am:34: warning: .PHONY was already defined in condition WITH_SELINUX, which is included in condition TRUE ...
Makefile.am:28: ... '.PHONY' previously defined here

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""ec542d9c244cbd479b98f6dcdd925af11ae762ec"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-24T14:00:22Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-24T14:00:27Z""}}"
445,OpenPR,2021-05-24 15:29:10,stefanberger,unfork_merge,,
445,IssueComment,2021-05-24 16:08:43,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3055](https://coveralls.io/builds/39952870)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.224%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/39952870/badge)](https://coveralls.io/builds/39952870) |
| :-- | --: |
| Change from base [Build 3049](https://coveralls.io/builds/39919173): |  0.0% |
| Covered Lines: | 3763 |
| Relevant Lines: | 5139 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/847152138"", ""author_association"": ""NONE""}"
445,MergePR,2021-05-24 16:29:19,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4787616025"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/de6977896664dcac9505edff2f7e773d7660a1f4""}"
446,SubmitCommit,2021-05-26 20:27:54,stefanberger,unfork_merge,"swtpm_setup: Fix some minor issue

Fix some typos. The value for TPM2_ALG_SHA3_512 was wrong but also is
currently not used since libtpms does not support it yet.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""24d38ded90e089a0d43bc2156df306eff38a5a81"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-26T20:27:40Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-26T20:27:54Z""}}"
446,SubmitCommit,2021-05-26 22:15:50,stefanberger,unfork_merge,"swtpm_setup: Fix TPM 1.2 default SRK and owner password and help screen

Some of the wording in the help screen was odd, so rephrase it.

Fix the default owner and SRK passwords for the TPM 1.2 case.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9b5c9000ada8b418875819a584c51eadc873e3e7"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-26T20:30:11Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-26T22:15:50Z""}}"
446,OpenPR,2021-05-26 22:19:11,stefanberger,unfork_merge,,
446,IssueComment,2021-05-26 23:34:41,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3067](https://coveralls.io/builds/40063259)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.224%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40063259/badge)](https://coveralls.io/builds/40063259) |
| :-- | --: |
| Change from base [Build 3057](https://coveralls.io/builds/39955427): |  0.0% |
| Covered Lines: | 3763 |
| Relevant Lines: | 5139 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/849188579"", ""author_association"": ""NONE""}"
446,MergePR,2021-05-26 23:52:06,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4802484531"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/eb178f87c6f4ebe8d11aa5e2c397cafbfa1bc18b""}"
447,SubmitCommit,2021-05-26 23:52:37,stefanberger,unfork_merge,"headers: Add defines for GetInfo flags

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""25640eac1770f544001dab0e9f3145d46675b51b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-24T12:44:34Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-26T23:52:37Z""}}"
447,OpenPR,2021-05-26 23:54:34,stefanberger,unfork_merge,,
447,IssueComment,2021-05-27 01:50:21,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3089](https://coveralls.io/builds/40124973)

* **1217** of **1614**   **(75.4%)**  changed or added relevant lines in **4** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.5%**) to **73.745%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup_utils.c](https://coveralls.io/builds/40124973/source?filename=src%2Fswtpm_setup%2Fswtpm_setup_utils.c#L29) | 14 | 16 | 87.5%
| [src/utils/swtpm_utils.c](https://coveralls.io/builds/40124973/source?filename=src%2Futils%2Fswtpm_utils.c#L36) | 111 | 153 | 72.55%
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/40124973/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L90) | 527 | 691 | 76.27%
| [src/swtpm_setup/swtpm.c](https://coveralls.io/builds/40124973/source?filename=src%2Fswtpm_setup%2Fswtpm.c#L87) | 565 | 754 | 74.93%
<!-- | **Total:** | **1217** | **1614** | **75.4%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/40124973/badge)](https://coveralls.io/builds/40124973) |
| :-- | --: |
| Change from base [Build 3081](https://coveralls.io/builds/40096988): |  0.5% |
| Covered Lines: | 4980 |
| Relevant Lines: | 6753 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/849253785"", ""author_association"": ""NONE""}"
447,Revise,2021-05-28 13:43:43,stefanberger,unfork_merge,"swtpm_setup: Rewrite in 'C' (addresses issue #437)

This is a 1:1 rewrite of swtpm_setup in 'C' as a first step to get
rid of the python dependency. It addresses issue #437.

Tested on: Cygwin, Fedora 33, Ubuntu Xenial & Bionic, FreeBSD,
           DragonFlyBSD, OpenBSD (i386), Mac, Debian (recent), Centos-8,
           CentOS (recent), Alpine (recent), OpenSUSE (recent)

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""139f1883c564b7b71d7f140901ae0f36e8d03a45"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-17T11:36:36Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-28T13:43:43Z""}}"
447,MergePR,2021-05-28 17:08:16,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4813786210"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/c125e34bf23afa8e0f0b876c352310b7b46ae826""}"
447,DeleteBranch,2021-05-28 17:10:19,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4813796079"", ""commit_url"": null}"
448,SubmitCommit,2021-05-27 17:12:04,stefanberger,unfork_merge,"sample: swtpm-local: Fix a few minor issues

Have the statedir created in case it doesn't exist before checking for read
and write access to it.

Set the default directory where to write the results into to the current
directory '.' rather than to what would result in the root directory.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b336699b59b4024a8300c5a2ad693a536469f3ae"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-27T17:10:04Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-27T17:12:04Z""}}"
448,OpenPR,2021-05-27 17:46:50,stefanberger,unfork_merge,,
448,IssueComment,2021-05-27 18:32:05,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3078](https://coveralls.io/builds/40094141)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.224%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40094141/badge)](https://coveralls.io/builds/40094141) |
| :-- | --: |
| Change from base [Build 3068](https://coveralls.io/builds/40064409): |  0.0% |
| Covered Lines: | 3763 |
| Relevant Lines: | 5139 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/849850447"", ""author_association"": ""NONE""}"
448,MergePR,2021-05-27 19:03:48,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4807724918"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/b11da814a80c9e7b1dafbd7f2e84c3dd02d53f85""}"
449,SubmitCommit,2021-05-30 00:57:18,stefanberger,unfork_merge,"swtpm_setup: Add proper DEPENDENCY for swtpm_setup on swtpm_utils.la

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2ac47552ff98d76f55088d446dfa8ec3986db24c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-30T00:33:11Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-30T00:57:18Z""}}"
449,OpenPR,2021-05-31 13:49:44,stefanberger,unfork_merge,,
449,IssueComment,2021-05-31 14:28:48,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3104](https://coveralls.io/builds/40182597)

* **429** of **541**   **(79.3%)**  changed or added relevant lines in **3** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.8%**) to **74.509%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/utils/swtpm_utils.c](https://coveralls.io/builds/40182597/source?filename=src%2Futils%2Fswtpm_utils.c#L70) | 47 | 65 | 72.31%
| [samples/swtpm_localca_utils.c](https://coveralls.io/builds/40182597/source?filename=samples%2Fswtpm_localca_utils.c#L34) | 36 | 55 | 65.45%
| [samples/swtpm_localca.c](https://coveralls.io/builds/40182597/source?filename=samples%2Fswtpm_localca.c#L58) | 346 | 421 | 82.19%
<!-- | **Total:** | **429** | **541** | **79.3%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/utils/swtpm_utils.c](https://coveralls.io/builds/40182597/source?filename=src%2Futils%2Fswtpm_utils.c#L51) | 1 | 84.88% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/40182597/badge)](https://coveralls.io/builds/40182597) |
| :-- | --: |
| Change from base [Build 3090](https://coveralls.io/builds/40126729): |  0.8% |
| Covered Lines: | 5425 |
| Relevant Lines: | 7281 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/851528137"", ""author_association"": ""NONE""}"
449,Revise,2021-05-31 14:30:03,stefanberger,unfork_merge,"samples: Rewrite of swtpm_localca in 'C' (addresses issue #437)

This is a 1:1 rewrite of swtpm_localca in 'C' as a final step to get
rid of the python dependency. It addresses issue #437.

Tested on: Cygwin, Fedora 33, Ubuntu Xenial & Bionic, FreeBSD,
           DragonFlyBSD, OpenBSD (i386), Mac, Debian (recent), Centos-8,
           CentOS (recent), Alpine (recent), OpenSUSE (recent),
           Fedora 28 PPC Big Endian

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2737fe123e881c22c1f120ffbf6dc4d6c40b1f40"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-24T14:43:49Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-31T14:30:03Z""}}"
449,Revise,2021-05-31 17:16:39,stefanberger,unfork_merge,"tests: Test resolving env. variabels in swtpm_setup config file

Modify a test case and write an environment variable into the
swtpm_setup.conf config file to test that it gets resolved.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""827a86dfd3ffa0a95bc55369218a7219f96fc2ff"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-31T17:16:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-31T17:16:39Z""}}"
449,Revise,2021-05-31 20:29:05,stefanberger,unfork_merge,"utils: Have logit and logerr call alog to unify their code

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""fd00f56565344a0e2c29728b1749efbc28529c25"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-31T20:29:02Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-05-31T20:29:05Z""}}"
449,MergePR,2021-06-01 13:31:43,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4825428482"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4ec17885c428eee88b583f3cb197f8fe0f568a15""}"
449,DeleteBranch,2021-06-01 13:31:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4825428861"", ""commit_url"": null}"
450,OpenPR,2021-06-02 20:32:36,stefanberger,unfork_merge,,
450,IssueComment,2021-06-02 21:47:22,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3132](https://coveralls.io/builds/40316419)

* **3** of **4**   **(75.0%)**  changed or added relevant lines in **3** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.509%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [samples/swtpm_localca_utils.c](https://coveralls.io/builds/40316419/source?filename=samples%2Fswtpm_localca_utils.c#L98) | 0 | 1 | 0.0%
<!-- | **Total:** | **3** | **4** | **75.0%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/40316419/badge)](https://coveralls.io/builds/40316419) |
| :-- | --: |
| Change from base [Build 3121](https://coveralls.io/builds/40289965): |  0.0% |
| Covered Lines: | 5425 |
| Relevant Lines: | 7281 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/853405593"", ""author_association"": ""NONE""}"
450,CrossReferenced,2021-06-03 14:47:35,andreabolognani,unfork_merge,Clean up after the rewrite from Python to C,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/451"", ""is_pull_request"": true}}"
450,Revise,2021-06-04 15:32:46,stefanberger,unfork_merge,"rpm: Readd swtpm.spec to be able to easily install dependencies

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2d931b793e13d49be2aa7d1d84c9fa74442da4cf"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:31:59Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:46Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"swtpm_localca: Initialize autofreed variables to NULL (gcc-11)

This patch addresses the following gcc-11 compiler issues:

In file included from /usr/include/glib-2.0/glib.h:114,
                 from ../src/utils/swtpm_utils.h:13,
                 from swtpm_localca_utils.c:24:
swtpm_localca_utils.c: In function 'get_config_envvars':
/usr/include/glib-2.0/glib/glib-autocleanups.h:28:3: error: 'value' may be used uninitialized in this function [-Werror=maybe-uninitialized]
   28 |   g_free (*pp);
      |   ^~~~~~~~~~~~
swtpm_localca_utils.c:98:37: note: 'value' was declared here
   98 |             g_autofree gchar *key, *value;
      |                                     ^~~~~
In file included from /usr/include/glib-2.0/glib.h:114,
                 from ../src/utils/swtpm_utils.h:13,
                 from swtpm_localca_utils.c:24:
/usr/include/glib-2.0/glib/glib-autocleanups.h:28:3: error: 'key' may be used uninitialized in this function [-Werror=maybe-uninitialized]
   28 |   g_free (*pp);
      |   ^~~~~~~~~~~~
swtpm_localca_utils.c:98:31: note: 'key' was declared here
   98 |             g_autofree gchar *key, *value;
      |                               ^~~

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7b6df655cf9b5a8a93c0a97a3bbc86dcd0baf94d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-03T13:54:43Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"swtpm_setup: Initialize autfreed variables with NULL (gcc-11)

This patch addresses the following gcc-11 compiler issues:

In file included from /usr/include/glib-2.0/glib.h:114,
                 from swtpm_setup_utils.c:14:
swtpm_setup_utils.c: In function 'get_config_value':
/usr/include/glib-2.0/glib/glib-autocleanups.h:28:3: error: 'tmp' may be used uninitialized in this function [-Werror=maybe-uninitialized]
   28 |   g_free (*pp);
      |   ^~~~~~~~~~~~
swtpm_setup_utils.c:36:31: note: 'tmp' was declared here
   36 |             g_autofree gchar *tmp;
      |                               ^~~

swtpm.c: In function 'swtpm_start':
/usr/include/glib-2.0/glib/glib-autocleanups.h:28:3: error: 'pidfile_file' may be used uninitialized in this function [-Werror=maybe-uninitialized]
   28 |   g_free (*pp);
      |   ^~~~~~~~~~~~
swtpm.c:54:23: note: 'pidfile_file' was declared here
   54 |     g_autofree gchar *pidfile_file;
      |                       ^~~~~~~~~~~~

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""47c85de825615dee6563db7fa26dd58cce37dba1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-03T14:04:53Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"swtpm_localca: Adjust expiration days for 32-bit platforms

GnuTLS on 32-bit platforms complains about the long expiration time
of the certificates since they overflow the 32-bit time_t. Reduce
the duration to 12 years.

This system expresses time with a 32-bit time_t; that prevents dates after 2038 to be expressed by GnuTLS.
Overflow while parsing days

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6f01db4cd1d96735557b69726989f776ecf3f356"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-03T14:18:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"swtpm_setup: Fix the strjoin for the PID file path

The path for the PID file was not joined correctly and was missing
a '/'. Fix this now.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3bb2b47986a5f5a9b063f5efd6d33a8bcde0c4a0"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-03T21:08:10Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"build-sys: Display json-glib and glib related cflags and libs

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9bd313af884e73409be732f8a657667bdc9f0f8e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-03T15:10:38Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"Travis: Remove much of the python related stuff

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5b0b5af17dfafd039f3ded76c72a83286a5540d1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-03T15:50:15Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"swtpm: Add 2021 as year in the Copyright notice

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""21ac52bf13f8d1e62c524872f272b1798a491bb5"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-03T20:34:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"build-sys: Add HARDENING_CFLAGS and _LDFLAGS to all C programs

Add the HARDENING_CFLAGS and _LDFLAGS to all C programs.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""770e4bab02afffb0e0d88e0937d71de79f7c8417"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T12:04:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"CHANGES: Add more documentation for changes in 0.6.0

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5a81e43e7cff18cfe06fea32c1a401777e661153"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-02T20:02:13Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:51,stefanberger,unfork_merge,"debian/rpm: Remove left-over python files that do not exist anymore

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""297a22f29f4f0d5f3c9000014ad4aa79eeac0d03"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-02T20:28:13Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:51Z""}}"
450,Revise,2021-06-04 15:32:52,stefanberger,unfork_merge,"debian/rpm: Adjust changelog for 0.6.0 release

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2d232f508153123ab83c5b15808235134ff6dcab"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-02T20:21:56Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-04T15:32:52Z""}}"
450,MergePR,2021-06-04 20:04:10,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4845016129"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/ea627b3b5e847f9141fcf25de0c03004d35fb375""}"
451,SubmitCommit,2021-06-03 13:00:23,andreabolognani,fork_close,"Fix g_autofree usage

g_autofree'd variables need to be assigned an initial value,
otherwise the compiler will complain that they might be used
uninitialized.

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""efa73d293b8c9663759f027031311af81091070d"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T10:03:51Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T13:00:23Z""}}"
451,SubmitCommit,2021-06-03 13:47:38,andreabolognani,fork_close,"Clean up after rewrite from Python to C

The rpm and Debian packages have not been fully updated to cope
with the change, and the same is true (albeit to a lesser extent)
for the Travis CI configuration.

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""7325bb5a5f0d074db22f93fae4bccb89f41b443d"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T09:20:24Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T13:47:38Z""}}"
451,OpenPR,2021-06-03 14:43:46,andreabolognani,fork_close,,
451,IssueCommentSupplement,2021-06-03 14:47:35,andreabolognani,fork_close,"Never mind, I just noticed that https://github.com/stefanberger/swtpm/pull/450 already contains most of these changes ????","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/853927519"", ""author_association"": ""CONTRIBUTOR""}"
451,ClosePR,2021-06-03 14:47:35,andreabolognani,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4838045967"", ""commit_url"": null}"
451,IssueCommentSupplement,2021-06-03 15:38:10,stefanberger,fork_close,"Yes, gcc-11 got picky but not necessarily smarter... Trying scratch builds now. Thanks anyway.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/853964659"", ""author_association"": ""OWNER""}"
451,DeleteBranch,2021-06-03 15:59:15,andreabolognani,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4838478358"", ""commit_url"": null}"
451,CrossReferenced,2021-06-03 18:22:58,andreabolognani,fork_close,Improvements to rpm build,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/452"", ""is_pull_request"": true}}"
452,SubmitCommit,2021-06-03 18:06:18,andreabolognani,fork_merge,"gitignore: Ignore .gch files

Configure generates include/swtpm/tpm_ioctl.h.gch when trying
to figure out which hardening options can be enabled.

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""bc4246f29a6bee24788cf219f8a11a54ae21dd49"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T16:01:50Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T18:06:18Z""}}"
452,SubmitCommit,2021-06-03 18:06:18,andreabolognani,fork_merge,"INSTALL: Don't make the user run configure twice

autogen.sh will automatically invoke configure passing it any
command line arguments it received, so we shouldn't instruct
the user to unnecessarily run it again immediately afterwards.

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""d721ba143009676e0d0add280b703328c9d01d2d"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T16:16:31Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T18:06:18Z""}}"
452,SubmitCommit,2021-06-03 18:06:48,andreabolognani,fork_merge,"rpm: Drop swtpm.spec

This file is generated from swtpm.spec.in, and as such should
not be tracked in git; in fact, an entry for it exists in the
gitignore file.

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""4f6b32eee0f2187430dde758b9eb152a7780ba5b"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T16:03:44Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T18:06:48Z""}}"
452,SubmitCommit,2021-06-03 18:08:02,andreabolognani,fork_merge,"rpm: Use HTTPS URL

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""1fd0d540111bd364bae7a79ae817a1c14af177e2"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T17:25:35Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T18:08:02Z""}}"
452,SubmitCommit,2021-06-03 18:15:21,andreabolognani,fork_merge,"rpm: Remove unnecessary string substitution

These are never going to change, so using string substitution
serves no purpose beyon mild obfuscation.

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""ee947d09ef11eb82ce6cde43d64bd4d07ed9034d"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T18:14:39Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T18:15:21Z""}}"
452,SubmitCommit,2021-06-03 18:17:43,andreabolognani,fork_merge,"rpm: Drop git information

Using these instead of the regular version number makes it
more complicated than necessary to perform builds, and there
doesn't seem to be any advantage in keeping them around.

After this change, the rpm building instructions contained in
the INSTALL file actually work.

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""b15014ab019fe9d075e201058f36bcf24b7c632c"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T17:32:48Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T18:17:43Z""}}"
452,SubmitCommit,2021-06-03 18:18:12,andreabolognani,fork_merge,"rpm: Move spec file and include it in dist archives

Having the spec file in the top-level directory of the dist
archive makes it possible to build rpms with a single,
convenient command.

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""27e0f355a5bc96179cb7f5c888f43539095f6bda"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T17:54:43Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-06-03T18:18:12Z""}}"
452,OpenPR,2021-06-03 18:22:58,andreabolognani,fork_merge,,
452,IssueComment,2021-06-03 19:02:16,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3120](https://coveralls.io/builds/40287017)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.509%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40287017/badge)](https://coveralls.io/builds/40287017) |
| :-- | --: |
| Change from base [Build 3106](https://coveralls.io/builds/40203667): |  0.0% |
| Covered Lines: | 5425 |
| Relevant Lines: | 7281 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/854105594"", ""author_association"": ""NONE""}"
452,ReviewComment,2021-06-03 19:03:47,stefanberger,fork_merge,The reason why I was keeping swtpm.spec around was to be able to install dependencies via the spec file without having to go through configure.,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/452#pullrequestreview-675633636""}"
452,MergePR,2021-06-03 20:09:01,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4839579822"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4608cc333a2c991d5e20cbc95c8e30f01a763e01""}"
452,IssueCommentSupplement,2021-06-03 20:17:10,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/854150301"", ""author_association"": ""OWNER""}"
452,DeleteBranch,2021-06-04 06:55:01,andreabolognani,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4841428650"", ""commit_url"": null}"
452,IssueCommentSupplement,2021-06-04 13:02:46,andreabolognani,fork_merge,"> The reason why I was keeping swtpm.spec around was to be able to install dependencies via the spec file without having to go through configure.

Oh yeah, that makes sense... Now that you mention it, I forgot to update the `INSTALL` file to match my changes!

Do you want me to reintroduce the `swtpm.spec` file? Alternative approaches that I can think of:

* document a shell command that grabs all `BuildRequires` from `swtpm.spec.in` and prints them out in a form that can be passed directly to `yum install`;
* create an `INSTALL.RPM-DEPS` file that contains the list of dependencies; we could also have a matching `INSTALL.DEB-DEPS` file and point users to those, making the list of packages as it currently exists in `INSTALL` (as well as the note about `build-essential` etc.) unnecessary.

Let me know which approach you prefer and I'll try to get it done :)","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/854708089"", ""author_association"": ""CONTRIBUTOR""}"
452,IssueCommentSupplement,2021-06-04 14:39:51,stefanberger,fork_merge,"I would avoid another file with the same content as the spec file. I can also re-introduce swtpm.spec now, not a problem. I you need to update `INSTALL`, please send a PR.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/854779583"", ""author_association"": ""OWNER""}"
456,OpenPR,2021-06-11 02:03:18,stefanberger,unfork_merge,,
456,IssueComment,2021-06-11 03:34:16,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3140](https://coveralls.io/builds/40502863)

* **1** of **1**   **(100.0%)**  changed or added relevant line in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.509%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40502863/badge)](https://coveralls.io/builds/40502863) |
| :-- | --: |
| Change from base [Build 3133](https://coveralls.io/builds/40321942): |  0.0% |
| Covered Lines: | 5425 |
| Relevant Lines: | 7281 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/859237614"", ""author_association"": ""NONE""}"
456,Revise,2021-06-11 06:01:23,stefanberger,unfork_merge,"build-sys: Bump up version to 0.7.0 at beginning of dev cycle

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""0697853576db9444e2d2e4a90c4a2e886f952bb4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-11T05:57:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-11T06:01:23Z""}}"
456,Revise,2021-06-11 06:01:23,stefanberger,unfork_merge,"swtpm_setup: Replace '\\s' in regex with [[:space:]] to fix cygwin

Cygwin's regex implementation doesn't seem to understand '\\s'
but needs [[:space:]] instead to properly skip over spaces.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""606ad43b66ad5652d6ae16ee6a631c1105bffcd1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-11T02:01:42Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-11T06:01:23Z""}}"
456,MergePR,2021-06-11 11:53:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4877526161"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/2bf68cc4bed74999d0af6c027044e9912f5f792a""}"
457,SubmitCommit,2021-06-11 17:53:07,kloczek,fork_close,"Call autoupdate

autoreconf from autoconf 2.71 emmits a lot of warnings:
```
+ autoreconf -fiv
autoreconf: export WARNINGS=
autoreconf: Entering directory '.'
autoreconf: configure.ac: not using Gettext
autoreconf: running: aclocal --force -I m4
aclocal: warning: couldn't open directory 'm4': No such file or directory
configure.ac:587: warning: macro 'AM_CFLAGS' not found in library
configure.ac:590: warning: macro 'AM_LDFLAGS' not found in library
autoreconf: configure.ac: tracing
autoreconf: running: libtoolize --copy --force
libtoolize: putting auxiliary files in '.'.
libtoolize: copying file './ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIRS, 'm4'.
libtoolize: copying file 'm4/libtool.m4'
libtoolize: copying file 'm4/ltoptions.m4'
libtoolize: copying file 'm4/ltsugar.m4'
libtoolize: copying file 'm4/ltversion.m4'
libtoolize: copying file 'm4/lt~obsolete.m4'
autoreconf: configure.ac: not using Intltool
autoreconf: configure.ac: not using Gtkdoc
autoreconf: running: aclocal --force -I m4
configure.ac:587: warning: macro 'AM_CFLAGS' not found in library
configure.ac:590: warning: macro 'AM_LDFLAGS' not found in library
autoreconf: running: /usr/bin/autoconf --force
configure.ac:29: warning: The macro `AC_CONFIG_HEADER' is obsolete.
configure.ac:29: You should run autoupdate.
./lib/autoconf/status.m4:719: AC_CONFIG_HEADER is expanded from...
configure.ac:29: the top level
configure.ac:53: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:53: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:53: the top level
configure.ac:76: warning: The macro `AC_HEADER_STDC' is obsolete.
configure.ac:76: You should run autoupdate.
./lib/autoconf/headers.m4:704: AC_HEADER_STDC is expanded from...
configure.ac:76: the top level
configure.ac:81: warning: The macro `AC_TYPE_SIGNAL' is obsolete.
configure.ac:81: You should run autoupdate.
./lib/autoconf/types.m4:776: AC_TYPE_SIGNAL is expanded from...
configure.ac:81: the top level
configure.ac:202: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:202: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:202: the top level
configure.ac:279: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:279: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:279: the top level
configure.ac:434: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:434: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:434: the top level
configure.ac:441: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:441: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:441: the top level
configure.ac:521: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:521: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:521: the top level
autoreconf: running: /usr/bin/autoheader --force
autoreconf: running: automake --add-missing --copy --force-missing
configure.ac:40: installing './compile'
configure.ac:43: installing './config.guess'
configure.ac:43: installing './config.sub'
configure.ac:41: installing './install-sh'
configure.ac:48: installing './missing'
samples/Makefile.am: installing './depcomp'
parallel-tests: installing './test-driver'
autoreconf: Leaving directory '.'
```
Execute autoupdate to apply all those chenges and then cleanup that
in next commits.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""6297c0b0ea322cedaf4cac55f5ee36ecc9715231"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:53:07Z""}, ""committer"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:53:07Z""}}"
457,SubmitCommit,2021-06-11 17:53:40,kloczek,fork_close,"Lower requred autoconf version to 2.69

Originally was 2.12. That version was released in 1996.
Most of the distributions are using now at leaset autocong 2.69.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""773dc625a338c652e400606027cca20bd91c5dc5"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:53:40Z""}, ""committer"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:53:40Z""}}"
457,SubmitCommit,2021-06-11 17:54:12,kloczek,fork_close,"Resolve ""obsolete"" warnings generated by autoreconf

Notning in the swtpm code used that parts so additonal tests can be
skipped.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""b38c2fa3880f37596e31615391d4771d0e407e0e"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:54:12Z""}, ""committer"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:54:12Z""}}"
457,SubmitCommit,2021-06-11 17:54:53,kloczek,fork_close,"Remove AC_SUBST() for AM_CFLAGS and AM_LDFLAGS

Resolve autoreconf warnings:
```
configure.ac:602: warning: macro 'AM_CFLAGS' not found in library
configure.ac:605: warning: macro 'AM_LDFLAGS' not found in library

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""e80580c5fa263c1fd1872c82e8ab7f63b53138c2"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:54:53Z""}, ""committer"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:54:53Z""}}"
457,SubmitCommit,2021-06-11 17:55:17,kloczek,fork_close,"Remove using AM_CFLAGS and AM_LDFLAGS

Those automake variables are used by default.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""048ab6d6499c6840133d0e2d402c2a0bc5855b3e"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:55:17Z""}, ""committer"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:55:17Z""}}"
457,SubmitCommit,2021-06-11 17:55:44,kloczek,fork_close,"Remove using -L$(PWD)/.libs -lswtpm_libtpms on linking

Such paths should not be used.
Use proper linker libswtpm_libtpms.la scripyt generated by libtool.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""a4efb523935cf7eaebb996a729c4d9d3bd12d3cc"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:55:44Z""}, ""committer"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:55:44Z""}}"
457,SubmitCommit,2021-06-11 18:01:52,kloczek,fork_close,Report at the end $CFLAGS and $LDFLAGS,"{""sha"": ""d359c2db079602f75baca05034334057f6e0d3b5"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T18:01:52Z""}, ""committer"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T18:01:52Z""}}"
457,OpenPR,2021-06-11 18:06:27,kloczek,fork_close,,
457,CrossReferenced,2021-06-11 18:07:34,kloczek,fork_close,0.6.0: test suite is failing,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/454"", ""is_pull_request"": false}}"
457,ReviewComment,2021-06-11 18:33:15,stefanberger,fork_close,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/457#pullrequestreview-682119862""}"
457,ReviewComment,2021-06-11 19:05:56,stefanberger,fork_close,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/457#pullrequestreview-682142499""}"
457,ReviewComment,2021-06-11 19:07:06,stefanberger,fork_close,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/457#pullrequestreview-682143170""}"
457,IssueComment,2021-06-11 20:52:16,kloczek,fork_close,"> In the other patch you removed it, now you're adding it back?

No. I've been  checking that patch on top of dist 0.6.0.
Will try to make that PR tomorrow one more time correcting that part :)

> In the other patch you removed it, now you're adding it back?

In first commit I've literally added all changes generated by autoupdate command. Than added manual correction in next patch.
autoupdate does not always 100% correctly add some changes.
It is just helper script which helps updating configire.ac.
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/859905042"", ""author_association"": ""CONTRIBUTOR""}"
457,IssueComment,2021-06-22 11:49:05,stefanberger,fork_close,"I did a similar change to [configure.ac of libtpms](https://github.com/stefanberger/libtpms/compare/be5fabf155e7...dd088932d79b) yesterday since [Alpine](https://travis-ci.com/github/stefanberger/swtpm-distro-compile/jobs/517576023) now has autoconf 2.71 and was complaining. So, ignore some of my comments. I didn't know about autoupdate and what it does. If you could prefix your patches with `build-sys:` in the title, that would be helpful. Also you could squash some of the changes to configure.ac. I will probably backport them then.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/865915261"", ""author_association"": ""OWNER""}"
457,IssueComment,2021-06-22 13:54:48,kloczek,fork_close,"I'm a bit busy right now.
If someone wants to use that draft and submit proper PR feel free.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866005279"", ""author_association"": ""CONTRIBUTOR""}"
457,IssueComment,2021-06-22 14:13:42,stefanberger,fork_close,So I may then cherry pick from yours?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866020926"", ""author_association"": ""OWNER""}"
457,IssueComment,2021-06-22 16:24:18,kloczek,fork_close,Yes please.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866134805"", ""author_association"": ""CONTRIBUTOR""}"
457,IssueComment,2021-06-22 16:25:01,kloczek,fork_close,I may be about less busy but not earlier than end of next week.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866135301"", ""author_association"": ""CONTRIBUTOR""}"
457,IssueComment,2021-06-22 21:04:06,stefanberger,fork_close,I just merged our patches via PR #469 . Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866332228"", ""author_association"": ""OWNER""}"
457,IssueComment,2021-06-23 13:53:40,stefanberger,fork_close,"Backports of the autoupdate change are going into all recent branches. PR #473 #472 #471. More goes into stable-0.6: #474.

I think you can close this PR now.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866856118"", ""author_association"": ""OWNER""}"
457,IssueComment,2021-07-27 18:07:54,stefanberger,fork_close,I think we can close this PR now. Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887721898"", ""author_association"": ""OWNER""}"
457,ClosePR,2021-07-28 18:47:29,stefanberger,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5081964803"", ""commit_url"": null}"
457,IssueCommentSupplement,2021-07-28 18:47:37,stefanberger,fork_close,Thanks!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/888538564"", ""author_association"": ""OWNER""}"
458,SubmitCommit,2021-06-14 16:12:33,stefanberger,unfork_merge,"build-sys: build swtpm-0.5.3

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""25621c7e336b0616e695c8cd955c68b58423e2fd"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-14T16:12:14Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-14T16:12:33Z""}}"
458,SubmitCommit,2021-06-14 16:12:33,diabonas,unfork_merge,"swtpm_cert: rename deprecated libtasn1 types

These types have been renamed in libtasn1 version 3.0 (released 2012-10-28).
The most recent libtasn1 version 4.17.0 (released 2021-05-13) now prints
deprecation warnings that are made fatal by -Werror:

ek-cert.c:76:13: error: 'ASN1_ARRAY_TYPE' macro is deprecated, use 'asn1_static_node' instead. [-Werror]
   76 | extern const ASN1_ARRAY_TYPE tpm_asn1_tab[];
      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[...]

The new types were introduced almost ten years ago, so they should be pretty
universally available by now.

Signed-off-by: Jonas Witschel <diabonas@archlinux.org>","{""sha"": ""2fc400ba3c2236b03e6a87b310e131cfb2b8fe70"", ""author"": {""name"": ""Jonas Witschel"", ""email"": ""diabonas@archlinux.org"", ""date"": ""2021-05-19T08:30:41Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-14T16:12:33Z""}}"
458,OpenPR,2021-06-14 16:17:28,stefanberger,unfork_merge,,
458,IssueComment,2021-06-14 18:43:20,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3147](https://coveralls.io/builds/40569746)

* **10** of **10**   **(100.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.828%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40569746/badge)](https://coveralls.io/builds/40569746) |
| :-- | --: |
| Change from base [Build 3024](https://coveralls.io/builds/39639179): |  0.0% |
| Covered Lines: | 3732 |
| Relevant Lines: | 5055 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/860908834"", ""author_association"": ""NONE""}"
458,MergePR,2021-06-14 19:15:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4887516800"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/23bc1e7770407974ef049904523706fa9883c728""}"
459,SubmitCommit,2021-06-14 16:14:45,stefanberger,unfork_merge,"build-sys: buid swtpm-0.4.3

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1ad560830d2c76352b9c55140848f523dd2ed4c1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-14T16:14:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-14T16:14:45Z""}}"
459,SubmitCommit,2021-06-14 16:15:07,diabonas,unfork_merge,"swtpm_cert: rename deprecated libtasn1 types

These types have been renamed in libtasn1 version 3.0 (released 2012-10-28).
The most recent libtasn1 version 4.17.0 (released 2021-05-13) now prints
deprecation warnings that are made fatal by -Werror:

ek-cert.c:76:13: error: 'ASN1_ARRAY_TYPE' macro is deprecated, use 'asn1_static_node' instead. [-Werror]
   76 | extern const ASN1_ARRAY_TYPE tpm_asn1_tab[];
      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[...]

The new types were introduced almost ten years ago, so they should be pretty
universally available by now.

Signed-off-by: Jonas Witschel <diabonas@archlinux.org>","{""sha"": ""74ff65fd5d1e2f0d757715020011da2c08f12c6d"", ""author"": {""name"": ""Jonas Witschel"", ""email"": ""diabonas@archlinux.org"", ""date"": ""2021-05-19T08:30:41Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-14T16:15:07Z""}}"
459,OpenPR,2021-06-14 16:17:56,stefanberger,unfork_merge,,
459,IssueComment,2021-06-14 19:10:00,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3148](https://coveralls.io/builds/40570809)

* **10** of **10**   **(100.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.432%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40570809/badge)](https://coveralls.io/builds/40570809) |
| :-- | --: |
| Change from base [Build 3023](https://coveralls.io/builds/39637820): |  0.0% |
| Covered Lines: | 3781 |
| Relevant Lines: | 5149 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/860925737"", ""author_association"": ""NONE""}"
459,MergePR,2021-06-14 19:15:54,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4887518111"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f9df81f459767d23f22305f068c41a654a424033""}"
460,SubmitCommit,2021-06-15 09:51:01,franciozzy,fork_merge,"swtpm: Fix SWTPM names in comments and messages

Some of the code comes from libtpms, where various methods are named
""TPM_Something"". The swtpm version of these methods are named
""SWTPM_Something"". However, certain debug/log messages and comments were
updated accordingly to reflect that.

This is a cosmetic change that fixes that.

Signed-off-by: Felipe Franciosi <felipe@nutanix.com>","{""sha"": ""cc2037d1e91b328622856318a9f798f60347acba"", ""author"": {""name"": ""Felipe Franciosi"", ""email"": ""felipe@nutanix.com"", ""date"": ""2021-06-15T09:51:01Z""}, ""committer"": {""name"": ""Felipe Franciosi"", ""email"": ""felipe@nutanix.com"", ""date"": ""2021-06-15T09:51:01Z""}}"
460,OpenPR,2021-06-15 09:58:24,franciozzy,fork_merge,,
460,IssueComment,2021-06-15 10:36:53,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3151](https://coveralls.io/builds/40591906)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.509%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40591906/badge)](https://coveralls.io/builds/40591906) |
| :-- | --: |
| Change from base [Build 3141](https://coveralls.io/builds/40511237): |  0.0% |
| Covered Lines: | 5425 |
| Relevant Lines: | 7281 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/861389482"", ""author_association"": ""NONE""}"
460,IssueComment,2021-06-15 12:35:50,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/861460865"", ""author_association"": ""OWNER""}"
460,MergePR,2021-06-15 12:35:54,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4891368695"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4a96c7f54ae7abcd58f7799b3b9f180e9d59ac3d""}"
460,DeleteBranch,2021-06-15 14:43:14,franciozzy,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4892165779"", ""commit_url"": null}"
462,SubmitCommit,2021-06-16 16:09:00,stefanberger,unfork_merge,"tests: Use common vars for executables in swtpm_setup_create_cert tests

Use the variables from tests/common for executables used in the
swtpm_setup_create_cert tests.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""79f658217550439b823d1a6dc23ada5504bd4b9d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-16T16:08:55Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-16T16:09:00Z""}}"
462,OpenPR,2021-06-16 16:23:24,stefanberger,unfork_merge,,
462,IssueComment,2021-06-16 17:50:56,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3154](https://coveralls.io/builds/40642085)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.09%**) to **74.595%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40642085/badge)](https://coveralls.io/builds/40642085) |
| :-- | --: |
| Change from base [Build 3152](https://coveralls.io/builds/40596329): |  0.09% |
| Covered Lines: | 5432 |
| Relevant Lines: | 7282 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/862584357"", ""author_association"": ""NONE""}"
462,MergePR,2021-06-16 18:00:18,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4899556174"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3252334cba94f8b221842b63bbf8587e7dd47ca4""}"
464,SubmitCommit,2021-06-16 19:08:40,stefanberger,unfork_merge,"swtpm_setup: Initialize Gerror and free it

Gerror was not initialized to NULL in one place. In the other it wasn't
freed.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""ed22431838c2839d996c16148ad0d9932b90cb31"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-16T19:08:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-16T19:08:40Z""}}"
464,OpenPR,2021-06-16 19:54:17,stefanberger,unfork_merge,,
464,IssueComment,2021-06-16 21:20:37,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3159](https://coveralls.io/builds/40648519)

* **1** of **2**   **(50.0%)**  changed or added relevant lines in **2** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage decreased (**-0.007%**) to **74.588%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/40648519/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L837) | 0 | 1 | 0.0%
<!-- | **Total:** | **1** | **2** | **50.0%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/40648519/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L838) | 1 | 76.45% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/40648519/badge)](https://coveralls.io/builds/40648519) |
| :-- | --: |
| Change from base [Build 3155](https://coveralls.io/builds/40644014): |  -0.007% |
| Covered Lines: | 5433 |
| Relevant Lines: | 7284 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/862734945"", ""author_association"": ""NONE""}"
464,MergePR,2021-06-16 22:01:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4900634660"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a59eead4bc917e4ba6b355b2e3916da1708a720b""}"
465,SubmitCommit,2021-06-16 20:03:15,stefanberger,unfork_merge,"build-sys: build swtpm-0.6.1

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""146a6b2e9b1f22c3b6a82b03f67035439ad2b238"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-16T20:02:40Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-16T20:03:15Z""}}"
465,SubmitCommit,2021-06-16 20:03:15,stefanberger,unfork_merge,"swtpm_setup: Replace '\\s' in regex with [[:space:]] to fix cygwin

Cygwin's regex implementation doesn't seem to understand '\\s'
but needs [[:space:]] instead to properly skip over spaces.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""e371636f96dc092b95287ed554b3ba21b8651cd9"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-11T02:01:42Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-16T20:03:15Z""}}"
465,SubmitCommit,2021-06-16 20:03:15,stefanberger,unfork_merge,"swtpm_setup: Initialize Gerror and free it

Gerror was not initialized to NULL in one place. In the other it wasn't
freed.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""8dea12d04bb999e1fb22054768106f4e4ab0c27d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-16T19:08:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-16T20:03:15Z""}}"
465,OpenPR,2021-06-16 20:05:36,stefanberger,unfork_merge,,
465,IssueComment,2021-06-16 22:36:57,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3161](https://coveralls.io/builds/40650284)

* **2** of **3**   **(66.67%)**  changed or added relevant lines in **3** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage decreased (**-0.007%**) to **74.502%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/40650284/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L837) | 0 | 1 | 0.0%
<!-- | **Total:** | **2** | **3** | **66.67%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/40650284/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L838) | 1 | 76.16% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/40650284/badge)](https://coveralls.io/builds/40650284) |
| :-- | --: |
| Change from base [Build 3157](https://coveralls.io/builds/40647262): |  -0.007% |
| Covered Lines: | 5426 |
| Relevant Lines: | 7283 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/862775793"", ""author_association"": ""NONE""}"
465,MergePR,2021-06-16 22:58:54,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4900806066"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f8ffce06fe49d6b0a6c94d447ee2c2bec5402a75""}"
466,OpenPR,2021-06-17 18:17:07,stefanberger,unfork_merge,,
466,CrossReferenced,2021-06-17 18:22:36,stefanberger,unfork_merge,Feature request: output EK during swtpm_setup,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/455"", ""is_pull_request"": false}}"
466,IssueComment,2021-06-17 18:54:41,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3324](https://coveralls.io/builds/41794567)

* **45** of **63**   **(71.43%)**  changed or added relevant lines in **3** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.004%**) to **75.38%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/utils/swtpm_utils.c](https://coveralls.io/builds/41794567/source?filename=src%2Futils%2Fswtpm_utils.c#L426) | 4 | 10 | 40.0%
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/41794567/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L336) | 35 | 47 | 74.47%
<!-- | **Total:** | **45** | **63** | **71.43%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/41794567/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L1298) | 1 | 77.7% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/41794567/badge)](https://coveralls.io/builds/41794567) |
| :-- | --: |
| Change from base [Build 3317](https://coveralls.io/builds/41728376): |  0.004% |
| Covered Lines: | 5548 |
| Relevant Lines: | 7360 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/863486059"", ""author_association"": ""NONE""}"
466,Revise,2021-07-28 18:09:41,stefanberger,unfork_merge,"swtpm_setup: Move functions checking for directory access to library

Move code from setpm_setup into new function check_directory_access
that checks for existence of directory and access to it.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d9e77fe068b9004fefd0c58024107cf2e5956d78"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-17T15:13:58Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-28T18:09:41Z""}}"
466,Revise,2021-07-28 18:16:40,stefanberger,unfork_merge,"swtpm_setup: Get key description from function generating the EK key

Pass an optional key_description parameter through the APIs to be able to
get the a human readable key description, such as 'rsa2048' or 'secp384r1'
of the key that was created.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3c182dd6be1863d217a4e6d2628da051bf0344a4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-11T00:05:05Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-28T18:16:40Z""}}"
466,Revise,2021-07-30 19:25:51,stefanberger,unfork_merge,"swtpm_setup: Support --write-ek-cert-files as an option

Write the EK certificate files into the directory specified as parameter
to the --write-ek-cert-files option.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""f9d0e2327932ba2b9428391bcc1ecec8b50172b5"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-11T00:53:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-30T19:25:51Z""}}"
466,Revise,2021-07-30 19:25:55,stefanberger,unfork_merge,"tests: Use the --write-ek-cert-files option and check for files

Use the --write-ek-cert-files option in existing test cases
and check for written files and correctness of the files.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""899c657fa9f81c5608d8de05d28bab12db129415"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-06-14T20:02:29Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-30T19:25:55Z""}}"
466,MergePR,2021-07-30 20:45:23,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5093331375"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a735e4c0b481296f1fd632a55af3ef99ccfb525c""}"
466,DeleteBranch,2021-07-30 20:45:26,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5093331479"", ""commit_url"": null}"
467,OpenPR,2021-06-21 21:20:07,stefanberger,unfork_merge,,
467,Revise,2021-06-21 21:22:44,stefanberger,unfork_merge,"tests: Kill tpm2-abrmd with SIGKILL rather SIGTERM

Kill an unterminated tpm2-abrmd with SIGKILL rather than SIGTERM

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b129520c540263ac95f884de23b1021cf3dcbd0d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-21T21:15:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-21T21:22:44Z""}}"
467,Revise,2021-06-21 21:32:00,stefanberger,unfork_merge,"sample: swtpm-localca: Add missing else branch for pkcs11 and PIN

Add a missing else branch that was forgotten about when the code was trans-
lated from python. This now also gets the test case
test_tpm2_samples_create_tpmca to work again when it is run from the command
line. This test case doesn't work as part of the test suite due to
concurreny issues with other test cases using tpm2-abrmd at the same.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b17d5f885f82a7ad6b37bc606a5afcf0c58d6213"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-21T21:01:18Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-21T21:32:00Z""}}"
467,MergePR,2021-06-21 23:58:49,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4919644004"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/2c270f0407911cdc251acaf726dfbbc94ffc9627""}"
468,SubmitCommit,2021-06-21 21:34:37,stefanberger,unfork_merge,"tests: Kill tpm2-abrmd with SIGKILL rather SIGTERM

Kill an unterminated tpm2-abrmd with SIGKILL rather than SIGTERM

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""e6d3b9730d11c8f55d8309794e81b136026bbcf0"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-21T21:15:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-21T21:34:37Z""}}"
468,SubmitCommit,2021-06-21 21:34:37,stefanberger,unfork_merge,"sample: swtpm-localca: Add missing else branch for pkcs11 and PIN

Add a missing else branch that was forgotten about when the code was trans-
lated from python. This now also gets the test case
test_tpm2_samples_create_tpmca to work again when it is run from the command
line. This test case doesn't work as part of the test suite due to
concurreny issues with other test cases using tpm2-abrmd at the same.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7bed76e9e4be46d225067fc1cb98bf2a136c59e8"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-21T21:01:18Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-21T21:34:37Z""}}"
468,OpenPR,2021-06-22 14:06:59,stefanberger,unfork_merge,,
468,IssueComment,2021-06-22 16:20:25,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3176](https://coveralls.io/builds/40785140)

* **4** of **5**   **(80.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.01%**) to **74.516%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [samples/swtpm_localca.c](https://coveralls.io/builds/40785140/source?filename=samples%2Fswtpm_localca.c#L810) | 4 | 5 | 80.0%
<!-- | **Total:** | **4** | **5** | **80.0%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/40785140/badge)](https://coveralls.io/builds/40785140) |
| :-- | --: |
| Change from base [Build 3163](https://coveralls.io/builds/40651775): |  0.01% |
| Covered Lines: | 5430 |
| Relevant Lines: | 7287 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866131931"", ""author_association"": ""NONE""}"
468,MergePR,2021-06-22 16:22:50,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4923900107"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/edf5c1921ed1ac5d64831264130b72f297b56898""}"
469,SubmitCommit,2021-06-22 17:03:56,kloczek,unfork_merge,"build-sys: Call autoupdate and fix some resulting issues

autoreconf from autoconf 2.71 emmits a lot of warnings:
```
+ autoreconf -fiv
autoreconf: export WARNINGS=
autoreconf: Entering directory '.'
autoreconf: configure.ac: not using Gettext
autoreconf: running: aclocal --force -I m4
aclocal: warning: couldn't open directory 'm4': No such file or directory
configure.ac:587: warning: macro 'AM_CFLAGS' not found in library
configure.ac:590: warning: macro 'AM_LDFLAGS' not found in library
autoreconf: configure.ac: tracing
autoreconf: running: libtoolize --copy --force
libtoolize: putting auxiliary files in '.'.
libtoolize: copying file './ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIRS, 'm4'.
libtoolize: copying file 'm4/libtool.m4'
libtoolize: copying file 'm4/ltoptions.m4'
libtoolize: copying file 'm4/ltsugar.m4'
libtoolize: copying file 'm4/ltversion.m4'
libtoolize: copying file 'm4/lt~obsolete.m4'
autoreconf: configure.ac: not using Intltool
autoreconf: configure.ac: not using Gtkdoc
autoreconf: running: aclocal --force -I m4
configure.ac:587: warning: macro 'AM_CFLAGS' not found in library
configure.ac:590: warning: macro 'AM_LDFLAGS' not found in library
autoreconf: running: /usr/bin/autoconf --force
configure.ac:29: warning: The macro `AC_CONFIG_HEADER' is obsolete.
configure.ac:29: You should run autoupdate.
./lib/autoconf/status.m4:719: AC_CONFIG_HEADER is expanded from...
configure.ac:29: the top level
configure.ac:53: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:53: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:53: the top level
configure.ac:76: warning: The macro `AC_HEADER_STDC' is obsolete.
configure.ac:76: You should run autoupdate.
./lib/autoconf/headers.m4:704: AC_HEADER_STDC is expanded from...
configure.ac:76: the top level
configure.ac:81: warning: The macro `AC_TYPE_SIGNAL' is obsolete.
configure.ac:81: You should run autoupdate.
./lib/autoconf/types.m4:776: AC_TYPE_SIGNAL is expanded from...
configure.ac:81: the top level
configure.ac:202: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:202: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:202: the top level
configure.ac:279: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:279: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:279: the top level
configure.ac:434: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:434: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:434: the top level
configure.ac:441: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:441: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:441: the top level
configure.ac:521: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:521: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:521: the top level
autoreconf: running: /usr/bin/autoheader --force
autoreconf: running: automake --add-missing --copy --force-missing
configure.ac:40: installing './compile'
configure.ac:43: installing './config.guess'
configure.ac:43: installing './config.sub'
configure.ac:41: installing './install-sh'
configure.ac:48: installing './missing'
samples/Makefile.am: installing './depcomp'
parallel-tests: installing './test-driver'
autoreconf: Leaving directory '.'
```
Execute autoupdate to apply all those chenges and then cleanup that
in next commits.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1df10743b3892bf5f63f5317159a6cfe3c3b3530"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:53:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-22T17:03:56Z""}}"
469,SubmitCommit,2021-06-22 17:03:56,kloczek,unfork_merge,"build-sys: Remove AC_SUBST() for AM_CFLAGS and AM_LDFLAGS

Resolve autoreconf warnings:

configure.ac:602: warning: macro 'AM_CFLAGS' not found in library
configure.ac:605: warning: macro 'AM_LDFLAGS' not found in library

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""754b2920c985fdc4a69b3c75f24df29e90fbf625"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:54:53Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-22T17:03:56Z""}}"
469,SubmitCommit,2021-06-22 17:03:56,kloczek,unfork_merge,"build-sys: Remove using AM_CFLAGS and AM_LDFLAGS

Those automake variables are used by default.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""c79e35e9d78b1b37870da016a4a1c5201df95cb2"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:55:17Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-22T17:03:56Z""}}"
469,SubmitCommit,2021-06-22 17:03:56,kloczek,unfork_merge,"build-sys: Report $CFLAGS and $LDFLAGS at the end

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""9ff2373d14e145858811de7a804ae9610de321e9"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T18:01:52Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-22T17:03:56Z""}}"
469,SubmitCommit,2021-06-22 17:03:56,kloczek,unfork_merge,"build-sys: Remove using -L$(PWD)/.libs -lswtpm_libtpms on linking

Such paths should not be used.
Use proper linker libswtpm_libtpms.la scripyt generated by libtool.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""56cb03b1596b5d2dfaf668e17432efefa161e464"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:55:44Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-22T17:03:56Z""}}"
469,OpenPR,2021-06-22 17:29:46,stefanberger,unfork_merge,,
469,IssueComment,2021-06-22 18:30:47,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3179](https://coveralls.io/builds/40789224)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.602%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40789224/badge)](https://coveralls.io/builds/40789224) |
| :-- | --: |
| Change from base [Build 3174](https://coveralls.io/builds/40762806): |  0.0% |
| Covered Lines: | 5437 |
| Relevant Lines: | 7288 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866232996"", ""author_association"": ""NONE""}"
469,RenameTitle,2021-06-22 19:29:01,stefanberger,unfork_merge,,"{""rename"": {""from"": ""Fix sonme issue related to the build system"", ""to"": ""Fix some issue related to the build system""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4924778751""}"
469,RenameTitle,2021-06-22 21:03:24,stefanberger,unfork_merge,,"{""rename"": {""from"": ""Fix some issue related to the build system"", ""to"": ""Fix some issues related to the build system""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4925172785""}"
469,MergePR,2021-06-22 21:03:31,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4925173212"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/75c5da2cf1376218df700177af5ea988061115f5""}"
469,CrossReferenced,2021-06-22 21:04:06,stefanberger,unfork_merge,automake and autoconf cleanups,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/457"", ""is_pull_request"": true}}"
469,DeleteBranch,2021-06-22 21:20:22,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4925238508"", ""commit_url"": null}"
470,OpenPR,2021-06-23 06:30:27,Etsukata,fork_merge,,
470,IssueComment,2021-06-23 06:31:35,Etsukata,fork_merge,"Ref: LWN ""Ensuring data reaches disk"" https://lwn.net/Articles/457667/","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866567845"", ""author_association"": ""CONTRIBUTOR""}"
470,IssueComment,2021-06-23 07:08:27,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3196](https://coveralls.io/builds/40839899)

* **13** of **24**   **(54.17%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.07%**) to **74.535%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_nvfile.c](https://coveralls.io/builds/40839899/source?filename=src%2Fswtpm%2Fswtpm_nvfile.c#L540) | 13 | 24 | 54.17%
<!-- | **Total:** | **13** | **24** | **54.17%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/40839899/badge)](https://coveralls.io/builds/40839899) |
| :-- | --: |
| Change from base [Build 3180](https://coveralls.io/builds/40794365): |  -0.07% |
| Covered Lines: | 5450 |
| Relevant Lines: | 7312 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866587921"", ""author_association"": ""NONE""}"
470,ReviewComment,2021-06-23 11:41:30,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/470#pullrequestreview-690538242""}"
470,ReviewComment,2021-06-24 01:32:19,pksnx,fork_merge,,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/470#pullrequestreview-691264837""}"
470,Revise,2021-06-24 06:31:23,Etsukata,fork_merge,"swtpm: Issue fsync to ensure state data reaches disk

Add fsync(2) before rename(2) for temp file to ensure data reaches disk
and for directory which containing state file to ensure directory entry
also reaches disk.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""fbe0dee9b7bcfcffcf5a05f07003736c46613a1b"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-06-23T03:50:32Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""devel@etsukata.com"", ""date"": ""2021-06-24T06:31:23Z""}}"
470,MergePR,2021-06-24 20:19:59,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4936671202"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a5f4e6574953b048f631deedbbd3df5e68da62d7""}"
470,IssueCommentSupplement,2021-06-24 20:20:07,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/867925759"", ""author_association"": ""OWNER""}"
470,DeleteBranch,2021-07-15 01:51:19,Etsukata,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5022735332"", ""commit_url"": null}"
470,IssueCommentSupplement,2021-07-20 06:55:37,Etsukata,fork_merge,This PR caused AppArmore/libvirt issue https://github.com/stefanberger/swtpm/issues/484,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/883140236"", ""author_association"": ""CONTRIBUTOR""}"
471,SubmitCommit,2021-06-23 13:44:48,kloczek,unfork_merge,"build-sys: Call autoupdate and fix some resulting issues

autoreconf from autoconf 2.71 emmits a lot of warnings:

+ autoreconf -fiv
autoreconf: export WARNINGS=
autoreconf: Entering directory '.'
autoreconf: configure.ac: not using Gettext
autoreconf: running: aclocal --force -I m4
autoreconf: configure.ac: tracing
autoreconf: running: libtoolize --copy --force
libtoolize: putting auxiliary files in '.'.
libtoolize: copying file './ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIRS, 'm4'.
libtoolize: copying file 'm4/libtool.m4'
libtoolize: copying file 'm4/ltoptions.m4'
libtoolize: copying file 'm4/ltsugar.m4'
libtoolize: copying file 'm4/ltversion.m4'
libtoolize: copying file 'm4/lt~obsolete.m4'
autoreconf: configure.ac: not using Intltool
autoreconf: configure.ac: not using Gtkdoc
autoreconf: running: aclocal --force -I m4
autoreconf: running: /usr/bin/autoconf --force
configure.ac:29: warning: The macro `AC_CONFIG_HEADER' is obsolete.
configure.ac:29: You should run autoupdate.
./lib/autoconf/status.m4:719: AC_CONFIG_HEADER is expanded from...
configure.ac:29: the top level
configure.ac:53: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:53: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:53: the top level
configure.ac:76: warning: The macro `AC_HEADER_STDC' is obsolete.
configure.ac:76: You should run autoupdate.
./lib/autoconf/headers.m4:704: AC_HEADER_STDC is expanded from...
configure.ac:76: the top level
configure.ac:81: warning: The macro `AC_TYPE_SIGNAL' is obsolete.
configure.ac:81: You should run autoupdate.
./lib/autoconf/types.m4:776: AC_TYPE_SIGNAL is expanded from...
configure.ac:81: the top level
configure.ac:202: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:202: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:202: the top level
configure.ac:267: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:267: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:267: the top level
configure.ac:430: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:430: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:430: the top level
configure.ac:437: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:437: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:437: the top level
configure.ac:517: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:517: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:517: the top level
autoreconf: running: /usr/bin/autoheader --force
autoreconf: running: automake --add-missing --copy --force-missing
configure.ac:40: installing './compile'
configure.ac:48: installing './missing'
Makefile.am:34: warning: .PHONY was already defined in condition WITH_SELINUX, which is included in condition TRUE ...
Makefile.am:28: ... '.PHONY' previously defined here
src/swtpm/Makefile.am: installing './depcomp'
autoreconf: './config.sub' is updated
autoreconf: './config.guess' is updated
autoreconf: Leaving directory '.'

Execute autoupdate to apply all those changes.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5f6cbceb12ea1f93532b232054d910da53c1d6d4"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-23T13:25:02Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-23T13:44:48Z""}}"
471,OpenPR,2021-06-23 13:47:34,stefanberger,unfork_merge,,
471,CrossReferenced,2021-06-23 13:53:40,stefanberger,unfork_merge,automake and autoconf cleanups,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/457"", ""is_pull_request"": true}}"
471,IssueComment,2021-06-23 16:27:07,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3188](https://coveralls.io/builds/40820530)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* **3** unchanged lines in **1** file lost coverage.
* Overall coverage decreased (**-0.06%**) to **72.693%**

---


|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/common.c](https://coveralls.io/builds/40820530/source?filename=src%2Fswtpm%2Fcommon.c#L1099) | 3 | 63.62% |
<!-- | **Total:** | **3** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/40820530/badge)](https://coveralls.io/builds/40820530) |
| :-- | --: |
| Change from base [Build 3027](https://coveralls.io/builds/39674319): |  -0.06% |
| Covered Lines: | 3522 |
| Relevant Lines: | 4845 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/866985044"", ""author_association"": ""NONE""}"
471,MergePR,2021-06-24 02:40:08,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4932025561"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/6d78f7fff2b79c2d3524194b1cfb3771939e1e58""}"
471,DeleteBranch,2022-12-09 01:42:39,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7994464364"", ""commit_url"": null}"
472,SubmitCommit,2021-06-23 13:42:55,kloczek,unfork_merge,"build-sys: Call autoupdate and fix some resulting issues

autoreconf from autoconf 2.71 emmits a lot of warnings:

+ autoreconf -fiv
autoreconf: export WARNINGS=
autoreconf: Entering directory '.'
autoreconf: configure.ac: not using Gettext
autoreconf: running: aclocal --force -I m4
autoreconf: configure.ac: tracing
autoreconf: running: libtoolize --copy --force
libtoolize: putting auxiliary files in '.'.
libtoolize: copying file './ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIRS, 'm4'.
libtoolize: copying file 'm4/libtool.m4'
libtoolize: copying file 'm4/ltoptions.m4'
libtoolize: copying file 'm4/ltsugar.m4'
libtoolize: copying file 'm4/ltversion.m4'
libtoolize: copying file 'm4/lt~obsolete.m4'
autoreconf: configure.ac: not using Intltool
autoreconf: configure.ac: not using Gtkdoc
autoreconf: running: aclocal --force -I m4
autoreconf: running: /usr/bin/autoconf --force
configure.ac:29: warning: The macro `AC_CONFIG_HEADER' is obsolete.
configure.ac:29: You should run autoupdate.
./lib/autoconf/status.m4:719: AC_CONFIG_HEADER is expanded from...
configure.ac:29: the top level
configure.ac:53: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:53: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:53: the top level
configure.ac:76: warning: The macro `AC_HEADER_STDC' is obsolete.
configure.ac:76: You should run autoupdate.
./lib/autoconf/headers.m4:704: AC_HEADER_STDC is expanded from...
configure.ac:76: the top level
configure.ac:81: warning: The macro `AC_TYPE_SIGNAL' is obsolete.
configure.ac:81: You should run autoupdate.
./lib/autoconf/types.m4:776: AC_TYPE_SIGNAL is expanded from...
configure.ac:81: the top level
configure.ac:202: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:202: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:202: the top level
configure.ac:267: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:267: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:267: the top level
configure.ac:430: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:430: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:430: the top level
configure.ac:437: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:437: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:437: the top level
configure.ac:517: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:517: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:517: the top level
autoreconf: running: /usr/bin/autoheader --force
autoreconf: running: automake --add-missing --copy --force-missing
configure.ac:40: installing './compile'
configure.ac:48: installing './missing'
Makefile.am:34: warning: .PHONY was already defined in condition WITH_SELINUX, which is included in condition TRUE ...
Makefile.am:28: ... '.PHONY' previously defined here
src/swtpm/Makefile.am: installing './depcomp'
autoreconf: './config.sub' is updated
autoreconf: './config.guess' is updated
autoreconf: Leaving directory '.'

Execute autoupdate to apply all those changes.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""68fb11988b1a88817bc4a50cbcc64f7e161b4d4d"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-23T13:25:02Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-23T13:42:55Z""}}"
472,OpenPR,2021-06-23 13:47:41,stefanberger,unfork_merge,,
472,CrossReferenced,2021-06-23 13:53:40,stefanberger,unfork_merge,automake and autoconf cleanups,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/457"", ""is_pull_request"": true}}"
472,IssueComment,2021-06-23 17:05:30,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3189](https://coveralls.io/builds/40822606)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.432%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40822606/badge)](https://coveralls.io/builds/40822606) |
| :-- | --: |
| Change from base [Build 3150](https://coveralls.io/builds/40574755): |  0.0% |
| Covered Lines: | 3781 |
| Relevant Lines: | 5149 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/867010695"", ""author_association"": ""NONE""}"
472,MergePR,2021-06-24 02:41:07,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4932027648"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/1b473e169755a6c7975efa9cc52d4b1037709f54""}"
473,SubmitCommit,2021-06-23 13:23:12,stefanberger,unfork_merge,"build-sys: Fix Makefile issue with multiple .PHONY

Recent make's complain about this here:

Makefile.am:34: warning: .PHONY was already defined in condition WITH_SELINUX, which is included in condition TRUE ...
Makefile.am:28: ... '.PHONY' previously defined here

This patch fixes this issue.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""0b4de63b123730d40dc0066bafb034b62ff3c5ba"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-23T13:23:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-23T13:23:12Z""}}"
473,SubmitCommit,2021-06-23 13:41:30,kloczek,unfork_merge,"build-sys: Call autoupdate and fix some resulting issues

autoreconf from autoconf 2.71 emmits a lot of warnings:

+ autoreconf -fiv
autoreconf: export WARNINGS=
autoreconf: Entering directory '.'
autoreconf: configure.ac: not using Gettext
autoreconf: running: aclocal --force -I m4
autoreconf: configure.ac: tracing
autoreconf: running: libtoolize --copy --force
libtoolize: putting auxiliary files in '.'.
libtoolize: copying file './ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIRS, 'm4'.
libtoolize: copying file 'm4/libtool.m4'
libtoolize: copying file 'm4/ltoptions.m4'
libtoolize: copying file 'm4/ltsugar.m4'
libtoolize: copying file 'm4/ltversion.m4'
libtoolize: copying file 'm4/lt~obsolete.m4'
autoreconf: configure.ac: not using Intltool
autoreconf: configure.ac: not using Gtkdoc
autoreconf: running: aclocal --force -I m4
autoreconf: running: /usr/bin/autoconf --force
configure.ac:29: warning: The macro `AC_CONFIG_HEADER' is obsolete.
configure.ac:29: You should run autoupdate.
./lib/autoconf/status.m4:719: AC_CONFIG_HEADER is expanded from...
configure.ac:29: the top level
configure.ac:53: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:53: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:53: the top level
configure.ac:76: warning: The macro `AC_HEADER_STDC' is obsolete.
configure.ac:76: You should run autoupdate.
./lib/autoconf/headers.m4:704: AC_HEADER_STDC is expanded from...
configure.ac:76: the top level
configure.ac:81: warning: The macro `AC_TYPE_SIGNAL' is obsolete.
configure.ac:81: You should run autoupdate.
./lib/autoconf/types.m4:776: AC_TYPE_SIGNAL is expanded from...
configure.ac:81: the top level
configure.ac:202: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:202: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:202: the top level
configure.ac:267: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:267: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:267: the top level
configure.ac:430: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:430: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:430: the top level
configure.ac:437: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:437: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:437: the top level
configure.ac:517: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:517: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:517: the top level
autoreconf: running: /usr/bin/autoheader --force
autoreconf: running: automake --add-missing --copy --force-missing
configure.ac:40: installing './compile'
configure.ac:48: installing './missing'
Makefile.am:34: warning: .PHONY was already defined in condition WITH_SELINUX, which is included in condition TRUE ...
Makefile.am:28: ... '.PHONY' previously defined here
src/swtpm/Makefile.am: installing './depcomp'
autoreconf: './config.sub' is updated
autoreconf: './config.guess' is updated
autoreconf: Leaving directory '.'

Execute autoupdate to apply all those changes.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""0da7922da6eba58f2dcbec0e4572355e37902a5c"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-23T13:25:02Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-23T13:41:30Z""}}"
473,OpenPR,2021-06-23 13:49:28,stefanberger,unfork_merge,,
473,CrossReferenced,2021-06-23 13:53:40,stefanberger,unfork_merge,automake and autoconf cleanups,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/457"", ""is_pull_request"": true}}"
473,IssueComment,2021-06-23 17:44:19,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3190](https://coveralls.io/builds/40823919)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **73.828%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40823919/badge)](https://coveralls.io/builds/40823919) |
| :-- | --: |
| Change from base [Build 3149](https://coveralls.io/builds/40573810): |  0.0% |
| Covered Lines: | 3732 |
| Relevant Lines: | 5055 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/867035745"", ""author_association"": ""NONE""}"
473,MergePR,2021-06-24 02:45:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4932037069"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/08816ab3afb34c63aa377eb00e509c3ed0724c43""}"
474,SubmitCommit,2021-06-22 21:16:07,kloczek,unfork_merge,"build-sys: Call autoupdate and fix some resulting issues

autoreconf from autoconf 2.71 emmits a lot of warnings:
```
+ autoreconf -fiv
autoreconf: export WARNINGS=
autoreconf: Entering directory '.'
autoreconf: configure.ac: not using Gettext
autoreconf: running: aclocal --force -I m4
aclocal: warning: couldn't open directory 'm4': No such file or directory
configure.ac:587: warning: macro 'AM_CFLAGS' not found in library
configure.ac:590: warning: macro 'AM_LDFLAGS' not found in library
autoreconf: configure.ac: tracing
autoreconf: running: libtoolize --copy --force
libtoolize: putting auxiliary files in '.'.
libtoolize: copying file './ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIRS, 'm4'.
libtoolize: copying file 'm4/libtool.m4'
libtoolize: copying file 'm4/ltoptions.m4'
libtoolize: copying file 'm4/ltsugar.m4'
libtoolize: copying file 'm4/ltversion.m4'
libtoolize: copying file 'm4/lt~obsolete.m4'
autoreconf: configure.ac: not using Intltool
autoreconf: configure.ac: not using Gtkdoc
autoreconf: running: aclocal --force -I m4
configure.ac:587: warning: macro 'AM_CFLAGS' not found in library
configure.ac:590: warning: macro 'AM_LDFLAGS' not found in library
autoreconf: running: /usr/bin/autoconf --force
configure.ac:29: warning: The macro `AC_CONFIG_HEADER' is obsolete.
configure.ac:29: You should run autoupdate.
./lib/autoconf/status.m4:719: AC_CONFIG_HEADER is expanded from...
configure.ac:29: the top level
configure.ac:53: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:53: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:53: the top level
configure.ac:76: warning: The macro `AC_HEADER_STDC' is obsolete.
configure.ac:76: You should run autoupdate.
./lib/autoconf/headers.m4:704: AC_HEADER_STDC is expanded from...
configure.ac:76: the top level
configure.ac:81: warning: The macro `AC_TYPE_SIGNAL' is obsolete.
configure.ac:81: You should run autoupdate.
./lib/autoconf/types.m4:776: AC_TYPE_SIGNAL is expanded from...
configure.ac:81: the top level
configure.ac:202: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:202: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:202: the top level
configure.ac:279: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:279: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:279: the top level
configure.ac:434: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:434: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:434: the top level
configure.ac:441: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:441: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:441: the top level
configure.ac:521: warning: The macro `AC_HELP_STRING' is obsolete.
configure.ac:521: You should run autoupdate.
./lib/autoconf/general.m4:204: AC_HELP_STRING is expanded from...
configure.ac:521: the top level
autoreconf: running: /usr/bin/autoheader --force
autoreconf: running: automake --add-missing --copy --force-missing
configure.ac:40: installing './compile'
configure.ac:43: installing './config.guess'
configure.ac:43: installing './config.sub'
configure.ac:41: installing './install-sh'
configure.ac:48: installing './missing'
samples/Makefile.am: installing './depcomp'
parallel-tests: installing './test-driver'
autoreconf: Leaving directory '.'
```
Execute autoupdate to apply all those chenges and then cleanup that
in next commits.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6e1b9d7e8b8f3a5d409f25621278a8867ae90317"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:53:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-22T21:16:07Z""}}"
474,OpenPR,2021-06-23 13:52:38,stefanberger,unfork_merge,,
474,CrossReferenced,2021-06-23 13:53:40,stefanberger,unfork_merge,automake and autoconf cleanups,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/457"", ""is_pull_request"": true}}"
474,IssueComment,2021-06-23 18:22:14,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3301](https://coveralls.io/builds/41698348)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.516%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41698348/badge)](https://coveralls.io/builds/41698348) |
| :-- | --: |
| Change from base [Build 3177](https://coveralls.io/builds/40786568): |  0.0% |
| Covered Lines: | 5430 |
| Relevant Lines: | 7287 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/867060477"", ""author_association"": ""NONE""}"
474,Revise,2021-07-27 17:54:58,kloczek,unfork_merge,"build-sys: Remove using -L$(PWD)/.libs -lswtpm_libtpms on linking

Such paths should not be used.
Use proper linker libswtpm_libtpms.la scripyt generated by libtool.

Signed-off-by: Tomasz Kłoczko <kloczek@github.com>","{""sha"": ""4d19f297f5e17891d6b0c72a53e712729665e582"", ""author"": {""name"": ""Tomasz K\u0142oczko"", ""email"": ""kloczek@github.com"", ""date"": ""2021-06-11T17:55:44Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T17:54:58Z""}}"
474,Revise,2021-07-27 17:54:58,stefanberger,unfork_merge,"build-sys: Rename AM_CFLAGS/LDFLAGS to MY_CFLAGS/LDFLAGS

To avoid the following warning use MY_ as a prefix for the offending
variables that have AM_ as a prefix:

configure.ac:587: warning: macro 'AM_CFLAGS' not found in library
configure.ac:590: warning: macro 'AM_LDFLAGS' not found in library

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6d9606d692b11b2c35956730ffc0bd36ad80b616"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T14:13:49Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T17:54:58Z""}}"
474,Revise,2021-07-27 17:58:15,stefanberger,unfork_merge,"build-sys: Add MY_CFLAGS, CFLAGS, and MY_LDFLAGS to all Makefile.am's

Add MY_CFLAGS, CFLAGS, and MY_LDFLAGS to all Makefile.am's so that they
can be defined during configure time as well as CFLAGS added during
build time. LDFLAGS were already handled correctly during build-time.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""81d331f45815629f445b263bd978f92809d5e87b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-26T20:57:24Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T17:58:15Z""}}"
474,MergePR,2021-07-28 13:53:15,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5080314026"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/115807d360a036fb36c484d6c6c8749ce1e95ec6""}"
475,SubmitCommit,2021-06-24 16:58:32,stefanberger,unfork_merge,"samples: swtpm_localca: Fix issues raised by -Wextra

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d8a4f033e6ed45a08f42b1e0d601e780f52f2cc4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T16:42:32Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T16:58:32Z""}}"
475,OpenPR,2021-06-24 17:09:48,stefanberger,unfork_merge,,
475,Revise,2021-06-24 17:45:29,stefanberger,unfork_merge,"swtpm: Fix issues raised by -Wextra

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""14ee0ba978d4dd0b0ed39be1d5da2d7c45960716"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T16:55:06Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T17:45:29Z""}}"
475,Revise,2021-06-24 17:45:34,stefanberger,unfork_merge,"swtpm_bios: Fix issues raised by -Wextra

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""21aa47e7ac7a9f239545023d47906a6473ce094b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T16:43:58Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T17:45:34Z""}}"
475,Revise,2021-06-24 17:45:34,stefanberger,unfork_merge,"swtpm_cert: Fix issues raised by -Wextra

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""eac01a7e568f6d347709ae7f2fc83e535fb87d7c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T16:57:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T17:45:34Z""}}"
475,Revise,2021-06-24 17:45:34,stefanberger,unfork_merge,"swtpm_ioctl: Fix issues raised by -Wextra

Signed-off-by: Stefan Berger <stefanb@linu.ibm.com>","{""sha"": ""74e509ce3f315de89455008d42b8aee69d36ecc9"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T16:43:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T17:45:34Z""}}"
475,Revise,2021-06-24 17:45:34,stefanberger,unfork_merge,"swtpm_setup: Fix issues raised by -Wextra

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7482a1b27db0a458ed6e5dd47a56a96d3e151311"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T16:44:46Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T17:45:34Z""}}"
475,IssueComment,2021-06-24 19:02:33,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3206](https://coveralls.io/builds/40861360)

* **5** of **5**   **(100.0%)**  changed or added relevant lines in **2** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.06%**) to **74.664%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40861360/badge)](https://coveralls.io/builds/40861360) |
| :-- | --: |
| Change from base [Build 3180](https://coveralls.io/builds/40794365): |  0.06% |
| Covered Lines: | 5437 |
| Relevant Lines: | 7282 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/867881493"", ""author_association"": ""NONE""}"
475,MergePR,2021-06-24 19:05:03,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4936361342"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a69388c0f418191f3d49a059e6b2b2585865434a""}"
475,DeleteBranch,2021-06-24 19:05:06,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4936361494"", ""commit_url"": null}"
476,SubmitCommit,2021-06-24 20:41:50,stefanberger,unfork_merge,"swtpm: Fix issues raised by -Wextra (Cygwin)

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""72d8b49f30c6e7bfef8abc65d28a0ae2fa930aee"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T20:41:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-24T20:41:50Z""}}"
476,OpenPR,2021-06-24 20:42:34,stefanberger,unfork_merge,,
476,IssueComment,2021-06-24 22:17:55,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3210](https://coveralls.io/builds/40867048)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.596%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40867048/badge)](https://coveralls.io/builds/40867048) |
| :-- | --: |
| Change from base [Build 3208](https://coveralls.io/builds/40864750): |  0.0% |
| Covered Lines: | 5450 |
| Relevant Lines: | 7306 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/867989908"", ""author_association"": ""NONE""}"
476,MergePR,2021-06-24 22:58:22,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4937198414"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/ecdfc7711640ac2695bc59cac0d51e891b6c93cc""}"
479,SubmitCommit,2021-06-29 13:56:37,stefanberger,unfork_merge,"tests: Add swtpm_setup test cases with --lock-nvram and --create-spk options

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""11ab705ac5939853ded7c16e836f2235155137d1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-29T13:56:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-06-29T13:56:37Z""}}"
479,OpenPR,2021-06-29 14:08:38,stefanberger,unfork_merge,,
479,IssueComment,2021-06-29 15:15:30,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3216](https://coveralls.io/builds/40971958)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.6%**) to **75.185%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/40971958/badge)](https://coveralls.io/builds/40971958) |
| :-- | --: |
| Change from base [Build 3211](https://coveralls.io/builds/40868494): |  0.6% |
| Covered Lines: | 5496 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/870688859"", ""author_association"": ""NONE""}"
479,MergePR,2021-06-29 15:26:30,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4954463333"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/978d22bceccc9f05a87a99351066ae2989eba91b""}"
480,SubmitCommit,2021-07-06 12:29:16,andreabolognani,fork_merge,"configure: Fix typo TPM2 -> TMP2

This will result in -D_FORTIFY_SOURCE=2 actually being added to
HARDENING_CFLAGS where applicable.

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""d3d961108c64f7f8cf54d8909196e772b040cf05"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-07-06T12:23:57Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-07-06T12:29:16Z""}}"
480,SubmitCommit,2021-07-06 12:29:26,andreabolognani,fork_merge,"configure: Fix spacing for HARDENING_*FLAGS

Currently multiple spaces are used when a single one would do,
which will still achieve the same result but is not quite as
aesthetically pleasing :)

Signed-off-by: Andrea Bolognani <abologna@redhat.com>","{""sha"": ""a613e71eb1916becec6c689c310c39a7727cb89f"", ""author"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-07-06T12:27:11Z""}, ""committer"": {""name"": ""Andrea Bolognani"", ""email"": ""abologna@redhat.com"", ""date"": ""2021-07-06T12:29:26Z""}}"
480,OpenPR,2021-07-06 12:30:33,andreabolognani,fork_merge,,
480,IssueComment,2021-07-06 13:09:36,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3219](https://coveralls.io/builds/41144813)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.185%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41144813/badge)](https://coveralls.io/builds/41144813) |
| :-- | --: |
| Change from base [Build 3217](https://coveralls.io/builds/40976986): |  0.0% |
| Covered Lines: | 5496 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/874745660"", ""author_association"": ""NONE""}"
480,MergePR,2021-07-08 12:29:02,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4994648946"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/5e73e324bd1c0543fbf4b90ea613cd71805eea5b""}"
480,IssueCommentSupplement,2021-07-08 12:29:08,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/876397949"", ""author_association"": ""OWNER""}"
480,DeleteBranch,2021-07-08 13:37:22,andreabolognani,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4995026990"", ""commit_url"": null}"
481,SubmitCommit,2021-07-07 17:06:44,stefanberger,unfork_merge,"tests: Use --allow-signing with --decryption in some swtpm_setup test

To increase coverage, use --allow-signing along with --decryption in
some swtpm_setup test cases.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6d9f1f9f01b4a8a20d6f7a44c95e6435ce33baca"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-07T17:06:42Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-07T17:06:44Z""}}"
481,SubmitCommit,2021-07-07 17:18:33,stefanberger,unfork_merge,"test: Extend TPM 1.2 test case to also cover 'savestate'

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""11d7ccfdfe7689cc18981e11331f5675be140a7f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-07T17:18:30Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-07T17:18:33Z""}}"
481,OpenPR,2021-07-07 18:43:40,stefanberger,unfork_merge,,
481,IssueComment,2021-07-07 19:22:22,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3221](https://coveralls.io/builds/41192113)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.2%**) to **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41192113/badge)](https://coveralls.io/builds/41192113) |
| :-- | --: |
| Change from base [Build 3217](https://coveralls.io/builds/40976986): |  0.2% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/875868691"", ""author_association"": ""NONE""}"
481,MergePR,2021-07-07 19:44:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/4991118446"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/7be5d76679a8cc569aeaa364c3e6892d96d10e90""}"
485,SubmitCommit,2021-07-13 20:58:51,stefanberger,unfork_merge,"tests: Add test_tpm2_save_load_state to the tests to run

The test test_tpm2_save_load_state seems to have been forgotten
about and was not run. Add it now to the the tests to run.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7b73b6bf90fee3873a18706c16f65c8e2f5c74a0"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-13T20:58:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-13T20:58:51Z""}}"
485,OpenPR,2021-07-13 21:00:12,stefanberger,unfork_merge,,
485,IssueComment,2021-07-13 22:17:42,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3226](https://coveralls.io/builds/41344076)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41344076/badge)](https://coveralls.io/builds/41344076) |
| :-- | --: |
| Change from base [Build 3223](https://coveralls.io/builds/41213948): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/879442608"", ""author_association"": ""NONE""}"
485,MergePR,2021-07-13 22:23:40,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5016542357"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3acc2ee1cee6a86b6ff0be6e89cf59008ab0fa9e""}"
486,SubmitCommit,2021-07-13 15:36:20,stefanberger,unfork_merge,"samples: Replace swtpm_localca with script calling swtpm-localca (issue #482)

Replace the binary swtpm_localca with a script that now calls the binary
swtpm-localca, which is to be installed in $bindir.

So that we can use this for script for calling swtpm-localca during testing
(when it is not installed), write the script in such a way that it de-
termines whether there's swtpm-localca in the same directory and if not call
it from ${bindir}/swtpm-localca.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""887760641a1a05c52131e3a86a77db97117d2e2c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-13T15:03:18Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-13T15:36:20Z""}}"
486,OpenPR,2021-07-13 21:00:29,stefanberger,unfork_merge,,
486,IssueComment,2021-07-13 22:56:04,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3227](https://coveralls.io/builds/41345031)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41345031/badge)](https://coveralls.io/builds/41345031) |
| :-- | --: |
| Change from base [Build 3223](https://coveralls.io/builds/41213948): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/879458140"", ""author_association"": ""NONE""}"
486,MergePR,2021-07-16 20:03:14,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5032649124"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/fd00c5ff87cdf084b5eb9807df3ef1852527098d""}"
486,DeleteBranch,2021-07-16 20:03:18,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5032649319"", ""commit_url"": null}"
487,OpenPR,2021-07-13 22:25:13,stefanberger,unfork_merge,,
487,Revise,2021-07-13 23:50:22,stefanberger,unfork_merge,"man8: Add missing '\' to list of pod files and reduce EXTRA_DIST files

Add a missing '\' to the list of pod files and reduce the EXTRA_DIST
files list to only those that available via git and not generated.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""a4965f7613ffe6f536f819e91d0d94ef7c4a7c47"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-13T21:42:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-13T23:50:22Z""}}"
487,IssueComment,2021-07-13 23:59:15,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3234](https://coveralls.io/builds/41347492)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41347492/badge)](https://coveralls.io/builds/41347492) |
| :-- | --: |
| Change from base [Build 3228](https://coveralls.io/builds/41345857): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/879480308"", ""author_association"": ""NONE""}"
487,MergePR,2021-07-14 02:19:38,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5017095372"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3d75c96537384eafd78943844cbc2179ac70fe65""}"
488,SubmitCommit,2021-07-14 16:43:27,stefanberger,unfork_merge,"swtpm_setup: Fix compiler errors when memcpy is a macro (Cygwin)

Since commit 502cb1129ad59 -D_FORTIFY_SOURCE=2 is passed to the gcc
command line resulting in memcpy() becoming a macro on Cygwin, which
then causes the following compiler errors due to the anonymous arrays
being used:

swtpm.c: In function ‘swtpm_tpm2_createprimary_ek_rsa’:
swtpm.c:686:26: error: macro ""memcpy"" passed 34 arguments, but takes just 3
  686 |         }, authpolicy_len);
      |                          ^
In file included from /usr/include/string.h:180,
                 from swtpm.c:15:
/usr/include/ssp/string.h:97: note: macro ""memcpy"" defined here
   97 | #define memcpy(dst, src, len) __ssp_bos_check3(memcpy, dst, src, len)
      |
swtpm.c:682:9: error: statement with no effect [-Werror=unused-value]
  682 |         memcpy(authpolicy, (unsigned char []){
      |         ^~~~~~
swtpm.c:698:26: error: macro ""memcpy"" passed 50 arguments, but takes just 3
  698 |         }, authpolicy_len);
      |                          ^

The solution is to surround the anonymous array definitions with '( )'.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""33c86d37a9c930ec4df1a9a0fdfb175addfe147d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-14T16:36:41Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-14T16:43:27Z""}}"
488,OpenPR,2021-07-14 16:57:42,stefanberger,unfork_merge,,
488,MergePR,2021-07-14 18:16:27,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5021291453"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/05f64f55292c2f634281b512b9ce426655139633""}"
488,DeleteBranch,2021-07-14 18:16:30,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5021291659"", ""commit_url"": null}"
488,IssueCommentSupplement,2021-07-14 20:24:56,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3237](https://coveralls.io/builds/41373685)

* **9** of **9**   **(100.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41373685/badge)](https://coveralls.io/builds/41373685) |
| :-- | --: |
| Change from base [Build 3235](https://coveralls.io/builds/41348772): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/880184915"", ""author_association"": ""NONE""}"
489,SubmitCommit,2021-07-17 12:01:17,stefanberger,unfork_merge,"samples: Use different script for local testing than install

Use a different script for local testing that what is installed into
/usr/share/swtpm/swtpm-localca.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""935a7bcebf83e583be1478f2f2a8ced704fbb7ed"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-17T11:44:31Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-17T12:01:17Z""}}"
489,OpenPR,2021-07-17 12:01:26,stefanberger,unfork_merge,,
489,IssueComment,2021-07-17 13:18:07,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3243](https://coveralls.io/builds/41447796)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41447796/badge)](https://coveralls.io/builds/41447796) |
| :-- | --: |
| Change from base [Build 3240](https://coveralls.io/builds/41441008): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/881897735"", ""author_association"": ""NONE""}"
489,MergePR,2021-07-17 13:28:55,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5034097289"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/50f7d49ad3aa92117a9f4701f315c6d567aa21bb""}"
489,DeleteBranch,2021-07-17 13:28:58,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5034097343"", ""commit_url"": null}"
490,OpenPR,2021-07-20 06:51:45,Etsukata,fork_merge,,
490,IssueComment,2021-07-20 07:29:56,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3357](https://coveralls.io/builds/42119685)

* **171** of **242**   **(70.66%)**  changed or added relevant lines in **8** files are covered.
* **2** unchanged lines in **2** files lost coverage.
* Overall coverage increased (+**0.07%**) to **75.476%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_nvstore.c](https://coveralls.io/builds/42119685/source?filename=src%2Fswtpm%2Fswtpm_nvstore.c#L181) | 13 | 15 | 86.67%
| [src/swtpm/tpmstate.c](https://coveralls.io/builds/42119685/source?filename=src%2Fswtpm%2Ftpmstate.c#L65) | 16 | 20 | 80.0%
| [src/swtpm/common.c](https://coveralls.io/builds/42119685/source?filename=src%2Fswtpm%2Fcommon.c#L637) | 22 | 33 | 66.67%
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/42119685/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L108) | 111 | 165 | 67.27%
<!-- | **Total:** | **171** | **242** | **70.66%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/common.c](https://coveralls.io/builds/42119685/source?filename=src%2Fswtpm%2Fcommon.c#L650) | 1 | 60.08% |
| [src/swtpm/cuse_tpm.c](https://coveralls.io/builds/42119685/source?filename=src%2Fswtpm%2Fcuse_tpm.c#L1641) | 1 | 73.52% |
<!-- | **Total:** | **2** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/42119685/badge)](https://coveralls.io/builds/42119685) |
| :-- | --: |
| Change from base [Build 3353](https://coveralls.io/builds/42034219): |  0.07% |
| Covered Lines: | 5629 |
| Relevant Lines: | 7458 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/883163759"", ""author_association"": ""NONE""}"
490,ClosePR,2021-07-21 19:54:34,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5052260948"", ""commit_url"": null}"
490,IssueComment,2021-07-21 19:54:34,stefanberger,fork_merge,"It definitely looks manageable.
What we would also need is entries in man pages and an extension to `--print-capabilites` that reflects the newly add options.

```
 swtpm socket --print-capabilities
{ ""type"": ""swtpm"", ""features"": [ ""tpm-send-command-header"", ""flags-opt-startup"", ""cmdarg-key-fd"", ""cmdarg-pwd-fd"" ] }
```

(sorry, didn't mean to close it. got on wrong button)","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884456383"", ""author_association"": ""OWNER""}"
490,ReopenPR,2021-07-21 19:54:38,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5052261243"", ""commit_url"": null}"
490,IssueComment,2021-07-21 21:30:32,Etsukata,fork_merge,Thanks for the comment. I'll add entries in man pages and an extension to `--print-capability`.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884513179"", ""author_association"": ""CONTRIBUTOR""}"
490,ReviewComment,2021-07-30 20:55:54,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-719454638""}"
490,ReviewComment,2021-07-30 20:59:59,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-719456766""}"
490,ReviewComment,2021-07-30 21:00:01,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-719456781""}"
490,IssueComment,2021-07-30 21:00:58,stefanberger,fork_merge,Can you please also rebase this on the latest master?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890151358"", ""author_association"": ""OWNER""}"
490,IssueComment,2021-08-02 03:27:27,Etsukata,fork_merge,"> Can you please also rebase this on the latest master?

Sure, rebased.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890684513"", ""author_association"": ""CONTRIBUTOR""}"
490,ReviewComment,2021-08-02 15:01:39,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-720304485""}"
490,ReviewComment,2021-08-02 15:02:38,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-720305530""}"
490,ReviewComment,2021-08-03 20:55:44,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-721638265""}"
490,ReviewComment,2021-08-03 21:03:39,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-721644560""}"
490,IssueComment,2021-08-03 21:05:23,stefanberger,fork_merge,"Looks good to me now. 

We'll need similar extensions for the swtpm_setup tool as well to choose the backend ...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/892165707"", ""author_association"": ""OWNER""}"
490,IssueComment,2021-08-05 07:03:15,Etsukata,fork_merge,"> We'll need similar extensions for the swtpm_setup tool as well to choose the backend ...

Yes, we need similar extensions in swtpm_setup as well. Implementing the extension as it is (i.e. adding abstraction layer to swtpm_setup) may not be a good idea because it will bring a lot of copy-and-paste codes or we have to libraries common codes.

Instead, let me propose another approach.
Currently `tpm_state_path` in swtpm_setup is used in the following 2 ways.

- (1).  For `certsdir` which is used by swtpm_localca temporarily
- (2). For actual tpm state store path, ex:
  - check_state_overwride()
  - delete_swtpm_statefiles()
  - delete_state()

For 1. we can use temporal directory (using mkdtemp(3)) or a directory specified by user using new `--tempdir` (or `--certsdir`) option.
It will be prefereble for users who care sensitive data (EK) not written to disk. If swtpm_setup has such an option we can cover that requirement.

For 2. we can introduce new CMD to communicate with swtpm for example CMD_HAS_STATE for check_state_overwride(). Another idea is to introduce `--not-overwrite` in swtpm itself and pass the option from swtpm_setup then we can do equivalent tasks in swtpm like swtpm_setup does in check_state_overwride() and delete_swtpm_statefiles().
For delete_state(), I'm considering `--clear-state` for swtpm to remove states when init_tpm{,2} face some errors.

If we go this way, we can also reduce the swtpm_setup dependencies on swtpm implementation details (TPM state file names).

Any comments are appreciated.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/893218086"", ""author_association"": ""CONTRIBUTOR""}"
490,CrossReferenced,2021-08-05 14:08:01,PiMaker,fork_merge,"swtpm: add ""linear"" nvram store backend (for single-file storage and block devices)","{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/513"", ""is_pull_request"": true}}"
490,IssueComment,2021-08-05 19:56:32,stefanberger,fork_merge,"Now that you introduce a URI, I a wondering whether we should work with URIs like the iscsi:// you showed and now we would use a URI file://<path> or actually as mentioned in PR #513 maybe this should be the directory backend, rather than file, with a dir:// URI since this will want to own the whole directory due to the lock. Just to be consistent.
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/893756301"", ""author_association"": ""OWNER""}"
490,IssueComment,2021-08-06 04:16:38,Etsukata,fork_merge,"> with a dir:// URI

Thanks, I like that idea. Will update this PR.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/893988466"", ""author_association"": ""CONTRIBUTOR""}"
490,IssueComment,2021-08-06 17:52:02,stefanberger,fork_merge,"> > with a dir:// URI
> 
> Thanks, I like that idea. Will update this PR.

That should then obsolete the `backend=` option parameter but this here should be enough: 

```
--tpmstate backend_uri=dir:/tmp/myvtpm
```

This assumes of course that every type of backend can be expressed via a URI, but as far as the current backend and the iscsi backends are concerned that should be sufficient.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/894420465"", ""author_association"": ""OWNER""}"
490,IssueComment,2021-08-10 13:40:31,stefanberger,fork_merge,"@Etsukata You will have to rebase this branch again. Also, if we don't end up merging it by Friday it will likely have to wait another 2 weeks or so since I will be out for a while.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/896038148"", ""author_association"": ""OWNER""}"
490,IssueComment,2021-08-11 06:03:40,Etsukata,fork_merge,"Hi @stefanberger, thanks for the notice.
I've rebased to master and removed `--tpmstate backend`. ","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/896526998"", ""author_association"": ""CONTRIBUTOR""}"
490,ReviewComment,2021-08-11 12:48:37,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-727440061""}"
490,ReviewComment,2021-08-11 14:08:35,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-727534777""}"
490,IssueComment,2021-08-12 11:44:49,stefanberger,fork_merge,@Etsukata I think it's ready to be merged... ,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/897570268"", ""author_association"": ""OWNER""}"
490,ReviewApproved,2021-08-13 03:06:56,pksnx,fork_merge,"Thanks much for this, looks good to me.
","{""author_association"": ""NONE"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/490#pullrequestreview-729226955""}"
490,RenameTitle,2021-08-13 03:23:07,Etsukata,fork_merge,,"{""rename"": {""from"": ""[RFC] swtpm: Abstract NVRAM interface for pluggable state store"", ""to"": ""swtpm: Abstract NVRAM interface for pluggable state store""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5153537726""}"
490,Revise,2021-08-13 03:28:28,Etsukata,fork_merge,"swtpm: Add options for pluggable backend (--tpmstate backend-uri)

Add an options to specify pluggable backend URI.

Ex:
  --tpmstate backend-uri=dir://<path_to_dir>

Backend URI is specific to each backend plugin which points to the
location of the NVRAM files.
Currently, ""dir"" is the only one available backend. In this case
backend-uri should be a path to the directory where files are stored.

This option is designed to compatible with existing ""dir"" option.
If ""dir"" is specified, swtpm prioritize ""dir"" ignoring ""backend-uri"".

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""ee43d092bd955abf6a70924838ca05c59ba17abd"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-07-14T07:02:07Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-13T03:28:28Z""}}"
490,Revise,2021-08-13 03:28:28,Etsukata,fork_merge,"swtpm: Add ""nvram-backend-dir"" capability

Append ""nvram-backend-dir"" to --print-capabilities output.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""628b8627d55e750a90fb531eb8cb9d4527e557de"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-07-27T01:22:17Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-13T03:28:28Z""}}"
490,Revise,2021-08-13 03:28:28,Etsukata,fork_merge,"swtpm: Abstract NVRAM interface for pluggable state store

Related GH issue: https://github.com/stefanberger/swtpm/issues/461

This patch adds an abstraction layer to NVRAM state store implementation
for pluggable storage backends. No functional changes are intended in
this change. The default state store backend (""dir backend"") keeps
current behavior.

To make swtpm ready for pluggable store, this patch moves file related
operations to the seperate file (swtpm_nvstore_dir.c) and defined the
interface for plugins (nvram_backend_ops in swtpm_nvstore.h). The
interface can be used by each plugin which will be added later.

With the interface, each plugin can access its ""backend_uri"" which
points to the location of the backend storage, for example S3 bucket
URL or iSCSI URL, and decide how it stores TPM state data.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""2b4e96bb254c511ac82ebb6f9da016a1e84e1086"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-06-25T02:29:44Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-13T03:28:28Z""}}"
490,IssueComment,2021-08-13 03:31:20,Etsukata,fork_merge,"Hi @stefanberger, thanks for the comment.
I've added the following change to the first commit. I think it's good to merge.

```
diff --git a/src/swtpm/swtpm_nvstore_dir.h b/src/swtpm/swtpm_nvstore_dir.h
index 7cf467b..eec1dfd 100644
--- a/src/swtpm/swtpm_nvstore_dir.h
+++ b/src/swtpm/swtpm_nvstore_dir.h
@@ -36,8 +36,8 @@
 /* OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                */
 /********************************************************************************/
 
-#ifndef _SWTPM_NVSTORE_FILE_H
-#define _SWTPM_NVSTORE_FILE_H
+#ifndef _SWTPM_NVSTORE_DIR_H
+#define _SWTPM_NVSTORE_DIR_H
 
 #include <libtpms/tpm_types.h>
 #include <libtpms/tpm_library.h>
@@ -75,4 +75,4 @@ SWTPM_NVRAM_DeleteName_Dir(uint32_t tpm_number,
 
 extern struct nvram_backend_ops nvram_dir_ops;
 
-#endif /* _SWTPM_NVSTORE_FILE_H */
+#endif /* _SWTPM_NVSTORE_DIR_H */
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898165949"", ""author_association"": ""CONTRIBUTOR""}"
490,IssueComment,2021-08-13 03:32:10,Etsukata,fork_merge,"For swtpm_setup, I'll create several PRs separately. I appreciate if you could take a look at them once you get back, thanks.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898166400"", ""author_association"": ""CONTRIBUTOR""}"
490,IssueComment,2021-08-13 04:21:39,ifnkhan,fork_merge,"Looks good to me @Etsukata. 
Thanks!","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898180979"", ""author_association"": ""NONE""}"
490,MergePR,2021-08-13 10:35:18,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5155048084"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/86931b4f3078141f5a99f1b7715d434ba17aae5d""}"
491,SubmitCommit,2021-07-20 23:13:14,nchevsky,fork_merge,"Improvements to .gitignore
- Add auto-generated files debian/autoreconf.*
- Remove *.patch (Quilt requires these under debian/patches/)

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""b56fcdefa13c01bd0ab69de5e69beb173868473b"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-20T23:13:14Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-20T23:13:14Z""}}"
491,OpenPR,2021-07-20 23:16:24,nchevsky,fork_merge,,
491,IssueComment,2021-07-20 23:54:52,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3249](https://coveralls.io/builds/41524475)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41524475/badge)](https://coveralls.io/builds/41524475) |
| :-- | --: |
| Change from base [Build 3244](https://coveralls.io/builds/41447971): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/883779433"", ""author_association"": ""NONE""}"
491,MergePR,2021-07-21 00:57:30,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5047461026"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/d08db4b4c9d8a024ef7d65f2b80a4fef9f01c493""}"
491,IssueCommentSupplement,2021-07-21 00:57:33,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/883803949"", ""author_association"": ""OWNER""}"
492,OpenPR,2021-07-20 23:26:49,nchevsky,fork_merge,,
492,IssueComment,2021-07-21 01:11:59,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3255](https://coveralls.io/builds/41526879)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41526879/badge)](https://coveralls.io/builds/41526879) |
| :-- | --: |
| Change from base [Build 3252](https://coveralls.io/builds/41525625): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/883809591"", ""author_association"": ""NONE""}"
492,Revise,2021-07-21 02:33:10,nchevsky,fork_merge,"Add missing title to swtpm-create-tpmca(8) manual page
Fixes `bad-whatis-entry` Lintian warning [1].

[1] https://lintian.debian.org/tags/bad-whatis-entry

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""25e1f62bc1fdb4c1a745528b989fb1ffeb87ae79"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-20T23:24:42Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-21T02:33:10Z""}}"
492,MergePR,2021-07-21 11:34:27,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5049706347"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/cbd3d39d0e50c5a7f74afeff958072e59e606569""}"
492,IssueCommentSupplement,2021-07-21 11:34:34,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884120844"", ""author_association"": ""OWNER""}"
492,DeleteBranch,2021-07-26 16:41:14,nchevsky,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5069552322"", ""commit_url"": null}"
494,SubmitCommit,2021-07-21 03:32:06,nchevsky,fork_merge,"Correct old reference to swtpm_setup.sh in manpage
swtpm_setup.sh(8) was replaced by swtpm_setup(8) in v0.5.0.

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""9e4af1f494dd24bdea8ebb37fde07009144f1c91"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-21T03:32:06Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-21T03:32:06Z""}}"
494,OpenPR,2021-07-21 03:35:55,nchevsky,fork_merge,,
494,IssueComment,2021-07-21 04:13:39,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3256](https://coveralls.io/builds/41527931)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41527931/badge)](https://coveralls.io/builds/41527931) |
| :-- | --: |
| Change from base [Build 3252](https://coveralls.io/builds/41525625): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/883872867"", ""author_association"": ""NONE""}"
494,IssueComment,2021-07-21 11:19:26,stefanberger,fork_merge,Thanks also for this one.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884112221"", ""author_association"": ""OWNER""}"
494,MergePR,2021-07-21 11:55:33,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5049793917"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/aab15ef3860c7b2509ec8049f4d08a5019934830""}"
494,DeleteBranch,2021-07-26 16:41:16,nchevsky,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5069552474"", ""commit_url"": null}"
495,SubmitCommit,2021-07-19 14:10:28,stefanberger,unfork_merge,"docs: Update INSTALL document

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""86c2426fa975a9efa55258d4caedf313eddc2f83"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-19T14:08:41Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-19T14:10:28Z""}}"
495,OpenPR,2021-07-21 11:45:10,stefanberger,unfork_merge,,
495,MergePR,2021-07-21 13:04:24,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5050131780"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/0ba20a2114830f8a0285acf8f494b1ddb0954f2e""}"
495,IssueCommentSupplement,2021-07-21 14:18:03,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3258](https://coveralls.io/builds/41539747)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41539747/badge)](https://coveralls.io/builds/41539747) |
| :-- | --: |
| Change from base [Build 3257](https://coveralls.io/builds/41538761): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884227138"", ""author_association"": ""NONE""}"
496,OpenPR,2021-07-21 17:02:58,nchevsky,fork_merge,,
496,IssueComment,2021-07-21 17:41:43,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3262](https://coveralls.io/builds/41552853)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41552853/badge)](https://coveralls.io/builds/41552853) |
| :-- | --: |
| Change from base [Build 3260](https://coveralls.io/builds/41542130): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884370450"", ""author_association"": ""NONE""}"
496,IssueComment,2021-07-21 19:03:06,stefanberger,fork_merge,Can you run `./configure` so you also get the change in `swtpm.spec`?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884423144"", ""author_association"": ""OWNER""}"
496,Revise,2021-07-21 19:11:12,nchevsky,fork_merge,"Remove obsolete manpage for swtpm_setup.sh(8)
swtpm_setup.sh was replaced by swtpm_setup in v0.5.0.

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""4928b8dc3351d4463f0bff182e2bb19b7a0f846c"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-21T16:56:57Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-21T19:11:12Z""}}"
496,IssueComment,2021-07-21 19:16:06,stefanberger,fork_merge,LGTM.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884431737"", ""author_association"": ""OWNER""}"
496,IssueComment,2021-07-21 19:16:43,nchevsky,fork_merge,"> Can you run `./configure` so you also get the change in `swtpm.spec`?

Done, but the reason `swtpm.spec` didn't make it into my original commit is that it's listed in `.gitignore` (as IMO it should be, like any other auto-generated file). We should consider either:

1. not shipping `swtpm.spec` at all (my recommendation, though I see it was [recently readded](https://github.com/stefanberger/swtpm/commit/7f1f1fff467fb33a1f183f369842b654dec4d678) deliberately), or
2. removing `swtpm.spec` from `.gitignore` if you really want to continue to ship this auto-generated file.

Let me know if you'd like me to do either of these in another pull request. ????","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884432135"", ""author_association"": ""CONTRIBUTOR""}"
496,IssueComment,2021-07-21 20:05:41,stefanberger,fork_merge,"I have used swtpm.spec to install dependencies without having to go through the cumbersome `./configure` to install dependencies so often that I thought it was a convenient script to have in the repo to get started quickly, at least on Fedora.

I would  then opt for 2).
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884463615"", ""author_association"": ""OWNER""}"
496,MergePR,2021-07-21 20:05:54,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5052307786"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/bb6d019a2e3b2afccb75cc52e50a423de6b74521""}"
496,CrossReferenced,2021-07-21 20:34:24,nchevsky,fork_merge,Remove swtpm.spec from .gitignore,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/497"", ""is_pull_request"": true}}"
496,DeleteBranch,2021-07-26 16:41:18,nchevsky,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5069552601"", ""commit_url"": null}"
497,SubmitCommit,2021-07-21 20:30:44,nchevsky,fork_merge,"Remove swtpm.spec from .gitignore
Even though swtpm.spec is an auto-generated file, the author would
like to keep it in the repository for ease of installing dependencies
during development. As long as the file is meant to be versioned, it
should not be in .gitignore. Discussion for context:
https://github.com/stefanberger/swtpm/pull/496#issuecomment-884432135

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""ab8a46d37647044079d8dd471fcc3a9d2d0b5aa3"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-21T20:30:44Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-21T20:30:44Z""}}"
497,OpenPR,2021-07-21 20:34:24,nchevsky,fork_merge,,
497,IssueComment,2021-07-21 21:51:10,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3265](https://coveralls.io/builds/41556052)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41556052/badge)](https://coveralls.io/builds/41556052) |
| :-- | --: |
| Change from base [Build 3264](https://coveralls.io/builds/41554970): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884523056"", ""author_association"": ""NONE""}"
497,MergePR,2021-07-21 22:05:27,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5052756207"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/bc898369eebb573ebb098ff52e282a44bac75ebd""}"
497,DeleteBranch,2021-07-26 16:41:19,nchevsky,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5069552707"", ""commit_url"": null}"
498,OpenPR,2021-07-21 20:54:32,nchevsky,fork_merge,,
498,IssueComment,2021-07-21 21:12:20,stefanberger,fork_merge,Thanks for this one also. Are you building an official Debian package or just for yourself?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884503233"", ""author_association"": ""OWNER""}"
498,IssueComment,2021-07-21 21:20:47,nchevsky,fork_merge,"> Thanks for this one also. Are you building an official Debian package or just for yourself?

Sure! A little of both. Somebody took maintainership of the (as of yet non-existent) Debian package and committed to getting it published, but there's been no activity for months. I couldn't wait any longer so I did the work myself, submitted merge requests, and built my own unofficial release as I wait for the maintainer to (hopefully) merge my changes and get the package released. If that doesn't happen, I might try to adopt the package and become the actual maintainer.

These pull requests I've been sending mirror the work I've already done in the Debian package (in the form of Quilt patches).","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884507989"", ""author_association"": ""CONTRIBUTOR""}"
498,Revise,2021-07-21 22:08:08,nchevsky,fork_merge,"Move swtpm_setup.conf.in from etc/ to samples/
- Makes swtpm_setup.conf.in consistent with the rest of the sample
  configuration files in swtpm, whose templates ship in samples/ and
  install the generated files to /etc.
- Works around dh_missing(1) erroneously reporting swtpm_setup.conf as
  non-installed due to its having two copies in the build tree (one in
  etc/ and another in debian/tmp/etc/).

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""11ab9cc2a87794dd8d0934370d4360540322cc20"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-21T18:09:33Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-21T22:08:08Z""}}"
498,IssueComment,2021-07-21 22:30:29,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3268](https://coveralls.io/builds/41558441)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41558441/badge)](https://coveralls.io/builds/41558441) |
| :-- | --: |
| Change from base [Build 3267](https://coveralls.io/builds/41557719): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/884540306"", ""author_association"": ""NONE""}"
498,MergePR,2021-07-22 00:30:45,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5053106412"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/edfb8d8ad9ae8453d8285e9c884078cec0819c2e""}"
498,DeleteBranch,2021-07-26 16:41:28,nchevsky,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5069553416"", ""commit_url"": null}"
500,OpenPR,2021-07-24 19:07:20,nchevsky,fork_merge,,
500,ReviewComment,2021-07-24 19:09:05,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/500#pullrequestreview-714254766""}"
500,ReviewComment,2021-07-24 19:10:00,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/500#pullrequestreview-714254805""}"
500,ReviewComment,2021-07-24 19:10:27,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/500#pullrequestreview-714254825""}"
500,ReviewComment,2021-07-24 19:12:32,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/500#pullrequestreview-714254922""}"
500,ReviewComment,2021-07-24 19:13:17,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/500#pullrequestreview-714254953""}"
500,IssueComment,2021-07-24 19:45:37,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3272](https://coveralls.io/builds/41625361)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41625361/badge)](https://coveralls.io/builds/41625361) |
| :-- | --: |
| Change from base [Build 3269](https://coveralls.io/builds/41559687): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/886103130"", ""author_association"": ""NONE""}"
500,IssueComment,2021-07-24 23:38:42,stefanberger,fork_merge,Thanks. Can you copy the text at the top into the commit text ? ,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/886124037"", ""author_association"": ""OWNER""}"
500,Revise,2021-07-25 02:17:50,nchevsky,fork_merge,"Move swtpm_localca sources from samples/ to src/

- Move swtpm_localca's sources out of samples/ (where they no longer
  belong now that swtpm_localca is a binary) to src/swtpm_localca/.
- Tests now call the swtpm_localca binary directly at the location
  where it was built, as they do with all other compiled programs.
- Simplify samples/swtpm-localca.in and delete swtpm-localca.2inst,
  removing the now-unnecessary logic to selectively call swtpm_localca
  from different locations (samples/ when running tests vs. /usr/bin/
  post-installation).

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""2eadde393894e92623d7ecdb6e379387643715a8"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-24T18:54:40Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-25T02:17:50Z""}}"
500,MergePR,2021-07-25 12:52:14,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5064929328"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/ddc7521653385280d03fe2b0c2ea633ee058977e""}"
500,DeleteBranch,2021-07-26 16:41:29,nchevsky,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5069553484"", ""commit_url"": null}"
502,SubmitCommit,2021-07-26 16:55:50,nchevsky,fork_merge,"Debian packaging improvements

- debian/clean: Add files that were not being automatically cleaned
  up by dh(1)'s `clean` target.
- debian/control:
  - Add new recommended/required fields and bump Standards-Version.
  - Remove redundant build dependencies that are implied transitively.
  - Bump debhelper dependency version to match debian/compat.
  - Move swtpm-libs's ${misc:Pre-Depends} dependency to `Pre-Depends`.
    Resolves `depends-on-misc-pre-depends` Lintian warning.
  - Sort packages and dependency lists alphabetically as per
    wrap-and-sort(1).
- debian/not-installed: List deliberately non-installed files to
  avoid dh_missing(1) warnings.
- debian/rules:
  - Pass --no-scripts to dh_makeshlibs(1) in order to keep a
    ldconfig(8) trigger from being implicitly added, which for
    this package was redundant and triggered Lintian warning
    `package-has-unnecessary-activation-of-ldconfig-trigger`.
  - Remove redundant --parallel dh flag.
  - Remove redundant dh_usrlocal override.
- debian/*.install:
  - Add swtpm-create-tpmca(8) and its manpage, which were missing.
  - Remove redundant `#! /usr/bin/dh-exec` lines.
  - Sort entries alphabetically as per wrap-and-sort(1).
- debian/swtpm-tools.postinst.in: Add `set -e` to fail in case of
  error. Fixes `maintainer-script-ignores-errors` Lintian warning.

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""31dd25fe5487cee04e192f347f59d115b98bfcbd"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-23T20:15:22Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-26T16:55:50Z""}}"
502,OpenPR,2021-07-26 17:08:43,nchevsky,fork_merge,,
502,ReviewComment,2021-07-26 17:09:31,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715089930""}"
502,ReviewComment,2021-07-26 17:10:28,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715090837""}"
502,ReviewComment,2021-07-26 17:11:51,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715092173""}"
502,ReviewComment,2021-07-26 17:12:29,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715092785""}"
502,ReviewComment,2021-07-26 17:13:29,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715093642""}"
502,ReviewComment,2021-07-26 17:15:32,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715095432""}"
502,ReviewComment,2021-07-26 17:16:51,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715096524""}"
502,ReviewComment,2021-07-26 17:17:38,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715097172""}"
502,ReviewComment,2021-07-26 17:18:30,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715097871""}"
502,ReviewComment,2021-07-26 17:18:41,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/502#pullrequestreview-715098040""}"
502,BaseRefChanged,2021-07-26 17:23:28,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5069758150"", ""commit_url"": null}"
502,IssueComment,2021-07-26 17:47:34,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3275](https://coveralls.io/builds/41655675)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41655675/badge)](https://coveralls.io/builds/41655675) |
| :-- | --: |
| Change from base [Build 3246](https://coveralls.io/builds/41476656): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/886902470"", ""author_association"": ""NONE""}"
502,BaseRefChanged,2021-07-26 17:48:55,nchevsky,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5069871533"", ""commit_url"": null}"
502,BaseRefChanged,2021-07-26 17:49:47,nchevsky,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5069875465"", ""commit_url"": null}"
502,IssueComment,2021-07-26 19:27:57,stefanberger,fork_merge,I merged it into master.next,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/886967395"", ""author_association"": ""OWNER""}"
502,MergePR,2021-07-26 19:28:03,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5070336078"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/319d4f79dd5bde0ad8088fbeb6b14508d74d361c""}"
502,IssueCommentSupplement,2021-07-26 19:34:49,stefanberger,fork_merge,"Ok, commit title looks good. Will merge it into master shortly.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/886971380"", ""author_association"": ""OWNER""}"
503,SubmitCommit,2021-07-26 19:28:02,nchevsky,unfork_merge,"Debian packaging improvements

- debian/clean: Add files that were not being automatically cleaned
  up by dh(1)'s `clean` target.
- debian/control:
  - Add new recommended/required fields and bump Standards-Version.
  - Remove redundant build dependencies that are implied transitively.
  - Bump debhelper dependency version to match debian/compat.
  - Move swtpm-libs's ${misc:Pre-Depends} dependency to `Pre-Depends`.
    Resolves `depends-on-misc-pre-depends` Lintian warning.
  - Sort packages and dependency lists alphabetically as per
    wrap-and-sort(1).
- debian/not-installed: List deliberately non-installed files to
  avoid dh_missing(1) warnings.
- debian/rules:
  - Pass --no-scripts to dh_makeshlibs(1) in order to keep a
    ldconfig(8) trigger from being implicitly added, which for
    this package was redundant and triggered Lintian warning
    `package-has-unnecessary-activation-of-ldconfig-trigger`.
  - Remove redundant --parallel dh flag.
  - Remove redundant dh_usrlocal override.
- debian/*.install:
  - Add swtpm-create-tpmca(8) and its manpage, which were missing.
  - Remove redundant `#! /usr/bin/dh-exec` lines.
  - Sort entries alphabetically as per wrap-and-sort(1).
- debian/swtpm-tools.postinst.in: Add `set -e` to fail in case of
  error. Fixes `maintainer-script-ignores-errors` Lintian warning.

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""319d4f79dd5bde0ad8088fbeb6b14508d74d361c"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-23T20:15:22Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@us.ibm.com"", ""date"": ""2021-07-26T19:28:02Z""}}"
503,OpenPR,2021-07-26 19:31:16,stefanberger,unfork_merge,,
503,IssueComment,2021-07-26 21:21:45,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3278](https://coveralls.io/builds/41661930)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41661930/badge)](https://coveralls.io/builds/41661930) |
| :-- | --: |
| Change from base [Build 3273](https://coveralls.io/builds/41627604): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887036509"", ""author_association"": ""NONE""}"
503,MergePR,2021-07-26 21:22:41,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5070834563"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4eb47cb0cab4819e5d99ccd78ec257236ddf0f7d""}"
504,OpenPR,2021-07-26 20:54:06,stefanberger,unfork_merge,,
504,CrossReferenced,2021-07-26 20:58:49,stefanberger,unfork_merge,AM_CFLAGS/AM_LDFLAGS no longer used,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/483"", ""is_pull_request"": false}}"
504,IssueComment,2021-07-26 22:39:28,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3299](https://coveralls.io/builds/41693420)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41693420/badge)](https://coveralls.io/builds/41693420) |
| :-- | --: |
| Change from base [Build 3290](https://coveralls.io/builds/41664828): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887074567"", ""author_association"": ""NONE""}"
504,IssueComment,2021-07-27 12:43:47,elmarco,unfork_merge,lgtm,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887479900"", ""author_association"": ""CONTRIBUTOR""}"
504,Revise,2021-07-27 12:51:30,stefanberger,unfork_merge,"Revert ""build-sys: Report $CFLAGS and $LDFLAGS at the end""

This reverts commit 5c5856ea8fce978a20051e3efc4d7ad4c6e35d10.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""ac9e6824c0dbb94d47768be69f4798783a2a0570"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-26T20:57:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T12:51:30Z""}}"
504,Revise,2021-07-27 12:51:30,stefanberger,unfork_merge,"Revert ""build-sys: Remove using AM_CFLAGS and AM_LDFLAGS""

This reverts commit 7f81d3128804fc4753d263ff39062fb706bc666c.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""da0ad7c643dfaf05193d6c9b72897ade456e8412"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-26T20:57:49Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T12:51:30Z""}}"
504,Revise,2021-07-27 12:51:30,stefanberger,unfork_merge,"Revert ""build-sys: Remove AC_SUBST() for AM_CFLAGS and AM_LDFLAGS""

This reverts commit 47f973ed71a2c6baec58ed5aa6c0106cff64add6.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""50a11dba52b79bc57e4630cd3ba87c1817332eb5"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-26T20:57:54Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T12:51:30Z""}}"
504,IssueComment,2021-07-27 13:54:09,stefanberger,unfork_merge,"The only remaining dent is this:
```
CDPATH=""${ZSH_VERSION+.}:"" && cd . && /bin/sh /home/stefanb/dev/swtpm/missing aclocal-1.16 -I m4
configure.ac:587: warning: macro 'AM_CFLAGS' not found in library
configure.ac:590: warning: macro 'AM_LDFLAGS' not found in library
```
The warnings are due to the prefix AM_ as it seems.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887533119"", ""author_association"": ""OWNER""}"
504,IssueComment,2021-07-27 14:19:21,stefanberger,unfork_merge,Prefixed the offending variables now with `MY_` to have MY_LDFLAGS and MY_CFLAGS.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887553426"", ""author_association"": ""OWNER""}"
504,IssueComment,2021-07-27 14:29:29,elmarco,unfork_merge,"sounds fine to me, thanks!","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887561830"", ""author_association"": ""CONTRIBUTOR""}"
504,IssueComment,2021-07-27 14:52:38,stefanberger,unfork_merge,@kloczek  Looks good to you?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887580383"", ""author_association"": ""OWNER""}"
504,ClosePR,2021-07-27 14:52:38,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5074856023"", ""commit_url"": null}"
504,ReopenPR,2021-07-27 14:52:42,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5074856423"", ""commit_url"": null}"
504,Revise,2021-07-27 17:11:24,stefanberger,unfork_merge,"build-sys: Rename AM_CFLAGS/LDFLAGS to MY_CFLAGS/LDFLAGS

To avoid the following warning use MY_ as a prefix for the offending
variables that have AM_ as a prefix:

configure.ac:587: warning: macro 'AM_CFLAGS' not found in library
configure.ac:590: warning: macro 'AM_LDFLAGS' not found in library

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9fd04d1ac1f246518c441a92b0d78248cb6a096d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T14:13:49Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T17:11:24Z""}}"
504,Revise,2021-07-27 17:15:06,stefanberger,unfork_merge,"build-sys: Add MY_CFLAGS, CFLAGS, and MY_LDFLAGS to all Makefile.am's

Add MY_CFLAGS, CFLAGS, and MY_LDFLAGS to all Makefile.am's so that they
can be defined during configure time as well as CFLAGS added during
build time. LDFLAGS were already handled correctly during build-time.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""e4a6bb4f9ac05d233e46bb277a175b1f362d4b98"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-26T20:57:24Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-27T17:15:06Z""}}"
504,MergePR,2021-07-27 19:39:48,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5076328848"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/cab1e2186fa6f73ffe5848362d5f7c5a2c555bdb""}"
504,DeleteBranch,2021-07-27 19:39:51,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5076329189"", ""commit_url"": null}"
505,OpenPR,2021-07-27 19:25:00,nchevsky,fork_merge,,
505,CrossReferenced,2021-07-27 19:26:11,nchevsky,fork_merge,RFC: Move swtpm-localca(8) and friends from /usr/share/swtpm to /usr/bin,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/499"", ""is_pull_request"": false}}"
505,ReviewComment,2021-07-27 19:31:43,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/505#pullrequestreview-716301341""}"
505,ReviewComment,2021-07-27 19:33:43,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/505#pullrequestreview-716302942""}"
505,ReviewComment,2021-07-27 19:35:18,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/505#pullrequestreview-716304377""}"
505,CrossReferenced,2021-07-27 19:41:55,nchevsky,fork_merge,Rename swtpm_localca binary to swtpm-localca,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/506"", ""is_pull_request"": true}}"
505,Revise,2021-07-27 19:43:14,nchevsky,fork_merge,"Change swtpm-localca to swtpm_localca in manpages

- Move content of swtpm-localca(8) manual page to swtpm_localca(8)
  and make swtpm-localca(8) an alias for swtpm_localca(8), mirroring
  the fact that /usr/bin/swtpm_localca is the actual program and
  /usr/share/swtpm/swtpm-localca a wrapper for it.
- Change references to `swtpm-localca` in manual pages' content to
  `swtpm_localca`, reflecting the actual name of the program they are
  meant to document.

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""c95aac4445f7954d661e9c1f4cff3addf1db6a2d"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-27T18:54:45Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-27T19:43:14Z""}}"
505,IssueComment,2021-07-27 19:51:19,stefanberger,fork_merge,Thanks for all your efforts! I have a slight preference for this one.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887789673"", ""author_association"": ""OWNER""}"
505,IssueComment,2021-07-27 19:56:55,nchevsky,fork_merge,"> Thanks for all your efforts! I have a slight preference for this one.

My pleasure, and thank *you* for this project!","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887793073"", ""author_association"": ""CONTRIBUTOR""}"
505,IssueComment,2021-07-27 23:28:50,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3305](https://coveralls.io/builds/41700841)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41700841/badge)](https://coveralls.io/builds/41700841) |
| :-- | --: |
| Change from base [Build 3304](https://coveralls.io/builds/41699798): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887899842"", ""author_association"": ""NONE""}"
505,MergePR,2021-07-28 00:05:42,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5077217609"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3d5ae5e1d6e811f12277510c2de9faf7ecc44c0b""}"
505,DeleteBranch,2021-07-31 17:11:03,nchevsky,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5094551134"", ""commit_url"": null}"
506,SubmitCommit,2021-07-27 19:13:56,nchevsky,fork_close,"Rename `swtpm_localca` binary to `swtpm-localca`

Change the name of the /usr/bin-installed binary from `swtpm_localca`
to `swtpm-localca` for consistency with the swtpm-localca(8) manpage
and the /usr/share/swtpm/swtpm-localca wrapper script.

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""e13feb8299f36b22fb963c220530a2fc515c1e3f"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-27T19:13:56Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-27T19:13:56Z""}}"
506,OpenPR,2021-07-27 19:25:03,nchevsky,fork_close,,
506,CrossReferenced,2021-07-27 19:26:11,nchevsky,fork_close,RFC: Move swtpm-localca(8) and friends from /usr/share/swtpm to /usr/bin,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/499"", ""is_pull_request"": false}}"
506,CrossReferenced,2021-07-27 19:41:42,nchevsky,fork_close,Change swtpm-localca to swtpm_localca in manpages,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/505"", ""is_pull_request"": true}}"
506,IssueCommentSupplement,2021-07-28 00:08:51,nchevsky,fork_close,Closing in favor of merged pull request #505.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/887914001"", ""author_association"": ""CONTRIBUTOR""}"
506,ClosePR,2021-07-28 00:08:51,nchevsky,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5077225461"", ""commit_url"": null}"
506,DeleteBranch,2021-07-31 17:10:54,nchevsky,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5094551029"", ""commit_url"": null}"
507,OpenPR,2021-07-28 13:44:00,stefanberger,unfork_merge,,
507,CrossReferenced,2021-07-28 13:45:35,stefanberger,unfork_merge,0.6.0: test suite is failing,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/454"", ""is_pull_request"": false}}"
507,Revise,2021-07-28 14:03:47,stefanberger,unfork_merge,"tests: Replace ${SWTPM}.pid with swtpm.pid in PID filename in 2 test cases

The PID filename was generated using the ${SWTPM} environment variable,
which caused test failures if set to a URL for example. Replace it with
'swptm'.

This issue was reported in issue #454.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7688c05ad48c8daf5a7aa42587db8805116e4253"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-28T12:49:40Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-28T14:03:47Z""}}"
507,IssueComment,2021-07-28 17:35:04,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3315](https://coveralls.io/builds/41726118)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.376%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41726118/badge)](https://coveralls.io/builds/41726118) |
| :-- | --: |
| Change from base [Build 3306](https://coveralls.io/builds/41702888): |  0.0% |
| Covered Lines: | 5510 |
| Relevant Lines: | 7310 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/888492110"", ""author_association"": ""NONE""}"
507,MergePR,2021-07-28 17:39:56,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5081610069"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/545738181ed473d5cebb9e3eabfa15ccfec2c0d7""}"
507,DeleteBranch,2021-07-28 17:39:59,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5081610289"", ""commit_url"": null}"
508,SubmitCommit,2021-07-28 14:01:15,stefanberger,unfork_merge,"tests: Replace ${SWTPM}.pid with swtpm.pid in PID filename in 2 test cases

The PID filename was generated using the ${SWTPM} environment variable,
which caused test failures if set to a URL for example. Replace it with
'swptm'.

This issue was reported in issue #454.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""93a58847c4a86bd2fa926ac1bca3e8da6e6c19dd"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.vnet.ibm.com"", ""date"": ""2021-07-28T12:49:40Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-28T14:01:15Z""}}"
508,OpenPR,2021-07-28 16:28:53,stefanberger,unfork_merge,,
508,IssueComment,2021-07-28 18:13:38,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3316](https://coveralls.io/builds/41727297)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.516%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41727297/badge)](https://coveralls.io/builds/41727297) |
| :-- | --: |
| Change from base [Build 3312](https://coveralls.io/builds/41722358): |  0.0% |
| Covered Lines: | 5430 |
| Relevant Lines: | 7287 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/888517451"", ""author_association"": ""NONE""}"
508,MergePR,2021-07-28 18:21:42,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5081844058"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/84dbe0c3e131bc0445e3812b7bb459e1c21014c0""}"
509,OpenPR,2021-07-31 17:34:10,nchevsky,fork_merge,,
509,RenameTitle,2021-07-31 17:42:32,nchevsky,fork_merge,,"{""rename"": {""from"": ""Preserve main loop's flags when handling CMD_SET_DATAFD"", ""to"": ""Preserve main loop flags when handling CMD_SET_DATAFD""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5094574787""}"
509,IssueComment,2021-07-31 18:13:18,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3330](https://coveralls.io/builds/41815139)

* **1** of **1**   **(100.0%)**  changed or added relevant line in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.38%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41815139/badge)](https://coveralls.io/builds/41815139) |
| :-- | --: |
| Change from base [Build 3329](https://coveralls.io/builds/41814125): |  0.0% |
| Covered Lines: | 5548 |
| Relevant Lines: | 7360 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890385242"", ""author_association"": ""NONE""}"
509,IssueComment,2021-07-31 20:54:41,stefanberger,fork_merge,Can you write an example (or two) into the commit message of something that didn't work anymore due to this?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890403012"", ""author_association"": ""OWNER""}"
509,ReviewComment,2021-07-31 20:56:08,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/509#pullrequestreview-719602911""}"
509,IssueComment,2021-07-31 21:14:34,stefanberger,fork_merge,"> 
> 
> Can you write an example (or two) into the commit message of something that didn't work anymore due to this?

Actually the available flags are:
```
#define MAIN_LOOP_FLAG_TERMINATE  (1 << 0)
#define MAIN_LOOP_FLAG_USE_FD     (1 << 1)
#define MAIN_LOOP_FLAG_KEEP_CONNECTION (1 << 2)
#define MAIN_LOOP_FLAG_END_ON_HUP (1 << 3)
```

The TERMINATE flag is the only one that was cleared previously, if it was set at all.  When swtpm is started by libvirt and QEMU talks to it I don't think that this flag was set. So I think this won't have any negative side effects. The MAIN_LOOP_FLAG_END_ON_HUP gets us out of the main loop then (comment there should include UnixIO...).","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890404646"", ""author_association"": ""OWNER""}"
509,IssueComment,2021-07-31 22:43:05,nchevsky,fork_merge,"> The TERMINATE flag is the only one that was cleared previously, if it was set at all. When swtpm is started by libvirt and QEMU talks to it I don't think that this flag was set. So I think this won't have any negative side effects. The MAIN_LOOP_FLAG_END_ON_HUP gets us out of the main loop then (comment there should include UnixIO...).

Yeah, I actually spent the better part of a day studying the main loop in different use cases (socket + TCP, socket + UnixIO, `CMD_SET_DATAFD`, etc.) and came to the same conclusion. Now, even though nothing is effectively broken by this _at this moment_, that's really just luck—I still consider this to be a bug and don't see a reason _not_ to fix it; plus, you never know when down the road you may add new flags that _will_ break expected behavior if overwritten. ????

For context, the reason I even discovered this was precisely the `MAIN_LOOP_FLAG_END_ON_HUP` flag being set in that same statement. I was testing `swtpm` with QEMU (manually; no `libvirt` involved) and, in spite of my _not_ providing the `--terminate` argument, `swtpm` would terminate every time the data connection dropped. I didn't want this—I wanted the daemon to stick around so that I could reuse it and start/stop my VM without having to relaunch `swtpm` along with it every time. I then realized this was happening for two reasons:

1. When QEMU exits gracefully, it issues `CMD_SHUTDOWN` to `swtpm`. This can't be changed, so let's forget about it for now.
2. Even if QEMU doesn't send `CMD_SHUTDOWN`, `swtpm` terminates anyway due to `MAIN_LOOP_FLAG_END_ON_HUP` having been set by the `CMD_SET_DATAFD` handler, which causes the main loop to terminate unconditionally when the data connection drops, regardless of whether `--terminate` was given by the user. In fact, the code that handles `--terminate` isn't even evaluated because the loops exits earlier.

To me, this is conceptually wrong because:

1. The manual page states that `--terminate` is supported by the `socket` interface, with no strings attached. However, when `CMD_SET_DATAFD` is involved, `--terminate` is bypassed and no longer respected (and this isn't documented).
2. The documentation implies that if one _doesn't_ specify `--terminate`, the daemon won't terminate, period. However, `CMD_SET_DATAFD` causes the daemon to terminate anyway, contrary to the documented behavior.
3. Conceptually, I see no reason why `CMD_SET_DATAFD` should even affect the daemon's behavior one way or the other. Why not just stick to doing what it says it does—setting the file descriptor—and nothing else?
4. There's no technical impediment to the daemon staying up when `CMD_SET_DATAFD` is involved; I've tested this (by removing the `MAIN_LOOP_FLAG_END_ON_HUP` flag and `SIGKILL`ing QEMU to avoid `CMD_SHUTDOWN`) and it works great. Most importantly, it allows me to choose the behavior I want by either giving or omitting `--terminate`. If QEMU front-ends (e.g. libvirt, Proxmox) want this behavior, they can (and should) just use `--terminate`.
4. While the documentation does state that `--fd` implies `--terminate`, no such statement is made for the case where a file descriptor is passed in via the control channel with `CMD_SET_DATAFD`. If this is in fact the intended behavior, we should at least document it.

Anyway, back to the original point: I feel we should change the `=` assignment to `|=` regardless of the above, even if it doesn't _currently_ fix anything—it's free and can only help avoid problems in the future.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890412478"", ""author_association"": ""CONTRIBUTOR""}"
509,IssueComment,2021-07-31 23:29:35,stefanberger,fork_merge,"So maybe one solution would be to remove the MAIN_LOOP_FLAG_END_ON_HUP at the location of your patch. The  terminating behavior has been around for a long time, though. But at least QEMU ends up sending the SHUTDOWN command and QEMU is the main consumer for now, especially when it comes to passing of file descriptors, at least from what I know. I will have a look at this next week.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890416469"", ""author_association"": ""OWNER""}"
509,IssueComment,2021-08-01 02:32:53,nchevsky,fork_merge,"> So maybe one solution would be to remove the MAIN_LOOP_FLAG_END_ON_HUP at the location of your patch.

Right, that's what I was getting at. Before submitting this PR, I spent a long time testing main loop corner cases with `MAIN_LOOP_FLAG_END_ON_HUP` removed and the `=` assignment changed to `|=` (to preserve `MAIN_LOOP_FLAG_TERMINATE` when and if set by the user). I found no regressions and my results are documented in [this spreadsheet](https://docs.google.com/spreadsheets/d/1Bp8LWRN15P1Y_sDpK1qXg6ZXG9IwnDoZ7zcZHRYZ98s/edit?usp=sharing).

I chose to initially only submit a fix for the `=` assignment because I expected some resistance to the other change (since it alters existing behavior), so I thought I'd start with something harmless and go from there. ???? If you're open to also removing the flag, I'm all for making both changes at once—it would certainly help justify the `|=` fix, since removing the flag without also fixing the assignment still leaves `--terminate` broken.

BTW, I'm also a Proxmox contributor and we're in the early stages of integrating `swtpm`. If we proceed with removing the flag, I'll make sure Proxmox VE uses `--terminate` and gets this implemented correctly from the start.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890436994"", ""author_association"": ""CONTRIBUTOR""}"
509,RenameTitle,2021-08-01 19:32:30,nchevsky,fork_merge,,"{""rename"": {""from"": ""Preserve main loop flags when handling CMD_SET_DATAFD"", ""to"": ""swtpm: Preserve main loop flags when handling CMD_SET_DATAFD""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5095794773""}"
509,IssueComment,2021-08-01 23:12:59,stefanberger,fork_merge,"At last for QEMU we don't need --terminate from what I can see. The intended behavior is that swtpm terminates if QEMU abruptly terminates (ctrl-c on it) and that seems to be the case due to the control channel recognizing that the client disappeared. Actually, even upon ctrl-c on QEMU QEMU still sends the SHUTDOWN command

https://github.com/stefanberger/swtpm/blob/master/src/swtpm/mainloop.c#L222-L229
```
           if (pollfds[CTRL_CLIENT_FD].revents & POLLIN) {
                ctrlclntfd = ctrlchannel_process_fd(ctrlclntfd,
                                                    &mainloop_terminate,
                                                    &locality, &tpm_running,
                                                    mlp);

                if (mainloop_terminate)
                    break;
            }
```

","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890603201"", ""author_association"": ""OWNER""}"
509,IssueComment,2021-08-02 00:35:35,nchevsky,fork_merge,"Ctrl+C (`SIGINT`) is a graceful shutdown as far as QEMU is concerned, so it does indeed send `CMD_SHUTDOWN`, and `swtpm` terminates as expected. Nothing technically wrong there. (I do find it wrong for QEMU to unconditionally shut down `swtpm` for me without giving me a choice, but that's between QEMU and me.)

The code you pasted handles commands and sets `mainloop_terminate` when it receives `CMD_SHUTDOWN`, but it isn't involved in detecting connections that dropped for any other reason. The [spreadsheet](https://docs.google.com/spreadsheets/d/1Bp8LWRN15P1Y_sDpK1qXg6ZXG9IwnDoZ7zcZHRYZ98s/edit?usp=sharing) I previously linked shows where the main loop terminates when the data connection drops _not_ as the result of a command.

If you want to see what happens when QEMU _doesn't_ send `CMD_SHUTDOWN`, you have to kill it with `SIGKILL`. What you'll see then is that `swtpm` _still_ terminates, _even though you didn't specify_ `--terminate` ⚠️. It's terminating because of `MAIN_LOOP_FLAG_END_ON_HUP`, which is undocumented (and in my opinion incorrect) behavior. According to the documentation, when a connection simply drops (no command involved), the daemon should terminate if and only if `--terminate` was given. The `--terminate` flag and its documented behavior aren't being respected here, and that's all I'm trying to solve. Does that make sense?

When `swtpm` was integrated into QEMU, the designer(s) assumed that users would only want `swtpm` to launch and die along with QEMU (not what I personally want). This resulted in the following implementation decisions:

1. QEMU unconditionally sends `CMD_SHUTDOWN` on exit, and
2. `swtpm` sets `MAIN_LOOP_FLAG_END_ON_HUP` so it always dies along with QEMU, even if QEMU didn't send `CMD_SHUTDOWN`, and even if the user didn't use `--terminate` ⚠️.

Problems with the latter:

1. It's undocumented behavior.
2. It doesn't respect `--terminate` being unset.
3. The same behavior could've been achieved by invoking `swtpm` with `--terminate`. There was never any need for the `CMD_SET_DATAFD` handler to use `MAIN_LOOP_FLAG_END_ON_HUP`.

In an ideal world:

1. QEMU would have a switch to optionally suppress `CMD_SHUTDOWN`, so users could choose to leave their `swtpm` daemon alive. ???????? I plan to contribute such a switch to QEMU.
2. `swtpm`'s `CMD_SET_DATAFD` handler wouldn't set `MAIN_LOOP_FLAG_END_ON_HUP`. ???????? We can fix this now.
3. QEMU front-ends which want `swtpm` to always start and stop along with QEMU would invoke `swtpm` with `--terminate`, guaranteeing that behavior in a clean, predictable, documented way. ???????? I can make sure Proxmox does this.
4. I could choose to run `swtpm` as an always-on system service, and have QEMU connect to and disconnect from it as many times as I wanted without anything killing the daemon without my say-so. ???????? I'm already doing this with a patched QEMU (to suppress `CMD_SHUTDOWN`) and the `MAIN_LOOP_FLAG_END_ON_HUP` removed from `swtpm`'s `CMD_SET_DATAFD` handler.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890621843"", ""author_association"": ""CONTRIBUTOR""}"
509,Revise,2021-08-02 00:50:46,nchevsky,fork_merge,"swtpm: Preserve mlp->flags in CMD_SET_DATAFD handler

Fix the handler for control channel command CMD_SET_DATAFD so that
it ORs new bits onto mlp->flags instead of overwriting its value.
This was causing loss of flags previously set during command-line
argument parsing, which resulted in user-provided options (e.g.
--terminate) to be permanently ignored if command CMD_SET_DATAFD
was at any point received on the control channel.

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""9e528f67cef2a5dbe40864e960256a9e2225e54d"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-07-31T17:17:59Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-08-02T00:50:46Z""}}"
509,MergePR,2021-08-02 11:46:01,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5098544611"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/6961ec4878b4a569ac53f6e6f77416b44f3f26d9""}"
509,IssueCommentSupplement,2021-08-02 12:10:16,stefanberger,fork_merge,"The --terminate flag would also have to be part of libvirt. Also, if libvirt has the capability to kill(SIGKILL) QEMU and it would leave a running swtpm behind, then I don't think we can make this change so fast. We'd first have to add the --terminate flag to libvirt and see that that alone would terminate swtpm if the HUP flag wasn't set anymore and then only in a while remove the HUP flag. I don't want to see unused swtpm instances left behind.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890974225"", ""author_association"": ""OWNER""}"
509,IssueCommentSupplement,2021-08-02 14:46:08,stefanberger,fork_merge,"In libvirt there should be a `qemuExtDevicesStop()` after a termination of QEMU using `qemuProcessKill()`. I  only see this in [one place](https://github.com/libvirt/libvirt/blob/v7.6.0/src/qemu/qemu_process.c#L7853-L7859), but there are several places from which qemuProcessKill() is being called in that file. hm... 

So basically what we are loosing by removing the HUP flag is that swtpm is left running after an abnormal termination of QEMU (e.g. segfault) or a forceful termination of it (kill(SIGKILL)). The former shouldn't be an issue but the latter could be an issue. I haven't been able to recreate such a situation yet, but it's not clear under what conditions those various kill calls in qemu_process.c are being called...

Adding the `--terminate` flag to the command line does replace the potentially removed `HUP` flag (from ctrlchannel.c) seamlessly, though.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/891086570"", ""author_association"": ""OWNER""}"
509,IssueCommentSupplement,2021-08-02 16:22:47,nchevsky,fork_merge,"> The --terminate flag would also have to be part of libvirt.

Right, as well as Proxmox VE and any QEMU front-end that wants `swtpm` to behave that way. Then again, `--terminate` was around all along and did exactly what they wanted, so they should've just used `--terminate` instead of adding code that creates overlapping and undocumented behavior, overrides command-line arguments, and isn't controllable by the user. ????

> Also, if libvirt has the capability to kill(SIGKILL) QEMU and it would leave a running swtpm behind, then I don't think we can make this change so fast. We'd first have to add the --terminate flag to libvirt (...) and then only in a while remove the HUP flag.

Yes, of course. This is another reason I didn't initially include the flag removal in this PR: It requires coordination with third parties.

> So basically what we are loosing by removing the HUP flag is that swtpm is left running after an abnormal termination of QEMU (e.g. segfault) or a forceful termination of it (kill(SIGKILL)). The former shouldn't be an issue but the latter could be an 
issue. I haven't been able to recreate such a situation yet, but it's not clear under what conditions those various kill calls in qemu_process.c are being called...

Either one could be an issue:
- `SIGSEGV`: While rare, QEMU does crash sometimes, especially when using hardware passthrough.
- `SIGKILL`: Proxmox VE forcefully kills QEMU when VMs fail to stop after a long timeout. libvirt may do something similar.

So libvirt, Proxmox VE, and friends should definitely start using `--terminate`—it's always been the documented right way of achieving the behavior they want.

> Adding the --terminate flag to the command line does replace the potentially removed HUP flag (from ctrlchannel.c) seamlessly, though.

Yes, `--terminate` catches every possible case of the data connection dropping for any reason. `MAIN_LOOP_FLAG_END_ON_HUP` only catches a subset of cases, since `POLLHUP` doesn't apply to TCP (I know TCP is irrelevant to this discussion; I'm just saying ????).

Thank you for merging this pull request!","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/891158715"", ""author_association"": ""CONTRIBUTOR""}"
509,IssueCommentSupplement,2021-09-14 10:40:45,zippy2,fork_merge,"> In libvirt there should be a `qemuExtDevicesStop()` after a termination of QEMU using `qemuProcessKill()`. I only see this in [one place](https://github.com/libvirt/libvirt/blob/v7.6.0/src/qemu/qemu_process.c#L7853-L7859), but there are several places from which qemuProcessKill() is being called in that file. hm...

That's perfectly fine. `qemuProcessKill()` is intended to just send a signal to QEMU process. It is `qemuProcessStop()` that is called unconditionally after QEMU process died (regardless of the case, i.e. even without libvirt sending any signal to it, e.g. on monitor HUP). Therefore, it is okay to call `qemuExtDevicesStop()` just from that one place. And there is no hotplug implemented for TPM devices either (which would require starting/killing `swtmp` accordingly) so we are good on this front too.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/919031703"", ""author_association"": ""CONTRIBUTOR""}"
509,CrossReferenced,2021-09-18 23:12:46,nchevsky,fork_merge,swtpm: Don't set MAIN_LOOP_FLAG_END_ON_HUP flag in CMD_SET_DATAFD handler,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/541"", ""is_pull_request"": true}}"
510,SubmitCommit,2021-07-31 23:41:25,stefanberger,unfork_merge,"swtpm: Use the pollfd array's enums as indices when initializing the array

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""40a578af2b452ad9f1094607ce15708a0b28051d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-31T23:38:54Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-07-31T23:41:25Z""}}"
510,OpenPR,2021-07-31 23:41:54,stefanberger,unfork_merge,,
510,IssueComment,2021-08-01 00:58:50,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3328](https://coveralls.io/builds/41804850)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.38%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/41804850/badge)](https://coveralls.io/builds/41804850) |
| :-- | --: |
| Change from base [Build 3325](https://coveralls.io/builds/41795393): |  0.0% |
| Covered Lines: | 5548 |
| Relevant Lines: | 7360 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/890425494"", ""author_association"": ""NONE""}"
510,MergePR,2021-08-01 22:49:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5095957549"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/6f7a1e2769fd5c3000f83c7dede221faeb2c6ed9""}"
513,OpenPR,2021-08-05 14:08:01,PiMaker,fork_merge,,
513,IssueComment,2021-08-05 14:46:48,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3569](https://coveralls.io/builds/43279443)

* **200** of **274**   **(72.99%)**  changed or added relevant lines in **5** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.1%**) to **75.53%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_nvstore_linear.c](https://coveralls.io/builds/43279443/source?filename=src%2Fswtpm%2Fswtpm_nvstore_linear.c#L51) | 131 | 155 | 84.52%
| [src/swtpm/swtpm_nvstore_linear_file.c](https://coveralls.io/builds/43279443/source?filename=src%2Fswtpm%2Fswtpm_nvstore_linear_file.c#L51) | 63 | 113 | 55.75%
<!-- | **Total:** | **200** | **274** | **72.99%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/43279443/badge)](https://coveralls.io/builds/43279443) |
| :-- | --: |
| Change from base [Build 3567](https://coveralls.io/builds/43266848): |  -0.1% |
| Covered Lines: | 5988 |
| Relevant Lines: | 7928 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/893519250"", ""author_association"": ""NONE""}"
513,CrossReferenced,2021-08-05 19:56:32,stefanberger,fork_merge,swtpm: Abstract NVRAM interface for pluggable state store,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/490"", ""is_pull_request"": true}}"
513,IssueComment,2021-08-07 18:53:55,stefanberger,fork_merge,"So where should this particular backend be used? What are the use cases versus the current one?

Also, do you intend to write multiple swtpms' states into this linear backend 'somehow' or what is the advantage of this backend versus the one that we currently have? I understand it works with block devices but just for making sense of using a block device one would have to write multiple swtpm instances' state into that block device 'somehow' otherwise using a block device seems wasteful. You would have to have some sort of directory and a unique identifier for each swtpm to be able to differentiate state blobs. How much space would you pre-allocate for each blob and what if some day that blob isn't big enough anymore, how do you re-organize this? You need locking to possibly avoid concurrency issues at least when modifying the directory. At least locking which would be easier if you are just on one host versus some sort of shared block device accesses by different hosts. You could use some sort of file for locking against concurrent access. Further, somehow you need to manage deletion of swtpm instances along with their blobs. This is currently a directory removal done by libvirt for example... None of this seems so convincing to me and the questions I have for iscsi are applying to a block device as well.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/894693124"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-08-09 08:23:44,PiMaker,fork_merge,"> So where should this particular backend be used? What are the use cases versus the current one?

The use cases are as described in #461. For VM management software, it is very much preferable to store state in a single file, regardless if that is a block device or a regular file (fortunately linux abstracts that away for us anyway). Our use case includes a High Availability stack based on block devices, and (as also described in #461) using FUSE or some other way of putting a filesystem on it just isn't the way forward.

The proposed iSCSI backend could also make use of the infrastructure added with this patch, so implementing it should be simpler (as long as the interface I propose is deemed compatible enough, open for changes of course).

> Also, do you intend to write multiple swtpms' states into this linear backend 'somehow' or what is the advantage of this backend versus the one that we currently have?

""The one we currently have"" is the one using a directory on a filesystem? Well, then the advantage is that this one doesn't require that and works on a block device, yes ;)

> I understand it works with block devices but just for making sense of using a block device one would have to write multiple swtpm instances' state into that block device 'somehow' otherwise using a block device seems wasteful. You would have to have some sort of directory and a unique identifier for each swtpm to be able to differentiate state blobs. How much space would you pre-allocate for each blob and what if some day that blob isn't big enough anymore, how do you re-organize this?

That is already implemented in this draft. See `SWTPM_NVRAM_Linear_AllocFile` and `SWTPM_NVRAM_Linear_RemoveFile` in `src/swtpm/swtpm_nvstore_linear.c` from my first commit.

The way I'm doing it now is by sizing the allocation dynamically. A static header structure (`nvram_linear_hdr`, currently with a limit of 15 files, so 5 TPMs with up to 3 states each) contains pointers to where the data is located within the address space of the file. This isn't the most efficient way, as it requires potentially expensive moves to clean up any ""holes"" that open up on removal or resizing (which happens by removal and re-insertion), but since data sizes are fairly small, this shouldn't be much of an issue IMHO. This means however, that there is no maximum size of blobs, as they can grow dynamically (regular files are `ftruncate`d if too small, block devices must simply be big enough to begin with, that is the responsibility of the user).

This is the main reason for the second abstraction layer, the allocation strategy is unified, and it ensures compatibility between different implementations. A user could, for example, simply copy the data byte-for-byte from a block dev or file to an iSCSI target, change the backend URI, and swtpm would happily load the state.

> You need locking to possibly avoid concurrency issues at least when modifying the directory. At least locking which would be easier if you are just on one host versus some sort of shared block device accesses by different hosts. You could use some sort of file for locking against concurrent access.

Of course locking across multiple machines or similar distributed systems is out of scope entirely here. Locking on a single machine can be done, for example by creating a simple lock file based on the full path or major/minor combo in case of a block device. Then just `flock` away.

Our particular use case does not require locking, as we do that in our HA stack already, but I can implement something sensible if deemed a requirement.

> None of this seems so convincing to me and the questions I have for iscsi are applying to a block device as well.

As already said, storing state in a single file as opposed to a directory is a lot easier to handle for VM management. Be that via iSCSI, RBD, a block device, or whatever else you can come up with. swtpm is a supplement to QEMU, and there is a reason QEMU supports so many storage backends.

In our use case this is particularly true, but I can imagine other systems will see it as a benefit too. I believe this request was bound to come up sooner or later, as more hypervisor-management platforms add full TPM support to their stack (now that Windows is so set on requiring it).","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/895039147"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-08-24 15:14:13,PiMaker,fork_merge,rebased for your convenience :),"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/904731999"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-09-22 11:12:22,PiMaker,fork_merge,"Any updates on this? I've rebased again and tried to increase test coverage by also testing on a block device, although the CI seems to ""SKIP"" both new tests now - it ran them for the first version of this PR, at least according to coveralls...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924829921"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-09-22 14:59:47,stefanberger,fork_merge,So this PR is now beyond draft level? I will play around  with it a bit...,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/925014160"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-09-22 15:05:03,stefanberger,fork_merge,"It would certainly be desirable to have better coverage ...

Does this backend support concurrent access by multiple swtpms to the same device?","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/925018947"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-09-22 15:10:55,PiMaker,fork_merge,"> So this PR is now beyond draft level? I will play around with it a bit...

I think I misinterpreted what ""Draft"" means here, so I removed the tag. The code is only updated to the rebase, not fundamentally changed from the first version, which already worked fine.

> It would certainly be desirable to have better coverage ...

As said, the tests are there (`test_tpm2_save_load_state_2_linear` and `test_tpm2_save_load_state_2_block`) and in the first version the former was run, but this time around CI appears to have skipped both?

> Does this backend support concurrent access by multiple swtpms to the same device?

If by ""device"" you mean the backing file, then no, and since there is no locking atm (see my other posts) using it concurrently will lead to data corruption.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/925024243"", ""author_association"": ""CONTRIBUTOR""}"
513,ReviewComment,2021-09-22 16:11:50,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-761131065""}"
513,ReviewComment,2021-09-22 16:12:03,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-761131301""}"
513,IssueComment,2021-09-22 16:18:19,stefanberger,fork_merge,"What is the advantage of this backend over the existing one? Is it performance? Why do we need it and who should make use of it?

I also think we should wait until we can setup a TPM instance using swtpm_setup where the backend type parameter needs to be passed from the swtpm_setup command line to the swtpm command line.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/925082349"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-09-23 08:00:36,PiMaker,fork_merge,"> What is the advantage of this backend over the existing one? Is it performance? Why do we need it and who should make use of it?

I think my post from Aug 9 answers that already, but in short, it's about manageability. Most VM HA and management stacks I know (that includes ours) work with block devices rather than filesystems.

> I also think we should wait until we can setup a TPM instance using swtpm_setup where the backend type parameter needs to be passed from the swtpm_setup command line to the swtpm command line.

Sounds reasonable, is there work being done on this already?

Locking is something I can implement if necessary, but wouldn't be required for our use-case. It's not too trivial, since we can't just place a lock file next to the file (we might not own the surrounding dir), but somewhere in 'temp' mapped to the canonical filename should be ok.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/925586609"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-09-24 13:16:30,stefanberger,fork_merge,"> > I also think we should wait until we can setup a TPM instance using swtpm_setup where the backend type parameter needs to be passed from the swtpm_setup command line to the swtpm command line.
> 
> Sounds reasonable, is there work being done on this already?

I haven't looked at. Maybe @Etsukata has something already?","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/926616791"", ""author_association"": ""OWNER""}"
513,ReviewComment,2021-09-24 17:47:34,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-763335806""}"
513,ReviewComment,2021-09-24 17:51:50,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-763339180""}"
513,ReviewComment,2021-09-24 17:54:42,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-763341483""}"
513,IssueComment,2021-09-24 21:44:29,Etsukata,fork_merge,"> > > I also think we should wait until we can setup a TPM instance using swtpm_setup where the backend type parameter needs to be passed from the swtpm_setup command line to the swtpm command line.
> > 
> > 
> > Sounds reasonable, is there work being done on this already?
> 
> I haven't looked at. Maybe @Etsukata has something already?

I haven't coded that part yet.
I really appreciate it if you could work on it @PiMaker, thanks.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/926935859"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-09-27 08:51:58,PiMaker,fork_merge,"> > > > I also think we should wait until we can setup a TPM instance using swtpm_setup where the backend type parameter needs to be passed from the swtpm_setup command line to the swtpm command line.
> > > 
> > > 
> > > Sounds reasonable, is there work being done on this already?
> > 
> > 
> > I haven't looked at. Maybe @Etsukata has something already?
> 
> I haven't coded that part yet.
> I really appreciate it if you could work on it @PiMaker, thanks.

I'll take a look after cleaning up and rebasing this PR.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/927662510"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-09-27 16:06:00,PiMaker,fork_merge,"Changes:
* rebase
* use `cleanup` method for linear backend, add `cleanup` API to the store backends too and use it
* remove `swtpm_nvstore_linear_file.h` in favor of static declarations and put ""store ops"" struct def in `swtpm_nvstore_linear.h` instead, while `nvram_linear_ops` is moved to `swtpm_nvstore.h` like in #556
* cleaned up `swtpm_nvstore_linear.h` a bit, left `nvram_linear_hdr` and consorts in though, since it is used by `swtpm_nvstore_linear_file.c`
* consolidate entire ""linear backend"" state into single anonymous ""state"" struct instead of partially in a struct and partially just statics","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/928024860"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-09-30 14:04:07,PiMaker,fork_merge,"rebased again and added support for the new `check_state` function

edit: is the slight decrease in coverage ok for merging still? most of it comes from not testing the specific syscall error paths AFAICT","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/931353375"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-09-30 14:14:11,stefanberger,fork_merge,"> edit: is the slight decrease in coverage ok for merging still? most of it comes from not testing the specific syscall error paths AFAICT

That would be ok, but what would be more important is that swtpm_setup can actually use this backend and we don't have support for this yet.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/931362333"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-09-30 14:14:51,stefanberger,fork_merge,... and you will be maintaining this backend long-term?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/931362941"", ""author_association"": ""OWNER""}"
513,CrossReferenced,2021-09-30 14:15:10,PiMaker,fork_merge,swtpm_setup: improve --tpmstate handling to allow support for file:// backends,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/570"", ""is_pull_request"": true}}"
513,IssueComment,2021-09-30 14:18:39,PiMaker,fork_merge,"see also: #570

This isn't that much code, so I'm sure either me or someone else from our team can step up if issues arise in the future.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/931366251"", ""author_association"": ""CONTRIBUTOR""}"
513,ReviewRejected,2021-09-30 17:59:00,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-768164951""}"
513,ReviewRejected,2021-10-04 13:02:15,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-770236278""}"
513,IssueComment,2021-10-04 15:09:16,stefanberger,fork_merge,"> This isn't that much code, so I'm sure either me or someone else from our team can step up if issues arise in the future.

Then I'd merge it but please remove the [RFC] from the PR if you really want this.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/933580158"", ""author_association"": ""OWNER""}"
513,ReviewComment,2021-10-04 15:11:56,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-770430664""}"
513,RenameTitle,2021-10-04 15:26:04,PiMaker,fork_merge,,"{""rename"": {""from"": ""[RFC] swtpm: add \""linear\"" nvram store backend (for single-file storage and block devices)"", ""to"": ""swtpm: add \""linear\"" nvram store backend (for single-file storage and block devices)""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5404843623""}"
513,IssueComment,2021-10-04 15:27:11,PiMaker,fork_merge,"> > This isn't that much code, so I'm sure either me or someone else from our team can step up if issues arise in the future.
> 
> Then I'd merge it but please remove the [RFC] from the PR if you really want this.

Thanks a lot! I just fixed up the last `malloc/free` comment. I didn't know you could edit the title of PRs on GH, would have done so sooner...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/933598101"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-10-04 15:41:40,stefanberger,fork_merge,"Another issue cropped up running the tests locally as root:

```
[...]
FAIL: test_tpm2_save_load_state_2_block
PASS: test_tpm2_setbuffersize
PASS: test_tpm2_volatilestate
PASS: test_tpm2_wrongorder
PASS: test_tpm2_save_load_state_2_linear
PASS: test_tpm2_probe
PASS: test_tpm2_save_load_state_2
PASS: test_tpm2_swtpm_setup_overwrite
PASS: test_tpm2_save_load_state_3
```

My guess is the tests  test_tpm2_save_load_state_2 and its 2 new siblings now need 3 ports for 3 concurrent runs.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/933611079"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-10-04 15:46:39,stefanberger,fork_merge,"The ports range of 65460-65469 is completely unused. Maybe we move the test there.
Another choice would be to rename `test_tpm2_save_load_state_2` to `test_tpm2_save_load_state_2.test` and then introduce dependencies via log files to serialize the test runs like here. All 3 tests would then have to have the suffix `.test` in their name.

```
# Prevent concurrency between these two
test_tpm2_samples_create_tpmca.log: test_tpm2_swtpm_localca_pkcs11.log
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/933615252"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-10-04 15:51:32,PiMaker,fork_merge,"Never had that here, I've ran the tests quite rigurously. I'd be fine with either change (other port or serializing make) if that fixes the issue for you.

Unfortunately I have to run for today (timezones...), but I can take a look tomorrow if you want. Otherwise I'd say make that a followup since you seem to have a fix already? :)","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/933619169"", ""author_association"": ""CONTRIBUTOR""}"
513,ReviewComment,2021-10-04 15:56:54,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-770485062""}"
513,IssueComment,2021-10-04 16:04:27,stefanberger,fork_merge,"> Unfortunately I have to run for today (timezones...), but I can take a look tomorrow if you want. Otherwise I'd say make that a followup since you seem to have a fix already? :)

There's time tomorrow also. I can reliably reproduce this error with this command line:

```
sudo bash -c ""SWTPM_TEST_IBMTSS2=1 LSAN_OPTIONS=fast_unwind_on_malloc=0 make -j12 check VERBOSE=1""
```

I don't understand why ASAN didn't show the memory leak...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/933630154"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-10-05 09:14:09,PiMaker,fork_merge,"> The ports range of 65460-65469 is completely unused. Maybe we move the test there.

That's what I went with, I moved all three `test_tpm2_save_load_state_2*` tests to that range and made `_block` and `_linear` differ. This fixes the tests with the reproducing command line on my end.

> I don't understand why ASAN didn't show the memory leak...

I don't have experience with ASAN, but weirdly enough, valgrind doesn't show any leakage either (if I revert the 'free' change in cleanup)...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934221589"", ""author_association"": ""CONTRIBUTOR""}"
513,IssueComment,2021-10-05 11:55:19,stefanberger,fork_merge,"You seem to have built valgrind into the patch now. I get an error now in all 3 tests due to open file descriptor:

```
FAIL: test_tpm2_save_load_state_2
=================================

/usr/bin/tssnvdefinespace
/usr/bin/tssstartup
==2971800== Memcheck, a memory error detector
==2971800== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==2971800== Using Valgrind-3.17.0 and LibVEX; rerun with -h for copyright info
==2971800== Command: swtpm socket --print-capabilities
==2971800==
==2971800==
==2971800== FILE DESCRIPTORS: 3 open (3 std) at exit.
==2971800==
==2971800== HEAP SUMMARY:
==2971800==     in use at exit: 18,812 bytes in 10 blocks
==2971800==   total heap usage: 17 allocs, 7 frees, 23,601 bytes allocated
==2971800==
==2971800== LEAK SUMMARY:
==2971800==    definitely lost: 0 bytes in 0 blocks
==2971800==    indirectly lost: 0 bytes in 0 blocks
==2971800==      possibly lost: 0 bytes in 0 blocks
==2971800==    still reachable: 18,812 bytes in 10 blocks
==2971800==         suppressed: 0 bytes in 0 blocks
==2971800== Reachable blocks (those to which a pointer was found) are not shown.
==2971800== To see them, rerun with: --leak-check=full --show-leak-kinds=all
==2971800==
==2971800== For lists of detected and suppressed errors, rerun with: -s
==2971800== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
==2975669== Memcheck, a memory error detector
==2975669== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==2975669== Using Valgrind-3.17.0 and LibVEX; rerun with -h for copyright info
==2975669== Command: swtpm socket --server port=65460 --tpmstate dir=/tmp/tmp.eokZYmcnwU --pid file=/tmp/tmp.eokZYmcnwU/swtpm.pid --ctrl type=unixio,path=/tmp/tmp.eokZYmcnwU/sock --log file=/tmp/tmp.eokZYmcnwU/logfile,level=20 --tpm2
==2975669==
Error: (1) Socket TPM did not write pidfile.
swtpm: Could not open UnixIO socket: No such file or directory
==2975669==
==2975669== FILE DESCRIPTORS: 3 open (3 std) at exit.
==2975669==
==2975669== HEAP SUMMARY:
==2975669==     in use at exit: 18,804 bytes in 9 blocks
==2975669==   total heap usage: 18 allocs, 9 frees, 19,131 bytes allocated
==2975669==
==2975669== LEAK SUMMARY:
==2975669==    definitely lost: 0 bytes in 0 blocks
==2975669==    indirectly lost: 0 bytes in 0 blocks
==2975669==      possibly lost: 0 bytes in 0 blocks
==2975669==    still reachable: 18,804 bytes in 9 blocks
==2975669==         suppressed: 0 bytes in 0 blocks
==2975669== Reachable blocks (those to which a pointer was found) are not shown.
==2975669== To see them, rerun with: --leak-check=full --show-leak-kinds=all
==2975669==
==2975669== For lists of detected and suppressed errors, rerun with: -s
==2975669== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934339873"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-10-05 12:07:22,stefanberger,fork_merge,When I remove the added line with valgrind it runs for me.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934348478"", ""author_association"": ""OWNER""}"
513,IssueComment,2021-10-05 12:17:56,PiMaker,fork_merge,"... sorry, clearly my mistake. That wasn't meant to go to git. The 3 fd ""leaks"" are fine though, they correspond to stdin/stdout/stderr. *Hopefully* last fixup incoming.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934356449"", ""author_association"": ""CONTRIBUTOR""}"
513,Revise,2021-10-05 12:18:55,PiMaker,fork_merge,"swtpm: Add ""linear file"" nvram store backend

Implements a second abstraction layer as an NVRAM storage backend: The
""linear"" backend stores data in a simple format that can contain
multiple files (multiple TPM states and numbers) in one linear address
space. This can then be mapped to files or other ""block-device-like""
interfaces using nvram_linear_file_ops implementations.

A simple one using mmap is provided with the URI type ""file://"".

Does not support any locking at the moment, users must ensure exclusive
access themselves.

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""2b65810d89dd12aad57b90fb97f310588f870b98"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-08-05T12:09:55Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T12:18:55Z""}}"
513,Revise,2021-10-05 12:18:55,PiMaker,fork_merge,"swtpm: Add tests for ""linear file"" backend

Adapt save_load_state tests to include coverage of the ""linear file""
backend mode. ""tpm2"" is save/load is tested with both a regular file and
a loop device to excercise the blockdev mmap code.

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""fe2e08098185f5c17f1e841f3d58a0c14cc7368a"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-08-05T12:14:15Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T12:18:55Z""}}"
513,Revise,2021-10-05 12:18:55,PiMaker,fork_merge,"swtpm: Add ""file://"" backend to man page

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""d1e7af222b2f645fe28a4b7eb11523582771feeb"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-08-05T12:18:09Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T12:18:55Z""}}"
513,Revise,2021-10-05 12:18:55,PiMaker,fork_merge,"swtpm: Add ""nvram-backend-linear"" capability

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""bef1361671c9d2a150b39c954a25ab13677bc4b0"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-08-05T12:22:46Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T12:18:55Z""}}"
513,IssueComment,2021-10-05 12:29:18,stefanberger,fork_merge,"> _Hopefully_ last fixup incoming.

It looks good now. I will merge it once Travis is done.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934365274"", ""author_association"": ""OWNER""}"
513,ReviewApproved,2021-10-05 12:53:33,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/513#pullrequestreview-771402121""}"
513,MergePR,2021-10-05 13:01:31,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5410607136"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/0716f994be27b4e6ad7a316125a0b9a779a8ecfb""}"
514,SubmitCommit,2021-08-06 14:35:19,elmarco,fork_merge,"swtpm: ignore failure to choose version for --print-capabilities

A version was selected early for TPMLIB_GetInfo() to succeed in
--print-capabilities. TPM 1.2 is the default version, but can now be
disabled in libtpms.

Ignore the error when the version is unsupported by libtpms and skip
reporting the GetInfo related details.

Signed-off-by: Marc-André Lureau <marcandre.lureau@redhat.com>","{""sha"": ""e5871c80fe13351f67208a33a39b7c79d8761cdc"", ""author"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-06T13:32:17Z""}, ""committer"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-06T14:35:19Z""}}"
514,OpenPR,2021-08-06 15:31:26,elmarco,fork_merge,,
514,ReviewComment,2021-08-06 19:07:17,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/514#pullrequestreview-724640045""}"
514,ReviewRejected,2021-08-06 19:12:35,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/514#pullrequestreview-724641203""}"
514,IssueComment,2021-08-09 08:56:57,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3347](https://coveralls.io/builds/42025655)

* **18** of **18**   **(100.0%)**  changed or added relevant lines in **4** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.03%**) to **75.411%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/42025655/badge)](https://coveralls.io/builds/42025655) |
| :-- | --: |
| Change from base [Build 3332](https://coveralls.io/builds/41828919): |  0.03% |
| Covered Lines: | 5557 |
| Relevant Lines: | 7369 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/895057198"", ""author_association"": ""NONE""}"
514,ReviewComment,2021-08-09 11:42:49,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/514#pullrequestreview-725283628""}"
514,ReviewComment,2021-08-09 12:30:48,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/514#pullrequestreview-725322599""}"
514,IssueComment,2021-08-09 17:45:49,stefanberger,fork_merge,We also need an update to man/man8/swtpm.pod.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/895415335"", ""author_association"": ""OWNER""}"
514,ReviewApproved,2021-08-09 19:56:39,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/514#pullrequestreview-725756322""}"
514,IssueComment,2021-08-09 20:28:29,stefanberger,fork_merge,"Unfortunately we need yet more test cases patched. With this libtpms configure line:
```
./configure --prefix=/usr --without-tpm1 --without-tpm2  --with-openssl
```

And this command line to run the test cases:
```
sudo bash -c ""SWTPM_TEST_EXPENSIVE=1 SWTPM_TEST_IBMTSS2=1 make -j32 check""
```

I get these failure cases:
```
FAIL: test_tpm2_vtpm_proxy
FAIL: test_tpm12
FAIL: test_tpm2_ibmtss2
FAIL: test_vtpm_proxy
```

This one also needs patching:
```
SKIP: test_tpm2_partial_reads
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/895519540"", ""author_association"": ""OWNER""}"
514,ReviewComment,2021-08-09 21:31:44,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/514#pullrequestreview-725828672""}"
514,CrossReferenced,2021-08-09 21:35:24,stefanberger,fork_merge,swtpm_setup: Add support for checking for TPM 1.2 and TPM 2 support     ,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/515"", ""is_pull_request"": true}}"
514,Revise,2021-08-10 08:03:54,elmarco,fork_merge,"swtpm: report 'tpm-1.2' & 'tpm-2.0' in --print-capabilities

Signed-off-by: Marc-André Lureau <marcandre.lureau@redhat.com>","{""sha"": ""5cdcb102f3110c071e2e145969f695e0a74e07a1"", ""author"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-06T15:13:18Z""}, ""committer"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-10T08:03:54Z""}}"
514,Revise,2021-08-10 08:04:08,stefanberger,fork_merge,"tests: test for availability of TPM 1.2 support in swtpm

Skip test cases for TPM 1.2 if TPM 1.2 support is not provided by swtpm.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>
[ skip more tests ]
Signed-off-by: Marc-André Lureau <marcandre.lureau@redhat.com>","{""sha"": ""156c01e8a8b5df9c1198a3d89dc783bd705b517f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-09T12:10:07Z""}, ""committer"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-10T08:04:08Z""}}"
514,Revise,2021-08-10 08:04:23,elmarco,fork_merge,"tests: test for availability of TPM 2.0 support in swtpm

Skip test cases for TPM 2.0 if TPM 2.0 support is not provided by swtpm.

Signed-off-by: Marc-André Lureau <marcandre.lureau@redhat.com>","{""sha"": ""e94a7df54e6c7d4fceb96d951eff3adbd3506764"", ""author"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-07T17:36:42Z""}, ""committer"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-10T08:04:23Z""}}"
514,Revise,2021-08-10 08:04:23,elmarco,fork_merge,"swtpm*: report 'version' in --print-capabilities

The ""version"" field can be used to decide when capabilities are
supported/reported and give some library build details.

Signed-off-by: Marc-André Lureau <marcandre.lureau@redhat.com>","{""sha"": ""342c48b3d79e81b21f50b60b1ae5522a3ae901b6"", ""author"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-09T13:46:16Z""}, ""committer"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-10T08:04:23Z""}}"
514,Revise,2021-08-10 08:04:23,elmarco,fork_merge,"man: update man pages with new capabilities

Signed-off-by: Marc-André Lureau <marcandre.lureau@redhat.com>","{""sha"": ""41d5e2852089b81a5cdf191b680888bae622ad8e"", ""author"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-09T19:43:22Z""}, ""committer"": {""name"": ""Marc-Andr\u00e9 Lureau"", ""email"": ""marcandre.lureau@redhat.com"", ""date"": ""2021-08-10T08:04:23Z""}}"
514,MergePR,2021-08-10 11:13:25,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5134919711"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/55404e260b67428a0b6e7abb88f2c867610f8020""}"
515,OpenPR,2021-08-09 21:34:51,stefanberger,unfork_merge,,
515,IssueComment,2021-08-09 21:35:24,stefanberger,unfork_merge,This will have to wait until PR #514 has been applied.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/895566691"", ""author_association"": ""OWNER""}"
515,IssueComment,2021-08-09 22:51:48,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3352](https://coveralls.io/builds/42032415)

* **18** of **25**   **(72.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.008%**) to **75.403%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/42032415/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L896) | 18 | 25 | 72.0%
<!-- | **Total:** | **18** | **25** | **72.0%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/42032415/badge)](https://coveralls.io/builds/42032415) |
| :-- | --: |
| Change from base [Build 3348](https://coveralls.io/builds/42030537): |  -0.008% |
| Covered Lines: | 5573 |
| Relevant Lines: | 7391 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/895602572"", ""author_association"": ""NONE""}"
515,ReviewComment,2021-08-10 08:10:19,elmarco,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/515#pullrequestreview-726134156""}"
515,Revise,2021-08-10 11:29:09,stefanberger,unfork_merge,"tests: Fix test case number in case of test being skipped

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5a4eb63efe6a86542ff21c0b34b673187b9514e6"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-10T11:26:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-10T11:29:09Z""}}"
515,Revise,2021-08-10 11:29:09,stefanberger,unfork_merge,"swtpm_setup: Make error message better when swtpm is not an exectuable

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""c07dd7b1eb739cac180605a1c8f9a5091be56a64"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-10T11:24:44Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-10T11:29:09Z""}}"
515,Revise,2021-08-10 11:45:33,stefanberger,unfork_merge,"swtpm_setup: Add support for checking for TPM 1.2 and TPM 2 support

Implement get_supported_tpm_versions to get swtpm's support for TPM 1.2
and TPM 2 and use it error out in case user choose a TPM version that
is not supported. Also display the supported TPM versions in the
capabilites JSON.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9500f482101e959f58ac20cf720beee4b53ceae1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-09T21:09:02Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-10T11:45:33Z""}}"
515,ReviewComment,2021-08-10 13:09:06,elmarco,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/515#pullrequestreview-726412475""}"
515,IssueComment,2021-08-10 13:09:38,elmarco,unfork_merge,lgtm,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/896014139"", ""author_association"": ""CONTRIBUTOR""}"
515,MergePR,2021-08-10 13:38:48,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5135679547"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3eac24775249367394c949cc8a452b4101a96371""}"
515,DeleteBranch,2021-08-10 13:38:51,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5135679959"", ""commit_url"": null}"
516,OpenPR,2021-08-13 04:45:49,Etsukata,fork_merge,,
516,IssueComment,2021-08-13 05:24:19,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3381](https://coveralls.io/builds/42228808)

* **6** of **11**   **(54.55%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.04%**) to **75.497%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/42228808/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L1569) | 6 | 11 | 54.55%
<!-- | **Total:** | **6** | **11** | **54.55%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/42228808/badge)](https://coveralls.io/builds/42228808) |
| :-- | --: |
| Change from base [Build 3378](https://coveralls.io/builds/42149794): |  -0.04% |
| Covered Lines: | 5654 |
| Relevant Lines: | 7489 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898199902"", ""author_association"": ""NONE""}"
516,ReviewComment,2021-08-13 10:49:49,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/516#pullrequestreview-729495187""}"
516,ReviewComment,2021-08-13 11:38:20,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/516#pullrequestreview-729527897""}"
516,ReviewComment,2021-08-18 01:37:11,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/516#pullrequestreview-732359393""}"
516,ReviewComment,2021-08-18 01:37:31,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/516#pullrequestreview-732359511""}"
516,ReviewComment,2021-08-18 06:04:29,pksnx,fork_merge,,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/516#pullrequestreview-732462446""}"
516,Revise,2021-08-18 06:54:11,Etsukata,fork_merge,"swtpm_setup: Use temp dir for certs instead of TPM state dir

Currently swtpm_setup saves ek.cert and platform.cert to TPM state
directory and removes them later. As the usage of these files are
temporary, temp directory can be used for this purpose. This reduces
dependencies on TPM state dir, which is convenient for pluggable state
store (https://github.com/stefanberger/swtpm/issues/461).

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""eddbfb597b474af85f0df842e16bcb702704250c"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-12T06:19:40Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-18T06:54:11Z""}}"
516,ReviewApproved,2021-08-18 18:32:31,pksnx,fork_merge,,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/516#pullrequestreview-733226436""}"
516,MergePR,2021-08-18 20:06:20,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5176917036"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/20ca1eb311dca56b0a735cfbebcbb27b021ec71a""}"
517,SubmitCommit,2021-08-12 07:28:27,Etsukata,fork_merge,"swtpm: Wipe out key to ensure it is not left on the stack

This change is conforming to the following SEI CERT recommendation.

MEM03-C. Clear sensitive information stored in reusable resources:
https://wiki.sei.cmu.edu/confluence/display/c/MEM03-C.+Clear+sensitive+information+stored+in+reusable+resources

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""d09f93e69b9c050773b6815c19fdcf3d92893b44"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-12T07:27:27Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-12T07:28:27Z""}}"
517,OpenPR,2021-08-13 06:47:11,Etsukata,fork_merge,,
517,IssueComment,2021-08-13 06:59:49,Etsukata,fork_merge,FYI: How libvirt wipe a secret value on heap https://github.com/libvirt/libvirt/blob/c8238579fb0b1c3affbd77749ae2b2c4dfafb2d6/src/conf/virsecretobj.c#L139,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898235932"", ""author_association"": ""CONTRIBUTOR""}"
517,IssueComment,2021-08-13 07:25:51,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3359](https://coveralls.io/builds/42122759)

* **12** of **16**   **(75.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.02%**) to **75.382%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/common.c](https://coveralls.io/builds/42122759/source?filename=src%2Fswtpm%2Fcommon.c#L477) | 12 | 16 | 75.0%
<!-- | **Total:** | **12** | **16** | **75.0%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/42122759/badge)](https://coveralls.io/builds/42122759) |
| :-- | --: |
| Change from base [Build 3353](https://coveralls.io/builds/42034219): |  -0.02% |
| Covered Lines: | 5579 |
| Relevant Lines: | 7401 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898248973"", ""author_association"": ""NONE""}"
517,IssueComment,2021-08-13 11:15:01,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898383673"", ""author_association"": ""OWNER""}"
517,MergePR,2021-08-13 11:15:05,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5155203311"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/59ad2983fd0a8d10100ea3c84b0d66a9e9913e94""}"
518,SubmitCommit,2021-08-13 13:10:27,stefanberger,unfork_merge,"swtpm: Clear keys on heap at termination

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""802c9a58965fda684df8db3ce746b03c5b51c627"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-13T13:08:11Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-13T13:10:27Z""}}"
518,OpenPR,2021-08-13 13:10:44,stefanberger,unfork_merge,,
518,IssueComment,2021-08-13 14:27:54,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3363](https://coveralls.io/builds/42132215)

* **7** of **7**   **(100.0%)**  changed or added relevant lines in **4** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.03%**) to **75.481%**

---


|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/cuse_tpm.c](https://coveralls.io/builds/42132215/source?filename=src%2Fswtpm%2Fcuse_tpm.c#L1376) | 1 | 73.62% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/42132215/badge)](https://coveralls.io/builds/42132215) |
| :-- | --: |
| Change from base [Build 3361](https://coveralls.io/builds/42128759): |  0.03% |
| Covered Lines: | 5646 |
| Relevant Lines: | 7480 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898496938"", ""author_association"": ""NONE""}"
518,MergePR,2021-08-13 14:34:40,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5156128262"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/8f57999d8298a9c32b5d73de41b017e4e0a585f8""}"
521,SubmitCommit,2021-08-13 14:04:08,stefanberger,unfork_merge,"swtpm: Allow sched_setattr in seccomp profile for CUSE TPM

glib's (v2.68) g_thread_pool_new() calls the syscall sched_setattr(),
which we must allow to avoid termination of the CUSE TPM.

This patch resolves issue #520.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""98b7af8662c9e874334f682fc60eba0744b669f0"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-13T13:51:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-13T14:04:08Z""}}"
521,OpenPR,2021-08-13 14:04:32,stefanberger,unfork_merge,,
521,IssueComment,2021-08-13 16:44:54,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3368](https://coveralls.io/builds/42135865)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* **150** unchanged lines in **4** files lost coverage.
* Overall coverage increased (+**0.03%**) to **75.481%**

---


|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm.c](https://coveralls.io/builds/42135865/source?filename=src%2Fswtpm%2Fswtpm.c#L280) | 23 | 81.22% |
| [src/swtpm/swtpm_chardev.c](https://coveralls.io/builds/42135865/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L240) | 34 | 64.22% |
| [src/swtpm/cuse_tpm.c](https://coveralls.io/builds/42135865/source?filename=src%2Fswtpm%2Fcuse_tpm.c#L1376) | 35 | 73.62% |
| [src/swtpm/swtpm_nvstore.c](https://coveralls.io/builds/42135865/source?filename=src%2Fswtpm%2Fswtpm_nvstore.c#L310) | 58 | 84.14% |
<!-- | **Total:** | **150** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/42135865/badge)](https://coveralls.io/builds/42135865) |
| :-- | --: |
| Change from base [Build 3361](https://coveralls.io/builds/42128759): |  0.03% |
| Covered Lines: | 5646 |
| Relevant Lines: | 7480 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898590147"", ""author_association"": ""NONE""}"
521,MergePR,2021-08-13 17:36:39,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5156963467"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e43946a597bd07dba05a32527036aad942e0e26e""}"
521,DeleteBranch,2021-08-13 17:45:56,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5156999282"", ""commit_url"": null}"
522,SubmitCommit,2021-08-13 19:52:20,stefanberger,unfork_merge,"swtpm: Add missing braces around TPM_DEBUG after if statement

Fix the following compilation issue:

swtpm_nvstore_dir.c: In function 'SWTPM_NVRAM_Validate_Dir':
swtpm_nvstore_dir.c:149:86: error: suggest braces around empty body in an 'if' statement [-Werror=empty-body]
         TPM_DEBUG(""SWTPM_NVRAM_Validate_Dir: Rooted state path %s\n"", tpm_state_path);
                                                                                      ^
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""e56f96b4e8f444a85a1f616ee2936320900b1adc"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-13T19:52:15Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-13T19:52:20Z""}}"
522,OpenPR,2021-08-13 19:53:16,stefanberger,unfork_merge,,
522,IssueComment,2021-08-13 21:10:50,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3372](https://coveralls.io/builds/42141943)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.481%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/42141943/badge)](https://coveralls.io/builds/42141943) |
| :-- | --: |
| Change from base [Build 3370](https://coveralls.io/builds/42138079): |  0.0% |
| Covered Lines: | 5646 |
| Relevant Lines: | 7480 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898722292"", ""author_association"": ""NONE""}"
522,MergePR,2021-08-13 21:13:22,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5157704769"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/7edc44d57675c95ac33f0ed371e39d1e4d8d7d8c""}"
523,SubmitCommit,2021-08-14 18:34:02,stefanberger,unfork_merge,"tests: Skip chardev related tests after checking for chardev support

Skip tests that require the chardev after checking for the chardev
interface support in swtpm. Remove the conditional addition of chardev
related tests from the Makefile.am.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""74cb941586d38a1d4459ca7b922fba2eacab00b5"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-14T18:18:37Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-14T18:34:02Z""}}"
523,OpenPR,2021-08-14 18:46:04,stefanberger,unfork_merge,,
523,IssueComment,2021-08-14 19:53:48,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3377](https://coveralls.io/builds/42149506)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.05%**) to **75.535%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/42149506/badge)](https://coveralls.io/builds/42149506) |
| :-- | --: |
| Change from base [Build 3373](https://coveralls.io/builds/42142763): |  0.05% |
| Covered Lines: | 5650 |
| Relevant Lines: | 7480 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/898952193"", ""author_association"": ""NONE""}"
523,MergePR,2021-08-14 20:01:38,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5159057387"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/346dc3d512682832d3d367346bfec48d06028edc""}"
524,OpenPR,2021-09-06 03:29:17,Etsukata,fork_merge,,
524,ReviewRejected,2021-09-06 20:42:50,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/524#pullrequestreview-747417444""}"
524,Revise,2021-09-07 03:12:44,Etsukata,fork_merge,"swtpm_setup: Add tests for --overwrite options

The tests for the following options:
- with ""--overwrite""
- with ""--not-overwrite""
- without ""--overwrite"" nor ""--not-overwrite""

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""427de87eaa3dc2d0419cab69fa4b7fe7e8a6d0e4"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-17T05:13:40Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-07T03:12:44Z""}}"
524,Revise,2021-09-07 03:12:44,Etsukata,fork_merge,"swtpm: Add GetFilepathForName()

Introduce GetFilepathForName() and use it to get a rooted state file
path instead of existing GetFilenameForName().
Move GetFilenameForName() to swtpm_nvstore.c so that other TPM state
store backend can use it.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""59acca7d1951f72c797af3dc2ee86ef6d56dcdfb"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-23T07:34:14Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-07T03:12:44Z""}}"
524,Revise,2021-09-07 03:12:44,Etsukata,fork_merge,"swtpm: Add --print-states for reporting TPM states status

--print-states reports TPM states stored in --tpmstate backend.
This feature is supposed to be used by swtpm_setup for checking TPM state
existence.

Sample output is as follows:

  $ swtpm socket --print-states --tpmstate dir=/tmp --tpm2 | jq .
  {
    ""type"": ""swtpm"",
    ""states"": [
      {
        ""name"": ""tpm2-00.permall""
      }
    ]
  }

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""dda6fe8ca96dabdafae1f4578ceed1c2ab3c08f8"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-27T00:22:19Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-07T03:12:44Z""}}"
524,Revise,2021-09-07 03:12:44,Etsukata,fork_merge,"swtpm_setup: Use --print-states in check_state_overwrite()

Instead of directly accessing TPM state store file, use --print-states
to check if there is existing state file or not. This can reduce TPM
state directory dependencies of swtpm_setup.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""fa6793057bc76fc8b780fc517c34049ea97fed25"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-27T00:24:41Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-07T03:12:44Z""}}"
524,IssueComment,2021-09-07 03:57:35,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3387](https://coveralls.io/builds/42687433)

* **86** of **115**   **(74.78%)**  changed or added relevant lines in **6** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.03%**) to **75.528%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm.c](https://coveralls.io/builds/42687433/source?filename=src%2Fswtpm%2Fswtpm.c#L449) | 12 | 14 | 85.71%
| [src/swtpm/cuse_tpm.c](https://coveralls.io/builds/42687433/source?filename=src%2Fswtpm%2Fcuse_tpm.c#L1617) | 10 | 13 | 76.92%
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/42687433/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L166) | 14 | 17 | 82.35%
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/42687433/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L725) | 16 | 19 | 84.21%
| [src/swtpm/swtpm_nvstore.c](https://coveralls.io/builds/42687433/source?filename=src%2Fswtpm%2Fswtpm_nvstore.c#L230) | 32 | 37 | 86.49%
| [src/swtpm/swtpm_chardev.c](https://coveralls.io/builds/42687433/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L430) | 2 | 15 | 13.33%
<!-- | **Total:** | **86** | **115** | **74.78%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/42687433/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L732) | 1 | 77.94% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/42687433/badge)](https://coveralls.io/builds/42687433) |
| :-- | --: |
| Change from base [Build 3382](https://coveralls.io/builds/42249653): |  0.03% |
| Covered Lines: | 5722 |
| Relevant Lines: | 7576 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/913970978"", ""author_association"": ""NONE""}"
524,MergePR,2021-09-07 13:22:52,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5265748059"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e0d2c0ed577c595fc89407f361d0cc5a0438b240""}"
524,IssueCommentSupplement,2021-09-08 22:06:32,stefanberger,fork_merge,"@Etsukata How many more PRs do you think you'll need to submit for the storage plugin changes, maybe without an actual additional plugin? I am asking because I intend to create v0.7.0 soon.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/915605532"", ""author_association"": ""OWNER""}"
524,IssueCommentSupplement,2021-09-08 23:43:30,Etsukata,fork_merge,"Hi @stefanberger my current plan is to create at least the following 3 PRs for swtpm_setup without an actual plugin.

- Replace `delete_swtpm_statefiles()` and `delete_state()` by `swtpm --delete-states` (newly introduced option)
- Implement `--tpmstate backend-uri=..` option parser for swtpm_setup
- Make `check_directory_access()` and `.lock` specific to directory backend

Please do not wait for me. Thanks for your notice.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/915645556"", ""author_association"": ""CONTRIBUTOR""}"
524,DeleteBranch,2021-09-08 23:43:34,Etsukata,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5275261131"", ""commit_url"": null}"
524,CrossReferenced,2021-09-10 01:04:07,Etsukata,fork_merge,Minor fixes for --print-states option,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/526"", ""is_pull_request"": true}}"
524,IssueCommentSupplement,2021-09-25 05:22:44,Etsukata,fork_merge,"> Current ""--print-states"" only shows ""permall"" state as it's the only one currently required for swtpm_setup. Of course it's open to discuss whether we should have other names (""volatile"", ""savestate"").

Later, we decided to show all names in https://github.com/stefanberger/swtpm/pull/557.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/927013482"", ""author_association"": ""CONTRIBUTOR""}"
526,SubmitCommit,2021-09-09 23:50:44,Etsukata,fork_merge,"tests: Fix test_tpm2_print_states

Currently it's wrongly running _test_print_states.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""8dabc3fa1dc59307f9369782703c7f7c61d5bad0"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-09T06:07:01Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-09T23:50:44Z""}}"
526,SubmitCommit,2021-09-09 23:50:51,Etsukata,fork_merge,"swtpm: Rename SWTPM_NVRAM_Print_Json()

Rename that to SWTPM_NVRAM_PrintJson() to conform the existing function
naming rule.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""114451fdf81450b37e05639a5117eefff8c1b878"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-09T06:08:52Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-09T23:50:51Z""}}"
526,SubmitCommit,2021-09-09 23:50:51,Etsukata,fork_merge,"swtpm: Fix SWTPM_NVRAM_PrintJson() error handling logic

Return -1 when SWTPM_NVRAM_GetFilenameForName() or
SWTPM_NVRAM_Init() fails.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""e3698a8805f9452ffa2b1ed9487917dc5824b84d"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-09T06:10:11Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-09T23:50:51Z""}}"
526,OpenPR,2021-09-10 01:04:07,Etsukata,fork_merge,,
526,IssueComment,2021-09-10 01:21:35,stefanberger,fork_merge,Thanks. Looks good to me.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/916558563"", ""author_association"": ""OWNER""}"
526,IssueComment,2021-09-10 01:43:03,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3389](https://coveralls.io/builds/42775726)

* **4** of **5**   **(80.0%)**  changed or added relevant lines in **4** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.528%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_chardev.c](https://coveralls.io/builds/42775726/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L496) | 0 | 1 | 0.0%
<!-- | **Total:** | **4** | **5** | **80.0%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/42775726/badge)](https://coveralls.io/builds/42775726) |
| :-- | --: |
| Change from base [Build 3388](https://coveralls.io/builds/42699013): |  0.0% |
| Covered Lines: | 5722 |
| Relevant Lines: | 7576 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/916565293"", ""author_association"": ""NONE""}"
526,MergePR,2021-09-10 01:47:21,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5281920225"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/784e05321fe8aabc2334931db337aea626f8434f""}"
526,DeleteBranch,2021-09-12 23:30:08,Etsukata,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5289716027"", ""commit_url"": null}"
527,SubmitCommit,2021-09-14 16:12:54,baloo,fork_close,"configure: drop python dependency

as far as I can tell, 0.6.0 dropped the python dependency, yet the
configure still looks out for a python to be available. I don't believe
it makes any use of it.

This reduces the dependency graph on build.

Signed-off-by: Arthur Gautier <baloo@superbaloo.net>","{""sha"": ""6391851b2b9394646f8c1a698f92f022338ed663"", ""author"": {""name"": ""Arthur Gautier"", ""email"": ""baloo@superbaloo.net"", ""date"": ""2021-09-14T16:10:23Z""}, ""committer"": {""name"": ""Arthur Gautier"", ""email"": ""baloo@superbaloo.net"", ""date"": ""2021-09-14T16:12:54Z""}}"
527,OpenPR,2021-09-14 16:14:13,baloo,fork_close,,
527,IssueComment,2021-09-14 16:53:18,coveralls,fork_close,"## Pull Request Test Coverage Report for [Build 3392](https://coveralls.io/builds/42866029)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.528%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/42866029/badge)](https://coveralls.io/builds/42866029) |
| :-- | --: |
| Change from base [Build 3390](https://coveralls.io/builds/42776310): |  0.0% |
| Covered Lines: | 5722 |
| Relevant Lines: | 7576 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/919334310"", ""author_association"": ""NONE""}"
527,CrossReferenced,2021-09-14 16:58:54,baloo,fork_close,swtpm: 0.5.2 -> 0.6.0,"{""reference"": {""url"": ""https://api.github.com/repos/NixOS/nixpkgs/issues/137849"", ""is_pull_request"": true}}"
527,IssueComment,2021-09-15 16:52:44,stefanberger,fork_close,"We have these testcases here that require python:

```
# ls tests/*.py
tests/test_clientfds.py  tests/test_setdatafd.py
```

We could get rid of the python-twisted dependency if we also remove this part here in `test_setdatafd.py`:

```
if sys.version_info[0] < 3:
    import twisted.python.sendmsg as sendmsg
```

This should be possible since we don't support python2 anymore.
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/920193846"", ""author_association"": ""OWNER""}"
527,IssueComment,2021-09-15 16:57:49,baloo,fork_close,"They require python, but, unless I miss something, they are not executed during the build at any point. They're only distributed as extra_dist as far as I can tell.



","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/920200269"", ""author_association"": ""NONE""}"
527,IssueComment,2021-09-15 17:15:19,stefanberger,fork_close,"These are test cases that run on `make check` from these tests:
```
tests/test_commandline:167:LOG=$(PID_FILE=$TPMDIR/swtpm.pid SWTPM_EXE=$SWTPM_EXE TPMDIR=$TPMDIR exec $TESTDIR/test_clientfds.py)
tests/test_ctrlchannel3:50:LOG=$(SOCK_PATH=$SWTPM_CTRL_UNIX_PATH exec $TESTDIR/test_setdatafd.py)
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/920212469"", ""author_association"": ""OWNER""}"
527,IssueCommentSupplement,2021-09-15 17:35:41,baloo,fork_close,"Correct, I had an issue in my packaging which made the tests not to run. Sorry for the noise.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/920226268"", ""author_association"": ""NONE""}"
527,ClosePR,2021-09-15 17:35:41,baloo,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5307527834"", ""commit_url"": null}"
528,SubmitCommit,2021-09-15 15:35:11,stefanberger,unfork_merge,"build-sys: Add -Wno-deprecated-declarations to default CFLAGS (OSSL 3)

To be able to build with OpenSSL 3.0 we need to added
-Wno-deprecated-declarations to the default CFLAGS.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5545b8f463c6f60a65abb79a127b74787c8df1f0"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-15T15:34:02Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-15T15:35:11Z""}}"
528,OpenPR,2021-09-15 16:53:07,stefanberger,unfork_merge,,
528,IssueComment,2021-09-15 17:35:52,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3394](https://coveralls.io/builds/42899657)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.528%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/42899657/badge)](https://coveralls.io/builds/42899657) |
| :-- | --: |
| Change from base [Build 3390](https://coveralls.io/builds/42776310): |  0.0% |
| Covered Lines: | 5722 |
| Relevant Lines: | 7576 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/920226381"", ""author_association"": ""NONE""}"
528,MergePR,2021-09-15 17:36:08,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5307530057"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/1860183c42a0d43b444cb8cf3aae71de4ed0b601""}"
529,SubmitCommit,2021-09-15 17:31:24,stefanberger,unfork_merge,"build-sys: Add -Wno-deprecated-declarations to default CFLAGS (OSSL 3)

To be able to build with OpenSSL 3.0 we need to added
-Wno-deprecated-declarations to the default CFLAGS.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""000e42dd897d45c76a86ca3fb340a6b2b444929e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-15T15:34:02Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-15T17:31:24Z""}}"
529,OpenPR,2021-09-15 17:40:46,stefanberger,unfork_merge,,
529,IssueComment,2021-09-15 20:25:30,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3397](https://coveralls.io/builds/42904269)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.516%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/42904269/badge)](https://coveralls.io/builds/42904269) |
| :-- | --: |
| Change from base [Build 3318](https://coveralls.io/builds/41729511): |  0.0% |
| Covered Lines: | 5430 |
| Relevant Lines: | 7287 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/920351327"", ""author_association"": ""NONE""}"
529,MergePR,2021-09-15 20:35:26,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5308421019"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a0ca7c328f1c3c6a417973d194b41d06ab7b0802""}"
529,CrossReferenced,2021-09-18 11:23:01,stefanberger,unfork_merge,0.6.0: build fails against openssl 3.0.0,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/534"", ""is_pull_request"": false}}"
530,SubmitCommit,2021-09-15 19:02:19,stefanberger,unfork_merge,"build-sys: Add -Wno-deprecated-declarations to default CFLAGS (OSSL 3)

To be able to build with OpenSSL 3.0 we need to added
-Wno-deprecated-declarations to the default CFLAGS.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""739c0038ffa30c3dbb3b8efc306319ec4e5847bc"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-15T15:34:02Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-15T19:02:19Z""}}"
530,OpenPR,2021-09-15 19:03:59,stefanberger,unfork_merge,,
530,MergePR,2021-09-15 23:30:01,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5309144499"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f3439438286c8861bf495f55168f7c9857e426b5""}"
531,SubmitCommit,2021-09-16 05:19:25,Etsukata,fork_merge,"tests: Fix test_tpm2_save_load_state_da_timeout rare timer race

When there is a delay between ""Sending TPM2_NV_Write with wrong
password"" and ""timenow=$(date +%s)"", the test can fail with ""Error: Did
not get expected failure from TPM2_NV_Write() with good password.
Lockout should be enabled."". This can sometimes happen on slow or busy
systems.

To stabilize the test, this patch introduces precise recovery time
measurement ($timerecovery) and check good password works after that
time. As for lockout timeout, moves starting timer just before
TPM2_NV_Write and check good password fails before that time.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""e6626837d0ac18b43aa18aab1422119244810bef"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-16T04:59:46Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-16T05:19:25Z""}}"
531,OpenPR,2021-09-16 05:41:16,Etsukata,fork_merge,,
531,IssueComment,2021-09-16 05:42:40,Etsukata,fork_merge,"> When there is a delay between ...

We can easily reproduce this by inserting `sleep 1` as follows:
```
$ git diff
diff --git a/tests/_test_tpm2_save_load_state_da_timeout b/tests/_test_tpm2_save_load_state_da_timeout
index cd2fe47..9435a9a 100755
--- a/tests/_test_tpm2_save_load_state_da_timeout
+++ b/tests/_test_tpm2_save_load_state_da_timeout
@@ -131,6 +131,7 @@ if [ ""$RES"" != ""$exp"" ]; then
        echo ""received: $RES""
        exit 1
 fi
+sleep 1
 timenow=$(date +%s)
 timeout=$((timenow + 6))
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/920595241"", ""author_association"": ""CONTRIBUTOR""}"
531,IssueComment,2021-09-16 06:21:00,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3402](https://coveralls.io/builds/42913117)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.528%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/42913117/badge)](https://coveralls.io/builds/42913117) |
| :-- | --: |
| Change from base [Build 3395](https://coveralls.io/builds/42901862): |  0.0% |
| Covered Lines: | 5722 |
| Relevant Lines: | 7576 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/920612260"", ""author_association"": ""NONE""}"
531,IssueComment,2021-09-16 11:56:18,stefanberger,fork_merge,"I haven't seen issues with this test in ages, but thanks for looking into this.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/920837116"", ""author_association"": ""OWNER""}"
531,MergePR,2021-09-16 11:57:33,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5312079054"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/c0ccbb042dde4dc9823624b5fa0ac8a659fcde9f""}"
532,SubmitCommit,2021-09-17 14:16:00,Etsukata,unfork_merge,"swtpm: Wipe out key to ensure it is not left on the stack

This change is conforming to the following SEI CERT recommendation.

MEM03-C. Clear sensitive information stored in reusable resources:
https://wiki.sei.cmu.edu/confluence/display/c/MEM03-C.+Clear+sensitive+information+stored+in+reusable+resources

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""52614e272e88285f38064e7886184c25b2b667a7"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-08-12T07:27:27Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-17T14:16:00Z""}}"
532,SubmitCommit,2021-09-17 14:26:21,stefanberger,unfork_merge,"swtpm: Clear keys on heap at termination

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6ed1ef937b57b1a1017718f117bc94298a349573"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-08-13T13:08:11Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-17T14:26:21Z""}}"
532,SubmitCommit,2021-09-17 14:26:21,stefanberger,unfork_merge,"CHANGES: Add documentation for changes in 0.6.1

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""475854a0c70ed54f7d7a8a65b15f4ce3c39a5b95"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-17T14:24:52Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-17T14:26:21Z""}}"
532,SubmitCommit,2021-09-17 14:40:17,stefanberger,unfork_merge,"debian/rpm: Adjust changelog for 0.6.1 release

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""487b99c3fb44adb84b484b99950d4b19e6a0ce09"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-17T14:40:17Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-17T14:40:17Z""}}"
532,OpenPR,2021-09-17 14:42:02,stefanberger,unfork_merge,,
532,IssueComment,2021-09-17 15:58:56,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3406](https://coveralls.io/builds/42955136)

* **19** of **23**   **(82.61%)**  changed or added relevant lines in **5** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.008%**) to **74.525%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/common.c](https://coveralls.io/builds/42955136/source?filename=src%2Fswtpm%2Fcommon.c#L477) | 12 | 16 | 75.0%
<!-- | **Total:** | **19** | **23** | **82.61%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/cuse_tpm.c](https://coveralls.io/builds/42955136/source?filename=src%2Fswtpm%2Fcuse_tpm.c#L1371) | 1 | 73.49% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/42955136/badge)](https://coveralls.io/builds/42955136) |
| :-- | --: |
| Change from base [Build 3400](https://coveralls.io/builds/42908267): |  0.008% |
| Covered Lines: | 5447 |
| Relevant Lines: | 7309 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/921907495"", ""author_association"": ""NONE""}"
532,MergePR,2021-09-17 16:17:58,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5320377264"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/7940a1a9243eafbd71a0675a8aa57e6df4d6d831""}"
535,SubmitCommit,2021-09-18 14:25:50,stefanberger,unfork_close,"build-sys: Use -Wno-deprecated-declarations only for swtpm and swtpm_setup

Rather than applying -Wno-deprecated-declarations everywhere, only
build swtpm and swtpm_setup with it.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6a48c197f50552f088f58461b5f7ac0ba1038806"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-18T14:25:44Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-18T14:25:50Z""}}"
535,OpenPR,2021-09-18 14:27:19,stefanberger,unfork_close,,
535,CrossReferenced,2021-09-18 14:28:15,stefanberger,unfork_close,0.6.0: build fails against openssl 3.0.0,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/534"", ""is_pull_request"": false}}"
535,ClosePR,2021-09-18 18:52:29,stefanberger,unfork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5323693307"", ""commit_url"": null}"
536,SubmitCommit,2021-09-18 19:08:04,stefanberger,unfork_merge,"build-sys: Use -DOPENSSL_SUPPRESS_DEPRECATED (OSSL 3)

Use the (undocumented) OPENSSL_SUPPRESS_DEPRECATED to suppress the
deprecated API warnings when compiling swtpm and swtpm_setup with
OpenSSL 3.0.0 replacing the global -Wno-deprecated-declarations.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5bdfdfbd41cecd5324290163fe078bf50104814f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-18T19:04:29Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-18T19:08:04Z""}}"
536,OpenPR,2021-09-18 19:09:32,stefanberger,unfork_merge,,
536,MergePR,2021-09-18 22:57:31,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5323916231"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3b5d849eaf9271590cb219f3bcd05eb05f3f011d""}"
539,SubmitCommit,2021-09-18 23:03:10,stefanberger,unfork_merge,"build-sys: Use -DOPENSSL_SUPPRESS_DEPRECATED (OSSL 3)

Use the (undocumented) OPENSSL_SUPPRESS_DEPRECATED to suppress the
deprecated API warnings when compiling swtpm and swtpm_setup with
OpenSSL 3.0.0 replacing the global -Wno-deprecated-declarations.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""a44eae1b14e9d246c209e261e57e5740f5d67c8a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-18T19:04:29Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-18T23:03:10Z""}}"
539,OpenPR,2021-09-18 23:07:37,stefanberger,unfork_merge,,
539,MergePR,2021-09-19 01:29:11,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5324027236"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4a9feca397a200375f99c0b6318a5f6e779230a3""}"
540,SubmitCommit,2021-09-18 23:06:57,stefanberger,unfork_merge,"build-sys: Use -DOPENSSL_SUPPRESS_DEPRECATED (OSSL 3)

Use the (undocumented) OPENSSL_SUPPRESS_DEPRECATED to suppress the
deprecated API warnings when compiling swtpm and swtpm_setup with
OpenSSL 3.0.0 replacing the global -Wno-deprecated-declarations.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b14dfd10ae08f31c94c885e1720b6a4b7081e025"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-18T19:04:29Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-18T23:06:57Z""}}"
540,OpenPR,2021-09-18 23:07:44,stefanberger,unfork_merge,,
540,MergePR,2021-09-19 21:40:16,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5325224071"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f66a6e5f140448efa3592892560321df1e8d4deb""}"
541,OpenPR,2021-09-18 23:12:46,nchevsky,fork_merge,,
541,Revise,2021-09-18 23:13:14,nchevsky,fork_merge,"swtpm: Don't set END_ON_HUP flag in CMD_SET_DATAFD handler

Don't set flag MAIN_LOOP_FLAG_END_ON_HUP in the handler for control
channel command CMD_SET_DATAFD, since this caused the swtpm daemon to
unconditionally terminate when the data channel connection dropped.
Removing the flag allows this behavior to be controlled by the user
via the --terminate command-line switch, as it was meant to be.

Signed-off-by: Nick Chevsky <nchevsky@users.noreply.github.com>","{""sha"": ""d93c05fcf7c4f37505134eb3c64868289d4af22e"", ""author"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-09-18T21:23:55Z""}, ""committer"": {""name"": ""Nick Chevsky"", ""email"": ""nchevsky@users.noreply.github.com"", ""date"": ""2021-09-18T23:13:14Z""}}"
541,MergePR,2021-09-21 16:11:35,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5336888641"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/1e2a6d99cd12e1f622e3d06c3181ccbfbdc97a97""}"
541,IssueCommentSupplement,2021-09-21 16:13:17,stefanberger,fork_merge,"> Thanks to # 2 we can address this in `swtpm` now, without breaking _any_ version of libvirt, and without having to wait for a new downstream release.

Thanks for looking into this so deeply!","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924139398"", ""author_association"": ""OWNER""}"
543,SubmitCommit,2021-09-19 23:41:39,stefanberger,unfork_merge,"test: Remove import of twisted package function for python2

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2702b7941967fda1a5b2a6a4c049d3919d76ccfc"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-19T23:41:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-19T23:41:39Z""}}"
543,SubmitCommit,2021-09-19 23:43:25,stefanberger,unfork_merge,"build-sys: Remove check for pip3 that was used by python swtpm_setup

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6e72c40ba8ee063da4a57aa937164942400b9ebe"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-19T23:42:18Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-19T23:43:25Z""}}"
543,SubmitCommit,2021-09-19 23:44:39,stefanberger,unfork_merge,"Travis: Remove python3-twisted package from being installed

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""88c5c9c353e4277d1295a3af876572348b196dd2"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-19T23:44:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-19T23:44:39Z""}}"
543,OpenPR,2021-09-19 23:46:21,stefanberger,unfork_merge,,
543,MergePR,2021-09-20 11:25:53,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5327637802"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/2f7b271e33b0564f7d344c1adf5c2a755b79e885""}"
544,OpenPR,2021-09-19 23:52:10,stefanberger,unfork_merge,,
544,Revise,2021-09-19 23:52:50,stefanberger,unfork_merge,"CHANGES: Adjust entry for building for OpenSSL 3.0

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7409b5817f61a0477e1d92b097f10fbfdd51fab7"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-19T23:52:50Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-19T23:52:50Z""}}"
544,MergePR,2021-09-20 11:26:56,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5327642781"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/98187d24fe14851653a7c46eb16e9c5f0b9beaa1""}"
545,OpenPR,2021-09-20 01:36:29,stefanberger,unfork_merge,,
545,IssueComment,2021-09-20 11:46:50,stefanberger,unfork_merge,I tested this with ASAN and comparsion-checked results of new SWTPM_HMAC implementation versus old one by using them both and comparing results. All tests passed.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/922854543"", ""author_association"": ""OWNER""}"
545,Revise,2021-09-20 12:19:37,stefanberger,unfork_merge,"swtpm: Add implementation of SWTPM_HMAC using OpenSSL 3.0 APIs

Add an implementation of SWTPM_HMAC using non-deprecated APIs when
compiling with OpenSSL 3.0.

This partially addresses issue #538.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""094df05dd9e76908b844d75b6b0e32b4ed2a3b8c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-20T01:05:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-20T12:19:37Z""}}"
545,MergePR,2021-09-20 16:08:18,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5329420572"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4c5a4102912609619a893fbe2ba4d12b8f2959f8""}"
545,DeleteBranch,2021-09-20 16:10:23,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5329432843"", ""commit_url"": null}"
546,OpenPR,2021-09-20 01:52:17,stefanberger,unfork_merge,,
546,IssueComment,2021-09-20 20:45:35,stefanberger,unfork_merge,"I tested this with ASAN, so there are no memory leaks. It is also able to decrypt existing data, so I have high confidence that this conversion is correct.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/923284408"", ""author_association"": ""OWNER""}"
546,IssueComment,2021-09-20 21:23:41,stefanberger,unfork_merge,"@elmarco If you get a chance, please have look.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/923324356"", ""author_association"": ""OWNER""}"
546,Revise,2021-09-21 14:34:24,stefanberger,unfork_merge,"swtpm: Use EVP_CIPHER in SWTPM_SymmetricKeyData_Encrypt/Decrypt

Use the EVP_CIPHER implementation for the AES CBC computations. This
API has been supported already in OpenSSL 1.1.x for sure and is also
not deprecated in OpenSSL 3.0.

This now resolves issue #538.
We can build src/swtpm without having to suppress deprecated API warnings.
Since this is the last issue related to OpenSSL deprecated APIs, we don't
need to suppress any OpenSSL 3.0 deprecated API warnings anymore.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9e89e79416ee43dcee810b04081fda6b3427b98b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-20T01:49:02Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-21T14:34:24Z""}}"
546,IssueComment,2021-09-21 15:07:23,elmarco,unfork_merge,looks ok to me,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924080471"", ""author_association"": ""CONTRIBUTOR""}"
546,MergePR,2021-09-21 15:52:07,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5336738906"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/ca4ee25ce7141436aa013b872d93aab614bbd2bf""}"
546,DeleteBranch,2021-09-21 15:52:25,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5336741442"", ""commit_url"": null}"
546,IssueCommentSupplement,2021-09-21 16:17:13,stefanberger,unfork_merge,At least swtpm is OpenSSL 3.0 deprecated APIs 'clean' now.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924142526"", ""author_association"": ""OWNER""}"
548,SubmitCommit,2021-09-20 23:32:34,stefanberger,unfork_merge,"build-sys: selinux: Compare absolute path against absolute path

This patch fixes issue #533.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""569a63e34d2b659d8209fdbd8fa9be7948c786de"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-20T23:32:30Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-20T23:32:34Z""}}"
548,OpenPR,2021-09-20 23:33:36,stefanberger,unfork_merge,,
548,MergePR,2021-09-21 01:20:27,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5331991846"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/76a42942a43a49342ed307f665091a4fa84be8a4""}"
550,SubmitCommit,2021-09-21 13:12:22,stefanberger,unfork_merge,"swtpm_setup: Move check for pkey = NULL right after creation

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9b86c1f4edd526ac8d351b4a5e1fc998d06666a7"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-20T13:06:32Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-21T13:12:22Z""}}"
550,SubmitCommit,2021-09-21 13:14:00,stefanberger,unfork_merge,"swtpm_setup: Use non-deprecated APIs to contruct RSA key (OSSL 3)

Use only non-deprecated APIs to construct RSA key when compiling with
OpenSSL 3.0.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""8b69b4f7bee002b710d7e1e3bbbf8837cc342de4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-20T13:35:23Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-21T13:14:00Z""}}"
550,OpenPR,2021-09-21 13:15:52,stefanberger,unfork_merge,,
550,IssueComment,2021-09-21 13:18:08,stefanberger,unfork_merge,"I tested this with ASAN and `tests/test_parameters` is also using it quite extensively, so it should be correct.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/923979761"", ""author_association"": ""OWNER""}"
550,RenameTitle,2021-09-21 13:35:59,stefanberger,unfork_merge,,"{""rename"": {""from"": ""Use OpenSSL 3.0 APIs for RSA key creation"", ""to"": ""swtpm_setup: Use OpenSSL 3.0 APIs for RSA key creation""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5335664415""}"
550,MergePR,2021-09-21 14:32:16,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5336115438"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/eecb73ebbd70a2966a28eebc2f73c63117bb0de7""}"
550,DeleteBranch,2021-09-21 14:32:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5336117052"", ""commit_url"": null}"
551,OpenPR,2021-09-21 18:41:30,stefanberger,unfork_merge,,
551,IssueComment,2021-09-21 18:41:56,stefanberger,unfork_merge,@Etsukata Do you have any comments?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924268911"", ""author_association"": ""OWNER""}"
551,Revise,2021-09-21 19:56:46,stefanberger,unfork_merge,"swtpm: Cleanup storage backend on shutdown to unlock dir

Cleanup on the storage backend side on shutdown to unlock the
locked directory.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""66a209603092f527a9f3044d3939dbe9daadce1f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-21T18:39:36Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-21T19:56:46Z""}}"
551,IssueComment,2021-09-21 23:56:45,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3456](https://coveralls.io/builds/42978550)

* **10** of **10**   **(100.0%)**  changed or added relevant lines in **2** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.03%**) to **75.528%**

---


|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/42978550/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L139) | 1 | 67.68% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/42978550/badge)](https://coveralls.io/builds/42978550) |
| :-- | --: |
| Change from base [Build 3450](https://coveralls.io/builds/42969177): |  0.03% |
| Covered Lines: | 5753 |
| Relevant Lines: | 7617 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924471685"", ""author_association"": ""NONE""}"
551,IssueComment,2021-09-22 00:16:17,Etsukata,unfork_merge,"Thanks @stefanberger, looks good to me.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924480829"", ""author_association"": ""CONTRIBUTOR""}"
551,MergePR,2021-09-22 01:21:42,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5339763995"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/6bc55a6752a67543ed5b6547d51f4980b65e8a73""}"
552,SubmitCommit,2021-09-21 19:15:14,stefanberger,unfork_merge,"swptm_ioctl: Eliminate an unreachable statement

If is_chardev is false, then we have a buffersize of 4096 bytes per
the following statement:

322    if (!is_chardev)
323        buffersize = 4096;

With this we end up in the following if branch:

384        if (buffersize) {
385            /* continue with the read interface */
[...]
418
419            break;
420        } else {

Per the break in line 419 we leave the loop, thus cannot reach the
statement we remove:

423        if (!is_chardev)
424            break;

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6a1dff7caf1426bf71e1bab89eeba66bb414c804"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-21T19:15:10Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-21T19:15:14Z""}}"
552,OpenPR,2021-09-21 19:24:39,stefanberger,unfork_merge,,
552,MergePR,2021-09-21 21:53:14,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5338969813"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/784d9e21947c4846b47e3a1859600232d241eb74""}"
552,DeleteBranch,2021-09-21 21:53:19,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5338970201"", ""commit_url"": null}"
552,IssueCommentSupplement,2021-09-22 01:12:43,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3454](https://coveralls.io/builds/42976773)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.01%**) to **75.506%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/42976773/badge)](https://coveralls.io/builds/42976773) |
| :-- | --: |
| Change from base [Build 3450](https://coveralls.io/builds/42969177): |  0.01% |
| Covered Lines: | 5746 |
| Relevant Lines: | 7610 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924501944"", ""author_association"": ""NONE""}"
553,OpenPR,2021-09-22 06:38:22,tbaederr,fork_close,,
553,Revise,2021-09-22 06:38:46,tbaederr,fork_close,"aes: Avoid defining an already defined macro

printf() is already defined as a macro when the compiler in use does not
support __va_arg_pack, which is the case for e.g. clang:

../../../src/swtpm/swtpm_aes.c:55:9: error: 'printf' macro redefined
[-Werror,-Wmacro-redefined]
        ^
/usr/include/bits/stdio2.h:115:11: note: previous definition is here
          ^
1 error generated.

Signed-off-by: Timm Bäder <tbaeder@redhat.com>","{""sha"": ""16e04299c802ab8d833bbde16aa69f3539cafefd"", ""author"": {""name"": ""Timm B\u00e4der"", ""email"": ""tbaeder@redhat.com"", ""date"": ""2021-09-22T06:34:35Z""}, ""committer"": {""name"": ""Timm B\u00e4der"", ""email"": ""tbaeder@redhat.com"", ""date"": ""2021-09-22T06:38:46Z""}}"
553,IssueComment,2021-09-22 11:02:19,stefanberger,fork_close,"Is it defined to something that will generate output because that's what we are trying to avoid? Should it maybe rather be the following?

```
#ifdef printf
#undef printf
#endif
```
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924823319"", ""author_association"": ""OWNER""}"
553,IssueComment,2021-09-22 11:35:26,stefanberger,fork_close,The best is probably to convert some of the printf's for error messages to logprintf's and get rid of the rest.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924845389"", ""author_association"": ""OWNER""}"
553,IssueComment,2021-09-22 13:32:30,stefanberger,fork_close,I now opened PR #555 to get rid of the printfs. Thanks for reporting.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924934938"", ""author_association"": ""OWNER""}"
553,IssueCommentSupplement,2021-09-22 14:24:40,tbaederr,fork_close,I only thought about `#undef`'ing after I'd already opened the PR. Thanks for fixing it.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924982212"", ""author_association"": ""NONE""}"
553,ClosePR,2021-09-22 14:24:40,tbaederr,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5343611710"", ""commit_url"": null}"
554,OpenPR,2021-09-22 07:41:59,Etsukata,fork_merge,,
554,IssueComment,2021-09-22 08:20:13,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3527](https://coveralls.io/builds/43137695)

* **28** of **39**   **(71.79%)**  changed or added relevant lines in **5** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.01%**) to **75.644%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm.c](https://coveralls.io/builds/43137695/source?filename=src%2Fswtpm%2Fswtpm.c#L412) | 4 | 6 | 66.67%
| [src/swtpm/swtpm_chardev.c](https://coveralls.io/builds/43137695/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L462) | 3 | 6 | 50.0%
| [src/swtpm/cuse_tpm.c](https://coveralls.io/builds/43137695/source?filename=src%2Fswtpm%2Fcuse_tpm.c#L1593) | 5 | 11 | 45.45%
<!-- | **Total:** | **28** | **39** | **71.79%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/43137695/badge)](https://coveralls.io/builds/43137695) |
| :-- | --: |
| Change from base [Build 3525](https://coveralls.io/builds/43129283): |  0.01% |
| Covered Lines: | 5789 |
| Relevant Lines: | 7653 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/924696704"", ""author_association"": ""NONE""}"
554,ReviewComment,2021-09-22 11:40:08,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/554#pullrequestreview-760795858""}"
554,IssueComment,2021-09-24 15:19:34,stefanberger,fork_merge,"There's now unfortunately another issue... If the state of the vTPM is encrypted and one wants to run swtpm_setup again on it using `--overwrite` then this command line spawned by swtpm_setup fails:
```
/usr/bin/swtpm socket --print-states --tpmstate dir=/tmp/myvtpm --tpm2
```

It needs to `--key` option to be passed like in `src/swtpm/swtpm_setup` line 90:

```
   if (self->keyopts != NULL) {
        keyopts = g_strdup(self->keyopts);
        argv = concat_arrays(argv, (gchar*[]){""--key"", keyopts, NULL}, TRUE);
    }
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/926711304"", ""author_association"": ""OWNER""}"
554,IssueComment,2021-09-24 15:31:47,stefanberger,fork_merge,Maybe the backend interface needs to have a function to detect availability of states so that `int SWTPM_NVRAM_PrintJson(void)` can then ask the backend whether the type of state is available and in the case of the dir backend it would become a simple `stat()` on the path and file?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/926720547"", ""author_association"": ""OWNER""}"
554,IssueComment,2021-09-24 21:39:20,Etsukata,fork_merge,"> it would become a simple stat() on the path and file?

I agree with your idea and checked https://github.com/stefanberger/swtpm/pull/556. Having explicit CheckState is easier to understand.
Thanks for the fix.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/926933871"", ""author_association"": ""CONTRIBUTOR""}"
554,IssueComment,2021-09-25 14:26:58,stefanberger,fork_merge,Please rebase it on master.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/927129022"", ""author_association"": ""OWNER""}"
554,IssueComment,2021-09-28 13:23:52,stefanberger,fork_merge,Can you please rebase on master when you get a chance?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/929206577"", ""author_association"": ""OWNER""}"
554,Revise,2021-09-29 00:12:40,Etsukata,fork_merge,"swtpm: Initialize logging as early as possible

Parse ""--log"" option earlier to help debugging initialization issues.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""7639de785ede7be9c49dcec65eeb6d23aa806bee"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-22T06:59:34Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-29T00:12:40Z""}}"
554,Revise,2021-09-29 00:12:40,Etsukata,fork_merge,"swtpm_setup: Forward --logfile option to swtpm

Whenever swtpm_setup is executed with --logfile option, forward the
option to swtpm (--log file=...). This helps debugging swtpm
initialization issues.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""50f2a3c19fe3b7714081d73dc6bc009e989f396a"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-22T06:22:28Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-29T00:12:40Z""}}"
554,IssueComment,2021-09-29 00:22:22,Etsukata,fork_merge,"> Can you please rebase on master when you get a chance?

Sure, rebased.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/929718723"", ""author_association"": ""CONTRIBUTOR""}"
554,MergePR,2021-09-29 16:48:30,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5382165228"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/7b7dcbb8d8932cee4bbb43ddf68a44b38d70917a""}"
555,SubmitCommit,2021-09-22 13:31:17,stefanberger,unfork_merge,"swtpm: Get rid of printf's in swtpm_aes.c

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d8ed9c9450cf35b4ed34e9ed49ad463b5f47fa2a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-22T13:31:14Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-22T13:31:17Z""}}"
555,OpenPR,2021-09-22 13:31:42,stefanberger,unfork_merge,,
555,CrossReferenced,2021-09-22 13:32:30,stefanberger,unfork_merge,aes: Avoid defining an already defined macro,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/553"", ""is_pull_request"": true}}"
555,IssueComment,2021-09-22 15:03:05,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3465](https://coveralls.io/builds/42998218)

* **0** of **5**   **(0.0%)**  changed or added relevant lines in **1** file are covered.
* **5** unchanged lines in **1** file lost coverage.
* Overall coverage decreased (**-0.09%**) to **75.449%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_aes.c](https://coveralls.io/builds/42998218/source?filename=src%2Fswtpm%2Fswtpm_aes.c#L100) | 0 | 5 | 0.0%
<!-- | **Total:** | **0** | **5** | **0.0%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm_aes.c](https://coveralls.io/builds/42998218/source?filename=src%2Fswtpm%2Fswtpm_aes.c#L104) | 5 | 74.75% |
<!-- | **Total:** | **5** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/42998218/badge)](https://coveralls.io/builds/42998218) |
| :-- | --: |
| Change from base [Build 3458](https://coveralls.io/builds/42981454): |  -0.09% |
| Covered Lines: | 5753 |
| Relevant Lines: | 7625 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/925017194"", ""author_association"": ""NONE""}"
555,MergePR,2021-09-22 15:28:37,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5344068327"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/78137e819f2518ea9126acd2fb0fd872ef42f975""}"
556,OpenPR,2021-09-24 17:20:10,stefanberger,unfork_merge,,
556,CrossReferenced,2021-09-24 17:51:51,stefanberger,unfork_merge,"swtpm: add ""linear"" nvram store backend (for single-file storage and block devices)","{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/513"", ""is_pull_request"": true}}"
556,IssueComment,2021-09-24 18:54:03,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3482](https://coveralls.io/builds/43064359)

* **16** of **17**   **(94.12%)**  changed or added relevant lines in **2** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.02%**) to **75.465%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/43064359/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L202) | 13 | 14 | 92.86%
<!-- | **Total:** | **16** | **17** | **94.12%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm_nvstore.c](https://coveralls.io/builds/43064359/source?filename=src%2Fswtpm%2Fswtpm_nvstore.c#L1073) | 1 | 84.45% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/43064359/badge)](https://coveralls.io/builds/43064359) |
| :-- | --: |
| Change from base [Build 3466](https://coveralls.io/builds/43000604): |  0.02% |
| Covered Lines: | 5764 |
| Relevant Lines: | 7638 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/926851706"", ""author_association"": ""NONE""}"
556,ReviewApproved,2021-09-24 21:36:14,Etsukata,unfork_merge,"Thanks @stefanberger, I put a cleanup comment (`nvdata`). Other than that, it looks good to me.","{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/556#pullrequestreview-763487624""}"
556,CrossReferenced,2021-09-24 21:39:20,Etsukata,unfork_merge,swtpm_setup: Forward --logfile option to swtpm,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/554"", ""is_pull_request"": true}}"
556,CrossReferenced,2021-09-25 00:22:37,stefanberger,unfork_merge,swtpm: Search for all state files and use abstracted names in JSON,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/557"", ""is_pull_request"": true}}"
556,IssueComment,2021-09-25 00:29:44,stefanberger,unfork_merge,"> Thanks @stefanberger, I put a cleanup comment (`nvdata`). Other than that, it looks good to me.

Before it was also only looking for availability of the file, so now we have swtpm pretty much do the same and not try out the file.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/926981180"", ""author_association"": ""OWNER""}"
556,Revise,2021-09-25 03:53:18,stefanberger,unfork_merge,"swtpm: Remove all interface functions from swtpm_nvstore_dir.h

Remove all interface functions from swtpm_nvstore_dir.h and make them
static in swtpm_nvstore_dir.c. This way we avoid direct calls to these
functions from elsewhere.

Move the declaration of the interface structure into swtpm_nvstore.h
to get rid of swtpm_nvstore_dir.h entirely.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""ad23a9320f0cc556b82d4d821acb14f34d815e08"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-25T00:24:32Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-25T03:53:18Z""}}"
556,Revise,2021-09-25 03:53:19,stefanberger,unfork_merge,"swtpm: Implement CheckState interface function for checking for stateblob

Implement a CheckState interface function for checking for the
TPM_PERMANENT_ALL_NAME blog. The dirctory backend does a simple stat on the
file without actually reading it, which otherwise may require the (correct)
key if it was encrypted.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""e9c724dc955383bfb28b5249aa5f294c13624226"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-25T00:24:52Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-25T03:53:19Z""}}"
556,ReviewApproved,2021-09-25 05:07:03,Etsukata,unfork_merge,"Thanks, looks good to me.","{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/556#pullrequestreview-763562316""}"
556,RenameTitle,2021-09-25 12:52:16,stefanberger,unfork_merge,,"{""rename"": {""from"": ""Implement CheckState interface function"", ""to"": ""swtpm: Implement CheckState interface function""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5359675124""}"
556,MergePR,2021-09-25 12:52:32,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5359675477"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/1b2b721e061a5f860617d4819bf14640d602ad34""}"
556,DeleteBranch,2021-09-25 12:59:25,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5359682444"", ""commit_url"": null}"
557,OpenPR,2021-09-25 00:22:12,stefanberger,unfork_merge,,
557,IssueComment,2021-09-25 00:22:37,stefanberger,unfork_merge,"This is a follow-up to PR #556 .

@Etsukata ","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/926979927"", ""author_association"": ""OWNER""}"
557,CrossReferenced,2021-09-25 05:22:44,Etsukata,unfork_merge,"Introduce ""--print-states"" to check TPM state existence","{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/524"", ""is_pull_request"": true}}"
557,ReviewApproved,2021-09-25 05:34:33,Etsukata,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/557#pullrequestreview-763563708""}"
557,Revise,2021-09-25 12:55:34,stefanberger,unfork_merge,"swtpm: Search for all state files and use abstracted names in JSON

Search for all the state files not just the permanent state and
when printing the JSON use the abstracted names rather than concrete
filenames that are only valid for the dir backend but will likely
not exist in other backends.

Adjust swtpm_setup to search for the abstracted name and also
adjust the error message to print out the abstracted name.

Adjust the test cases.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""8c05ad5fe91ea54e1d42892bc344899bc17615db"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-25T00:23:22Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-25T12:55:34Z""}}"
557,BaseRefChanged,2021-09-25 12:58:58,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5359682054"", ""commit_url"": null}"
557,MergePR,2021-09-25 14:26:07,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5359786261"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f2aa3274b2cc667f57fb0e5b91f5d535ac551cee""}"
557,DeleteBranch,2021-09-25 14:26:18,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5359786453"", ""commit_url"": null}"
558,OpenPR,2021-09-26 15:58:43,stefanberger,unfork_merge,,
558,IssueComment,2021-09-26 15:59:31,stefanberger,unfork_merge,@Etsukata I would like to slide this test in before your changes so that we can test the before and after.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/927328592"", ""author_association"": ""OWNER""}"
558,ReviewComment,2021-09-27 01:32:00,Etsukata,unfork_merge,"> @Etsukata I would like to slide this test in before your changes so that we can test the before and after.

Sounds good! Thanks for adding this test.

> This is to ensure that
swtpm can access these files properly when the handling of options and the
changing to the --runas user is moved around within swtpm.

In this test, `run_swtpm` is executed as `root` user so even if we move `handle_log_option()` as follows (before `change_process_ownership` ), this test won't fail.

```
diff --git a/src/swtpm/swtpm.c b/src/swtpm/swtpm.c
index e1161b6..964ca8d 100644
--- a/src/swtpm/swtpm.c
+++ b/src/swtpm/swtpm.c
@@ -406,6 +406,10 @@ int swtpm_main(int argc, char **argv, const char *prgname, const char *iface)
         exit(EXIT_FAILURE);
     }
 
+    if (handle_log_options(logdata) < 0) {
+        exit(EXIT_FAILURE);
+    }
+
     if (mlp.fd >= 0 && mlp.fd < 3) {
         /* no std{in,out,err} */
         logprintf(STDERR_FILENO,
@@ -457,8 +461,7 @@ int swtpm_main(int argc, char **argv, const char *prgname, const char *iface)
             goto exit_failure;
     }
 
-    if (handle_log_options(logdata) < 0 ||
-        handle_key_options(keydata) < 0 ||
+    if (handle_key_options(keydata) < 0 ||
         handle_migration_key_options(migkeydata) < 0 ||
         handle_pid_options(piddata) < 0 ||
         handle_locality_options(localitydata, &mlp.locality_flags) < 0 ||
```

I'm now considering how to catch this.","{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/558#pullrequestreview-763763385""}"
558,IssueComment,2021-09-27 03:18:55,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3519](https://coveralls.io/builds/43120525)

* **1** of **1**   **(100.0%)**  changed or added relevant line in **1** file are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.1%**) to **75.632%**

---


|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/43120525/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L1625) | 1 | 77.91% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/43120525/badge)](https://coveralls.io/builds/43120525) |
| :-- | --: |
| Change from base [Build 3517](https://coveralls.io/builds/43119071): |  0.1% |
| Covered Lines: | 5773 |
| Relevant Lines: | 7633 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/927495456"", ""author_association"": ""NONE""}"
558,IssueComment,2021-09-27 14:06:24,stefanberger,unfork_merge,"In this test case I am reading the state files directly. Maybe we should use the --printstates option for that and reintroduce the `{'name': 'permall', 'size': 1072}` type of enumeration with sizes added to be able to abstract this test case bit. I am not sure whether it will be useful for someone to know not just whether a type of state exists but also what the size is of the blob. Hm. @Etsukata ?","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/927909036"", ""author_association"": ""OWNER""}"
558,Revise,2021-09-27 22:28:56,stefanberger,unfork_merge,"swtpm_setup: Fix exit code on error to be '1'.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""16e7f4f2f9ebd3e8b7b0b0c3078eebeb74ceff99"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-27T22:26:43Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-27T22:28:56Z""}}"
558,IssueComment,2021-09-28 03:09:21,Etsukata,unfork_merge,"> type of enumeration with sizes added to be able to abstract this test case bit. 

Sounds good to me. I've checked https://github.com/stefanberger/swtpm/pull/563.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/928691215"", ""author_association"": ""CONTRIBUTOR""}"
558,Revise,2021-09-28 12:41:12,stefanberger,unfork_merge,"tests: Add a test case for testing --runas and ability to access files

Add a test case for testing the --runas parameter and the ability to access
existing files that have restrictive access permission so that only allow
the --runas user is able to access these files. This is to ensure that
swtpm can access these files properly when the handling of options and the
changing to the --runas user is moved around within swtpm.

Skip the test case if swtpm is linked with ASAN since then we get these
types of error messages that fail tests:

==== Starting swtpm with interfaces socket+socket ====
==3303263==LeakSanitizer has encountered a fatal error.
==3303263==HINT: For debugging, try setting environment variable LSAN_OPTIONS=verbosity=1:log_threads=1
==3303263==HINT: LeakSanitizer does not work under ptrace (strace, gdb, etc)

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""115a442b8147cc4a6f0f65043bb96fa3cd6d68e9"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-26T02:26:40Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-28T12:41:12Z""}}"
558,MergePR,2021-09-28 13:23:29,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5373864001"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/30510820fe8dab212e358ec8164e53874b4b865c""}"
558,DeleteBranch,2021-09-30 01:09:45,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5384322754"", ""commit_url"": null}"
560,OpenPR,2021-09-27 02:46:37,stefanberger,unfork_merge,,
560,IssueComment,2021-09-27 04:36:07,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3498](https://coveralls.io/builds/43086578)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.501%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43086578/badge)](https://coveralls.io/builds/43086578) |
| :-- | --: |
| Change from base [Build 3485](https://coveralls.io/builds/43066507): |  0.0% |
| Covered Lines: | 5763 |
| Relevant Lines: | 7633 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/927523608"", ""author_association"": ""NONE""}"
560,Revise,2021-09-27 11:53:08,stefanberger,unfork_merge,"tests: Fix tests using tpm2-abrmd by preventing concurrency

The two tests test_tpm2_samples_create_tpmca and
test_tpm2_swtpm_localca_pkcs11 cannot complete successfully if run in
parallel. To solve this issue, introduce a dependency via the log files
to prevent parallel execution of the two test. We have to append the
.test suffix to their names to be able to do this.

docs:
https://www.gnu.org/software/automake/manual/html_node/Parallel-Test-Harness.html

Resolves issue #501, though the problem with stability of the tpm2 pkcs11
module is not resolved.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9051303f68c27595558059485890a53b12129d1f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-27T02:38:50Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-27T11:53:08Z""}}"
560,MergePR,2021-09-27 13:17:55,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5365546556"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3c10960c25df596c38f4d9a7dc500952f0d79fe6""}"
560,DeleteBranch,2021-09-27 13:17:58,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5365546969"", ""commit_url"": null}"
560,CrossReferenced,2021-09-28 20:28:14,stefanberger,unfork_merge,Test test_tpm2_swtpm_localca_pkcs11 is failing frequently,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/501"", ""is_pull_request"": false}}"
562,SubmitCommit,2021-09-27 12:26:33,stefanberger,unfork_close,"debian: Remove trousers from list of dependencies

Trouser is needed by samples/swtpm-create-tpmca which in turn needs
GnuTLS tpmtool but doesn't install on Ubuntu machines when there's no
TPM 1.2 available or /dev/tpm0 is a TPM 2, so remove it from the list
of dependencies.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""eb53dc2f35c3a24d9990a69de44a64c28357ae96"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-27T12:26:15Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-27T12:26:33Z""}}"
562,OpenPR,2021-09-27 12:45:26,stefanberger,unfork_close,,
562,IssueComment,2021-09-27 14:32:25,coveralls,unfork_close,"## Pull Request Test Coverage Report for [Build 3500](https://coveralls.io/builds/43089539)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.501%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43089539/badge)](https://coveralls.io/builds/43089539) |
| :-- | --: |
| Change from base [Build 3485](https://coveralls.io/builds/43066507): |  0.0% |
| Covered Lines: | 5763 |
| Relevant Lines: | 7633 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/927933077"", ""author_association"": ""NONE""}"
562,CrossReferenced,2021-09-27 14:44:59,stefanberger,unfork_close,Unable to build on ubuntu 21.04,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/559"", ""is_pull_request"": false}}"
562,IssueComment,2021-09-27 16:09:51,nchevsky,unfork_close,"We may have some code here and there that, while not actually using TrouSerS, does have an unconditional dependency on its `tss` user. For example:

```
debian/swtpm-tools.postinst:  chown tss:root $SWTPM_LOCALCA_DIR
                                    ^^^
```

There may be more; this was just off the top of my head.

Speaking of `tpmtool(1)`, Debian stubbornly builds their `gnutls-bin` package with TPM support unconditionally turned off ([Debian bug](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=790500), [Ubuntu bug](https://bugs.launchpad.net/ubuntu/+source/gnutls28/+bug/1702755)) even though upstream (GnuTLS) has had TPM support enabled by default for _seven years_.

I submitted [this merge request](https://salsa.debian.org/gnutls-team/gnutls/-/merge_requests/2) to the Debian maintainer to try to get the `--without-tpm` dropped from the build (lots of background information in the merge request description and comments), but he doesn't seem interested.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/928033026"", ""author_association"": ""CONTRIBUTOR""}"
562,IssueComment,2021-09-27 16:55:46,stefanberger,unfork_close,@nchevsky You are right! There's no standalone packages (like SuSE's system-user-tss) that would give us this tss user. I hope I will remember this in the future as well.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/928069509"", ""author_association"": ""OWNER""}"
562,ClosePR,2021-09-27 16:59:27,stefanberger,unfork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5367050003"", ""commit_url"": null}"
562,IssueCommentSupplement,2021-09-27 17:00:38,stefanberger,unfork_close,Another choice for use would be to create the tss user and group in a swtpm post install script file if that user/group don't exist. ,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/928073019"", ""author_association"": ""OWNER""}"
562,DeleteBranch,2021-10-11 22:20:02,stefanberger,unfork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5445854464"", ""commit_url"": null}"
563,OpenPR,2021-09-27 15:21:27,stefanberger,unfork_merge,,
563,IssueComment,2021-09-27 15:23:10,stefanberger,unfork_merge,"@Etsukata I am switching back to the JSON object in the state type enumeration. Since the lock is locked I cannot actually use the --print-states to display the sizes of the state files while the swtpm is running, but I think it's better to have the JSON object and also the size in it.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/927980786"", ""author_association"": ""OWNER""}"
563,Revise,2021-09-27 15:38:48,stefanberger,unfork_merge,"swtpm: Add size to each type of state and use JSON object

Add the size of the type state to the --print-states output and switch
back to a JSON object when enumerating the blobs.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""521e11ae3d578be2cf9f24e99153754f43853ffd"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-27T15:02:47Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-27T15:38:48Z""}}"
563,IssueComment,2021-09-27 19:39:41,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3510](https://coveralls.io/builds/43098239)

* **3** of **3**   **(100.0%)**  changed or added relevant lines in **2** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.01%**) to **75.514%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43098239/badge)](https://coveralls.io/builds/43098239) |
| :-- | --: |
| Change from base [Build 3501](https://coveralls.io/builds/43091424): |  0.01% |
| Covered Lines: | 5764 |
| Relevant Lines: | 7633 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/928210723"", ""author_association"": ""NONE""}"
563,ReviewApproved,2021-09-28 03:06:29,Etsukata,unfork_merge,"Thanks, looks good to me.","{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/563#pullrequestreview-764924308""}"
563,CrossReferenced,2021-09-28 03:09:21,Etsukata,unfork_merge,Tests: Add a test case for testing --runas and ability to access files,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/558"", ""is_pull_request"": true}}"
563,MergePR,2021-09-28 11:46:38,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5373255180"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/2fdb7c307ba59db512e7ab321f64a43924079113""}"
563,DeleteBranch,2021-09-28 11:46:42,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5373255460"", ""commit_url"": null}"
564,SubmitCommit,2021-09-28 14:08:32,stefanberger,unfork_merge,"test: Fix test_tpm2_file_permissions for BSD

BSD cp does not understand the -d option, so remove it.
It's better to use ""su -u nobody -c '...'"" than sudo, which makes
this test also work on the BSDs.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""91767f33c4567049c47cb49ad1214fe1f1ab3b3e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-28T14:08:29Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-28T14:08:32Z""}}"
564,OpenPR,2021-09-28 14:38:26,stefanberger,unfork_merge,,
564,IssueComment,2021-09-28 15:41:08,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3522](https://coveralls.io/builds/43125007)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.632%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43125007/badge)](https://coveralls.io/builds/43125007) |
| :-- | --: |
| Change from base [Build 3520](https://coveralls.io/builds/43121852): |  0.0% |
| Covered Lines: | 5773 |
| Relevant Lines: | 7633 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/929348875"", ""author_association"": ""NONE""}"
564,MergePR,2021-09-28 16:31:10,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5375176708"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/94aae1bbe5b5609df3d9a657a69b2a6f3d5d4a91""}"
564,DeleteBranch,2021-09-28 16:31:13,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5375177016"", ""commit_url"": null}"
565,SubmitCommit,2021-09-28 15:04:47,stefanberger,unfork_merge,"build-sys: Build swtpm-0.6.2

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""eb4022868cb2b505eeb4a714aa81cc780227c812"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-28T15:04:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-28T15:04:47Z""}}"
565,SubmitCommit,2021-09-28 15:07:00,stefanberger,unfork_merge,"swtpm_setup: Fix exit code on error to be '1'.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7ad0ede7782606c78227ce0e44860783db38141b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-27T22:26:43Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-28T15:07:00Z""}}"
565,OpenPR,2021-09-28 15:23:47,stefanberger,unfork_merge,,
565,MergePR,2021-09-28 18:21:00,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5375780699"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/da7851de14273e1d3cbc51e46dbf133a7b9dec1a""}"
566,SubmitCommit,2021-09-29 00:54:36,Etsukata,fork_merge,"build-sys: Introduce --enable-sanitizers to configure

This enables address and undefined sanitizers.

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""709dfb2345eac3deaf1426b1d49b71518d13f1f2"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-28T05:35:20Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-29T00:54:36Z""}}"
566,SubmitCommit,2021-09-29 00:54:36,Etsukata,fork_merge,"build-sys: Minor error message typo fix for glib

Signed-off-by: Eiichi Tsukata <eiichi.tsukata@nutanix.com>","{""sha"": ""c32bb1daa0e60cecb7f880b60e5861db7dd3709d"", ""author"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-29T00:53:12Z""}, ""committer"": {""name"": ""Eiichi Tsukata"", ""email"": ""eiichi.tsukata@nutanix.com"", ""date"": ""2021-09-29T00:54:36Z""}}"
566,OpenPR,2021-09-29 03:09:43,Etsukata,fork_merge,,
566,IssueComment,2021-09-29 03:48:13,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3528](https://coveralls.io/builds/43139933)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.632%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43139933/badge)](https://coveralls.io/builds/43139933) |
| :-- | --: |
| Change from base [Build 3525](https://coveralls.io/builds/43129283): |  0.0% |
| Covered Lines: | 5773 |
| Relevant Lines: | 7633 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/929806767"", ""author_association"": ""NONE""}"
566,IssueComment,2021-09-29 15:53:24,stefanberger,fork_merge,Thanks. Using clang it uncovered memory leaks in swtpm_setup and swtpm_localca that I hadn't see before even though I often run with ASAN enabled... It seem to support asan better with clang than with gcc?!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/930307451"", ""author_association"": ""OWNER""}"
566,MergePR,2021-09-29 15:53:31,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5381840288"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4e1ce7359613454f29f4dfb80c6810f5c7855c03""}"
566,IssueCommentSupplement,2021-09-29 16:24:28,stefanberger,fork_merge,"When I build it like this:
```
CC=clang ./autogen.sh --enable-sanitizers --prefix=/usr --without-seccomp
```
I get this error on running one specific test:
```
$ LSAN_OPTIONS=fast_unwind_on_malloc=0 ./test_print_capabilities 
Need to be root to run test with CUSE interface.
Test 1: OK
Error: Could not pass --print-capabilities

=================================================================
==1731193==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 56 byte(s) in 1 object(s) allocated from:
    #0 0x4c380f  (/home/stefanb/dev/swtpm/src/swtpm_setup/swtpm_setup+0x4c380f)
    #1 0x7f9a3bec0938  (/lib64/libglib-2.0.so.0+0x5d938)
    #2 0x7f9a3bed6150  (/lib64/libglib-2.0.so.0+0x73150)
    #3 0x50ae40  (/home/stefanb/dev/swtpm/src/swtpm_setup/swtpm_setup+0x50ae40)
    #4 0x7f9a3b71eb74  (/lib64/libc.so.6+0x27b74)
    #5 0x41d88d  (/home/stefanb/dev/swtpm/src/swtpm_setup/swtpm_setup+0x41d88d)

Direct leak of 39 byte(s) in 1 object(s) allocated from:
    #0 0x4c380f  (/home/stefanb/dev/swtpm/src/swtpm_setup/swtpm_setup+0x4c380f)
    #1 0x7f9a3bec0938  (/lib64/libglib-2.0.so.0+0x5d938)
    #2 0x7f9a3bed5c23  (/lib64/libglib-2.0.so.0+0x72c23)
    #3 0x50adf7  (/home/stefanb/dev/swtpm/src/swtpm_setup/swtpm_setup+0x50adf7)
    #4 0x7f9a3b71eb74  (/lib64/libc.so.6+0x27b74)
    #5 0x41d88d  (/home/stefanb/dev/swtpm/src/swtpm_setup/swtpm_setup+0x41d88d)

SUMMARY: AddressSanitizer: 95 byte(s) leaked in 2 allocation(s).
```

When I build with `-g` or `-ggdb` to be able to see the source code lines:
```
CFLAGS=""-ggdb"" CC=clang ./autogen.sh --enable-sanitizers --prefix=/usr --without-seccomp
```

The errors are now gone:
```
LSAN_OPTIONS=fast_unwind_on_malloc=0 ./test_print_capabilities 
Need to be root to run test with CUSE interface.
Test 1: OK
Test 2: OK
Test 3: OK
```

Do you get the same? I would certainly like to know where those leaks are.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/930334224"", ""author_association"": ""OWNER""}"
566,CrossReferenced,2021-09-29 16:44:22,stefanberger,fork_merge,Odd memory leak when using sanitizers and clang,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/568"", ""is_pull_request"": false}}"
567,SubmitCommit,2021-09-29 16:07:43,stefanberger,unfork_merge,"tests: Replace bad '~' with '\!'

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""95c7727734c5ae2840913c947ed33ccbc86b42f8"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T16:07:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T16:07:43Z""}}"
567,SubmitCommit,2021-09-29 16:09:25,stefanberger,unfork_merge,"swtpm_localca: Fix a TPM 1.2/TCSD related memory leak

Auto-free the variables used for holding values read from the config
file.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3b16d817065c912c2cec1970f3eefd145b6f428f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T15:55:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T16:09:25Z""}}"
567,SubmitCommit,2021-09-29 16:36:01,stefanberger,unfork_merge,"tests: Use nm and grep to check for ASAN

clang doesn't link executables built with ASAN support to libasan, like
gcc does, so we have to use nm rather than ldd for checking for whether
the executable was built with ASAN. nm is part of the binutils package
and should be available on all systems where gcc was installed.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""c33b055d85b164206ccfd564cf15ea6acfe1f6b9"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T16:35:58Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T16:36:01Z""}}"
567,OpenPR,2021-09-29 16:40:30,stefanberger,unfork_merge,,
567,IssueComment,2021-09-29 18:13:20,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3531](https://coveralls.io/builds/43159080)

* **0** of **4**   **(0.0%)**  changed or added relevant lines in **1** file are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage decreased (**-0.02%**) to **75.612%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_localca/swtpm_localca.c](https://coveralls.io/builds/43159080/source?filename=src%2Fswtpm_localca%2Fswtpm_localca.c#L791) | 0 | 4 | 0.0%
<!-- | **Total:** | **0** | **4** | **0.0%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm_localca/swtpm_localca.c](https://coveralls.io/builds/43159080/source?filename=src%2Fswtpm_localca%2Fswtpm_localca.c#L798) | 1 | 81.97% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/43159080/badge)](https://coveralls.io/builds/43159080) |
| :-- | --: |
| Change from base [Build 3529](https://coveralls.io/builds/43156331): |  -0.02% |
| Covered Lines: | 5773 |
| Relevant Lines: | 7635 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/930424568"", ""author_association"": ""NONE""}"
567,MergePR,2021-09-29 18:57:39,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5382907467"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3928bd2c1c25861b9f062d25c3a2971784b1ab84""}"
567,DeleteBranch,2021-09-29 18:57:43,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5382907842"", ""commit_url"": null}"
569,SubmitCommit,2021-09-29 23:21:31,stefanberger,unfork_merge,"swtpm_setup: Use return from main rather than exit to resolve ASAN issue

Use return rather than exit() when returning from main so that g_autofree'd
variables can be freed.

This resolves issue #568 that occurs with clang only.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5655fd4e148c2da8303b3f1d6c58db0e7d87b9d1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T23:17:59Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T23:21:31Z""}}"
569,SubmitCommit,2021-09-29 23:21:31,stefanberger,unfork_merge,"swtpm_localca: Use return from main rather than exit to resolve ASAN issue

Use return rather than exit() when returning from main so that g_autofree'd
variables can be freed.

This resolves issue #568 that occurs with clang only.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2847955b23d30f9f9fff209fb6ca06b988353559"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T23:20:32Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T23:21:31Z""}}"
569,SubmitCommit,2021-09-29 23:59:27,stefanberger,unfork_merge,"swtpm_localca: Fix memory leak on arrays of strings

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""bf1ac55f447f1cb39364e71afff177cfa0b9a093"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T23:58:56Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-29T23:59:27Z""}}"
569,OpenPR,2021-09-30 00:03:02,stefanberger,unfork_merge,,
569,IssueComment,2021-09-30 01:18:45,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3535](https://coveralls.io/builds/43168217)

* **3** of **3**   **(100.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.003%**) to **75.627%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43168217/badge)](https://coveralls.io/builds/43168217) |
| :-- | --: |
| Change from base [Build 3533](https://coveralls.io/builds/43161846): |  0.003% |
| Covered Lines: | 5790 |
| Relevant Lines: | 7656 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/930666829"", ""author_association"": ""NONE""}"
569,MergePR,2021-09-30 01:18:48,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5384351756"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/68dea0aba1e5c1335b5a19a9a61259ba9a5985be""}"
569,DeleteBranch,2021-09-30 01:18:51,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5384351903"", ""commit_url"": null}"
570,OpenPR,2021-09-30 14:15:10,PiMaker,fork_merge,,
570,CrossReferenced,2021-09-30 14:18:39,PiMaker,fork_merge,"swtpm: add ""linear"" nvram store backend (for single-file storage and block devices)","{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/513"", ""is_pull_request"": true}}"
570,ReviewComment,2021-09-30 14:42:34,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/570#pullrequestreview-767961651""}"
570,ReviewRejected,2021-09-30 14:59:31,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/570#pullrequestreview-767968348""}"
570,IssueComment,2021-09-30 15:12:31,stefanberger,fork_merge,"You probably saw Travis output. just missing header files...
```
swtpm_backend_dir.c: In function ‘parse_dir_state’:

swtpm_backend_dir.c:23:9: error: implicit declaration of function ‘strncmp’ [-Werror=implicit-function-declaration]

     if (strncmp(uri, ""dir://"", 6) == 0) {

         ^

swtpm_backend_dir.c: In function ‘delete_statefiles’:

swtpm_backend_dir.c:73:17: error: ‘errno’ undeclared (first use in this function)

             if (errno != 0 && errno != ENOENT) {

                 ^

swtpm_backend_dir.c:73:17: note: each undeclared identifier is reported only once for each function it appears in

swtpm_backend_dir.c:73:40: error: ‘ENOENT’ undeclared (first use in this function)

             if (errno != 0 && errno != ENOENT) {

                                        ^

swtpm_backend_dir.c:74:73: error: implicit declaration of function ‘strerror’ [-Werror=implicit-function-declaration]

             logerr(gl_LOGFILE, ""Error getting next filename: %s\n"", strerror(er

                                                                     ^
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/931413370"", ""author_association"": ""OWNER""}"
570,Revise,2021-10-05 13:24:34,PiMaker,fork_merge,"swtpm_setup: remove redundant delete_state function

...and use delete_swtpm_statefiles instead. This function iterates the
folder instead of just deleting one file, but since it is already called
before the init call guarded here, it can only affect files created by
this run anyway.

Note that delete_state had slightly different return semantics, but it
doesn't matter, as the return value is ignored here anyway (best effort
cleanup).

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""c7d143f997e9c73a1d8bc52e60d1367d2bd0dd94"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-09-30T07:30:45Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T13:24:34Z""}}"
570,Revise,2021-10-05 13:24:34,PiMaker,fork_merge,"swtpm_setup: use mkstemp for pidfile

This avoids issues with state backends where we don't have a convenient
directory for a pidfile available.

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""5749deb7e8fa57f09b0b466d9a0af086da2c4fed"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-09-30T08:17:57Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T13:24:34Z""}}"
570,Revise,2021-10-05 13:24:34,PiMaker,fork_merge,"swtpm_setup: add abstract swtpm_backend_ops with dir:// implementation

Abstract away implementation specific code for handling TPM state in
swtpm_setup. The current code for handling directories is moved to
'swtpm_backend_dir.c'.

Where possible, the input argument is simply passed verbatim as
'backend-uri' to swtpm.

No functional change intended, aside from supporting 'dir://' as
optional prefix. The checks for lock-file accessibility are moved to
check_access(), but that shouldn't affect anything AFAICT.

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""c91ff79905ca5220da0cf39d3551fca422b0a7a1"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-09-30T08:03:05Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T13:24:34Z""}}"
570,Revise,2021-10-05 13:24:34,PiMaker,fork_merge,"swtpm_setup: add file backend

Add a second backend for supporting the file:// linear nvram store in
swtpm.

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""d724a39c878c0c4a5af24a6576a1e69612e2e8b0"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-09-30T08:40:01Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T13:24:34Z""}}"
570,Revise,2021-10-05 13:24:34,PiMaker,fork_merge,"swtpm_setup: mention dir:// and file:// in man page and usage

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""7e32b2755bf598a0933367797eb31dc21c4a9f41"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-09-30T13:59:40Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T13:24:34Z""}}"
570,Revise,2021-10-05 13:24:34,PiMaker,fork_merge,"swtpm_setup: add test case to exercise file backend

heavily copy-pas^W inspired by 'test_swtpm_setup_overwrite'

Signed-off-by: Stefan Reiter <stefan@pimaker.at>","{""sha"": ""a8216a14d7f18fa76ccc3c344c6c9e7781f35502"", ""author"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-09-30T09:27:14Z""}, ""committer"": {""name"": ""Stefan Reiter"", ""email"": ""stefan@pimaker.at"", ""date"": ""2021-10-05T13:24:34Z""}}"
570,IssueComment,2021-10-05 13:28:33,PiMaker,fork_merge,"no change, just rebased so CI can run again - the new test case should now pass","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934415896"", ""author_association"": ""CONTRIBUTOR""}"
570,IssueComment,2021-10-05 13:32:43,stefanberger,fork_merge,"Oddly I get a test failure here on `tests/test_swtpm_setup_file_backend.log`:

```
Test 1 failed: Error: Could not run /home/stefanb/dev/swtpm/src/swtpm_setup/swtpm_setup.
Setup Logfile:
SWTPM_NVRAM_Init: Unsupported backend.
/home/stefanb/dev/swtpm/src/swtpm/swtpm exit with status 256:
FAIL test_swtpm_setup_file_backend (exit status: 1)
```
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934419520"", ""author_association"": ""OWNER""}"
570,IssueComment,2021-10-05 13:37:03,stefanberger,fork_merge,"> Oddly I get a test failure here on `tests/test_swtpm_setup_file_backend.log`:
My bad. Was working with old tree. Fixed now.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934423123"", ""author_association"": ""OWNER""}"
570,IssueComment,2021-10-05 14:33:51,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3571](https://coveralls.io/builds/43281743)

* **87** of **121**   **(71.9%)**  changed or added relevant lines in **4** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.1%**) to **75.673%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/43281743/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L1185) | 14 | 16 | 87.5%
| [src/swtpm_setup/swtpm.c](https://coveralls.io/builds/43281743/source?filename=src%2Fswtpm_setup%2Fswtpm.c#L76) | 13 | 20 | 65.0%
| [src/swtpm_setup/swtpm_backend_dir.c](https://coveralls.io/builds/43281743/source?filename=src%2Fswtpm_setup%2Fswtpm_backend_dir.c#L47) | 34 | 42 | 80.95%
| [src/swtpm_setup/swtpm_backend_file.c](https://coveralls.io/builds/43281743/source?filename=src%2Fswtpm_setup%2Fswtpm_backend_file.c#L41) | 26 | 43 | 60.47%
<!-- | **Total:** | **87** | **121** | **71.9%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/43281743/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L1452) | 1 | 79.36% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/43281743/badge)](https://coveralls.io/builds/43281743) |
| :-- | --: |
| Change from base [Build 3570](https://coveralls.io/builds/43280879): |  0.1% |
| Covered Lines: | 6047 |
| Relevant Lines: | 7991 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934469261"", ""author_association"": ""NONE""}"
570,MergePR,2021-10-05 15:54:42,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5411783049"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a4555cb887cbd55643fc394c8f64aab28a2a6b98""}"
570,IssueCommentSupplement,2021-10-05 15:55:20,stefanberger,fork_merge,"Thanks!
Have a look at PR #576 .","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934538003"", ""author_association"": ""OWNER""}"
571,OpenPR,2021-09-30 18:01:53,stefanberger,unfork_merge,,
571,Revise,2021-09-30 19:06:26,stefanberger,unfork_merge,"swtpm_setup: Fix errno comparison on end-of-directory (FreeBSD)

FreeBSD may return errno EINVAL beside ENOENT once there are no more
entries in a directory to walk over. It claims that readdir() follows
the getdirentries() return codes, which do include EINVAL but not
ENOENT. But ENOENT is also being used.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""c4a5f1f8a0f2bdb2d4ef07f24371ddba45def90b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-30T17:40:26Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-09-30T19:06:26Z""}}"
571,IssueComment,2021-09-30 19:17:31,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3542](https://coveralls.io/builds/43191067)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.627%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43191067/badge)](https://coveralls.io/builds/43191067) |
| :-- | --: |
| Change from base [Build 3536](https://coveralls.io/builds/43168667): |  0.0% |
| Covered Lines: | 5790 |
| Relevant Lines: | 7656 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/931596128"", ""author_association"": ""NONE""}"
571,MergePR,2021-09-30 19:37:14,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5389951427"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/500f81ec0f3dd242d3ba392a53d4bc83b742e134""}"
571,DeleteBranch,2021-09-30 19:37:20,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5389951838"", ""commit_url"": null}"
573,SubmitCommit,2021-10-01 13:36:38,stefanberger,unfork_merge,"swtpm: Make fsync() errors non-fatal (for libvirt using AppArmor)

Only recent libvirt versions have the patch for the AppArmor profile
for libvirt to allow fsync on dir and directory. Rather than failing
hard on this error, log it once and continue and do not try fsync
again after.

This patch addresses the problems seen on Ubuntu related to an older
version of libvirt without the AppArmor profile update.
- issue #484
- issue #549
- issue #559

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""04cb07fa6c02afdf16c1adb4b5c202d93c6b190c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-01T13:18:58Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-01T13:36:38Z""}}"
573,OpenPR,2021-10-01 13:40:02,stefanberger,unfork_merge,,
573,CrossReferenced,2021-10-01 13:41:26,stefanberger,unfork_merge,Unable to build on ubuntu 21.04,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/559"", ""is_pull_request"": false}}"
573,CrossReferenced,2021-10-01 13:41:45,stefanberger,unfork_merge,Cannot install swtpm on Ubuntu 20.04,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/549"", ""is_pull_request"": false}}"
573,CrossReferenced,2021-10-01 13:41:54,stefanberger,unfork_merge,swtpm commit 5e73e32 causes AppArmor failures on Ubuntu 20.04 hosts,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/484"", ""is_pull_request"": false}}"
573,IssueComment,2021-10-01 16:08:26,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3550](https://coveralls.io/builds/43214478)

* **2** of **4**   **(50.0%)**  changed or added relevant lines in **1** file are covered.
* **2** unchanged lines in **1** file lost coverage.
* Overall coverage remained the same at **75.627%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/43214478/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L401) | 2 | 4 | 50.0%
<!-- | **Total:** | **2** | **4** | **50.0%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/43214478/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L402) | 2 | 70.06% |
<!-- | **Total:** | **2** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/43214478/badge)](https://coveralls.io/builds/43214478) |
| :-- | --: |
| Change from base [Build 3545](https://coveralls.io/builds/43193375): |  0.0% |
| Covered Lines: | 5790 |
| Relevant Lines: | 7656 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/932361568"", ""author_association"": ""NONE""}"
573,IssueComment,2021-10-01 16:31:25,stefanberger,unfork_merge,@Etsukata Any comments on this work-around?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/932377843"", ""author_association"": ""OWNER""}"
573,MergePR,2021-10-01 18:16:32,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5396074271"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/bc5728a974c08ce83247afba951090926f552ab2""}"
573,IssueCommentSupplement,2021-10-04 00:23:00,Etsukata,unfork_merge,"Thanks, this work-around (https://github.com/stefanberger/swtpm/pull/574)  looks good to me.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/933058893"", ""author_association"": ""CONTRIBUTOR""}"
574,OpenPR,2021-10-01 20:53:11,stefanberger,unfork_merge,,
574,Revise,2021-10-02 16:48:10,stefanberger,unfork_merge,"Revert ""swtpm: Make fsync() errors non-fatal (for libvirt using AppArmor)""

This reverts commit 04cb07fa6c02afdf16c1adb4b5c202d93c6b190c.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""43fea0887f330c9aa1b34a7471669b71cc50aade"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-01T20:43:18Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-02T16:48:10Z""}}"
574,IssueComment,2021-10-02 17:27:21,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3559](https://coveralls.io/builds/43230480)

* **2** of **6**   **(33.33%)**  changed or added relevant lines in **1** file are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage remained the same at **75.627%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/43230480/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L404) | 2 | 6 | 33.33%
<!-- | **Total:** | **2** | **6** | **33.33%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/43230480/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L445) | 1 | 70.06% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/43230480/badge)](https://coveralls.io/builds/43230480) |
| :-- | --: |
| Change from base [Build 3555](https://coveralls.io/builds/43229617): |  0.0% |
| Covered Lines: | 5790 |
| Relevant Lines: | 7656 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/932788524"", ""author_association"": ""NONE""}"
574,Revise,2021-10-02 18:56:49,stefanberger,unfork_merge,"swtpm: Make fsync-related errors non-fatal (for libvirt using AppArmor)

Only recent libvirt versions have the patch for the AppArmor profile for
libvirt to allow fsync after opening a directory for reading. Rather
than failing hard on the open-directory-for-reading error, log it once
and continue and do not try it again after.

This patch addresses the problems seen on Ubuntu related to an older
version of libvirt without the AppArmor profile update.
- issue #484
- issue #549
- issue #559

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""bba8f87adb676e3c7b784f107d81d349f18701f7"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-01T20:50:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-02T18:56:49Z""}}"
574,MergePR,2021-10-02 21:12:30,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5398774804"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/d755072372e18379bd82134c33b9d2f3bf52647d""}"
574,CrossReferenced,2021-10-04 00:23:00,Etsukata,unfork_merge,swtpm: Make fsync() errors non-fatal (for libvirt using AppArmor),"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/573"", ""is_pull_request"": true}}"
574,DeleteBranch,2021-10-05 15:59:24,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5411813123"", ""commit_url"": null}"
575,SubmitCommit,2021-10-04 22:09:23,stefanberger,unfork_merge,"tests: Skip TPM 2 pkcs11-related test when ASAN is used

The key is freed using 'gnutls_privkey_deinit(pkcs11key)', yet the
following memory leaks show up that are most likely in the pkcs11 module.
Skip the test if ASAN is being used to avoid the test failure.

Direct leak of 55080 byte(s) in 1 object(s) allocated from:
    #0 0x7fdabb152af7 in calloc (/lib64/libasan.so.6+0xaeaf7)
    #1 0x7fdab6b737c6 in C_Initialize (/usr/lib64/pkcs11/libtpm2_pkcs11.so+0x147c6)
    #2 0x7fdab9a5f8a9 in initialize_module_inlock_reentrant (/lib64/libp11-kit.so.0+0x2b8a9)
    #3 0x7fdab9a5fc88 in managed_C_Initialize (/lib64/libp11-kit.so.0+0x2bc88)
    #4 0x7fdab9a66018 in p11_kit_modules_initialize (/lib64/libp11-kit.so.0+0x32018)
    #5 0x7fdab9a66778 in p11_kit_modules_load_and_initialize (/lib64/libp11-kit.so.0+0x32778)
    #6 0x7fdabab10dc5 in auto_load (/lib64/libgnutls.so.30+0x9cdc5)
    #7 0x7fdabab12656 in gnutls_pkcs11_init (/lib64/libgnutls.so.30+0x9e656)
    #8 0x7fdabab12779 in _gnutls_pkcs11_check_init (/lib64/libgnutls.so.30+0x9e779)
    #9 0x7fdabab1af1f in gnutls_pkcs11_privkey_import_url (/lib64/libgnutls.so.30+0xa6f1f)
    #10 0x7fdabaaee0e3 in gnutls_privkey_import_url (/lib64/libgnutls.so.30+0x7a0e3)
    #11 0x40abee in main /home/stefanb/dev/swtpm/src/swtpm_cert/ek-cert.c:1399
    #12 0x7fdab9f5ab74 in __libc_start_main (/lib64/libc.so.6+0x27b74)
    #13 0x40366d in _start (/home/stefanb/dev/swtpm/src/swtpm_cert/swtpm_cert+0x40366d)

Indirect leak of 8208 byte(s) in 1 object(s) allocated from:
    #0 0x7fdabb152af7 in calloc (/lib64/libasan.so.6+0xaeaf7)
    #1 0x7fdab6b736f9 in C_Initialize (/usr/lib64/pkcs11/libtpm2_pkcs11.so+0x146f9)
    #2 0x7fdab9a5f8a9 in initialize_module_inlock_reentrant (/lib64/libp11-kit.so.0+0x2b8a9)
    #3 0x7fdab9a5fc88 in managed_C_Initialize (/lib64/libp11-kit.so.0+0x2bc88)
    #4 0x7fdab9a66018 in p11_kit_modules_initialize (/lib64/libp11-kit.so.0+0x32018)
    #5 0x7fdab9a66778 in p11_kit_modules_load_and_initialize (/lib64/libp11-kit.so.0+0x32778)
    #6 0x7fdabab10dc5 in auto_load (/lib64/libgnutls.so.30+0x9cdc5)
    #7 0x7fdabab12656 in gnutls_pkcs11_init (/lib64/libgnutls.so.30+0x9e656)
    #8 0x7fdabab12779 in _gnutls_pkcs11_check_init (/lib64/libgnutls.so.30+0x9e779)
    #9 0x7fdabab1af1f in gnutls_pkcs11_privkey_import_url (/lib64/libgnutls.so.30+0xa6f1f)
    #10 0x7fdabaaee0e3 in gnutls_privkey_import_url (/lib64/libgnutls.so.30+0x7a0e3)
    #11 0x40abee in main /home/stefanb/dev/swtpm/src/swtpm_cert/ek-cert.c:1399
    #12 0x7fdab9f5ab74 in __libc_start_main (/lib64/libc.so.6+0x27b74)
    #13 0x40366d in _start (/home/stefanb/dev/swtpm/src/swtpm_cert/swtpm_cert+0x40366d)

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""52341e1f1843b0ff3253c8146ed71d4cd5cfc7d1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-04T22:07:43Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-04T22:09:23Z""}}"
575,OpenPR,2021-10-04 22:10:44,stefanberger,unfork_merge,,
575,IssueComment,2021-10-04 23:28:01,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3566](https://coveralls.io/builds/43265355)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.627%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43265355/badge)](https://coveralls.io/builds/43265355) |
| :-- | --: |
| Change from base [Build 3560](https://coveralls.io/builds/43230981): |  0.0% |
| Covered Lines: | 5790 |
| Relevant Lines: | 7656 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/933932238"", ""author_association"": ""NONE""}"
575,MergePR,2021-10-05 00:35:25,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5407393030"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/35c6c90128d4d4cd3cfac54c2ba7d8fa389b72da""}"
576,OpenPR,2021-10-05 15:26:49,stefanberger,unfork_merge,,
576,CrossReferenced,2021-10-05 15:55:20,stefanberger,unfork_merge,swtpm_setup: improve --tpmstate handling to allow support for file:// backends,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/570"", ""is_pull_request"": true}}"
576,Revise,2021-10-05 15:57:19,stefanberger,unfork_merge,"swtpm: Use sys/mount.h and support block devs only if BLKGETSIZE64 exists

The header file fs/linux.h only exists on Linux but we can also
use sys/mount.h, which also exists on Cygwin and the BSDs.

Only support  block devices if BLKGETSIZE64 is defined.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""33b1a4e2f56236024bbb0c8d51a5c88d0578a10d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T15:17:01Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T15:57:19Z""}}"
576,Revise,2021-10-05 15:57:19,stefanberger,unfork_merge,"swtpm: Use compiler and system dependent header files

The header file endian.h does not exists everywhere, so we have to
use system_dependencies.h to get something similar on all systems.

Some compilers, such as gcc on FreeBSD, are picky about unused
function parameters, so we have to decorate the unused ones
with SWTPM_ATTR_UNUSED.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""4e3d59cb5196783665af54d63ad21f407061e4bf"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T15:22:24Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T15:57:19Z""}}"
576,Revise,2021-10-05 15:57:19,stefanberger,unfork_merge,"headers: Add defines for little endian data conversion (OS X)

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5b27e68506583f6633f485e82c7948b53dc8b4c4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T15:37:54Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T15:57:19Z""}}"
576,IssueComment,2021-10-05 16:17:12,PiMaker,unfork_merge,"Can't comment on OSX compat, but the rest looks good to me.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934557747"", ""author_association"": ""CONTRIBUTOR""}"
576,Revise,2021-10-05 16:36:51,stefanberger,unfork_merge,"tests: Use /usr/bin/env bash rather than /bin/bash (BSDs)

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""cf93b1d59b9b1160a245ac1ff1c404248dafecd1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T16:36:48Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T16:36:51Z""}}"
576,Revise,2021-10-05 16:42:22,stefanberger,unfork_merge,"swtpm_setup: Use pidfile filename rather than fd (Cygwni, BSDs)

Use the pidfile filename rather than the fd because Cygwin for example
does not seem to support passed file descriptors and also OpenBSD
does not pass some test cases because of this.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""830a77b5d74b03526405fdf4ab06ee0f41a4f29e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T16:39:49Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T16:42:22Z""}}"
576,Revise,2021-10-05 16:48:28,stefanberger,unfork_merge,"swtpm_setup: Use SWTPM_ATTR_UNUSED on unused parameters (BSDs)

To silence the BSD gcc compiler on unused function parameters,
use SWTPM_ATTR_UNUSED.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""89a62bae96c1f68a2b57119bcf39ada85fa1b7fd"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T16:46:40Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T16:48:28Z""}}"
576,IssueComment,2021-10-05 17:47:34,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3588](https://coveralls.io/builds/43286730)

* **6** of **6**   **(100.0%)**  changed or added relevant lines in **4** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.673%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43286730/badge)](https://coveralls.io/builds/43286730) |
| :-- | --: |
| Change from base [Build 3576](https://coveralls.io/builds/43284668): |  0.0% |
| Covered Lines: | 6047 |
| Relevant Lines: | 7991 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934629132"", ""author_association"": ""NONE""}"
576,MergePR,2021-10-05 17:50:46,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5412439522"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/57a8a914c797c28f1f9c83cb7a4474bf85ebf6b0""}"
576,DeleteBranch,2021-10-05 17:50:49,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5412439875"", ""commit_url"": null}"
577,SubmitCommit,2021-10-05 18:31:55,stefanberger,unfork_merge,"swtpm: Call msync with length = 0 on Cygwin

Cygwin internally uses the Windows API call FlushViewOfFile that
seems to not like to be called with an excessive number of bytes.
Instead, call it with length = 0 so that 'the file is flushed from
the base address to the end of the mapping' and then msync() succeeds.

Source:
https://docs.microsoft.com/en-us/windows/win32/api/memoryapi/nf-memoryapi-flushviewoffile

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""eefc65c635c83e0ed960ef186fef6cd31174db05"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T18:29:51Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T18:31:55Z""}}"
577,OpenPR,2021-10-05 18:33:35,stefanberger,unfork_merge,,
577,IssueComment,2021-10-05 19:15:17,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3592](https://coveralls.io/builds/43289068)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.673%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43289068/badge)](https://coveralls.io/builds/43289068) |
| :-- | --: |
| Change from base [Build 3589](https://coveralls.io/builds/43287801): |  0.0% |
| Covered Lines: | 6047 |
| Relevant Lines: | 7991 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934699225"", ""author_association"": ""NONE""}"
577,MergePR,2021-10-05 19:22:14,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5412932424"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/680ad059aa78044b09cbeb756cc231d80f3e7379""}"
577,DeleteBranch,2021-10-05 19:23:58,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5412940586"", ""commit_url"": null}"
578,SubmitCommit,2021-10-05 20:18:31,stefanberger,unfork_merge,"swtpm_setup: Introduce label to skip over closing of pidfile

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b619760954c8638581fbcc5ccf702aa099387c2e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T20:18:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T20:18:31Z""}}"
578,SubmitCommit,2021-10-05 20:22:28,stefanberger,unfork_merge,"swtpm_setup: Move gmalloc after block that may return NULL on failure

To avoid a memory leak, move the gmalloc after a block that may
return NULL on failure.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""74887c263cb101f6a9b7d136c6d57a3120a7f22e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T20:22:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-05T20:22:28Z""}}"
578,OpenPR,2021-10-05 20:44:31,stefanberger,unfork_merge,,
578,IssueComment,2021-10-05 21:59:56,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3596](https://coveralls.io/builds/43293328)

* **3** of **4**   **(75.0%)**  changed or added relevant lines in **2** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.003%**) to **75.676%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm.c](https://coveralls.io/builds/43293328/source?filename=src%2Fswtpm_setup%2Fswtpm.c#L77) | 1 | 2 | 50.0%
<!-- | **Total:** | **3** | **4** | **75.0%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/43293328/badge)](https://coveralls.io/builds/43293328) |
| :-- | --: |
| Change from base [Build 3593](https://coveralls.io/builds/43290299): |  0.003% |
| Covered Lines: | 6048 |
| Relevant Lines: | 7992 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/934909889"", ""author_association"": ""NONE""}"
578,MergePR,2021-10-05 22:07:21,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5414003151"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/2e3745db08ca827f715752aa5109c6760b2e1bd0""}"
580,OpenPR,2021-10-06 22:18:19,stefanberger,unfork_merge,,
580,IssueComment,2021-10-06 22:57:48,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3601](https://coveralls.io/builds/43327129)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.676%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43327129/badge)](https://coveralls.io/builds/43327129) |
| :-- | --: |
| Change from base [Build 3597](https://coveralls.io/builds/43294366): |  0.0% |
| Covered Lines: | 6048 |
| Relevant Lines: | 7992 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/937303550"", ""author_association"": ""NONE""}"
580,Revise,2021-10-06 23:25:24,stefanberger,unfork_merge,"swtpm: Display the --print-states capability and document it

Display the --print-states capability in the --print-capabilites
output as cmdarg-print-states.

Document availability in the man page.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5b0509decb637df9cc1167edd12e3e5b02f9e613"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-06T22:13:01Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-06T23:25:24Z""}}"
580,Revise,2021-10-06 23:25:25,stefanberger,unfork_merge,"man: Enumerate the nvram-backend-dir separately

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""ec8c1abdaead912ea30ac6bc8aff658f379f9ebb"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-06T22:16:04Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-06T23:25:25Z""}}"
580,MergePR,2021-10-06 23:25:42,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5425064065"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/225d7009ba70e7dc1556f4c76c99161afbccd317""}"
580,DeleteBranch,2021-10-06 23:26:21,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5425065839"", ""commit_url"": null}"
581,SubmitCommit,2021-10-07 07:51:07,ThomasLamprecht,fork_merge,"debian: downgrade trousers package dependency to recommended

Currently `trousers` is listed as (hard) Dependency, but it does not
seems to be required for quite a few usecases, e.g., ours where we
mainly using swtpm for providing a tpm to VMs.

With trousers in Debian one gets an additional pain point: it comes
with rather dated and in some cirumstances failing by mistake init
script [0] that can throw errors when setting up during installation
and thus fail the whole installation of swtpm as Debian policy for
`Depends` hits:

> A package will not be configured unless all of the packages listed
> in its Depends field have been correctly configured
-- [1]

Declaring dependencies for things are not a hard requirement means
that a user will be required to install more dependencies than
actually needed.

Just documenting that as fact why I investigated in the
hard-requirement on trousers in the first place, not an actual
justification - it's a packaging bug after all.

So downgrade the dependency to ""Suggests"", as it seems a reasonable
level when checking its documented meaning:

> This is used to declare that one package may be more useful with
> one or more others. Using this field tells the packaging system and
> the user that the listed packages are related to this one and can
> perhaps enhance its usefulness, but that installing this one without
> them is perfectly reasonable.
-- [1]

[0]: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=895201
[1]: https://www.debian.org/doc/debian-policy/ch-relationships.html

Signed-off-by: Thomas Lamprecht <t.lamprecht@proxmox.com>","{""sha"": ""238bbc0efdd47ac2fdce2c1fa4d6288855c2f73c"", ""author"": {""name"": ""Thomas Lamprecht"", ""email"": ""t.lamprecht@proxmox.com"", ""date"": ""2021-10-07T07:09:33Z""}, ""committer"": {""name"": ""Thomas Lamprecht"", ""email"": ""t.lamprecht@proxmox.com"", ""date"": ""2021-10-07T07:51:07Z""}}"
581,OpenPR,2021-10-07 07:52:18,ThomasLamprecht,fork_merge,,
581,RenameTitle,2021-10-07 07:53:15,ThomasLamprecht,fork_merge,,"{""rename"": {""from"": ""debian: downgrade trousers package dependency to recommended"", ""to"": ""debian: downgrade trousers package dependency to suggested""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5426631465""}"
581,IssueComment,2021-10-07 08:30:35,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3604](https://coveralls.io/builds/43334412)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.676%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43334412/badge)](https://coveralls.io/builds/43334412) |
| :-- | --: |
| Change from base [Build 3603](https://coveralls.io/builds/43327691): |  0.0% |
| Covered Lines: | 6048 |
| Relevant Lines: | 7992 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/937572368"", ""author_association"": ""NONE""}"
581,IssueComment,2021-10-07 11:01:36,stefanberger,fork_merge,@nchevsky does this and #582 look good to you also?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/937684226"", ""author_association"": ""OWNER""}"
581,MergePR,2021-10-07 13:38:43,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5428611699"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/088a8ca44b3a3facd4faca839374306718dd297d""}"
581,IssueCommentSupplement,2021-10-07 13:38:47,stefanberger,fork_merge,Thanks a lot!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/937802530"", ""author_association"": ""OWNER""}"
582,OpenPR,2021-10-07 10:21:39,ThomasLamprecht,fork_merge,,
582,IssueComment,2021-10-07 10:59:28,stefanberger,fork_merge,This is great. I had just thought about doing something like this this morning. So thanks a lot!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/937682854"", ""author_association"": ""OWNER""}"
582,IssueComment,2021-10-07 11:00:37,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3605](https://coveralls.io/builds/43337940)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.676%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43337940/badge)](https://coveralls.io/builds/43337940) |
| :-- | --: |
| Change from base [Build 3603](https://coveralls.io/builds/43327691): |  0.0% |
| Covered Lines: | 6048 |
| Relevant Lines: | 7992 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/937683526"", ""author_association"": ""NONE""}"
582,CrossReferenced,2021-10-07 11:01:36,stefanberger,fork_merge,debian: downgrade trousers package dependency to suggested,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/581"", ""is_pull_request"": true}}"
582,ReviewComment,2021-10-07 13:46:19,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/582#pullrequestreview-773931248""}"
582,IssueComment,2021-10-07 15:44:22,ThomasLamprecht,fork_merge,"hmm, weird I force pushed the branch to my fork 40 minutes ago, but it does not show up here. Not really used to the GH workflow, did I missed doing something?

edit: ok, new force push triggered things again","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/937917597"", ""author_association"": ""CONTRIBUTOR""}"
582,ReviewRejected,2021-10-07 15:51:21,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/582#pullrequestreview-774097174""}"
582,Revise,2021-10-07 16:07:39,ThomasLamprecht,fork_merge,"d/swtpm-tools postinst: avoid trying to create/chown in non-configure steps

configure steps should be limited to get only executed on, well
configuration, so check for that and do nothing in the remaining
commands [0] the postinst can be called with.

[0]: https://www.debian.org/doc/debian-policy/ch-maintainerscripts.html#summary-of-ways-maintainer-scripts-are-called

Signed-off-by: Thomas Lamprecht <t.lamprecht@proxmox.com>","{""sha"": ""0722c2decd27d54d2c5309cf9ce3aac9a61ee380"", ""author"": {""name"": ""Thomas Lamprecht"", ""email"": ""t.lamprecht@proxmox.com"", ""date"": ""2021-10-07T10:10:43Z""}, ""committer"": {""name"": ""Thomas Lamprecht"", ""email"": ""t.lamprecht@proxmox.com"", ""date"": ""2021-10-07T16:07:39Z""}}"
582,Revise,2021-10-07 16:07:39,ThomasLamprecht,fork_merge,"d/swtpm-tools postinst: create the TSS user if it does not exist

Adapted from tpm-udev [0] which handles that, but it is not really a
hard-requirement for swtpm and TSS_USER is configurable after all
(even if that is mostly used for the test system).

So, create that user and group if it does not exists to avoid errors
and failing installation.

[0]: https://salsa.debian.org/debian/tpm-udev/-/blob/master/debian/tpm-udev.postinst

Signed-off-by: Thomas Lamprecht <t.lamprecht@proxmox.com>","{""sha"": ""49b4aa883beb839319260bc608fda3bce70886a5"", ""author"": {""name"": ""Thomas Lamprecht"", ""email"": ""t.lamprecht@proxmox.com"", ""date"": ""2021-10-07T10:14:11Z""}, ""committer"": {""name"": ""Thomas Lamprecht"", ""email"": ""t.lamprecht@proxmox.com"", ""date"": ""2021-10-07T16:07:39Z""}}"
582,ReviewApproved,2021-10-07 16:22:13,nchevsky,fork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/582#pullrequestreview-774135222""}"
582,MergePR,2021-10-07 16:47:08,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5429840217"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f2786a759f53f826bc8b8dfbe4496b33859c01d7""}"
583,SubmitCommit,2021-10-06 23:27:46,stefanberger,unfork_merge,"swtpm: Move ARRAY_LEN and min #define's to swtpm_utils.h

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""15ee7f0b977abb95fdbdf53dccabf188b0841232"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-06T17:57:38Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-06T23:27:46Z""}}"
583,OpenPR,2021-10-07 13:12:24,stefanberger,unfork_merge,,
583,ReviewComment,2021-10-07 16:07:39,elmarco,unfork_merge,looks ok to me,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/583#pullrequestreview-774030967""}"
583,Revise,2021-10-07 16:27:54,stefanberger,unfork_merge,"swtpm_setup: Implement option --create-config-files to create config files

Implement the option --create-config-files to create config files
for swtpm_setup and swtpm-localca for a user account. The files will
be created under the $XDG_CONFIG_HOME or $HOME/.config directories.

This option supports optional arguments 'overwrite' to allow overwriting
existing config files as well as the optional argument 'root' to create
config files under root's home directory. Both options can be passed
by separating them with a ','.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""08dac9e5f3d3540d8c9e03add38a574cd2839d7f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-06T20:58:04Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T16:27:54Z""}}"
583,Revise,2021-10-07 16:27:55,stefanberger,unfork_merge,"swtpm_setup: Implement --create-user-config skip-if-exist

Implement support for skipping over creating the files
if any one of the config files already exist.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""dfdc8994be711339f44454a91aea5d45464bd1fa"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T00:37:59Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T16:27:55Z""}}"
583,Revise,2021-10-07 16:27:55,stefanberger,unfork_merge,"samples: Have swtpm-create-user-config-files run swtpm_setup

Have swtpm-create-user-config-files run swtpm_setup with the new
--create-config-files option and possible parameters.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""fdb66d0d61eae22f194bc46fa8e4556106bd9dab"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T00:18:01Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T16:27:55Z""}}"
583,Revise,2021-10-07 16:27:55,stefanberger,unfork_merge,"tests: Add a test case for the new swtpm_setup option

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""ae04e47ea348f219a58694a5afcf0ae37fb7fdf4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T12:41:47Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T16:27:55Z""}}"
583,MergePR,2021-10-07 18:27:10,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5430334347"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/bcd5523b08b01f9709547dbf3bbec53c92f9f6b7""}"
583,DeleteBranch,2021-10-07 18:27:38,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5430336607"", ""commit_url"": null}"
585,SubmitCommit,2021-10-07 20:03:52,stefanberger,unfork_merge,"swtpm_setup: Use g_get_user_config_dir() rather than own code

Replace own code with g_get_user_config_dir() which makes things
a lot simpler.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""f17182293fe541a3eab4a5b938f3723b52f10dba"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T19:47:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T20:03:52Z""}}"
585,SubmitCommit,2021-10-07 20:03:52,stefanberger,unfork_merge,"swtpm_localca: Use g_get_user_config_dir() rather than own code

Replace own code with g_get_user_config_dir() which makes things
a lot simpler.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b7a4bc6386aa192b6678ade2a3753f7ed545da05"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T20:00:06Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-07T20:03:52Z""}}"
585,OpenPR,2021-10-07 20:06:31,stefanberger,unfork_merge,,
585,IssueComment,2021-10-07 21:07:03,stefanberger,unfork_merge,@elmarco Looks good ?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/938156256"", ""author_association"": ""OWNER""}"
585,MergePR,2021-10-07 23:50:25,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5431586344"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f1d425b5c18a029c3c2baadb8bf6253afbdfd838""}"
585,DeleteBranch,2021-10-08 00:08:27,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5431629531"", ""commit_url"": null}"
586,SubmitCommit,2021-10-08 13:42:25,stefanberger,unfork_merge,"swtpm_localca: Exit with error code 1 on unknown option

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""dfd843d4b66efa034d8c4755dc425b3f76ad368c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-08T13:40:55Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-08T13:42:25Z""}}"
586,SubmitCommit,2021-10-08 13:42:35,stefanberger,unfork_merge,"swtpm_setup: Exit with error code 1 on unknown option

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3dc8f92bfc6a2d83c7088310fc30b26b0be97e19"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-08T13:35:47Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-08T13:42:35Z""}}"
586,OpenPR,2021-10-08 13:50:05,stefanberger,unfork_merge,,
586,IssueComment,2021-10-08 15:11:06,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3613](https://coveralls.io/builds/43372615)

* **0** of **4**   **(0.0%)**  changed or added relevant lines in **2** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.019%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_localca/swtpm_localca.c](https://coveralls.io/builds/43372615/source?filename=src%2Fswtpm_localca%2Fswtpm_localca.c#L677) | 0 | 2 | 0.0%
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/43372615/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L1351) | 0 | 2 | 0.0%
<!-- | **Total:** | **0** | **4** | **0.0%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/43372615/badge)](https://coveralls.io/builds/43372615) |
| :-- | --: |
| Change from base [Build 3612](https://coveralls.io/builds/43370816): |  0.0% |
| Covered Lines: | 6036 |
| Relevant Lines: | 8046 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/938719077"", ""author_association"": ""NONE""}"
586,MergePR,2021-10-08 15:21:00,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5435421864"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/634e6705c3c2449aa26c0f2a3c47f38e64a23af7""}"
588,SubmitCommit,2021-10-08 16:32:11,stefanberger,unfork_merge,"swtpm_cert: Allow passing -1 for days to get a non-expiring certificate

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9cce1b13f95920a043591a01b53ccd750dcd3c07"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-08T16:06:50Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-08T16:32:11Z""}}"
588,OpenPR,2021-10-08 16:37:47,stefanberger,unfork_merge,,
588,IssueComment,2021-10-08 16:38:32,stefanberger,unfork_merge,This PR addresses the issues raised in #587 related to certificates.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/938815039"", ""author_association"": ""OWNER""}"
588,Revise,2021-10-08 17:17:26,stefanberger,unfork_merge,"swtpm_localca: Created certificates for CAs and TPM that do not expire

Rather than having the CA certificates, that are created on the fly,
expire in 10 years, have them not expire at all.

Also create TPM certificates that don't expire and extend a test
case for this.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""a92ad8d3560da6cb18dfeb0ad4c3dd6a996b7256"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-08T15:19:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-08T17:17:26Z""}}"
588,IssueComment,2021-10-08 17:51:55,elmarco,unfork_merge,lgtm,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/938973569"", ""author_association"": ""CONTRIBUTOR""}"
588,MergePR,2021-10-08 18:07:02,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5436193375"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e68cebaf5f200df2223c9e086e4cdaf5abc7612d""}"
588,DeleteBranch,2021-10-08 18:07:05,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5436193556"", ""commit_url"": null}"
588,IssueCommentSupplement,2021-10-08 18:07:13,stefanberger,unfork_merge,"@elmarco thanks
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/939006943"", ""author_association"": ""OWNER""}"
588,CrossReferenced,2021-10-18 14:47:35,stefanberger,unfork_merge,Release blockers for v0.7.0,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/587"", ""is_pull_request"": false}}"
589,SubmitCommit,2021-10-11 20:21:10,stefanberger,unfork_merge,"swtpm: Fix a forgotten endianess-conversion

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""8b4711719b8d0be7b5de208190707cf642260092"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-11T20:20:46Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-11T20:21:10Z""}}"
589,OpenPR,2021-10-11 20:22:13,stefanberger,unfork_merge,,
589,MergePR,2021-10-11 21:50:52,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5445756044"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/0151ec3a521ca514ddf60937c62e7213452ef23b""}"
589,DeleteBranch,2021-10-11 22:19:46,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5445853659"", ""commit_url"": null}"
590,SubmitCommit,2021-10-12 10:32:42,stefanberger,unfork_merge,"swtpm: Fix case when no backend URI has been specified

It is possible to start swtpm with this command line even though
neither storage nor communication channels have been provided.

./src/swtpm/swtpm socket --flags not-need-init,startup-clear

Since sending a startup message to the TPM will cause it to
want to store permanent state, we have to handle the case when
no storage backend was given and therefore the backend_uri
is NULL.

Previously the above command line caused a NULL pointer exception
but now handles this case with the following output:

swtpm: SWTPM_NVRAM_Init: Missing backend URI.
swtpm: Error: Could not initialize libtpms.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""0ec7912d05e4e6f559770e93c95a8e013b67c721"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-12T10:27:26Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-12T10:32:42Z""}}"
590,OpenPR,2021-10-12 10:54:50,stefanberger,unfork_merge,,
590,MergePR,2021-10-12 11:34:10,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5448909662"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/57b1f7ef88dc5c2995f105ea8f121d17765702ef""}"
590,DeleteBranch,2021-10-12 11:34:13,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5448909905"", ""commit_url"": null}"
593,SubmitCommit,2021-10-15 11:44:57,stefanberger,unfork_merge,"swtpm_setup: Initialize variables to avoid compiler warnings

Fix issue #591 by initializing the variables swtpm_has_tpm2 and
swtpm_has_tpm12.

swtpm_setup.c:1178:31: note: 'swtpm_has_tpm2' was declared here
     gboolean swtpm_has_tpm12, swtpm_has_tpm2;
                               ^~~~~~~~~~~~~~
swtpm_setup.c:1019:5: error: 'swtpm_has_tpm12' may be used uninitialized in this function [-Werror=maybe-uninitialized]
     printf(""{ \""type\"": \""swtpm_setup\"", ""
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            ""\""features\"": [ %s%s\""cmdarg-keyfile-fd\"", \""cmdarg-pwdfile-fd\"", \""tpm12-not-need-root\""""

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""e0e5a4a6ee32de24dda3f44e587b0ab5df2610e5"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-15T11:44:53Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-15T11:44:57Z""}}"
593,OpenPR,2021-10-15 11:47:15,stefanberger,unfork_merge,,
593,CrossReferenced,2021-10-15 11:48:10,stefanberger,unfork_merge,failed to build rpm package,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/591"", ""is_pull_request"": false}}"
593,MergePR,2021-10-15 12:44:14,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5469612832"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/8def57facd0999e94a9e8ffa22e8d46200e1e990""}"
594,SubmitCommit,2021-10-15 04:49:17,stefanberger,unfork_close,"swtpm: Disable fsync on file and dir due to TPM command timeouts

We cannot currently fsync on the TPM's state file and the dir since this
takes too long and commands in a VM may timeout. The reason for this is
that the TPM 2 code occasionally writes the permanent state out even on
commands like TPM_PCRExtend that must not take a long time.

Since the permanent state has changed it is currently the best to actually
write it out until there's a better method to determine whether the state
needs to be written. One method would be to never write the state out if
short-running commmands are executed.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b5bec22e7d74680c33fe193e94106807e7768585"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-15T03:34:53Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-15T04:49:17Z""}}"
594,OpenPR,2021-10-15 12:56:31,stefanberger,unfork_close,,
594,ClosePR,2021-10-15 12:57:38,stefanberger,unfork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5469677932"", ""commit_url"": null}"
598,SubmitCommit,2021-10-15 14:16:22,stefanberger,unfork_merge,"swtpm: Disable fsync on file & dir due to TPM timeouts (issue #597)

We cannot currently fsync on the TPM's state file and the dir since this
takes too long and commands in a VM may time out. The reason for this is
that the TPM 2 code occasionally writes the permanent state out even on
commands like TPM2_PCR_Extend that must not take a long time.

See explanation for this in the libtpms PR https://github.com/stefanberger/libtpms/pull/274 .

We will re-enable this feature in 'a while' once the updated libtpms
version has been made more widely available.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7771d65860904cf5df01556d0f042cc0043dd0b8"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-15T03:34:53Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-15T14:16:22Z""}}"
598,OpenPR,2021-10-15 14:16:40,stefanberger,unfork_merge,,
598,IssueComment,2021-10-15 15:52:44,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3621](https://coveralls.io/builds/43538451)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* **6** unchanged lines in **1** file lost coverage.
* Overall coverage decreased (**-0.06%**) to **74.963%**

---


|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/43538451/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L448) | 6 | 67.25% |
<!-- | **Total:** | **6** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/43538451/badge)](https://coveralls.io/builds/43538451) |
| :-- | --: |
| Change from base [Build 3620](https://coveralls.io/builds/43535692): |  -0.06% |
| Covered Lines: | 6030 |
| Relevant Lines: | 8044 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/944410359"", ""author_association"": ""NONE""}"
598,MergePR,2021-10-17 20:32:38,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5474695476"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4b5654a19fa3f13b4aa0a050cd6822cd5a86c80b""}"
598,DeleteBranch,2021-10-17 22:28:00,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5474805616"", ""commit_url"": null}"
598,CrossReferenced,2021-10-18 14:47:35,stefanberger,unfork_merge,Release blockers for v0.7.0,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/587"", ""is_pull_request"": false}}"
599,SubmitCommit,2021-10-17 20:34:21,stefanberger,unfork_close,"swtpm: Reenable fsync on files and directory

This now requires a libtpms version with the following patch applied:

https://github.com/stefanberger/libtpms/commit/1fb639195ba847ea72161f75cc31fc7a64820bec

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9a5e11789bfb68fa6aafda99c76ce49dd0ba45df"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-17T20:33:31Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-17T20:34:21Z""}}"
599,SubmitCommit,2021-10-17 22:25:11,stefanberger,unfork_close,"tests: Check for permanent state file change due to TPM2_PCR_Read

Extend a test case to check whether the permanent state files changes
when a TPM2_PCR_Read() is executed. The state file change would cause
timeouts inside VMs when an fsync() is used that fully synchronzies the
state of the TPM 2 with the data on disk. The issue has been resolved in
more recent versions of libtpms (master and branches). The updated
libtpms is required if fsync() for files and directories is to be enabled.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9d8e6e36f6b2bce7dbc57b7da7ac9609aacfbe4f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-17T21:14:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-17T22:25:11Z""}}"
599,OpenPR,2021-10-18 01:42:37,stefanberger,unfork_close,,
599,IssueComment,2021-10-18 14:56:33,stefanberger,unfork_close,"TODO:
- [ ] Profile the fsync()'s to see how 'bad' they are","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/945861744"", ""author_association"": ""OWNER""}"
599,IssueComment,2021-10-26 19:54:23,nicowilliams,unfork_close,"`fsync(2)`s are generally painful on real HDDs, tolerable on SSDs, and unnoticeable on `tmpfs`.

For swtpm the pain will depend on what applications do.  NV and PCR operations need `fsync(2)`, but most key object operations don't.  So actual pain will vary by application.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/952269195"", ""author_association"": ""CONTRIBUTOR""}"
599,IssueComment,2021-10-26 19:59:24,stefanberger,unfork_close,PCR operations like extending and reading shouldn't require it but due to an issue with the clock it ended up doing writes. NV writes for sure will require it. ,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/952274343"", ""author_association"": ""OWNER""}"
599,IssueComment,2021-10-26 20:16:08,nicowilliams,unfork_close,"Ah, right, PCR operations shouldn't require it.  Clock operations shouldn't either, since restarting the swtpm should increment the `resetCount`.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/952289822"", ""author_association"": ""CONTRIBUTOR""}"
599,ClosePR,2022-09-15 15:27:50,stefanberger,unfork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7396112778"", ""commit_url"": null}"
600,OpenPR,2021-10-18 11:18:48,stefanberger,unfork_merge,,
600,Revise,2021-10-18 11:19:23,stefanberger,unfork_merge,"rpm: Remove man8/swtpm_localca.8 from specfile

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""37425ee70b16826c56f0fc484a70ad57d485209c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T11:19:23Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T11:19:23Z""}}"
600,CrossReferenced,2021-10-18 11:21:40,stefanberger,unfork_merge,failed to build rpm package,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/591"", ""is_pull_request"": false}}"
600,MergePR,2021-10-18 12:41:13,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5478093991"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/c6f50af25f47f3545072f62bfb96a994fe21b901""}"
601,SubmitCommit,2021-10-18 13:54:42,stefanberger,unfork_merge,"rpm/debian: Clean up packaging files

- Remove unused python3-twisted and gmp-devel.
- Add back rule to package /man8/swtpm_localca.8*

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""115bbaafc5c33be7472950b405e5019e76aa2c6a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T13:20:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T13:54:42Z""}}"
601,SubmitCommit,2021-10-18 13:57:33,stefanberger,unfork_merge,"test: Add missing _test_tpm2_file_permissions file to EXTRA_DIST

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7bddb0fcbd059651f3e4c9793b2e5fe2731c96f8"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T13:52:01Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T13:57:33Z""}}"
601,OpenPR,2021-10-18 13:58:18,stefanberger,unfork_merge,,
601,CrossReferenced,2021-10-18 14:11:43,stefanberger,unfork_merge,failed to build rpm package,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/591"", ""is_pull_request"": false}}"
601,MergePR,2021-10-18 14:39:27,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5478946382"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/6b2cb5ff5a20acd6ef631ee7886e0071aa2f5bbc""}"
601,CrossReferenced,2021-10-18 14:47:35,stefanberger,unfork_merge,Release blockers for v0.7.0,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/587"", ""is_pull_request"": false}}"
602,SubmitCommit,2021-10-18 16:06:24,stefanberger,unfork_merge,"rpm: Update spec file to also work on CentOS9-stream

CentOS9 has no more trousers, so disable it for rhel >= 9.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""da805895443b72a585d1fa96bf1d0e36b89fa895"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T16:06:22Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T16:06:24Z""}}"
602,OpenPR,2021-10-18 16:07:29,stefanberger,unfork_merge,,
602,MergePR,2021-10-18 17:47:13,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5480192733"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4c178928dc6590698ee09d5ccc3beb9a7ecc51a1""}"
603,OpenPR,2021-10-18 19:25:04,stefanberger,unfork_merge,,
603,Revise,2021-11-05 17:21:24,stefanberger,unfork_merge,"CHANGES: Add more documentation for changes in 0.7.0

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7789a7092043b5579bcd37e5886279fcced7e483"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T19:19:57Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T17:21:24Z""}}"
603,Revise,2021-11-05 17:23:25,stefanberger,unfork_merge,"debian/rpm: Adjust changelog for 0.7.0 release

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""28c297477ec06ab157a18160da606fd155035552"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-18T19:23:42Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T17:23:25Z""}}"
603,IssueComment,2021-11-08 11:19:25,elmarco,unfork_merge,Are you considering post-poning #461 to 0.8? I think that would make sense.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/963052425"", ""author_association"": ""CONTRIBUTOR""}"
603,MergePR,2021-11-09 15:49:46,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5590732470"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/b79fd91c4b4a74c9c5027b517c5036952c5525db""}"
603,DeleteBranch,2021-11-09 15:49:50,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5590732917"", ""commit_url"": null}"
605,SubmitCommit,2021-10-19 11:10:57,stefanberger,unfork_merge,"swtpm_setup: Report stderr as returned by external tool (swtpm-localcal)

Report the error printed out via stderr as returned by swtpm-localca for
example.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""477c0140b580818eb89bc7445972a2d97655bf7c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-19T11:10:44Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-19T11:10:57Z""}}"
605,OpenPR,2021-10-19 11:12:38,stefanberger,unfork_merge,,
605,CrossReferenced,2021-10-19 11:14:50,stefanberger,unfork_merge,Could not find swtpm_cert in PATH.,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/604"", ""is_pull_request"": false}}"
605,MergePR,2021-10-19 12:37:59,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5484991086"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/c40fceb3caa467b69b495ecd74de2ed4e63cabeb""}"
605,DeleteBranch,2021-11-06 12:33:11,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5577979500"", ""commit_url"": null}"
606,SubmitCommit,2021-10-19 11:47:09,stefanberger,unfork_merge,"swtpm_setup: Report stderr as returned by external tool (swtpm-localcal)

Report the error printed out via stderr as returned by swtpm-localca for
example.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""38364f600d063f72081a196b7529aab157e6e23a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-19T11:10:44Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-19T11:47:09Z""}}"
606,OpenPR,2021-10-19 11:47:40,stefanberger,unfork_merge,,
606,IssueComment,2021-10-19 12:29:26,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3629](https://coveralls.io/builds/43605825)

* **4** of **5**   **(80.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.0003%**) to **74.511%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/43605825/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L277) | 4 | 5 | 80.0%
<!-- | **Total:** | **4** | **5** | **80.0%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/43605825/badge)](https://coveralls.io/builds/43605825) |
| :-- | --: |
| Change from base [Build 3526](https://coveralls.io/builds/43130681): |  0.0003% |
| Covered Lines: | 5449 |
| Relevant Lines: | 7313 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/946672808"", ""author_association"": ""NONE""}"
606,MergePR,2021-10-19 12:38:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5484995867"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/9f5e65a6f3264b02e01d715ed9f35be2fb20bbd8""}"
607,SubmitCommit,2021-10-19 14:00:52,stefanberger,unfork_merge,"man: Improve the documentation of swtpm_setup's --create-config-files

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5d3c29fda5e7dc1defd9a53606afac7dff9a504c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-19T14:00:24Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-19T14:00:52Z""}}"
607,OpenPR,2021-10-19 14:04:42,stefanberger,unfork_merge,,
607,MergePR,2021-10-19 14:42:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5485855968"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/db61aeddebd2711c4a3b398e0f445090ecdd288b""}"
609,SubmitCommit,2021-10-22 10:59:35,stefanberger,unfork_merge,"swtpm_setup: Only activate SHA256 PCR bank, not SHA1 bank anymore

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""dfe1bcc309fd0091d20a073624fd62ceb983c988"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-22T10:53:36Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-22T10:59:35Z""}}"
609,OpenPR,2021-10-22 11:00:51,stefanberger,unfork_merge,,
609,MergePR,2021-10-22 11:39:56,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5504332468"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/26cdfc77dfaa33cbc706981d0fcb73bbda0d3d80""}"
609,CrossReferenced,2021-10-23 15:22:32,stefanberger,unfork_merge,Release blockers for v0.7.0,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/587"", ""is_pull_request"": false}}"
611,SubmitCommit,2021-10-25 14:44:55,vorlonofportland,fork_close,Use Debian machine readable copyright format,"{""sha"": ""88863a8c73b09f1b0358aefa1d0bad9d1c9298c5"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-25T14:44:55Z""}, ""committer"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-25T14:44:55Z""}}"
611,SubmitCommit,2021-10-25 14:47:03,vorlonofportland,fork_close,Check for nocheck before testing,"{""sha"": ""f0fc10c4ab4b5e99b59af591ec6b8d42ed2af3c5"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-23T00:54:24Z""}, ""committer"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-25T14:47:03Z""}}"
611,SubmitCommit,2021-10-25 14:48:04,vorlonofportland,fork_close,Use new debhelper-compat interface,"{""sha"": ""85f7b88daf5b9449e0043f315c09b171c5d85e72"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-23T01:21:55Z""}, ""committer"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-25T14:48:04Z""}}"
611,SubmitCommit,2021-10-25 14:49:47,vorlonofportland,fork_close,"Package contents should be deterministic

Don't allow the contents of the swtpm-tools package vary depending on
whether a particular binary exists as part of the build output.  It either
should be built and always included, or never included.","{""sha"": ""2af70c00b88601c44f2b6c47e82a8e0172d7cc1c"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-23T01:30:08Z""}, ""committer"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-25T14:49:47Z""}}"
611,SubmitCommit,2021-10-25 14:50:44,vorlonofportland,fork_close,"Don't call autogen.sh, autoreconf takes care of this for us","{""sha"": ""abcb9881f2a7e89324be4ccf0bf23d164154ab90"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-23T19:19:38Z""}, ""committer"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-25T14:50:44Z""}}"
611,SubmitCommit,2021-10-25 14:54:54,vorlonofportland,fork_close,"Don't modify debian directory from upstream configure script.

The packaging directory defines integration with the OS; nothing here should
be subject to package build-time configuration.","{""sha"": ""c07ef5ca086fc12d142877a429e93655bd1e1354"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-25T14:53:56Z""}, ""committer"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-25T14:54:54Z""}}"
611,OpenPR,2021-10-25 14:56:35,vorlonofportland,fork_close,,
611,IssueComment,2021-10-25 17:11:53,coveralls,fork_close,"## Pull Request Test Coverage Report for [Build 3634](https://coveralls.io/builds/43750508)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.963%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43750508/badge)](https://coveralls.io/builds/43750508) |
| :-- | --: |
| Change from base [Build 3633](https://coveralls.io/builds/43699527): |  0.0% |
| Covered Lines: | 6033 |
| Relevant Lines: | 8048 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/951131876"", ""author_association"": ""NONE""}"
611,ReviewRejected,2021-10-25 23:13:17,stefanberger,fork_close,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/611#pullrequestreview-788698991""}"
611,IssueComment,2021-10-25 23:15:36,stefanberger,fork_close,"> We are introducing swtpm into Ubuntu for the upcoming long-term supported release. As part of this process I have 
made some changes to the Debian packaging relative to what's present in the upstream git repository. You may wish to consider including the below series of changes in your repository.

Sounds all good.
I have this debian directory here mostly for my own convenience (and possibly that of others) and to build packages for my PPA. Ubuntu will maintain its own packaging scripts, right? Or how is that typically done?
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/951408232"", ""author_association"": ""OWNER""}"
611,IssueComment,2021-10-26 18:23:46,stefanberger,fork_close,One other request: Please prefix your patch titles with 'debian:'.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/952197464"", ""author_association"": ""OWNER""}"
611,CrossReferenced,2022-04-20 15:11:33,stefanberger,fork_close,Cherry-pick debian fixes from PR #611,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/693"", ""is_pull_request"": true}}"
611,IssueCommentSupplement,2022-04-29 21:06:18,stefanberger,fork_close,I am closing this PR now since there seems to be no activity anymore. I'd still be interested in the Signed-off-by's for PR #693 or to continue here.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1113731582"", ""author_association"": ""OWNER""}"
611,ClosePR,2022-04-29 21:06:18,stefanberger,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6526376764"", ""commit_url"": null}"
612,OpenPR,2021-10-26 19:23:27,nicowilliams,fork_merge,,
612,IssueComment,2021-10-26 19:27:54,nicowilliams,fork_merge,"@osreasearch's [Safeboot](https://github.com/osresearch/safeboot/) needs this feature.  I expect virtualization products that use `swtpm` also could use this feature.

Safeboot also needs CLI tools for trial session evaluation of policies to compute their `policyDigest`s w/o needing a TPM or TPM simulator.  But that's another story.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/952244757"", ""author_association"": ""CONTRIBUTOR""}"
612,IssueComment,2021-10-26 19:48:52,nicowilliams,fork_merge,"A quick search for uses of this pattern outside Illumos turns up a few things, like [Open vSwitch](https://github.com/openvswitch/ovs/blob/master/lib/daemon-unix.c#L441), BSD's [darkstat](https://fossies.org/linux/darkstat/conv.c) and [other `dark` family programs](https://raw.githubusercontent.com/emikulic/darkhttpd/master/darkhttpd.c), and [various](https://bitbucket.org/zwhitt_vmware/rsoflags-final-final/src/master/lib/daemon-unix.c) [others](https://cpp.hotexamples.com/examples/-/-/fork_and_wait_for_startup/cpp-fork_and_wait_for_startup-function-examples.html).

Heimdal's does support WIN32, and I could add that here as well if needed.

Note that not everyone gets everything right.  For example, I try to use `_exit(2)` in the grandparent and parent processes, while most implementations use `exit(3)`, which is generally fine because those other uses don't use `atexit(3)` or similar prior to calling the daemon prep function, but it really is better to only `exit(3)` on one side of a `fork()` and not both, and since the gradnparent and parent processes here are short-lived, it is they that must `_exit(2)` while the grandchild should/must/will `exit(3)`.  In Heimdal I don't bother with a second `fork(2)` to prevent accidental acquisition of a controlling terminal.  Most implementations out there (including the one I'm contributing here) do not support WIN32 (but Heimdal's does).","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/952265527"", ""author_association"": ""CONTRIBUTOR""}"
612,CrossReferenced,2021-10-26 19:57:18,nicowilliams,fork_merge,Release blockers for v0.7.0,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/587"", ""is_pull_request"": false}}"
612,IssueComment,2021-10-26 20:01:27,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3639](https://coveralls.io/builds/43820687)

* **2** of **88**   **(2.27%)**  changed or added relevant lines in **3** files are covered.
* **4** unchanged lines in **2** files lost coverage.
* Overall coverage decreased (**-0.8%**) to **74.169%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm.c](https://coveralls.io/builds/43820687/source?filename=src%2Fswtpm%2Fswtpm.c#L278) | 1 | 6 | 16.67%
| [src/swtpm/swtpm_chardev.c](https://coveralls.io/builds/43820687/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L338) | 1 | 6 | 16.67%
| [src/swtpm/daemonize.c](https://coveralls.io/builds/43820687/source?filename=src%2Fswtpm%2Fdaemonize.c#L120) | 0 | 76 | 0.0%
<!-- | **Total:** | **2** | **88** | **2.27%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm.c](https://coveralls.io/builds/43820687/source?filename=src%2Fswtpm%2Fswtpm.c#L276) | 2 | 78.79% |
| [src/swtpm/swtpm_chardev.c](https://coveralls.io/builds/43820687/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L336) | 2 | 60.36% |
<!-- | **Total:** | **4** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/43820687/badge)](https://coveralls.io/builds/43820687) |
| :-- | --: |
| Change from base [Build 3633](https://coveralls.io/builds/43699527): |  -0.8% |
| Covered Lines: | 6027 |
| Relevant Lines: | 8126 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/952278711"", ""author_association"": ""NONE""}"
612,IssueComment,2021-10-26 20:19:59,nicowilliams,fork_merge,"The reductions in coverage are due to [failure cases not getting tested](https://coveralls.io/builds/43789581/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L339), or daemon options not getting tested at all?

EDIT: I think there may be no tests for `--daemon`.

Ahhh, and here we have evidence of this race condition in the tests themselves: all the `wait_for_*` functions in `tests/common`, like `wait_for_file` to wait for a pidfile:

```
if wait_for_file ${PID_FILE} 4; then
        echo ""Error: Socket TPM did not write pidfile.""
        cat $LOG_FILE
        exit 1
fi
```

`wait_for_serversocket` to wait for a socket to accept connections, etc.

A better approach would be to use the new `--daemon` functionality in this PR, though functions like `wait_file_gone` would still be needed to wait for proper daemon exit.  At least a lot of test code could stand to be deleted with this PR...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/952292516"", ""author_association"": ""CONTRIBUTOR""}"
612,ReviewComment,2021-10-26 20:40:27,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/612#pullrequestreview-789893984""}"
612,ReviewComment,2021-10-27 01:45:19,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/612#pullrequestreview-790069970""}"
612,IssueComment,2021-10-27 01:46:39,stefanberger,fork_merge,"I opened PR #613 converting two test cases to use the --daemon option. I am not using this option very often and libvirt for example doesn't use it, either, so it's not been that important.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/952465799"", ""author_association"": ""OWNER""}"
612,Revise,2021-10-27 18:29:19,nicowilliams,fork_merge,"swtpm: Make --daemon not racy

Signed-off-by: Nicolas Williams <nico@cryptonector.com>","{""sha"": ""57eb1d0d0d0f08e1b5e6a7f29cb127b58ca9172c"", ""author"": {""name"": ""Nicolas Williams"", ""email"": ""nico@twosigma.com"", ""date"": ""2021-10-12T16:58:06Z""}, ""committer"": {""name"": ""Nicolas Williams"", ""email"": ""nico@cryptonector.com"", ""date"": ""2021-10-27T18:29:19Z""}}"
612,MergePR,2021-10-27 20:51:35,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5530094362"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/98d1d126cdbff26d194bedbabec78b720fc51e55""}"
612,IssueCommentSupplement,2021-10-27 20:51:42,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/953301255"", ""author_association"": ""OWNER""}"
612,IssueCommentSupplement,2021-10-27 21:32:30,nicowilliams,fork_merge,"> Thanks.

Thank you for reviewing this so quickly.

> I opened PR #613 converting two test cases to use the --daemon option. I am not using this option very often and libvirt for example doesn't use it, either, so it's not been that important.

I suspect you could just always use `--daemon` now in the tests and delete a lot of test code without losing any coverage.  And libvirt probably should use `--daemon`... -- how is libvirt immune to this race condition?  Luck?

BTW, libvirt also uses this pattern: https://github.com/libvirt/libvirt/blob/96e99e49483de4fb293ce26691cbce19110fb3a9/src/util/virdaemon.c#L43.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/953327976"", ""author_association"": ""CONTRIBUTOR""}"
613,OpenPR,2021-10-27 01:41:05,stefanberger,unfork_merge,,
613,CrossReferenced,2021-10-27 01:46:39,stefanberger,unfork_merge,swtpm: Make --daemon not racy,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/612"", ""is_pull_request"": true}}"
613,IssueComment,2021-10-27 17:14:48,nicowilliams,unfork_merge,"Ooh, thanks for doing this!","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/953138265"", ""author_association"": ""CONTRIBUTOR""}"
613,IssueComment,2021-10-27 17:21:11,stefanberger,unfork_merge,"> Ooh, thanks for doing this!

It will hopefully pass once it's rebased.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/953144204"", ""author_association"": ""OWNER""}"
613,Revise,2021-10-27 22:17:59,stefanberger,unfork_merge,"tests: Add test case for chardev for swtpm --print-states option

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1e540c2923d50f41f5c11e08c23e2a5cc21ca055"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-27T01:38:00Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-27T22:17:59Z""}}"
613,Revise,2021-10-27 22:18:00,stefanberger,unfork_merge,"tests: Convert 2 test cases to use --daemon option

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""dea6db6911890e7d7613f9b6dcd59a4bc8d037b5"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-27T01:38:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-27T22:18:00Z""}}"
613,MergePR,2021-10-27 22:58:26,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5530560752"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/743b4d1b61e6ef9199f479b43d5eed26f70c44c9""}"
614,SubmitCommit,2021-10-27 23:23:13,stefanberger,unfork_merge,"swtpm: Add missing signal.h include (BSDs)

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d4fb2515ae287759e8fb5c6a383b04c99587db15"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-27T23:23:10Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-27T23:23:13Z""}}"
614,SubmitCommit,2021-10-27 23:24:09,stefanberger,unfork_merge,"swtpm_setup: Add missing sys/wait.h include (BSDs)

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""98bb8f87c37d1447873072dafbf9655df13e6620"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-27T23:24:06Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-27T23:24:09Z""}}"
614,OpenPR,2021-10-27 23:25:41,stefanberger,unfork_merge,,
614,MergePR,2021-10-28 00:13:39,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5530757739"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/d766b58d179bad8f64ec85243db80ffd31a21748""}"
615,OpenPR,2021-10-28 17:11:49,stefanberger,unfork_merge,,
615,IssueComment,2021-10-28 17:12:05,stefanberger,unfork_merge,@elmarco Please have a look at this.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/954040393"", ""author_association"": ""OWNER""}"
615,IssueComment,2021-10-28 17:57:42,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3653](https://coveralls.io/builds/43882654)

* **36** of **38**   **(94.74%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.04%**) to **74.85%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/43882654/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L1517) | 36 | 38 | 94.74%
<!-- | **Total:** | **36** | **38** | **94.74%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/43882654/badge)](https://coveralls.io/builds/43882654) |
| :-- | --: |
| Change from base [Build 3650](https://coveralls.io/builds/43875849): |  0.04% |
| Covered Lines: | 6095 |
| Relevant Lines: | 8143 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/954072979"", ""author_association"": ""NONE""}"
615,Revise,2021-10-28 19:14:51,stefanberger,unfork_merge,"build-sys: Add support for --enable-default-pcr-banks=list of PCR banks

Add an option that allows for the configuration of the default PCR bank
to use. This was currently hard coded to sha256 and now may be passed
via this option. The fallback is still sha256. Valid PCR bank names are
sha1, sha256, sha384, and sha512. The passed list must be a comma-
separated list of the valid PCR bank names.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""58a86841afc5599167d777bb164589c8834a486f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-28T15:25:31Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-28T19:14:51Z""}}"
615,ReviewComment,2021-10-28 19:53:34,elmarco,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/615#pullrequestreview-792361586""}"
615,ReviewComment,2021-10-28 19:57:04,elmarco,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/615#pullrequestreview-792364828""}"
615,ReviewComment,2021-10-28 20:04:28,elmarco,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/615#pullrequestreview-792371730""}"
615,IssueComment,2021-10-28 20:05:21,elmarco,unfork_merge,lgtm!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/954161264"", ""author_association"": ""CONTRIBUTOR""}"
615,Revise,2021-10-28 21:27:36,stefanberger,unfork_merge,"swtpm_setup: Move code to activate PCR banks into own function

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9c54aba347530b184e025b63bd7d24cdb4c901c3"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-28T15:54:20Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-28T21:27:36Z""}}"
615,Revise,2021-10-29 17:49:20,stefanberger,unfork_merge,"swtpm_setup: Get active PCR banks from swtpm_setup.conf

If the user did not provide the PCR banks to activate through the command
line options, try to read it from the config file and if nothing is found
there, fall back to the DEFAULT_PCR_BANKS as set during configure time.

Move the check for the PCR banks after the access check to the
configuration file.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""290fbbaa8294271e54af3e27819754931782277b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-28T16:23:14Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-29T17:49:20Z""}}"
615,Revise,2021-10-29 17:51:18,stefanberger,unfork_merge,"swtpm_setup: Write active_pcr_banks into swtpm_setup.conf

Write the active_pcr_banks into swtpm_setup.conf with the default
PCR banks from the configure script.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""f7c5e038e1b1ab976faef06d4badbbfee0459d7f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-28T17:04:24Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-29T17:51:18Z""}}"
615,MergePR,2021-10-29 19:36:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5542470366"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/30fa8b47d294f999644784e4e3e8b0a3d54f10ff""}"
615,DeleteBranch,2021-10-29 19:36:38,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5542470539"", ""commit_url"": null}"
616,SubmitCommit,2021-10-28 18:07:50,stefanberger,unfork_merge,"swtpm_setup.conf: Use /usr/bin/swtpm_localca for create_certs_tool

swtpm_setup.conf has traditionally pointed to
/usr/share/swtpm/swtpm-localca for create_certs_tool but since
/usr/bin/swtpm_localca is now available, have newly created
config files point to this executable instead.

Since there are possibly many swtpm_setup.conf out there pointing
to /usr/share/swtpm/swtpm-localca, we have to still install
swtm_localca there as well and package it.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""03140b43cc3d91f4ec0a1839fb5440c30dd1e872"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-28T18:06:29Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-28T18:07:50Z""}}"
616,OpenPR,2021-10-28 18:24:53,stefanberger,unfork_merge,,
616,IssueComment,2021-10-28 19:03:18,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3647](https://coveralls.io/builds/43852926)

* **0** of **1**   **(0.0%)**  changed or added relevant line in **1** file are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage remained the same at **74.809%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup_utils.c](https://coveralls.io/builds/43852926/source?filename=src%2Fswtpm_setup%2Fswtpm_setup_utils.c#L132) | 0 | 1 | 0.0%
<!-- | **Total:** | **0** | **1** | **0.0%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm_setup/swtpm_setup_utils.c](https://coveralls.io/builds/43852926/source?filename=src%2Fswtpm_setup%2Fswtpm_setup_utils.c#L134) | 1 | 20.0% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/43852926/badge)](https://coveralls.io/builds/43852926) |
| :-- | --: |
| Change from base [Build 3644](https://coveralls.io/builds/43828029): |  0.0% |
| Covered Lines: | 6079 |
| Relevant Lines: | 8126 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/954119939"", ""author_association"": ""NONE""}"
616,MergePR,2021-10-28 19:14:02,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5536205954"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/1ffa0cc472963f7f19df5ed9ddb0ff432274f0f4""}"
616,DeleteBranch,2021-10-28 19:14:04,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5536206096"", ""commit_url"": null}"
617,SubmitCommit,2021-10-29 06:28:56,develoot,fork_close,"debian: Fix wrong dependency name

Signed-off-by: Kitae Kim <develoot@gmail.com>","{""sha"": ""05411c025abaa945f6ac305216b416238f1cce65"", ""author"": {""name"": ""Kitae Kim"", ""email"": ""develoot@gmail.com"", ""date"": ""2021-10-29T06:28:56Z""}, ""committer"": {""name"": ""Kitae Kim"", ""email"": ""develoot@gmail.com"", ""date"": ""2021-10-29T06:28:56Z""}}"
617,OpenPR,2021-10-29 06:31:31,develoot,fork_close,,
617,ClosePR,2021-10-29 07:01:30,develoot,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5538631847"", ""commit_url"": null}"
618,SubmitCommit,2021-10-29 17:40:15,stefanberger,unfork_merge,"man: Add version when feature was added when missing fix some others

Add the version to items indicating when the feature was added.
Fix and unify some other ones.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""a1c2473cfbae29a34a08dfb4ba1e45700422411f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-29T17:40:12Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-29T17:40:15Z""}}"
618,OpenPR,2021-10-29 17:43:26,stefanberger,unfork_merge,,
618,IssueComment,2021-10-29 18:38:00,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3652](https://coveralls.io/builds/43881796)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.809%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/43881796/badge)](https://coveralls.io/builds/43881796) |
| :-- | --: |
| Change from base [Build 3650](https://coveralls.io/builds/43875849): |  0.0% |
| Covered Lines: | 6079 |
| Relevant Lines: | 8126 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/954965626"", ""author_association"": ""NONE""}"
618,MergePR,2021-10-29 19:16:15,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5542391339"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4641f19f215b052b6cba978ee58e433dad6a8575""}"
619,OpenPR,2021-10-29 19:43:49,stefanberger,unfork_merge,,
619,IssueComment,2021-11-03 08:16:15,elmarco,unfork_merge,lgtm,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/958732117"", ""author_association"": ""CONTRIBUTOR""}"
619,IssueComment,2021-11-03 11:01:32,stefanberger,unfork_merge,Will apply once at least the discussions on libvirt mailing list have gone through.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/958921892"", ""author_association"": ""OWNER""}"
619,Revise,2021-11-03 16:30:21,stefanberger,unfork_merge,"swtpm_setup: Create flags by shifting '1'

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5db111645ec0246489ab39bc2e0b248981176374"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-29T15:42:27Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-03T16:30:21Z""}}"
619,Revise,2021-11-03 16:30:21,stefanberger,unfork_merge,"tests: Support filenames with spaces in some functions

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6e482ff33188fa6713662c9d9b47bab48aa4ad37"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-29T16:57:40Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-03T16:30:21Z""}}"
619,Revise,2021-11-03 16:30:21,stefanberger,unfork_merge,"swtpm_setup: Add support for --reconfigure flag to change active PCR banks

Add support for --reconfigure option for the swtpm_setup to be able to
change the active PCR banks. This option only works with --tpm2 and does
not allow to pass several other options such --create-ek or
--create-ek-cert or --create-platform-cert that would alter the state of
the TPM 2 in other ways.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b5b96ba34a201b2ad57c0b5793edb69441206043"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-10-29T17:04:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-03T16:30:21Z""}}"
619,CrossReferenced,2021-11-03 20:56:15,stefanberger,unfork_merge,Release blockers for v0.7.0,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/587"", ""is_pull_request"": false}}"
619,MergePR,2021-11-05 10:39:50,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5573630372"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/25d4ac2d3a7bf63ea2eb0621f0a1f416b7ce5481""}"
619,DeleteBranch,2021-11-05 10:39:59,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5573631051"", ""commit_url"": null}"
620,OpenPR,2021-10-29 22:25:13,vorlonofportland,fork_close,,
620,IssueComment,2021-10-29 22:43:28,stefanberger,fork_close,You will also have to make sure that all pkcs11 tests are working.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/955087095"", ""author_association"": ""OWNER""}"
620,ReviewComment,2021-10-31 16:12:10,stefanberger,fork_close,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/620#pullrequestreview-793735825""}"
620,IssueComment,2021-11-02 23:07:55,vorlonofportland,fork_close,"> You will also have to make sure that all pkcs11 tests are working.

Which tests do you mean, specifically?  Are you seeing regressed tests with this change?  There are no regressions on Ubuntu with this change, but some of the tests are skipped here for various reasons including some that appear to encode Red Hat-specific paths (/usr/lib64/pkcs11/libtpm2_pkcs11.so).","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/958364933"", ""author_association"": ""NONE""}"
620,IssueComment,2021-11-02 23:26:49,stefanberger,fork_close,"> 
> 
> > You will also have to make sure that all pkcs11 tests are working.
> 
> Which tests do you mean, specifically? Are you seeing regressed tests with this change? There are no regressions on Ubuntu with this change, but some of the tests are skipped here for various reasons including some that appear to encode Red Hat-specific paths (/usr/lib64/pkcs11/libtpm2_pkcs11.so).

My mistake. There shouldn't be any pkcs11 issues.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/958402920"", ""author_association"": ""OWNER""}"
620,Revise,2021-11-04 21:26:48,vorlonofportland,fork_close,"openssl has a minimum passphrase length of 4

Signed-off-by: Steve Langasek <steve.langasek@canonical.com>","{""sha"": ""e659f92321dd245673e78d2f0e3bb00893972276"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-29T21:57:15Z""}, ""committer"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-11-04T21:26:48Z""}}"
620,Revise,2021-11-04 21:26:48,vorlonofportland,fork_close,"Use openssl at runtime, not certtool.

openssl (libcrypto) is a required dependency of swtpm_setup, but libggnutls
is an optional dependency only required for swtpm.  The openssl command is
capable of doing everything certtool does, so use openssl to reduce
dependencies.

This also fixes a documented bug that passwords must be passed on the
commandline, because openssl supports passing them in by other methods.

Signed-off-by: Steve Langasek <steve.langasek@canonical.com>","{""sha"": ""f0f629d798841f4cd0cf0f99a8ccda12d8cc2944"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-29T22:13:54Z""}, ""committer"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-11-04T21:26:48Z""}}"
620,Revise,2021-11-05 19:17:53,vorlonofportland,fork_close,"Restore autoconf check for certtool, still needed for the testsuite

Signed-off-by: Steve Langasek <steve.langasek@canonical.com>","{""sha"": ""5b058f5a5fcc13dc4894015f0a34c017327282c9"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-11-05T19:17:01Z""}, ""committer"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-11-05T19:17:53Z""}}"
620,ReviewComment,2021-11-06 18:24:29,stefanberger,fork_close,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/620#pullrequestreview-799466261""}"
620,ReviewRejected,2021-11-06 19:30:45,stefanberger,fork_close,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/620#pullrequestreview-799466371""}"
620,IssueComment,2021-11-06 19:32:15,stefanberger,fork_close,"> The impetus for proposing this change is that certtool is in Ubuntu universe, but openssl is in Ubuntu main, so we would like to not have this as a runtime dependency. (Keeping it as a build-time dependency for the tests is not a concern.)

And the next step is to modify swtpm_cert?","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/962499308"", ""author_association"": ""OWNER""}"
620,ReviewComment,2021-11-08 01:52:04,stefanberger,fork_close,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/620#pullrequestreview-799629245""}"
620,IssueComment,2021-11-27 03:21:45,stefanberger,fork_close,@vorlonofportland ping ...,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/980493849"", ""author_association"": ""OWNER""}"
620,IssueCommentSupplement,2022-04-29 21:07:57,stefanberger,fork_close,I am closing this PR also due lack of activity.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1113732730"", ""author_association"": ""OWNER""}"
620,ClosePR,2022-04-29 21:07:57,stefanberger,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6526384797"", ""commit_url"": null}"
620,CrossReferenced,2022-05-18 14:23:18,stefanberger,fork_close,Error creating local CA's signing key and cert when used with QEMU/KVM and virt-manager,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/699"", ""is_pull_request"": false}}"
623,OpenPR,2021-11-01 13:12:22,stefanberger,unfork_merge,,
623,Revise,2021-11-01 13:31:31,stefanberger,unfork_merge,"swtpm_localca: Replace '+' and ',' characters in VMId's

Certain characters are not accepted by gnutls when creating the
subject with the 'CN' from the vmid, so we have to replace those
characters with another one, such as '_'.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""0379895c9e10bc753714365436df15f614d96d5f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-01T13:08:22Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-01T13:31:31Z""}}"
623,CrossReferenced,2021-11-01 14:01:54,stefanberger,unfork_merge,tpm failed after switching from  passthrough tpm to swtpm,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/622"", ""is_pull_request"": false}}"
623,MergePR,2021-11-01 14:27:11,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5549292108"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/b08876722adc58de5e1c6569eeaa3382c585f193""}"
623,DeleteBranch,2021-11-01 14:49:11,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5549437493"", ""commit_url"": null}"
624,SubmitCommit,2021-11-02 01:15:34,stefanberger,unfork_merge,"tests: exit with error code if mktemp fails

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b2a5fd417fd1394be60c2ed468fcee00e85bfecb"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-02T01:15:32Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-02T01:15:34Z""}}"
624,OpenPR,2021-11-02 01:16:46,stefanberger,unfork_merge,,
624,MergePR,2021-11-02 12:35:49,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5554964920"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/cce7503cbfbee5bf41592a4449f370658c861138""}"
624,DeleteBranch,2021-11-05 17:00:24,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5575667433"", ""commit_url"": null}"
626,SubmitCommit,2021-11-05 12:23:13,stefanberger,unfork_close,"tests: Make TPM 1.2 and IBM TSS2 test compile with OSSL 3.0

Add CFLAGS=""-DOPENSSL_SUPPRESS_DEPRECATED=1"" to the configure line
to avoid compile-time errors when building with OpenSSL 3.0.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""52d90ff5677438cef9ae3e6a4468a78a015b3333"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T12:23:04Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T12:23:13Z""}}"
626,OpenPR,2021-11-05 12:24:31,stefanberger,unfork_close,,
626,ClosePR,2021-11-05 12:49:09,stefanberger,unfork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5574214197"", ""commit_url"": null}"
627,OpenPR,2021-11-05 13:47:02,stefanberger,unfork_merge,,
627,Revise,2021-11-05 14:44:26,stefanberger,unfork_merge,"tests: OSSL 3: Make TPM 1.2 test compile; skip IBM TSS 2 test

Add CFLAGS=""-DOPENSSL_SUPPRESS_DEPRECATED=1"" to the configure line
to avoid compile-time errors when building the TPM 1.2 test with
OpenSSL 3.0.

IBM TSS2 v1.6 test does not currently work with OpenSSL 3.0, so
skip it.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""115cabf7bacc60c101f994608e789e65fdf3709d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T12:23:04Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T14:44:26Z""}}"
627,IssueComment,2021-11-05 15:10:36,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3666](https://coveralls.io/builds/44050403)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.89%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/44050403/badge)](https://coveralls.io/builds/44050403) |
| :-- | --: |
| Change from base [Build 3664](https://coveralls.io/builds/44047255): |  0.0% |
| Covered Lines: | 6117 |
| Relevant Lines: | 8168 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/961976728"", ""author_association"": ""NONE""}"
627,MergePR,2021-11-05 16:59:42,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5575663762"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f894b45f99f746c1a8ad9c5b1822e60cb8e9010c""}"
627,DeleteBranch,2021-11-05 16:59:45,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5575664007"", ""commit_url"": null}"
628,SubmitCommit,2021-11-05 19:02:10,stefanberger,unfork_merge,"swtpm: Fix compilation error on 32bit machines

Fix the following compilation error occurring on 32bit machines:

swtpm_nvstore_linear_file.c: In function 'SWTPM_NVRAM_LinearFile_Mmap':
swtpm_nvstore_linear_file.c:58:20: error: comparison of integer expressions of different signedness: '__off_t' {aka 'long int'} and 'unsigned int' [-Werror=sign-compare]
   58 |     if (st.st_size >= (uint32_t)sizeof(struct nvram_linear_hdr)) {
      |                    ^~

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""864cc816f4578ca60e10529864bc14cd69362aef"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T19:02:05Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T19:02:10Z""}}"
628,OpenPR,2021-11-05 19:03:36,stefanberger,unfork_merge,,
628,Revise,2021-11-05 20:13:05,stefanberger,unfork_merge,"tests: Fix expiration date check for 32 bit machines

certtool on 32 bit machines seems to expire a never expiring certificate
in 2037 rather than 9999.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""65bf1f03da17b882bc3b4ec389a7c130dfc05315"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T19:16:43Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T20:13:05Z""}}"
628,MergePR,2021-11-05 20:58:55,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5576762707"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/13aaff6b8f501d055012c09abb957be68311d5f6""}"
628,DeleteBranch,2021-11-05 21:50:49,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5576934717"", ""commit_url"": null}"
629,SubmitCommit,2021-11-05 22:03:41,stefanberger,unfork_merge,"swtpm_setup: Do not assign pointer to g_strchomp result (Coverity)

Get rid of a Coverity complaint by not assigning the same pointer
to the result of g_strchomp() as the parameter to the function.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""21b1018328398bdac4ad3376e2d97c895c34e9ab"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T22:03:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T22:03:41Z""}}"
629,SubmitCommit,2021-11-05 22:05:18,stefanberger,unfork_merge,"swtpm_localca: Do not assign pointer to g_strchomp result (Coverity)

Get rid of a Coverity complaint by not assigning the same pointer
to the result of g_strchomp() as the parameter to the function.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""f8db971b129c5b4c32b799f30eb4dd1ba559e3b2"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T22:05:18Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-05T22:05:18Z""}}"
629,OpenPR,2021-11-05 22:06:48,stefanberger,unfork_merge,,
629,MergePR,2021-11-05 22:47:12,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5577074556"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/7bf77806f4fa5ef0fc0b85417e0f43452565bf01""}"
629,DeleteBranch,2021-11-05 22:47:16,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5577074685"", ""commit_url"": null}"
630,OpenPR,2021-11-08 12:56:22,stefanberger,unfork_merge,,
630,IssueComment,2021-11-08 12:56:46,stefanberger,unfork_merge,@elmarco This should resolve the issue forcing one to edit configure.ac to change the PCR bank list.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/963123589"", ""author_association"": ""OWNER""}"
630,IssueComment,2021-11-08 12:59:45,elmarco,unfork_merge,"ok, lgtm","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/963125766"", ""author_association"": ""CONTRIBUTOR""}"
630,Revise,2021-11-08 13:21:04,stefanberger,unfork_merge,"build-sys: Move regex to test PCR banks into configure script

Move the regex test for the PCR banks into the configure script.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7245cbc70f7e870c73721a6c2753dacbfc4150b6"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-08T12:24:06Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-08T13:21:04Z""}}"
630,MergePR,2021-11-08 14:03:44,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5583126707"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/9726af516fa4c9131c5f9bbd6f80eafa6a722c2a""}"
630,IssueCommentSupplement,2021-11-08 14:03:51,stefanberger,unfork_merge,@elmarco Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/963182460"", ""author_association"": ""OWNER""}"
630,DeleteBranch,2021-11-08 14:03:53,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5583127891"", ""commit_url"": null}"
631,OpenPR,2021-11-11 05:24:50,kkamagui,fork_merge,,
631,ReviewComment,2021-11-11 11:31:13,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/631#pullrequestreview-803693869""}"
631,IssueComment,2021-11-11 11:32:00,stefanberger,fork_merge,"Except for the one comment, LGTM.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/966228739"", ""author_association"": ""OWNER""}"
631,Revise,2021-11-12 04:08:36,kkamagui,fork_merge,"Move *.conf and *.options to man5

According to the man page sections guideline, man8 should be used
for system administration commands. So this commit moves *.conf and
*.options files to man5.

Signed-off-by: Seunghun Han <kkamagui@gmail.com>","{""sha"": ""35e3207e711d3d39ebfc92bb4f1e2142c86afe3c"", ""author"": {""name"": ""Seunghun Han"", ""email"": ""kkamagui@gmail.com"", ""date"": ""2021-11-11T02:38:22Z""}, ""committer"": {""name"": ""Seunghun Han"", ""email"": ""kkamagui@gmail.com"", ""date"": ""2021-11-12T04:08:36Z""}}"
631,BaseRefChanged,2021-11-22 20:08:45,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5656426435"", ""commit_url"": null}"
631,MergePR,2021-11-22 20:09:08,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5656428227"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/d9b53b60c713ea2175f2217dc69ef1d68aaf3406""}"
631,IssueCommentSupplement,2021-11-23 01:54:20,kkamagui,fork_merge,"Hi @stefanberger, thank you for merging my request. I am glad to contribute to this great project.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/976097520"", ""author_association"": ""CONTRIBUTOR""}"
631,IssueCommentSupplement,2021-11-23 12:46:15,stefanberger,fork_merge,Thanks for the fixes. And you're welcome.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/976479513"", ""author_association"": ""OWNER""}"
634,OpenPR,2021-11-19 22:34:58,stefanberger,unfork_merge,,
634,IssueComment,2021-11-19 22:35:03,stefanberger,unfork_merge,@elmarco ,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/974517250"", ""author_association"": ""OWNER""}"
634,IssueComment,2021-11-20 07:41:59,elmarco,unfork_merge,That's swtpm only. What about wrapping TPMLIB_ChooseTPMVersion to report this error for all the callers?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/974610748"", ""author_association"": ""CONTRIBUTOR""}"
634,IssueComment,2021-11-20 15:27:54,stefanberger,unfork_merge,A new API call for libtpms ?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/974665776"", ""author_association"": ""OWNER""}"
634,IssueComment,2021-11-20 15:55:13,stefanberger,unfork_merge,".. ah, now I know what you mean ...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/974670312"", ""author_association"": ""OWNER""}"
634,RenameTitle,2021-11-20 16:16:07,stefanberger,unfork_merge,,"{""rename"": {""from"": ""swtpm: Improve error message when choosing unsupported TPM version"", ""to"": ""swtpm: Implement function reporting error when choosing unsupported TPM""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5649092160""}"
634,Revise,2021-11-20 16:16:33,stefanberger,unfork_merge,"swtpm: Implement function reporting error when choosing unsupported TPM

Implement tpmlib_choose_tpm_version() that reports an error when an un-
supported version is chosen. Have it used by existing code where possible.

If TPM 1.2 is not supported by libtpms, the following message is now
displayed:

swtpm: Error: TPM 1.2 is not supported by libtpms.

Fixes: https://bugzilla.redhat.com/show_bug.cgi?id=2024583
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""619d0cf563175460a42f2b26fe5242517d485525"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-19T22:35:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-20T16:16:33Z""}}"
634,IssueComment,2021-11-22 07:47:51,elmarco,unfork_merge,"lgtm, thanks!","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/975212607"", ""author_association"": ""CONTRIBUTOR""}"
634,MergePR,2021-11-22 12:39:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5653659166"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/6d1a7abbfc3fdbfd4ddf683416318b2fb8d109b2""}"
634,DeleteBranch,2021-11-22 12:39:32,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5653659533"", ""commit_url"": null}"
634,CrossReferenced,2021-11-22 12:39:56,stefanberger,unfork_merge,[Bug 2024583] Error should be improved when run swtpm socket with unsupported version,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/633"", ""is_pull_request"": false}}"
635,SubmitCommit,2021-11-20 16:14:44,stefanberger,unfork_merge,"build-sys: Bump up version to 0.8.0 at beginning of dev cycle

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""da6a6a92bb01a79205dbda8672e7d64d14a9cbd8"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-20T16:14:44Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-20T16:14:44Z""}}"
635,OpenPR,2021-11-20 16:15:20,stefanberger,unfork_merge,,
635,IssueComment,2021-11-20 16:53:19,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3685](https://coveralls.io/builds/44425370)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.89%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/44425370/badge)](https://coveralls.io/builds/44425370) |
| :-- | --: |
| Change from base [Build 3681](https://coveralls.io/builds/44225113): |  0.0% |
| Covered Lines: | 6117 |
| Relevant Lines: | 8168 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/974678248"", ""author_association"": ""NONE""}"
635,MergePR,2021-11-20 17:02:11,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5649133882"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3115dff02f8fb75dddd1a7375eb5515dc24f56b8""}"
636,SubmitCommit,2021-11-22 20:09:46,kkamagui,unfork_merge,"Move *.conf and *.options to man5

According to the man page sections guideline, man8 should be used
for system administration commands. So this commit moves *.conf and
*.options files to man5.

Signed-off-by: Seunghun Han <kkamagui@gmail.com>
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b53d4d8978b984d30f1b9925a460b52cdf4ea3d0"", ""author"": {""name"": ""Seunghun Han"", ""email"": ""kkamagui@gmail.com"", ""date"": ""2021-11-11T02:38:22Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2021-11-22T20:09:46Z""}}"
636,OpenPR,2021-11-22 20:10:17,stefanberger,unfork_merge,,
636,IssueComment,2021-11-22 20:10:42,stefanberger,unfork_merge,@kkamagui I added swtpm.spec to it.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/975879045"", ""author_association"": ""OWNER""}"
636,MergePR,2021-11-22 23:30:18,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/5657249349"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/33aa135545e36f5bb185e9fc2bfd7f4cbdc7da95""}"
680,OpenPR,2022-03-26 03:36:42,stefanberger,unfork_merge,,
680,IssueComment,2022-03-26 04:15:34,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3798](https://coveralls.io/builds/47744591)

* **5** of **5**   **(100.0%)**  changed or added relevant lines in **2** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.006%**) to **74.893%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/47744591/badge)](https://coveralls.io/builds/47744591) |
| :-- | --: |
| Change from base [Build 3791](https://coveralls.io/builds/47696141): |  0.006% |
| Covered Lines: | 6130 |
| Relevant Lines: | 8185 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1079597191"", ""author_association"": ""NONE""}"
680,HeadRefForcePushed,2022-03-28 11:56:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6317846608"", ""commit_url"": null}"
680,Revise,2022-03-28 11:58:02,stefanberger,unfork_merge,"swtpm_ioctl: Use unsigned int tcp_port to filter out negative port numbers

The port being parsed must be given as unsigned int so that the comparison
of *tcp_port >= 65536 also filters out negative numbers passed via the
command line. Previously one could pass -1 and swtpm_ioctl would try to
connect to port 65535.

Resolves: https://github.com/stefanberger/swtpm/issues/679
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9a5dcfe7fdfc0e11f354c8d66fc67141d82d12c4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-26T02:41:00Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-28T11:58:02Z""}}"
680,HeadRefForcePushed,2022-03-28 11:58:37,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6317860174"", ""commit_url"": null}"
680,Revise,2022-03-28 12:34:31,stefanberger,unfork_merge,"swtpm_bios: Use unsigned int tcp_port to filter out negative port numbers

The port being parsed must be given as unsigned int so that the comparison
of *tcp_port >= 65536 also filters out negative numbers passed via the
command line. Previously one could pass -1 and swtpm_bios would try to
connect.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""cec393715a14ebd5c61d7db75049009c0d3e1fa4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-26T02:54:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-28T12:34:31Z""}}"
680,HeadRefForcePushed,2022-03-28 12:34:36,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6318113754"", ""commit_url"": null}"
680,MergePR,2022-03-28 13:21:39,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6318479735"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/47638ebc36ce5b18d562b508b84442a49f274420""}"
680,DeleteBranch,2022-03-28 13:21:43,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6318480420"", ""commit_url"": null}"
681,OpenPR,2022-03-26 03:37:04,stefanberger,unfork_merge,,
681,IssueComment,2022-03-26 04:53:48,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3794](https://coveralls.io/builds/47714883)

* **1** of **1**   **(100.0%)**  changed or added relevant line in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.887%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/47714883/badge)](https://coveralls.io/builds/47714883) |
| :-- | --: |
| Change from base [Build 3791](https://coveralls.io/builds/47696141): |  0.0% |
| Covered Lines: | 6128 |
| Relevant Lines: | 8183 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1079604187"", ""author_association"": ""NONE""}"
681,HeadRefForcePushed,2022-03-28 13:25:52,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6318515432"", ""commit_url"": null}"
681,RenameTitle,2022-03-28 13:35:34,stefanberger,unfork_merge,,"{""rename"": {""from"": ""swtpm: Use uint64_t for offset to compare against uint32_t"", ""to"": ""swtpm: Use uint64_t to avoid integer wrap-around when adding a uint32_t""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6318596479""}"
681,Revise,2022-03-28 15:14:39,stefanberger,unfork_merge,"swtpm: Use uint64_t to avoid integer wrap-around when adding a uint32_t

To avoid an integer wrap-around use uint64_t for 'offset' so that adding
an untrusted 32-bit number will allow for comparison against the trusted
'buffer_len' 32-bit number:

        if (offset + td->tlv.length > buffer_len)
            return NULL;

This avoids possible out-of-bound accesses and crashes when reading
specially crafted TPM state input data that have a tlv.length that is so
large that is causes an integer overflow.

Resolves: https://github.com/stefanberger/swtpm/issues/678
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""a06ccb034f27bf6cb92f346f70b8fe082f8caa44"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-26T03:28:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-28T15:14:39Z""}}"
681,HeadRefForcePushed,2022-03-28 15:55:49,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6319766852"", ""commit_url"": null}"
681,Revise,2022-03-28 16:14:54,stefanberger,unfork_merge,"swtpm: Use uint64_t in tlv_data_append() to avoid integer overflows

Instead of uint32_t use uint64_t's for accumulating needed buffer sizes
that are calculated by adding uint32_t length indicators. Use the uint64_t
to check for excessively large buffer sizes that could cause an integer
overflow if uint32_t was used.

This patch addresses the case where a user passes an old version of TPM
state file to swtpm for reading and the file is 4GB in size and thus can
cause an integer overflow in this particular function.

Otherwise, the previous fix to tlv_data_find_tag() protects swtpm from
integer overflows and later out-of-bound accesses when the TPM state is
initially read from a file (assuming the state file has a header, which
is the case since swtpm 0.1). If an excessively large buffer was passed
to libtpms, it would reject it since it would never be able to take in
that much data.

Data written to the file are coming from libtpms that we can trust in
terms of length indicators.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""250fd95014df441468e216e34be1e28ed8da740b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-28T15:23:11Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-28T16:14:54Z""}}"
681,HeadRefForcePushed,2022-03-28 16:15:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6319913531"", ""commit_url"": null}"
681,MergePR,2022-03-29 11:38:12,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6325853364"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/9918259c6e77f5d3d75821e9e2780b65764c599d""}"
681,DeleteBranch,2022-04-04 22:07:02,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6366523278"", ""commit_url"": null}"
684,SubmitCommit,2022-03-30 16:12:35,stefanberger,unfork_merge,"build-sys: Build swtpm-0.6.4

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b20f9fa5262e84f190fc7c5963058f84056a02ae"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-30T16:12:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-30T16:12:35Z""}}"
684,SubmitCommit,2022-03-30 16:13:21,stefanberger,unfork_merge,"swtpm: Use uint64_t to avoid integer wrap-around when adding a uint32_t

To avoid an integer wrap-around use uint64_t for 'offset' so that adding
an untrusted 32-bit number will allow for comparison against the trusted
'buffer_len' 32-bit number:

        if (offset + td->tlv.length > buffer_len)
            return NULL;

This avoids possible out-of-bound accesses and crashes when reading
specially crafted TPM state input data that have a tlv.length that is so
large that is causes an integer overflow.

Resolves: https://github.com/stefanberger/swtpm/issues/678
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""245bfb73bb3534dab6c7b2478e567c9e4f7b5e4c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-26T03:28:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-30T16:13:21Z""}}"
684,SubmitCommit,2022-03-30 16:13:23,stefanberger,unfork_merge,"swtpm: Use uint64_t in tlv_data_append() to avoid integer overflows

Instead of uint32_t use uint64_t's for accumulating needed buffer sizes
that are calculated by adding uint32_t length indicators. Use the uint64_t
to check for excessively large buffer sizes that could cause an integer
overflow if uint32_t was used.

This patch addresses the case where a user passes an old version of TPM
state file to swtpm for reading and the file is 4GB in size and thus can
cause an integer overflow in this particular function.

Otherwise, the previous fix to tlv_data_find_tag() protects swtpm from
integer overflows and later out-of-bound accesses when the TPM state is
initially read from a file (assuming the state file has a header, which
is the case since swtpm 0.1). If an excessively large buffer was passed
to libtpms, it would reject it since it would never be able to take in
that much data.

Data written to the file are coming from libtpms that we can trust in
terms of length indicators.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""37498415b1316fffca57860c35eff71f32e2f53b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-28T15:23:11Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-30T16:13:23Z""}}"
684,OpenPR,2022-03-30 16:15:38,stefanberger,unfork_merge,,
684,IssueComment,2022-03-30 18:11:52,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3803](https://coveralls.io/builds/47841028)

* **4** of **6**   **(66.67%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.02%**) to **74.474%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/tlv.c](https://coveralls.io/builds/47841028/source?filename=src%2Fswtpm%2Ftlv.c#L90) | 4 | 6 | 66.67%
<!-- | **Total:** | **4** | **6** | **66.67%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/47841028/badge)](https://coveralls.io/builds/47841028) |
| :-- | --: |
| Change from base [Build 3773](https://coveralls.io/builds/47224431): |  -0.02% |
| Covered Lines: | 5456 |
| Relevant Lines: | 7326 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1083457548"", ""author_association"": ""NONE""}"
684,MergePR,2022-03-30 19:51:54,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6337886923"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/208a30a0eed03a1378809b648fd032b45589ddfb""}"
685,SubmitCommit,2022-03-30 16:38:56,stefanberger,unfork_merge,"build-sys: build swtpm-0.5.5

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""96871af1dcdd90f8221a087d3c55493d35bad6aa"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-30T16:38:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-30T16:38:56Z""}}"
685,SubmitCommit,2022-03-30 16:38:56,stefanberger,unfork_merge,"swtpm: Use uint64_t to avoid integer wrap-around when adding a uint32_t

To avoid an integer wrap-around use uint64_t for 'offset' so that adding
an untrusted 32-bit number will allow for comparison against the trusted
'buffer_len' 32-bit number:

        if (offset + td->tlv.length > buffer_len)
            return NULL;

This avoids possible out-of-bound accesses and crashes when reading
specially crafted TPM state input data that have a tlv.length that is so
large that is causes an integer overflow.

Resolves: https://github.com/stefanberger/swtpm/issues/678
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3c7b429b90848002f0c4671e9c92f3e026917838"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-26T03:28:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-30T16:38:56Z""}}"
685,SubmitCommit,2022-03-30 16:38:56,stefanberger,unfork_merge,"swtpm: Use uint64_t in tlv_data_append() to avoid integer overflows

Instead of uint32_t use uint64_t's for accumulating needed buffer sizes
that are calculated by adding uint32_t length indicators. Use the uint64_t
to check for excessively large buffer sizes that could cause an integer
overflow if uint32_t was used.

This patch addresses the case where a user passes an old version of TPM
state file to swtpm for reading and the file is 4GB in size and thus can
cause an integer overflow in this particular function.

Otherwise, the previous fix to tlv_data_find_tag() protects swtpm from
integer overflows and later out-of-bound accesses when the TPM state is
initially read from a file (assuming the state file has a header, which
is the case since swtpm 0.1). If an excessively large buffer was passed
to libtpms, it would reject it since it would never be able to take in
that much data.

Data written to the file are coming from libtpms that we can trust in
terms of length indicators.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""733a993e1407e6198e84f59e007f7d06ce175906"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-28T15:23:11Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-03-30T16:38:56Z""}}"
685,OpenPR,2022-03-30 16:40:17,stefanberger,unfork_merge,,
685,MergePR,2022-03-30 19:51:30,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6337884711"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/20141486d42c19633194183772f14e87241a2077""}"
689,OpenPR,2022-04-04 12:59:08,stefanberger,unfork_merge,,
689,HeadRefForcePushed,2022-04-04 13:18:19,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6362986046"", ""commit_url"": null}"
689,IssueComment,2022-04-04 13:38:20,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3813](https://coveralls.io/builds/47974245)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.875%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/47974245/badge)](https://coveralls.io/builds/47974245) |
| :-- | --: |
| Change from base [Build 3808](https://coveralls.io/builds/47921997): |  0.0% |
| Covered Lines: | 6130 |
| Relevant Lines: | 8187 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1087569370"", ""author_association"": ""NONE""}"
689,HeadRefForcePushed,2022-04-04 13:42:50,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6363201542"", ""commit_url"": null}"
689,RenameTitle,2022-04-04 13:43:39,stefanberger,unfork_merge,,"{""rename"": {""from"": ""build-sys: Fix HARDENING_CFLAGS to support _FORTIFY_SOURCE=3"", ""to"": ""build-sys: Fix configure script to support _FORTIFY_SOURCE=3""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6363207873""}"
689,IssueComment,2022-04-04 13:49:12,marxin,unfork_merge,"This patch (0643b127cc3055937f17bb5afa896c968c261b4a) works for me, thanks.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1087581203"", ""author_association"": ""NONE""}"
689,Revise,2022-04-04 14:42:12,stefanberger,unfork_merge,"build-sys: Define __USE_LINUX_IOCTL_DEFS in header file (Cygwin)

To be able to test-compile with include/swtpm/tpm_ioctl.h in configure.ac
move the definition of __USE_LINUX_IOCTL_DEFS out of the configure script
into the header file so that the #define is there when needed. In the
configure.ac script the CFLAGS were extended only after the test-compiling
to determine the HARDENING_CFLAGS and the test-compilation failed on Cygwin
(only) since the tpm_ioctl.h didn't compile because of this missing
 #define.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""83ab67236cb18f348efed76169c8fb63f13bb47d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-04T14:30:47Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-04T14:42:12Z""}}"
689,Revise,2022-04-04 14:42:16,stefanberger,unfork_merge,"build-sys: Fix configure script to support _FORTIFY_SOURCE=3

gcc 12.1 supports _FORTIFY_SOURCE=3. Modify the existing check for whether
_FORTIFY_SOURCE=2 can be used to test compile with the user provided
CFLAGS and only add _D_FORTIFY_SOURCE=2 to the HARDENING_CFLAGS if the
user doesn't provide anything that's not compatible.

Following an online article _FORTIFY_SOURCE=3 may add more overhead, so
we only go up to level 2 for now and let build servers or user provide
the higher level via the CFLAGS.

https://developers.redhat.com/blog/2021/04/16/broadening-compiler-checks-for-buffer-overflows-in-_fortify_source#what_s_next_for__fortify_source

Resolves: https://github.com/stefanberger/swtpm/issues/688
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""261f82d03ddaf4778ae48a903fd00d3bbb789989"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-04T12:49:37Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-04T14:42:16Z""}}"
689,HeadRefForcePushed,2022-04-04 14:42:56,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6363716984"", ""commit_url"": null}"
689,MergePR,2022-04-04 15:45:36,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6364243575"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/607f1f800ac975dadd43af8a8036b6c8a6e4284e""}"
689,DeleteBranch,2022-04-04 22:06:59,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6366523065"", ""commit_url"": null}"
689,IssueCommentSupplement,2022-04-08 11:55:26,marxin,unfork_merge,Are you planning a release with the fix any time soon? Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1092783067"", ""author_association"": ""NONE""}"
689,IssueCommentSupplement,2022-04-08 12:05:11,stefanberger,unfork_merge,I will make an 0.7.3 release with it by mid April.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1092790509"", ""author_association"": ""OWNER""}"
689,IssueCommentSupplement,2022-04-08 12:39:05,stefanberger,unfork_merge,"Actually, it may take until 'end of April'.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1092817136"", ""author_association"": ""OWNER""}"
689,IssueCommentSupplement,2022-04-08 12:43:36,marxin,unfork_merge,"That's fine, I've just cherry-picked the package for our openSUSE package:
https://build.opensuse.org/package/show/security/swtpm","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1092820634"", ""author_association"": ""NONE""}"
689,IssueCommentSupplement,2022-04-08 12:56:19,stefanberger,unfork_merge,"> That's fine, I've just cherry-picked the package for our openSUSE package:

You mean you cherry-picked the patch... That I guess solves it for now.

Is it gcc 12.0.1 or 12.1 that created the issue?","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1092830970"", ""author_association"": ""OWNER""}"
689,IssueCommentSupplement,2022-04-08 12:57:46,marxin,unfork_merge,"> > That's fine, I've just cherry-picked the package for our openSUSE package:
> 
> You mean you cherry-picked the patch... That I guess solves it for now.

Yeah, a typo.

> 
> Is it gcc 12.0.1 or 12.1 that created the issue?

Note `12.0.x` is a development version and it will become a standard release `12.1.0` in a month from now.
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1092832251"", ""author_association"": ""NONE""}"
690,SubmitCommit,2022-04-04 22:08:43,stefanberger,unfork_merge,"build-sys: Define __USE_LINUX_IOCTL_DEFS in header file (Cygwin)

To be able to test-compile with include/swtpm/tpm_ioctl.h in configure.ac
move the definition of __USE_LINUX_IOCTL_DEFS out of the configure script
into the header file so that the #define is there when needed. In the
configure.ac script the CFLAGS were extended only after the test-compiling
to determine the HARDENING_CFLAGS and the test-compilation failed on Cygwin
(only) since the tpm_ioctl.h didn't compile because of this missing
 #define.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""83a70abb0c7a354e9862fa8b23a84bce6520689a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-04T14:30:47Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-04T22:08:43Z""}}"
690,SubmitCommit,2022-04-04 22:08:55,stefanberger,unfork_merge,"build-sys: Fix configure script to support _FORTIFY_SOURCE=3

gcc 12.1 supports _FORTIFY_SOURCE=3. Modify the existing check for whether
_FORTIFY_SOURCE=2 can be used to test compile with the user provided
CFLAGS and only add _D_FORTIFY_SOURCE=2 to the HARDENING_CFLAGS if the
user doesn't provide anything that's not compatible.

Following an online article _FORTIFY_SOURCE=3 may add more overhead, so
we only go up to level 2 for now and let build servers or user provide
the higher level via the CFLAGS.

https://developers.redhat.com/blog/2021/04/16/broadening-compiler-checks-for-buffer-overflows-in-_fortify_source#what_s_next_for__fortify_source

Resolves: https://github.com/stefanberger/swtpm/issues/688
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1fdc81bf848a294b997745e1c83c139371cb4288"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-04T12:49:37Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-04T22:08:55Z""}}"
690,OpenPR,2022-04-04 22:12:34,stefanberger,unfork_merge,,
690,IssueComment,2022-04-04 22:51:20,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3814](https://coveralls.io/builds/47990493)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.881%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/47990493/badge)](https://coveralls.io/builds/47990493) |
| :-- | --: |
| Change from base [Build 3805](https://coveralls.io/builds/47855901): |  0.0% |
| Covered Lines: | 6123 |
| Relevant Lines: | 8177 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1088087480"", ""author_association"": ""NONE""}"
690,MergePR,2022-04-04 23:01:57,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6366738860"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/d57ee9a0f213c45597289b131d227691a658d53b""}"
691,OpenPR,2022-04-13 20:37:01,lvoytek,fork_merge,,
691,HeadRefForcePushed,2022-04-13 20:38:32,lvoytek,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6430229299"", ""commit_url"": null}"
691,IssueComment,2022-04-13 21:15:34,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3840](https://coveralls.io/builds/48774790)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.875%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/48774790/badge)](https://coveralls.io/builds/48774790) |
| :-- | --: |
| Change from base [Build 3818](https://coveralls.io/builds/48122638): |  0.0% |
| Covered Lines: | 6130 |
| Relevant Lines: | 8187 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1098493930"", ""author_association"": ""NONE""}"
691,IssueComment,2022-04-26 19:45:52,stefanberger,fork_merge,Are normal users affected by this or is this only relevant to root? Can you write something about this in the patch description.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1110183778"", ""author_association"": ""OWNER""}"
691,IssueComment,2022-04-27 16:35:24,lvoytek,fork_merge,"All users running the swtpm binary would be affected by the profile. Apparmor would block the swtpm binary's access to items not listed, and additional permissions can be added by creating the file /etc/apparmor.d/local/usr.bin.swtpm","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1111215128"", ""author_association"": ""CONTRIBUTOR""}"
691,IssueComment,2022-04-27 16:47:49,stefanberger,fork_merge,"> All users running the swtpm binary would be affected by the profile. Apparmor would block the swtpm binary's access to items not listed, and additional permissions can be added by creating the file /etc/apparmor.d/local/usr.bin.swtpm

`/etc/apparmor.d/local` can only be written to by root. So normal user who want to run the test cases of swtpm with the installed swtpm executable(s) would have to ask root to create this file with appropriate entries?","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1111226814"", ""author_association"": ""OWNER""}"
691,IssueComment,2022-04-27 17:22:10,stefanberger,fork_merge,Libvirt creates an AppArmor profile before swtpm is started and it makes a lot of sense to confine the process in this case. I am wondering though whether `swtpm` should basically not be usable out of the box for normal users if your AppArmor profile gets installed. It sounds like normal users would have to make a copy of swtpm to run it out of a different location then.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1111274835"", ""author_association"": ""OWNER""}"
691,IssueComment,2022-04-27 17:49:24,lvoytek,fork_merge,"> `/etc/apparmor.d/local` can only be written to by root. So normal user who want to run the test cases of swtpm with the installed swtpm executable(s) would have to ask root to create this file with appropriate entries?

Yes for security reasons only those with root access can add the local profile.


> Libvirt creates an AppArmor profile before swtpm is started and it makes a lot of sense to confine the process in this case. I am wondering though whether `swtpm` should basically not be usable out of the box for normal users if your AppArmor profile gets installed. It sounds like normal users would have to make a copy of swtpm to run it out of a different location then.

I see what you mean when running swtpm standalone without libvirt. The apparmor profile shouldn't impede users running swtpm out of the box as it allows the necessary files and network permissions to do so. It is possible for a user to run into problems though when providing the binary with restricted files/folders, such as with the dir argument  ","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1111307227"", ""author_association"": ""CONTRIBUTOR""}"
691,IssueComment,2022-04-28 14:00:10,stefanberger,fork_merge,"> I see what you mean when running swtpm standalone without libvirt. The apparmor profile shouldn't impede users running swtpm out of the box as it allows the necessary files and network permissions to do so. It is possible for a user to run into problems though when providing the binary with restricted files/folders, such as with the dir argument

Please describe this in your commit message.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1112242093"", ""author_association"": ""OWNER""}"
691,HeadRefForcePushed,2022-04-28 17:55:16,lvoytek,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6517194631"", ""commit_url"": null}"
691,IssueComment,2022-05-02 16:03:01,stefanberger,fork_merge,"The following sequence shows that running swtpm as non-root user is not working when running it out of its standard location`/usr/bin/swtpm`. Is this expected and 'desirable'?

```
stefanb@test:~$ swtpm_setup --tpmstate ./ --tpm2 --overwrite
/usr/bin/swtpm exit with status 256:

stefanb@test:~$ sudo aa-complain swtpm
Setting /usr/bin/swtpm to complain mode.
Warning: profile swtpm represents multiple programs
Warning: profile swtpm represents multiple programs

stefanb@test:~$ swtpm_setup --tpmstate ./ --tpm2 --overwrite
Starting vTPM manufacturing as stefanb:stefanb @ Mon 02 May 2022 11:57:29 AM EDT
TPM is listening on Unix socket.
Successfully activated PCR banks sha256 among sha1,sha256,sha384,sha512.
Successfully authored TPM state.
Ending vTPM manufacturing @ Mon 02 May 2022 11:57:29 AM EDT
```

Basically users have to ask root now to create a profile `/etc/apparmor.d/local/usr.bin.swtpm` for them so they can run the installed swtpm (`/usr/bin/swtpm`) and have it write the state into the user's home directory somewhere?

","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115068855"", ""author_association"": ""OWNER""}"
691,IssueComment,2022-05-02 19:02:58,lvoytek,fork_merge,"> The following sequence shows that running swtpm as non-root user is not working when running it out of its standard location`/usr/bin/swtpm`. Is this expected and 'desirable'?

This was intentional for security when promoting swtpm to main in Ubuntu. Allowing swtpm to use a given user's home directory when requested is a valid use case though. If you'd like that to be available by default I can add it to the profile.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115253450"", ""author_association"": ""CONTRIBUTOR""}"
691,IssueComment,2022-05-02 19:08:13,stefanberger,fork_merge,"> Allowing swtpm to use a given user's home directory when requested is a valid use case though. If you'd like that to be available by default I can add it to the profile.

I think any directory including and under $HOME should be allowed.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115258635"", ""author_association"": ""OWNER""}"
691,HeadRefForcePushed,2022-05-02 19:35:30,lvoytek,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6535780272"", ""commit_url"": null}"
691,IssueComment,2022-05-02 19:36:19,lvoytek,fork_merge,Alright I added in the home rule and made sure that it works properly in enforce mode.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115284538"", ""author_association"": ""CONTRIBUTOR""}"
691,IssueComment,2022-05-02 19:47:40,stefanberger,fork_merge,"> Alright I added in the home rule and made sure that it works properly in enforce mode.

Thanks a lot. I would think that adding /tmp to it may also be useful...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115294235"", ""author_association"": ""OWNER""}"
691,IssueComment,2022-05-02 19:50:36,stefanberger,fork_merge,"> Thanks a lot. I would think that adding /tmp to it may also be useful...

.. actually, it's already enabled. Let me try it a bit more and then I will merge. Thanks.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115296430"", ""author_association"": ""OWNER""}"
691,IssueComment,2022-05-02 19:53:41,lvoytek,fork_merge,Thanks for the help getting this upstream ,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115298716"", ""author_association"": ""CONTRIBUTOR""}"
691,IssueComment,2022-05-02 20:17:00,stefanberger,fork_merge,"Unfortunately there are still some issue when trying to run the test suite as root and exercising more of swtpm's functionality. I am only showing the failed test cases below.

```
root@test:~/swtpm# SWTPM_EXE=/usr/bin/swtpm SWTPM_TEST_EXPENSIVE=1 SWTPM_TEST_IBMTSS2=1 make -j8 check
FAIL: test_ctrlchannel
FAIL: test_vtpm_proxy
FAIL: test_tpm2_file_permissions
FAIL: test_tpm2_save_load_state_2_block
FAIL: test_tpm2_ctrlchannel2
```

I guess a case for `aa-complain` & `aa-logprof`...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115321752"", ""author_association"": ""OWNER""}"
691,IssueComment,2022-05-02 22:31:45,lvoytek,fork_merge,"I got the same errors doing that test. Based on the kernel log output it seems like swtpm is trying to access some things it shouldn't be able to:

	May  2 15:15:46 jammy kernel: [  688.892977] audit: type=1400 audit(1651529746.124:98): apparmor=""DENIED"" operation=""capable"" profile=""swtpm"" pid=75832 comm=""swtpm"" capability=21  capname=""sys_admin""
	May  2 15:15:46 jammy kernel: [  688.895687] audit: type=1400 audit(1651529746.128:99): apparmor=""DENIED"" operation=""open"" profile=""swtpm"" name=""/etc/nsswitch.conf"" pid=75835 comm=""swtpm"" requested_mask=""r"" denied_mask=""r"" fsuid=0 ouid=0
	May  2 15:15:46 jammy kernel: [  688.895691] audit: type=1400 audit(1651529746.128:100): apparmor=""DENIED"" operation=""open"" profile=""swtpm"" name=""/etc/passwd"" pid=75835 comm=""swtpm"" requested_mask=""r"" denied_mask=""r"" fsuid=0 ouid=0
	May  2 15:15:47 jammy kernel: [  690.010500] audit: type=1400 audit(1651529747.240:101): apparmor=""DENIED"" operation=""capable"" profile=""swtpm"" pid=76628 comm=""swtpm"" capability=0  capname=""chown""
	May  2 15:18:06 jammy kernel: [  829.071986] audit: type=1400 audit(1651529886.304:102): apparmor=""DENIED"" operation=""capable"" profile=""swtpm"" pid=106620 comm=""swtpm"" capability=21  capname=""sys_admin""
	May  2 15:18:06 jammy kernel: [  829.086637] audit: type=1400 audit(1651529886.316:103): apparmor=""DENIED"" operation=""open"" profile=""swtpm"" name=""/etc/nsswitch.conf"" pid=106657 comm=""swtpm"" requested_mask=""r"" denied_mask=""r"" fsuid=0 ouid=0
	May  2 15:18:06 jammy kernel: [  829.086641] audit: type=1400 audit(1651529886.316:104): apparmor=""DENIED"" operation=""open"" profile=""swtpm"" name=""/etc/passwd"" pid=106657 comm=""swtpm"" requested_mask=""r"" denied_mask=""r"" fsuid=0 ouid=0
	May  2 15:18:07 jammy kernel: [  830.085467] audit: type=1400 audit(1651529887.316:105): apparmor=""DENIED"" operation=""capable"" profile=""swtpm"" pid=107449 comm=""swtpm"" capability=0  capname=""chown""

This may just be a weird consequence of running as root, since there were no errors when I ran the tests as a normal user. I'll try and see why swtpm wants these permissions and access to files such as /etc/passwd","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115434307"", ""author_association"": ""CONTRIBUTOR""}"
691,IssueComment,2022-05-03 14:21:23,stefanberger,fork_merge,There are test cases that only run as root and that's where these errors may be coming from. Possibly `initgroups()` or some other glibc function reads `/etc/passwd`.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1116158542"", ""author_association"": ""OWNER""}"
691,HeadRefForcePushed,2022-05-05 20:07:39,lvoytek,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6559299157"", ""commit_url"": null}"
691,Revise,2022-05-05 20:11:00,lvoytek,fork_merge,"debian: Add swtpm apparmor profile

An apparmor profile was added for Debian-based distributions in order to
increase security. This blocks swtpm from accessing restricted and unnecessary
files, folders, and network interfaces. swtpm works as normal alongside libvirt
and its configurations, however users may run into issues when using swtpm on
its own when providing it with a restricted directory. The apparmor profile can
be modified to include additional permissions by creating and adding to the
file /etc/apparmor.d/local/usr.bin.swtpm.

Signed-off-by: Lena Voytek <lena.voytek@canonical.com>","{""sha"": ""3e9a51551bcc328cdaed6ecfa2a71cc080178c03"", ""author"": {""name"": ""Lena Voytek"", ""email"": ""lena.voytek@canonical.com"", ""date"": ""2022-05-05T20:07:23Z""}, ""committer"": {""name"": ""Lena Voytek"", ""email"": ""lena.voytek@canonical.com"", ""date"": ""2022-05-05T20:11:00Z""}}"
691,HeadRefForcePushed,2022-05-05 20:11:19,lvoytek,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6559318096"", ""commit_url"": null}"
691,IssueComment,2022-05-05 20:14:29,lvoytek,fork_merge,"I added some additional capability rules that got the root tests working for me on my debian sid and ubuntu jammy vms. It gives swtpm some more leeway when root runs it but not in a way where its a major issue security-wise. Let me know if this fixes it for you. Thanks!
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1119005133"", ""author_association"": ""CONTRIBUTOR""}"
691,IssueComment,2022-05-06 00:57:29,stefanberger,fork_merge,"> Let me know if this fixes it for you.

yes, it works now.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1119172160"", ""author_association"": ""OWNER""}"
691,MergePR,2022-05-06 00:58:31,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6560365224"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/3d2747a1be514571006724877c07b8305d5cd28e""}"
691,IssueCommentSupplement,2022-05-06 00:58:38,stefanberger,fork_merge,Thank you!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1119172536"", ""author_association"": ""OWNER""}"
693,SubmitCommit,2022-04-20 15:05:16,vorlonofportland,unfork_close,Use Debian machine readable copyright format,"{""sha"": ""7b7ecfe4cd70de09b2362b4fcb412f7ad1120885"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-25T14:44:55Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-20T15:05:16Z""}}"
693,SubmitCommit,2022-04-20 15:05:59,vorlonofportland,unfork_close,Check for nocheck before testing,"{""sha"": ""153196d2052242eef91ddee48671bf6e273109d0"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-23T00:54:24Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-20T15:05:59Z""}}"
693,SubmitCommit,2022-04-20 15:06:37,vorlonofportland,unfork_close,Use new debhelper-compat interface,"{""sha"": ""8941bb7416c28abde802ef54f559705850183fc1"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-23T01:21:55Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-20T15:06:37Z""}}"
693,SubmitCommit,2022-04-20 15:07:02,vorlonofportland,unfork_close,"Package contents should be deterministic

Don't allow the contents of the swtpm-tools package vary depending on
whether a particular binary exists as part of the build output.  It either
should be built and always included, or never included.","{""sha"": ""afc124dbbaafb64f16cc2b5e65ae3db4fb41d04c"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-23T01:30:08Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-20T15:07:02Z""}}"
693,SubmitCommit,2022-04-20 15:07:25,vorlonofportland,unfork_close,"Don't call autogen.sh, autoreconf takes care of this for us","{""sha"": ""199076799aecea56a2908ee430f829276ea13ae5"", ""author"": {""name"": ""Steve Langasek"", ""email"": ""steve.langasek@canonical.com"", ""date"": ""2021-10-23T19:19:38Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-20T15:07:25Z""}}"
693,OpenPR,2022-04-20 15:11:33,stefanberger,unfork_close,,
693,IssueComment,2022-04-21 16:29:49,stefanberger,unfork_close,@vorlonofportland Any chance to get your Signed-off-by on these patches?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1105445525"", ""author_association"": ""OWNER""}"
693,CrossReferenced,2022-04-29 21:06:18,stefanberger,unfork_close,Upstream debian fixes,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/611"", ""is_pull_request"": true}}"
693,IssueCommentSupplement,2022-04-29 21:06:51,stefanberger,unfork_close,Closing this PR due to lack of Signed-off-by's on the patches by the original author.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1113732033"", ""author_association"": ""OWNER""}"
693,ClosePR,2022-04-29 21:06:51,stefanberger,unfork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6526379799"", ""commit_url"": null}"
694,OpenPR,2022-04-25 11:24:10,stefanberger,unfork_merge,,
694,BaseRefChanged,2022-04-25 11:24:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6489621255"", ""commit_url"": null}"
694,Revise,2022-04-25 11:24:40,stefanberger,unfork_merge,"CHANGES: Add documentation for changes in 0.7.3

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""8aeac5873a773a63e056f86b5178b0a770ca4aa4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-25T11:18:52Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-25T11:24:40Z""}}"
694,HeadRefForcePushed,2022-04-25 11:24:50,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6489623529"", ""commit_url"": null}"
694,Revise,2022-04-25 11:26:17,stefanberger,unfork_merge,"debian/rpm: Adjust changelog for 0.7.3 release

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""53ebc343a9e25668ab2f2893934bf7875ba83ab3"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-25T11:22:49Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-04-25T11:26:17Z""}}"
694,HeadRefForcePushed,2022-04-25 11:26:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6489634050"", ""commit_url"": null}"
694,IssueComment,2022-04-25 12:05:42,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3833](https://coveralls.io/builds/48533088)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.881%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/48533088/badge)](https://coveralls.io/builds/48533088) |
| :-- | --: |
| Change from base [Build 3816](https://coveralls.io/builds/48069249): |  0.0% |
| Covered Lines: | 6123 |
| Relevant Lines: | 8177 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1108484789"", ""author_association"": ""NONE""}"
694,MergePR,2022-04-27 16:56:29,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6508669987"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f2268eebb0d1adf89bad83fa4cf91e37b4e3fa53""}"
695,OpenPR,2022-05-03 00:49:10,stefanberger,unfork_merge,,
695,IssueComment,2022-05-03 02:18:03,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3843](https://coveralls.io/builds/48798907)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.875%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/48798907/badge)](https://coveralls.io/builds/48798907) |
| :-- | --: |
| Change from base [Build 3818](https://coveralls.io/builds/48122638): |  0.0% |
| Covered Lines: | 6130 |
| Relevant Lines: | 8187 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1115551213"", ""author_association"": ""NONE""}"
695,Revise,2022-05-03 16:22:55,stefanberger,unfork_merge,"tests: Repeat TSS command if it fails

Repeat tss command since it may fail if the test case is run alone (-29).
The reason for this is that the command may fail because of this here:

https://github.com/stefanberger/libtpms/blob/stable-0.9/src/tpm2/SessionProcess.c#L1204

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""54a789894116541f61bc23235dd6a4694f6a2bcc"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-03T14:48:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-03T16:22:55Z""}}"
695,HeadRefForcePushed,2022-05-03 16:24:39,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6542075302"", ""commit_url"": null}"
695,Revise,2022-05-03 16:25:56,stefanberger,unfork_merge,"tests: Patch IBM TSS2 test suite for OpenSSL 3.x

Apply a patch to the IBM TSS2 v1.6 test suite when OpenSSL 3.x is de-
tected.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""242367b051b34bba5adbf0667308cb05f070866c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-03T00:46:50Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-03T16:25:56Z""}}"
695,HeadRefForcePushed,2022-05-03 16:26:36,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6542090649"", ""commit_url"": null}"
695,MergePR,2022-05-03 17:27:14,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6542534890"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/85ec64573bd91e2c9c8f957425913c7cc5a5fcb9""}"
695,DeleteBranch,2022-05-03 18:17:48,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6542878035"", ""commit_url"": null}"
696,SubmitCommit,2022-05-06 21:23:17,stefanberger,unfork_merge,"test: Recreate TPM 1.2 state files with header

Recreate TPM 1.2 state files with similar content but with the state
file header. The older versions of the state files were created before
the header was introduced in v0.1. The goal is to be able to get rid
of code supporting pre-v0.1 files that had no header.

The PCR values was originally created by extending PCR 10 with
sha1(""test""). This was recreated using this sequence:

s=$(echo -en test | sha1sum | cut -d "" "" -f1 | sed -n 's/\([a-f0-9]\{2\}\)/\\x\1/pg')
echo -en $s > input
tss1extend  -ha 10 -if input

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""dbade952c7edca9bb6ba7392cdaa0beaae29331a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-06T20:47:42Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-06T21:23:17Z""}}"
696,SubmitCommit,2022-05-06 22:45:27,stefanberger,unfork_merge,"test: Recreate TPM 1.2 state files with header

Recreate a TPM 1.2 state file with header.

The state of the TPM 1.2 must be initialized with Startup(ST_CLEAR)
and then saved so that the proper error code appears as a result
when running this test.

The PCR values was originally created by extending PCR 10 with
sha1(""test""). This was recreated using this sequence:

s=$(echo -en test | sha1sum | cut -d "" "" -f1 | sed -n 's/\([a-f0-9]\{2\}\)/\\x\1/pg')
echo -en $s > input
tss1extend  -ha 10 -if input

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b8475ba1d7adb959f3b0ff8618cdcb447d502858"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-06T22:08:17Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-06T22:45:27Z""}}"
696,SubmitCommit,2022-05-06 22:45:31,stefanberger,unfork_merge,"test: Recreate TPM 2 state files with header

Recreate TPM 2 state files that didn't have a header. Use latest
version of libtpms from the stable-0.6.0 branch to create the
state that more recent version have to be able to read.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""81de7faf8c4d30ddb4fc28d50aa3d97483a2a1d2"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-06T22:31:13Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-06T22:45:31Z""}}"
696,SubmitCommit,2022-05-06 22:45:36,stefanberger,unfork_merge,"test: Recreate TPM 2 state files with header

Use libtpms v0.6.2 and recreate the TPM 2 state file with header.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""a23a308293baaf7b883a6cf1badf230c6a843c1d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-06T21:28:50Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-06T22:45:36Z""}}"
696,OpenPR,2022-05-06 22:47:44,stefanberger,unfork_merge,,
696,Revise,2022-05-07 18:20:40,stefanberger,unfork_merge,"test: Recreate TPM 2 state files with header

Use libtpms v0.6.6 and recreate the TPM 2 state file with header.
Start swtpm with the existing state files and have it rewrite the
volatiles state (swtpm_ioctl -v) and permanent state (tssnvdefine
+ tssnvundefine) files so that the header is on the files.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""c88a1918c08f8e3d8a71b22c9b21e39870a7110e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-07T18:18:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-07T18:20:40Z""}}"
696,HeadRefForcePushed,2022-05-07 18:20:46,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6567767140"", ""commit_url"": null}"
696,IssueComment,2022-05-07 18:59:20,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3851](https://coveralls.io/builds/48947842)

* **7** of **8**   **(87.5%)**  changed or added relevant lines in **1** file are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage decreased (**-0.03%**) to **74.844%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/swtpm_nvstore.c](https://coveralls.io/builds/48947842/source?filename=src%2Fswtpm%2Fswtpm_nvstore.c#L290) | 7 | 8 | 87.5%
<!-- | **Total:** | **7** | **8** | **87.5%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm_nvstore.c](https://coveralls.io/builds/48947842/source?filename=src%2Fswtpm%2Fswtpm_nvstore.c#L1084) | 1 | 84.1% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/48947842/badge)](https://coveralls.io/builds/48947842) |
| :-- | --: |
| Change from base [Build 3847](https://coveralls.io/builds/48900722): |  -0.03% |
| Covered Lines: | 6126 |
| Relevant Lines: | 8185 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1120264930"", ""author_association"": ""NONE""}"
696,Revise,2022-05-09 11:38:25,stefanberger,unfork_merge,"swtpm: Remove support for pre-v0.1 state files without header

Remove support for TPM state files that didn't have the header
because they were created some time before v0.1.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7ea96f9dffba940d8ef26f2dc12a762180afd028"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-06T22:41:17Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-09T11:38:25Z""}}"
696,HeadRefForcePushed,2022-05-09 12:40:50,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6572838231"", ""commit_url"": null}"
696,MergePR,2022-05-09 14:15:09,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6573589526"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/1a300e26dd8436dbb5c23e25f5599a1ddba3da05""}"
696,DeleteBranch,2022-05-09 14:15:11,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6573589965"", ""commit_url"": null}"
697,OpenPR,2022-05-11 02:41:46,stefanberger,unfork_merge,,
697,Revise,2022-05-11 02:44:20,stefanberger,unfork_merge,"swtpm: Avoid locking directory multiple times

Commit 2d3deaef29 forgot to move the check for whether the lock file has
already been opened into the new function opening the lock file and there-
fore the lock file is now opened whenever swtpm gets a PTM_INIT. This fix
prevents the reopening of the lockfile if it has already been opened.
Otherwise many PTM_INIT's will lead to failure since no more files can
be opened.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""aabec9449b4d58ee6c8a817a78f2476e347b4d09"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-11T02:28:30Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-11T02:44:20Z""}}"
697,HeadRefForcePushed,2022-05-11 02:45:21,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6586427831"", ""commit_url"": null}"
697,MergePR,2022-05-11 11:37:39,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6589455078"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/49ac2bdc5bf139c4588f9c26470a33ab40433018""}"
698,SubmitCommit,2022-05-11 02:46:46,stefanberger,unfork_merge,"build-sys: Build swtpm-0.7.4

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""75fe4a8d917c59ec2a5ce4f895916d1dac8ef9d1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-11T02:43:37Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-11T02:46:46Z""}}"
698,SubmitCommit,2022-05-11 02:47:03,stefanberger,unfork_merge,"swtpm: Avoid locking directory multiple times

Commit 2d3deaef29 forgot to move the check for whether the lock file has
already been opened into the new function opening the lock file and there-
fore the lock file is now opened whenever swtpm gets a PTM_INIT. This fix
prevents the reopening of the lockfile if it has already been opened.
Otherwise many PTM_INIT's will lead to failure since no more files can
be opened.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""4a749f8b66ea0c820a6bd79b96adec2204fee623"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-11T02:28:30Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-11T02:47:03Z""}}"
698,OpenPR,2022-05-11 02:47:54,stefanberger,unfork_merge,,
698,IssueComment,2022-05-11 04:44:10,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3854](https://coveralls.io/builds/49012261)

* **1** of **1**   **(100.0%)**  changed or added relevant line in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.003%**) to **74.884%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/49012261/badge)](https://coveralls.io/builds/49012261) |
| :-- | --: |
| Change from base [Build 3834](https://coveralls.io/builds/48645334): |  0.003% |
| Covered Lines: | 6124 |
| Relevant Lines: | 8178 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1123181106"", ""author_association"": ""NONE""}"
698,MergePR,2022-05-11 13:01:06,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6590178539"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a833fac5d990c23d9d6c938484e6238ce8a08d91""}"
700,SubmitCommit,2022-05-25 18:15:35,stefanberger,unfork_merge,"swtpm_bios: Do not assigned -1 to closed file descriptor at end of function

There's no need to assigned -1 to a closed file descriptor at the
end of a function.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""72015b319d4a86a1b9037098331f94333fd3792c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T18:15:32Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T18:15:35Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm: Cast '1' to uint64_t before shift and assign to uint64_t variable

To avoid an overflowing expression cast '1' to uint64_t before shifting
it and assigning it to a uint64_t variable. In practice this kind of
overflow would never happen because there aren't that many available
PCR banks.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2c63a6885494e203f87b3c0d5f1326807ba1395a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T19:31:05Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm: Initialize res variable (Coverity)

Initialize the 'res' variable at the beginning of the function
even though this wouldn't be necessary in this case.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3f4ff8a08631bb7df52f2b27ed5c8998817ab5d3"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T18:28:09Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm: Remove assignment to unused variable

Remove the assigment to 'res' since the subsequent code path does not
need it.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d4227c7939598dc60083cb0da48042d2fc4746d7"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T18:19:36Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm_setup: Use g_strdup instead of strdup

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b24ddea17c9ff2fd2c1e960ae693c3b85f14a044"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T19:13:09Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm_setup: Initialize pubek_len (Coverity)

Initialize pubek_len even though it isn't necessary to do so since
it will be initialized in the first function to which it is passed.
However, Coverity complains about pubek_len passed to print_as_hex()
not being initialized, even though this is not possible.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b52aa02fbd2aeec183d9dd2173e8e0ab7415b0d7"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T18:23:41Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm_localca: Add comment that failure to read optsfile is not an issue

Add a comment stating that failure to read the optsfile is not an
issue since the optsfile does not need to exist.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d4bd670cac4281eff5f052c5ea0eb5dad1cf2f3c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:02:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm_ioctl: Close file descriptor at end of main (Coverity)

Close the file descriptor at the end of the main function.
To avoid closing random file descriptors initialize it with -1.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1a052d8c0c6edb2e1814acc63a256b3853b3021f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T18:32:53Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm_cert: Test for NULL pointer returned by malloc

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d99d261af2c0d98494a0745dd60fefd75e30ac24"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T19:34:57Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm_cert: Free variable before parsing it to avoid memory leak (Coverity)

Avoid memory leaks if one of the parameters --tcp, --tpm-device,
or --unix was passed multiple times by freeing the previously
parsed value.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""12b2be92b7de5995bf02e2fc894565f644278af4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T19:26:52Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm_cert: Free variable before parsing it to avoid memory leak (Coverity)

Avoid memory leaks if one of the parameters --modulus, --ecc-x,
or --ecc-y was passed multiple times by freeing the previously
parsed value.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6639d22d76c72f72204273d0fc8585b9c8518824"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T19:09:47Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:07:08,stefanberger,unfork_merge,"swtpm_ioctl: Free variable before parsing it to avoid memory leak (Coverity)

Avoid a memory leaks if --tcp is provided multiple times by freeing
the previously allocated memory in the tcp_hostname variable.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""da1d3629f90a5d4298b7dc0c027b5a54cac287c9"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T19:19:19Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:07:08Z""}}"
700,SubmitCommit,2022-05-25 20:31:13,stefanberger,unfork_merge,"swtpm: Handle case where unknown blobtype is given (Coverity)

Handle the case where an unknown blobtype is given and therefore
cannot be translated to a filename and blobname is NULL. Previously
this would have lead to an error when trying to read the file, now
we handle the failure case earlier.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""c63bcee2e9c74f71661b924d0ad74f88cc39874a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T19:47:04Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:31:13Z""}}"
700,SubmitCommit,2022-05-25 20:31:25,stefanberger,unfork_merge,"swtpm: Replace malloc + strcpy with strdup and handle OOM case

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""8a8ec6e9193d263d66d76947299353d3bef8ad39"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T19:55:27Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-25T20:31:25Z""}}"
700,OpenPR,2022-05-25 20:34:23,stefanberger,unfork_merge,,
700,IssueComment,2022-05-25 21:13:21,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3865](https://coveralls.io/builds/49459376)

* **19** of **24**   **(79.17%)**  changed or added relevant lines in **8** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.006%**) to **74.841%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/ctrlchannel.c](https://coveralls.io/builds/49459376/source?filename=src%2Fswtpm%2Fctrlchannel.c#L150) | 3 | 4 | 75.0%
| [src/swtpm/swtpm_nvstore_linear.c](https://coveralls.io/builds/49459376/source?filename=src%2Fswtpm%2Fswtpm_nvstore_linear.c#L246) | 2 | 4 | 50.0%
| [src/swtpm_cert/ek-cert.c](https://coveralls.io/builds/49459376/source?filename=src%2Fswtpm_cert%2Fek-cert.c#L201) | 4 | 6 | 66.67%
<!-- | **Total:** | **19** | **24** | **79.17%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/49459376/badge)](https://coveralls.io/builds/49459376) |
| :-- | --: |
| Change from base [Build 3858](https://coveralls.io/builds/49103006): |  -0.006% |
| Covered Lines: | 6137 |
| Relevant Lines: | 8200 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1137853716"", ""author_association"": ""NONE""}"
700,MergePR,2022-05-25 22:54:58,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6681668210"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/6c87d542920c623e25424cecbd0e5fb1f7a6c1b2""}"
701,OpenPR,2022-05-30 16:40:36,stefanberger,unfork_merge,,
701,IssueComment,2022-05-30 18:51:18,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3924](https://coveralls.io/builds/50546571)

* **52** of **53**   **(98.11%)**  changed or added relevant lines in **4** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.3%**) to **75.136%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/tpmlib.c](https://coveralls.io/builds/50546571/source?filename=src%2Fswtpm%2Ftpmlib.c#L519) | 28 | 29 | 96.55%
<!-- | **Total:** | **52** | **53** | **98.11%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/50546571/badge)](https://coveralls.io/builds/50546571) |
| :-- | --: |
| Change from base [Build 3921](https://coveralls.io/builds/50528095): |  0.3% |
| Covered Lines: | 6210 |
| Relevant Lines: | 8265 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1141412765"", ""author_association"": ""NONE""}"
701,HeadRefForcePushed,2022-05-30 23:13:44,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6705472187"", ""commit_url"": null}"
701,IssueComment,2022-05-31 14:26:45,stefanberger,unfork_merge,"I will remove the warning print-out. It will become a hidden feature of swtpm then to send TPM2_Shutdown when needed.

```
$ ./test_tpm2_probe
Need to be root to run test with CUSE interface.
Need to be root to run test with CUSE interface.
==== Starting swtpm with interfaces socket+socket ====
swtpm: Warning: Need to send TPM2_Shutdown(SU_CLEAR); previous command: 0x0000017e
OK
==== Starting swtpm with interfaces socket+unix ====
swtpm: Warning: Need to send TPM2_Shutdown(SU_CLEAR); previous command: 0x0000017e
OK
==== Starting swtpm with interfaces unix+unix ====
swtpm: Warning: Need to send TPM2_Shutdown(SU_CLEAR); previous command: 0x0000017e
OK
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1142208949"", ""author_association"": ""OWNER""}"
701,ReviewComment,2022-05-31 15:14:30,elmarco,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/701#pullrequestreview-990645185""}"
701,IssueComment,2022-05-31 15:16:07,elmarco,unfork_merge,"Looks good otherwise. It would be nice to have a test for it, and some quote of the specification","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1142270566"", ""author_association"": ""CONTRIBUTOR""}"
701,IssueComment,2022-05-31 15:26:35,stefanberger,unfork_merge,"> Looks good otherwise. It would be nice to have a test for it, and some quote of the specification

It will  become silent. And for RHEL I would recommend taking the latest version 0.7.3 + these patches of wait for 0.7.4, but this may take a bit...","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1142284759"", ""author_association"": ""OWNER""}"
701,IssueComment,2022-05-31 15:28:03,stefanberger,unfork_merge,I have looked into how to trigger the DA counter to increase upon reset but couldn't figure it out so far...,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1142286514"", ""author_association"": ""OWNER""}"
701,HeadRefForcePushed,2022-05-31 16:20:15,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6711100502"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-05-31 17:46:30,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6711699526"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-06-01 12:58:41,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6718783949"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-06-01 13:27:00,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6719050400"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-06-01 15:03:44,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6720002128"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-06-01 15:11:34,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6720081451"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-06-01 16:13:13,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6720656593"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-06-04 20:05:31,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6742396160"", ""commit_url"": null}"
701,IssueComment,2022-06-05 02:07:30,stefanberger,unfork_merge,In the end there's one concern that I have about this series and that is that we accidentally send a TPM2_Shutdown(SU_CLEAR) after a TPM2_Shutdown(SU_STATE) was issued. The relevant scenarios to trigger this are `systemctl suspend` and `systemctl hibernate` that both send a TPM2_Shutdown(SU_STATE) but then also completely shut down the VM. The BIOS upon boot then uses TPM2_Startup(SU_CLEAR) clearing the state and the TPM2_Shutdown(SU_STATE) was useless. So I am wondering whether this is normal expected behavior for an x86 VM that upon `systemctl suspend` [and `systemctl hibernate`] the VM completely shuts down?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1146723675"", ""author_association"": ""OWNER""}"
701,IssueComment,2022-06-06 02:47:11,stefanberger,unfork_merge,"I did some more tests with suspend-to-ram (systemctl suspend) with EDK2. Here the Linux drivers sends TPM2_Shutdown(SU_STATE) and then a TPM2_GetRandom() is sent to the TPM 2 before the VM suspends. Once the VM awakes again, QEMU resets the TIS or CRB interface and swtpm is also reset via CMD_INIT (as if the whole VM was reset). We cannot simply send a TPM2_Shutdown(SU_CLEAR) before the CMD_INIT since the TPM2_Shutdown(SU_STATE) was sent but the lastCommand would be TPM2_CC_GetRandom. So, determining whether to send a TPM2_Shutdown() by looking at the lastCommand that was sent to the TPM doesn't always work and in this case it would mess up the state of the TPM.

Note: EDK2's (of QEMU 7.0) doesn't seem to have TPM support compiled in.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1146979223"", ""author_association"": ""OWNER""}"
701,HeadRefForcePushed,2022-06-06 12:45:37,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6752736931"", ""commit_url"": null}"
701,IssueComment,2022-06-06 12:58:43,stefanberger,unfork_merge,"> I did some more tests with suspend-to-ram (systemctl suspend) with EDK2. Here the Linux drivers sends TPM2_Shutdown(SU_STATE) and then a TPM2_GetRandom() is sent to the TPM 2 before the VM suspends. Once the VM awakes again, QEMU resets the TIS or CRB interface and swtpm is also reset via CMD_INIT (as if the whole VM was reset). We cannot simply send a TPM2_Shutdown(SU_CLEAR) before the CMD_INIT since the TPM2_Shutdown(SU_STATE) was sent but the lastCommand would be TPM2_CC_GetRandom. So, determining whether to send a TPM2_Shutdown() by looking at the lastCommand that was sent to the TPM doesn't always work and in this case it would mess up the state of the TPM.

The solution is to send a TPM2_Shutdown(SU_STATE) in case lastCommand is not TPM2_Shutdown. If this command fails TPM2_Shutdown(SU_CLEAR) is sent. The SU_STATE stores additional state that TPM2_Startup(SU_STATE) can then restore and TPM2_Startup(SU_CLEAR) would simply ignore. Now we have to trust the BIOS to use the right command and not cause stored state to be restored unnecessarily. During normal startup the BIOS would use SU_CLEAR, so we should be fine.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1147418916"", ""author_association"": ""OWNER""}"
701,HeadRefForcePushed,2022-06-06 14:33:21,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6753555303"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-06-06 14:58:43,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6753757124"", ""commit_url"": null}"
701,Assigned,2022-06-06 14:59:42,stefanberger,unfork_merge,,"{""assignee"": {""login"": ""stefanberger"", ""id"": 1873348, ""node_id"": ""MDQ6VXNlcjE4NzMzNDg="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/1873348?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/stefanberger"", ""html_url"": ""https://github.com/stefanberger"", ""followers_url"": ""https://api.github.com/users/stefanberger/followers"", ""following_url"": ""https://api.github.com/users/stefanberger/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/stefanberger/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/stefanberger/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/stefanberger/subscriptions"", ""organizations_url"": ""https://api.github.com/users/stefanberger/orgs"", ""repos_url"": ""https://api.github.com/users/stefanberger/repos"", ""events_url"": ""https://api.github.com/users/stefanberger/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/stefanberger/received_events"", ""type"": ""User"", ""site_admin"": false}}"
701,IssueComment,2022-06-09 11:25:54,stefanberger,unfork_merge,Once  I have confirmation that this patch resolves the issue presented in the bugzilla I will merge it.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1151002277"", ""author_association"": ""OWNER""}"
701,CrossReferenced,2022-06-13 01:00:53,stefanberger,unfork_merge,tpm2: Never increase TPM_PT_LOCKOUT_COUNTER on TPM2_Startup(),"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/libtpms/issues/332"", ""is_pull_request"": true}}"
701,HeadRefForcePushed,2022-06-13 14:25:00,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6796611241"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-06-16 16:23:39,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6822458000"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-06-17 15:52:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6830013172"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-07-02 01:20:13,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6921572004"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-07-02 13:17:54,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6922163001"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-08-16 13:29:16,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7197285750"", ""commit_url"": null}"
701,IssueComment,2022-08-16 13:33:25,stefanberger,unfork_merge,I was planning to merge this later this week unless there are comments or concerns.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1216645799"", ""author_association"": ""OWNER""}"
701,ReviewComment,2022-08-16 13:37:49,elmarco,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/701#pullrequestreview-1074134464""}"
701,ReviewComment,2022-08-16 13:39:23,elmarco,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/701#pullrequestreview-1074137078""}"
701,HeadRefForcePushed,2022-08-16 14:37:44,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7197887312"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-08-16 15:57:22,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7198543974"", ""commit_url"": null}"
701,HeadRefForcePushed,2022-08-16 16:24:07,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7198752295"", ""commit_url"": null}"
701,Revise,2022-08-16 18:10:34,stefanberger,unfork_merge,"swtpm: Track last command processed by the TPM

Track the last command processed by the TPM so we can determine whether
we may need to send a TPM2_Shutdown() before reset of the TPM 2.

Introduce a variable lastCommand to help track the last command that
was sent to the TPM 2.

In relation to deciding whether a TPM2_Shutdown() needs to be sent, the
tracking of the last-sent command is merely an optimization since for
example a VM with EDK2 will send a TPM2_Shutdown() followed by a
TPM2_GetRandom() upon suspend-to-ram, thus indicating that the last
command was TPM2_GetRandom(). However, under most circumstances it helps
to avoid sending an additional TPM2_Shutdown() if the OS TPM driver sent
one already.

When the suspended VM resume swtpm gets a CMD_INIT that requires swtpm
to decide whether a TPM2_Shutdown() needs to be sent and per the last-sent
command it will then send a TPM2_Shutdown(SU_STATE) as in the abrupt
termination case.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9f9ccf7f01cb06af0f4b6c10cdb8da907890edbf"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-30T14:40:01Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-16T18:10:34Z""}}"
701,Revise,2022-08-16 18:16:50,stefanberger,unfork_merge,"swtpm: If necessary send TPM2_Shutdown() before TPMLIB_Terminate()

If necessary send a TPM2_Shutdown() command to libtpms before processing
CMD_INIT. However, this is only necessary for a TPM 2 and only if the
TPM2_Shutdown command has not been sent by the client (VM TPM driver) as
the last command as it should do under normal circumstances, for example
upon graceful VM shutdown.

This fixes a bug where abrupt VM resets may trigger the TPM 2's dictionary
attack lockout logic due to the TPM 2 not having received a TPM2_Shutdown
command before it was reset using CMD_INIT for example. An OS driver is
typically supposed to send a TPM2_Shutdown to the TPM 2 but an abrupt VM
reset prevents it.

There are 3 control commands where this needs to be done since they
call TPMLIB_Terminate():

- CMD_STOP:
   This command is typically called before setting the state blobs of the
   TPM or before configuring the buffer size [QEMU, test cases].

- CMD_INIT:
   This command is called for resetting and initializing the TPM 2.

- CMD_SHUTDOWN:
   This command is called for a graceful shutdown of the TPM 2.

There are no negative side effects to be expected if TPM2_Shutdown()
is sent before any of these. Also, since none of these are sent before
the state of the TPM is marshalled (for migration for example) migrated
state will not have a TPM2_Shutdown() applied to it (accidentally).

Edk2 sends a sequence of TPM2_Shutdown(SU_STATE) + TPM2_GetRandom()
before suspend-to-ram. Upon wake up a CMD_INIT is sent to the TPM to
reset it, which in this case now requires a TPM2_Shutdown(SU_STATE)
to be sent to the TPM 2 so that certain TPM 2 state is available
again upon resume. To avoid invaliding the SU_STATE, first send a
TPM2_Shutdown(SU_STATE) in *all cases* and only if this fails send a
TPM2_Shutdown(SU_CLEAR). This way the internal state is preserved and
the VM (or user) are expected to use TPM2_Startup(SU_CLEAR) when
staring up the TPM 2 and no previous state needs to be resumed.

Note: The VM's firmware is trusted to use SU_CLEAR under normal circum-
stances and SU_STATE upon resume. So it wouldn't restore the state if
it wasn't needed.

Note: The TPM 2 spec describes the command as follows:

""This command is used to prepare the TPM for a power cycle. The
shutdownType parameter indicates how the subsequent TPM2_Startup() will be
processed.[...]
This command saves TPM state but does not change the state other than the
internal indication that the context has been saved. The TPM shall
continue to accept commands. If a subsequent command changes TPM state
saved by this command, then the effect of this command is nullified. The
TPM MAY nullify this command for any subsequent command rather than check
whether the command changed state saved by this command. If this command
is nullified and if no TPM2_Shutdown() occurs before the next
TPM2_Startup(), then the next TPM2_Startup() shall be
TPM2_Startup(CLEAR).""

Buglink: https://bugzilla.redhat.com/show_bug.cgi?id=2087538
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""946d32a4662e4e1c571f0994e8e83f92a718a483"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-30T15:10:14Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-16T18:16:50Z""}}"
701,HeadRefForcePushed,2022-08-16 18:19:34,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7199485421"", ""commit_url"": null}"
701,IssueComment,2022-08-17 17:48:29,stefanberger,unfork_merge,I am wondering whether to add a flag `--flags auto-shutdown` to enable this feature.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1218321783"", ""author_association"": ""OWNER""}"
701,IssueComment,2022-08-18 06:07:32,elmarco,unfork_merge,"> I am wondering whether to add a flag `--flags auto-shutdown` to enable this feature.

Perhaps the other way around (disable-auto-shutdown), if we believe the new behavior is a fix and it doesn't break migration etc. ","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1219075031"", ""author_association"": ""CONTRIBUTOR""}"
701,IssueComment,2022-08-18 12:18:23,stefanberger,unfork_merge,"> Perhaps the other way around (disable-auto-shutdown), if we believe the new behavior is a fix and it doesn't break migration etc.

I don't think it breaks anything. It rather fixes an unexpected behavior of the TPM 2 for the virtualization case though an abrupt reset on a physical machine may cause the same.
I'll do the disable-auto-shutdown instead now.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1219422005"", ""author_association"": ""OWNER""}"
701,Revise,2022-08-18 12:58:45,stefanberger,unfork_merge,"swtpm: Introduce disable-auto-shutdown flag for --flags option

Introduce disable-auto-shutdown flag for the --flags option to disable
the sending of TPM2_Shutdown() if swtpm determines that it needs to send
this command to a TPM 2 before device reset or swtpm program termination.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""f19f2e9edfcd541ab18f54cd0c145f8ec1d48c50"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-17T18:19:59Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-18T12:58:45Z""}}"
701,Revise,2022-08-18 12:58:45,stefanberger,unfork_merge,"tests: Add test case to check that swtpm sends a TPM2_Shutdown

Add a test case that checks that swtpm sends a TPM2_Shutdown() to the
TPM 2 upon abrupt re-initialization (CMD_INIT) or graceful shutdown
(control channel, CMD_SHUTDOWN) of the TPM 2 and avoids a potential
dictionary attack (DA) lock-out. A previously sent command failing
authorization with DA implications would otherwise trigger the
TPM_PT_LOCKOUT_COUNTER to increase by '1' if the TPM 2 was not properly
shut down by the client (guest OS) with a TPM2_Shutdown() command.

The test case tests whether a TPM2_Shutdown() is now sent before a reset.
The defined password-protected NVRAM area has the DA flag set and the test
case tries to read from it without providing a password. If we didn't send
the TPM2_Shutdown() before the test cases sends the reset (CMD_INIT), then
the dictionary attack lockout counter would be increased by one. With the
instrumentation in the previous patch the automatically sent
TPM2_Shutdown() keeps the counter at 0.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""eea1d364737cbbbec03505a058f61413aacd5e22"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-01T12:44:00Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-18T12:58:45Z""}}"
701,Revise,2022-08-18 12:58:45,stefanberger,unfork_merge,"swtpm: Refactor existing function to use new tpmlib_get_cmd_ordinal()

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9b9e2b438e374b61a32ce79f17e20f445cf1ab34"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-30T14:47:12Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-18T12:58:45Z""}}"
701,HeadRefForcePushed,2022-08-18 13:06:09,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7214238227"", ""commit_url"": null}"
701,MergePR,2022-08-18 13:50:16,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7214599140"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/0ebe80466fcbe7605db5d413f4370f2ccddf672b""}"
701,DeleteBranch,2022-08-18 13:50:32,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7214601371"", ""commit_url"": null}"
702,SubmitCommit,2022-06-01 12:59:44,stefanberger,unfork_merge,"swtpm: Fix a typo in an error message

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5423f6c5cda357c9de60e9dc5c3b5183b3ace11c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-30T15:13:58Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-01T12:59:44Z""}}"
702,SubmitCommit,2022-06-01 12:59:55,stefanberger,unfork_merge,"swtpm: Remove stale parameter from function documentation

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""a83ba3373afa1b67584bd301c54a211176da4cf4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-05-30T15:19:03Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-01T12:59:55Z""}}"
702,OpenPR,2022-06-01 13:01:02,stefanberger,unfork_merge,,
702,IssueComment,2022-06-01 14:16:58,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3876](https://coveralls.io/builds/49637313)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.841%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/49637313/badge)](https://coveralls.io/builds/49637313) |
| :-- | --: |
| Change from base [Build 3869](https://coveralls.io/builds/49522487): |  0.0% |
| Covered Lines: | 6137 |
| Relevant Lines: | 8200 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1143671200"", ""author_association"": ""NONE""}"
702,CrossReferenced,2022-06-01 15:02:47,stefanberger,unfork_merge,tpm2: Never increase TPM_PT_LOCKOUT_COUNTER on TPM2_Startup(),"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/libtpms/issues/332"", ""is_pull_request"": true}}"
702,MergePR,2022-06-01 15:03:11,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6719996340"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/2a1bfe464dba1fc59a202c646a56087493bce2a8""}"
704,OpenPR,2022-06-08 13:32:00,stefanberger,unfork_merge,,
704,Assigned,2022-06-08 13:32:02,stefanberger,unfork_merge,,"{""assignee"": {""login"": ""stefanberger"", ""id"": 1873348, ""node_id"": ""MDQ6VXNlcjE4NzMzNDg="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/1873348?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/stefanberger"", ""html_url"": ""https://github.com/stefanberger"", ""followers_url"": ""https://api.github.com/users/stefanberger/followers"", ""following_url"": ""https://api.github.com/users/stefanberger/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/stefanberger/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/stefanberger/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/stefanberger/subscriptions"", ""organizations_url"": ""https://api.github.com/users/stefanberger/orgs"", ""repos_url"": ""https://api.github.com/users/stefanberger/repos"", ""events_url"": ""https://api.github.com/users/stefanberger/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/stefanberger/received_events"", ""type"": ""User"", ""site_admin"": false}}"
704,IssueComment,2022-06-08 13:32:54,stefanberger,unfork_merge,@elmarco This is the solution for now to run swtpm on FIPS-enabled machines.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1149922116"", ""author_association"": ""OWNER""}"
704,HeadRefForcePushed,2022-06-08 13:37:41,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6769964792"", ""commit_url"": null}"
704,CrossReferenced,2022-06-08 13:38:37,stefanberger,unfork_merge,TPM 2.0 emulation silently fails on FIPS-enabled operating systems,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/703"", ""is_pull_request"": false}}"
704,HeadRefForcePushed,2022-06-08 14:11:19,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6770279673"", ""commit_url"": null}"
704,IssueComment,2022-06-08 14:50:32,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3897](https://coveralls.io/builds/49856213)

* **8** of **14**   **(57.14%)**  changed or added relevant lines in **4** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.03%**) to **74.811%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/fips.c](https://coveralls.io/builds/49856213/source?filename=src%2Fswtpm%2Ffips.c#L79) | 5 | 11 | 45.45%
<!-- | **Total:** | **8** | **14** | **57.14%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/49856213/badge)](https://coveralls.io/builds/49856213) |
| :-- | --: |
| Change from base [Build 3884](https://coveralls.io/builds/49713389): |  -0.03% |
| Covered Lines: | 6145 |
| Relevant Lines: | 8214 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1150024398"", ""author_association"": ""NONE""}"
704,ReviewComment,2022-06-08 14:58:27,berrange,unfork_merge,,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/704#pullrequestreview-999927689""}"
704,HeadRefForcePushed,2022-06-08 15:07:31,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6770816320"", ""commit_url"": null}"
704,HeadRefForcePushed,2022-06-08 15:42:20,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6771103544"", ""commit_url"": null}"
704,HeadRefForcePushed,2022-06-08 15:44:25,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6771120222"", ""commit_url"": null}"
704,HeadRefForcePushed,2022-06-08 15:48:27,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6771151648"", ""commit_url"": null}"
704,IssueComment,2022-06-08 16:40:46,stefanberger,unfork_merge,This should now be in a shape where this can be merged and should resolve the issue on the platform where the error was reported.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1150147916"", ""author_association"": ""OWNER""}"
704,HeadRefForcePushed,2022-06-08 18:36:43,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6772270995"", ""commit_url"": null}"
704,IssueComment,2022-06-09 09:49:45,berrange,unfork_merge,"Obviously this change would prevent the vTPM actually being used with/included in any government certification programs for virt hosts that require FIPS, but as a short term workaround to at least get the VMs booting, the code looks OK.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1150913072"", ""author_association"": ""NONE""}"
704,IssueComment,2022-06-09 11:15:37,stefanberger,unfork_merge,"> Obviously this change would prevent the vTPM actually being used with/included in any government certification programs for virt hosts that require FIPS, but as a short term workaround to at least get the VMs booting, the code looks OK.

So this patch works in the scenario described in the bugzilla?","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1150992807"", ""author_association"": ""OWNER""}"
704,IssueComment,2022-06-09 11:38:19,berrange,unfork_merge,"> So this patch works in the scenario described in the bugzilla?

I can't claim to have tested it myself, nor in fact even used FIPS, but conceptually I believe it should address the immediate problem.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1151013574"", ""author_association"": ""NONE""}"
704,Revise,2022-06-13 14:25:12,stefanberger,unfork_merge,"swtpm: Disable OpenSSL FIPS mode to avoid libtpms failures

While libtpms does not provide any means to disable FIPS-disabled crypto
algorithms from being used, work around the issue by simply disabling the
FIPS mode of OpenSSL if it is enabled. If it cannot be disabled, exit
swtpm with a failure message that it cannot be disabled. If FIPS mode
was successfully disabled, print out a message as well.

Buglink: https://bugzilla.redhat.com/show_bug.cgi?id=2090219
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5d95d9c8e4551edaaa5c84c54ecd7bf619dee737"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-08T13:19:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-13T14:25:12Z""}}"
704,HeadRefForcePushed,2022-06-13 14:25:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6796616140"", ""commit_url"": null}"
704,MergePR,2022-06-16 11:36:12,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6820302865"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a39c3792ba5677f25fea903b9f1a43740a5f2c0c""}"
704,DeleteBranch,2022-06-16 11:36:22,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6820303791"", ""commit_url"": null}"
706,SubmitCommit,2022-06-12 18:30:31,stefanberger,unfork_merge,"swtpm: Update printed copyright notice

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7911dd4c59e7a772d402828babd481de31a38f27"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-12T18:29:52Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-12T18:30:31Z""}}"
706,OpenPR,2022-06-12 18:31:00,stefanberger,unfork_merge,,
706,IssueComment,2022-06-12 19:10:08,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3902](https://coveralls.io/builds/49950739)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.841%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/49950739/badge)](https://coveralls.io/builds/49950739) |
| :-- | --: |
| Change from base [Build 3884](https://coveralls.io/builds/49713389): |  0.0% |
| Covered Lines: | 6137 |
| Relevant Lines: | 8200 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1153265105"", ""author_association"": ""NONE""}"
706,MergePR,2022-06-12 20:27:49,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6791929809"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/933ac94d5dc7e71fc42cf083f1a9eeeb77454857""}"
707,SubmitCommit,2022-06-13 18:03:41,stefanberger,unfork_merge,"swtpm_bios: Use TPM2_ALG_SHA256 as parameter to TPM2_IncrementalSelfTest

Do not use TPM2_ALG_SHA1 anymore as parameter to TPM2_IncrementalSelfTest()
so that this also works when SHA1 support in libtpms is runtime-disabled.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""01a03857dcdbb17d994788b7de89f69f29cd4779"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-13T18:02:48Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-13T18:03:41Z""}}"
707,SubmitCommit,2022-06-13 18:05:28,stefanberger,unfork_merge,"tests: Do not activate SHA-1 PCR bank in test case

For being able to run tests with runtime-deactivated SHA-1 (in libtpms),
do not test with SHA-1 bank anymore.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""64d5480912f462c02c5d42e92c5976de32373008"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-13T18:05:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-13T18:05:28Z""}}"
707,OpenPR,2022-06-13 22:34:30,stefanberger,unfork_merge,,
707,RenameTitle,2022-06-13 22:35:12,stefanberger,unfork_merge,,"{""rename"": {""from"": ""Use SHA-256 rather than SHA-1 in swtpm_bios and test casse"", ""to"": ""Use SHA-256 rather than SHA-1 in swtpm_bios and test case""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6799716151""}"
707,MergePR,2022-06-14 01:46:57,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6800363564"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/1b21d052f7ed41cab050b53916825b3a4abf1bb6""}"
707,DeleteBranch,2022-06-14 01:46:59,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6800363727"", ""commit_url"": null}"
709,SubmitCommit,2022-06-16 15:56:08,stefanberger,unfork_merge,"swtpm: Disable OpenSSL FIPS mode to avoid libtpms failures

While libtpms does not provide any means to disable FIPS-disabled crypto
algorithms from being used, work around the issue by simply disabling the
FIPS mode of OpenSSL if it is enabled. If it cannot be disabled, exit
swtpm with a failure message that it cannot be disabled. If FIPS mode
was successfully disabled, print out a message as well.

Buglink: https://bugzilla.redhat.com/show_bug.cgi?id=2090219
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""5e69d53e05e7b4d37931202cc3b993214ee95dbf"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-08T13:19:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-16T15:56:08Z""}}"
709,OpenPR,2022-06-16 16:00:49,stefanberger,unfork_merge,,
709,IssueComment,2022-06-16 16:40:59,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3907](https://coveralls.io/builds/50098724)

* **8** of **14**   **(57.14%)**  changed or added relevant lines in **4** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage decreased (**-0.03%**) to **74.854%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/fips.c](https://coveralls.io/builds/50098724/source?filename=src%2Fswtpm%2Ffips.c#L79) | 5 | 11 | 45.45%
<!-- | **Total:** | **8** | **14** | **57.14%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/50098724/badge)](https://coveralls.io/builds/50098724) |
| :-- | --: |
| Change from base [Build 3856](https://coveralls.io/builds/49048282): |  -0.03% |
| Covered Lines: | 6132 |
| Relevant Lines: | 8192 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1157894720"", ""author_association"": ""NONE""}"
709,MergePR,2022-06-16 19:34:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6823565299"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/d9e4abf918e5b9b1c68e2c4583306edb957528f5""}"
712,SubmitCommit,2022-06-27 14:15:45,stefanberger,unfork_merge,"selinux: Replace hardcoded install path with @prefix@

Replace the hardcoded install path in src/selinux/swtpm.fc and
src/selinux/swtpmcuse.fc with @prefix@ and append .in to these files so
that they are generated when running configure.

Add the selinux policy input files with their suffix to the CLEANFILES
variable so they get cleaned up and 'make distcheck' works.

Resolves: https://github.com/stefanberger/swtpm/issues/711
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""dca76d75c479120947c6a39a7c6b676030af0676"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-27T12:42:38Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-27T14:15:45Z""}}"
712,SubmitCommit,2022-06-27 14:19:37,stefanberger,unfork_merge,"gitignore: Ignore created files in man/man5/

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""4d43530ddb5d422edeffe7c8bdb145bb80151deb"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-27T14:19:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-06-27T14:19:37Z""}}"
712,OpenPR,2022-06-27 14:21:00,stefanberger,unfork_merge,,
712,CrossReferenced,2022-06-27 14:29:00,stefanberger,unfork_merge,when I set selinux as enforcing，libvirt cannot create virtual machine because of Permission denied,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/711"", ""is_pull_request"": false}}"
712,IssueComment,2022-06-27 18:32:14,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3918](https://coveralls.io/builds/50391191)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.811%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/50391191/badge)](https://coveralls.io/builds/50391191) |
| :-- | --: |
| Change from base [Build 3910](https://coveralls.io/builds/50129965): |  0.0% |
| Covered Lines: | 6145 |
| Relevant Lines: | 8214 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1167728814"", ""author_association"": ""NONE""}"
712,MergePR,2022-06-28 11:55:20,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6893312711"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/6a3c9d585eb55351648290dfa4d52292e0adad13""}"
712,DeleteBranch,2022-06-28 11:55:24,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6893313017"", ""commit_url"": null}"
713,SubmitCommit,2022-07-11 14:47:24,williamcroberts,fork_close,"swtpm_nvstore: simplify ifdef

Signed-off-by: William Roberts <william.c.roberts@intel.com>","{""sha"": ""3c026ccee7c235b4afaf39c3d180032e6ffd75f9"", ""author"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2022-07-11T14:47:24Z""}, ""committer"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2022-07-11T14:47:24Z""}}"
713,SubmitCommit,2022-07-11 14:48:12,williamcroberts,fork_close,"swtpm_nvstore: support libressl API

Signed-off-by: William Roberts <william.c.roberts@intel.com>","{""sha"": ""5d9c04b5dfb0ef642625a3b347d4ef8f691d77f2"", ""author"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2022-07-11T14:48:12Z""}, ""committer"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2022-07-11T14:48:12Z""}}"
713,OpenPR,2022-07-11 14:48:35,williamcroberts,fork_close,,
713,RenameTitle,2022-07-11 14:48:45,williamcroberts,fork_close,,"{""rename"": {""from"": ""SWTPM support Libressl"", ""to"": ""SWTPM support Libressl on Linux""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6970260268""}"
713,IssueComment,2022-07-11 14:56:48,williamcroberts,fork_close,"Needs a few more changes, incoming....","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1180516833"", ""author_association"": ""CONTRIBUTOR""}"
713,IssueComment,2022-07-11 14:59:31,stefanberger,fork_close,I will probably mark it as experimental because I will likely not test much with now two different crypto libs.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1180520302"", ""author_association"": ""OWNER""}"
713,IssueComment,2022-07-11 15:40:24,coveralls,fork_close,"## Pull Request Test Coverage Report for [Build 3930](https://coveralls.io/builds/50758070)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.811%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/50758070/badge)](https://coveralls.io/builds/50758070) |
| :-- | --: |
| Change from base [Build 3921](https://coveralls.io/builds/50528095): |  0.0% |
| Covered Lines: | 6145 |
| Relevant Lines: | 8214 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1180567768"", ""author_association"": ""NONE""}"
713,IssueComment,2022-07-12 13:41:25,williamcroberts,fork_close,"For libressl version 3.5.3 swtpm is building as expected....

","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1181775740"", ""author_association"": ""CONTRIBUTOR""}"
713,RenameTitle,2022-07-12 13:42:20,williamcroberts,fork_close,,"{""rename"": {""from"": ""SWTPM support Libressl on Linux"", ""to"": ""[DRAFT] SWTPM support Libressl on Linux""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6977779049""}"
713,IssueCommentSupplement,2022-07-12 16:19:23,williamcroberts,fork_close,This works AS IS as long as you use version libressl-v3.1.0 which includes the required RSA OAEP support.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1181976843"", ""author_association"": ""CONTRIBUTOR""}"
713,ClosePR,2022-07-12 16:19:23,williamcroberts,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6979089909"", ""commit_url"": null}"
714,SubmitCommit,2022-07-12 17:08:45,williamcroberts,fork_merge,"configure: check for bash

PCR Bank verification needs bash, so check for bash. While at it use the
autoconf shell construct macros over raw shell syntax which is slightly
more portable.

Examples:
./configure --enable-default-pcr-banks=sha256,sha920
checking which PCR banks to activate by default... configure: error: sha256,sha920 is an invalid list of PCR banks

./configure --enable-default-pcr-banks=sha256,sha512
checking which PCR banks to activate by default... sha256,sha512

./configure
checking which PCR banks to activate by default... sha256

Signed-off-by: William Roberts <william.c.roberts@intel.com>","{""sha"": ""7e9c1c6d7835d8e766fbfdc1a1f6bd38f8bbf299"", ""author"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2022-07-12T17:04:10Z""}, ""committer"": {""name"": ""William Roberts"", ""email"": ""william.c.roberts@intel.com"", ""date"": ""2022-07-12T17:08:45Z""}}"
714,OpenPR,2022-07-12 17:08:57,williamcroberts,fork_merge,,
714,IssueComment,2022-07-12 17:46:55,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 3931](https://coveralls.io/builds/50804296)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.811%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/50804296/badge)](https://coveralls.io/builds/50804296) |
| :-- | --: |
| Change from base [Build 3921](https://coveralls.io/builds/50528095): |  0.0% |
| Covered Lines: | 6145 |
| Relevant Lines: | 8214 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1182108203"", ""author_association"": ""NONE""}"
714,IssueComment,2022-07-12 17:47:32,stefanberger,fork_merge,Thanks. LGTM.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1182109720"", ""author_association"": ""OWNER""}"
714,MergePR,2022-07-12 17:47:36,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6979860583"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/b91fc6e610849d1e63e1c3ff6f4bc3627649db11""}"
715,SubmitCommit,2022-07-13 20:53:37,stefanberger,unfork_merge,"swtpm: Also advertise the flags-opt-startup option for the CUSE interface

Commit 6559a902 implemented support for the startup-xyz flags for the CUSE
interface but the capability has not been advertised.

Adjust test cases to reflect the new verb being shown for
--print-capabilities.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2827d46fccac6838b295b9b7c24da2eccdc08081"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-13T20:43:40Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-13T20:53:37Z""}}"
715,OpenPR,2022-07-13 20:54:38,stefanberger,unfork_merge,,
715,MergePR,2022-07-14 12:07:28,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/6993680746"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/b3c32ed5a0cdca61fab00ffe625c47328d5d1e19""}"
718,SubmitCommit,2022-07-19 09:47:10,rosslagerwall,fork_close,"swtpm_localca: Make compatible with older GnuTLS versions

Use the interactive method to give passwords to certtool to support both
new and older version of GnuTLS. This is of interest to support running
swtpm on RHEL7. This change has a side effect benefit of no longer
writing passwords to disk.

Signed-off-by: Ross Lagerwall <ross.lagerwall@citrix.com>","{""sha"": ""42a96e88a3d3b5b688d5455f9d0636c3a50dd1d7"", ""author"": {""name"": ""Ross Lagerwall"", ""email"": ""ross.lagerwall@citrix.com"", ""date"": ""2022-07-19T09:33:38Z""}, ""committer"": {""name"": ""Ross Lagerwall"", ""email"": ""ross.lagerwall@citrix.com"", ""date"": ""2022-07-19T09:47:10Z""}}"
718,SubmitCommit,2022-07-19 09:47:10,rosslagerwall,fork_close,"tests: Make compatible with older GnuTLS

Older versions of GnuTLS (before GnuTLS commit c5791c82c663) expect that
the type in the URI specified when using ""--load-privkey"" is private so
fix up the generated URI. Newer versions of GnuTLS are less fussy so
they work too.

Signed-off-by: Ross Lagerwall <ross.lagerwall@citrix.com>","{""sha"": ""16fa13e3d331f3b8d976cfc23a8d9542faf23b18"", ""author"": {""name"": ""Ross Lagerwall"", ""email"": ""ross.lagerwall@citrix.com"", ""date"": ""2022-07-19T09:40:13Z""}, ""committer"": {""name"": ""Ross Lagerwall"", ""email"": ""ross.lagerwall@citrix.com"", ""date"": ""2022-07-19T09:47:10Z""}}"
718,OpenPR,2022-07-19 09:59:10,rosslagerwall,fork_close,,
718,IssueComment,2022-07-19 11:19:18,stefanberger,fork_close,What's the incentive to support RHEL 7?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1188928839"", ""author_association"": ""OWNER""}"
718,IssueComment,2022-07-19 11:41:45,stefanberger,fork_close,I previously had support for older versions of GnuTLS but dropped it since swtpm really is only being used with more recent versions of GnuTLS. So my preference is to leave the code as-is and only support newer versions of GnuTLS -- which will hopefully require no changes.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1188948630"", ""author_association"": ""OWNER""}"
718,IssueComment,2022-07-19 13:11:47,rosslagerwall,fork_close,"> What's the incentive to support RHEL 7?

To add vTPM support to Citrix Hypervisor (formerly XenServer) and XCP-ng which are based on CentOS 7.

If you'd prefer not to support older versions of GnuTLS, that's fine - it's your call as maintainer. Feel free to close the PR in that case. We should be able to carry this as a local patch.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1189036075"", ""author_association"": ""CONTRIBUTOR""}"
718,ClosePR,2022-07-19 22:23:03,stefanberger,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7024307980"", ""commit_url"": null}"
719,SubmitCommit,2022-07-19 12:25:22,stefanberger,unfork_merge,"swtpm_setup: Implement get_swtpm_capabilities() and call from two functions

Implement get_swtpm_capabilities() and call it from two existing functions
that now become a lot simpler.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9ab1fbcd3f988f2497de61f220e493b3055cb37a"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-19T12:20:45Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-19T12:25:22Z""}}"
719,OpenPR,2022-07-19 12:27:17,stefanberger,unfork_merge,,
719,IssueComment,2022-07-19 12:46:25,elmarco,unfork_merge,lgtm,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1189009639"", ""author_association"": ""CONTRIBUTOR""}"
719,IssueComment,2022-07-19 13:02:34,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3942](https://coveralls.io/builds/50985004)

* **16** of **17**   **(94.12%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.01%**) to **74.823%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm_setup/swtpm_setup.c](https://coveralls.io/builds/50985004/source?filename=src%2Fswtpm_setup%2Fswtpm_setup.c#L954) | 16 | 17 | 94.12%
<!-- | **Total:** | **16** | **17** | **94.12%** | -->


|  Totals | [![Coverage Status](https://coveralls.io/builds/50985004/badge)](https://coveralls.io/builds/50985004) |
| :-- | --: |
| Change from base [Build 3936](https://coveralls.io/builds/50910560): |  0.01% |
| Covered Lines: | 6140 |
| Relevant Lines: | 8206 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1189025933"", ""author_association"": ""NONE""}"
719,MergePR,2022-07-19 15:52:34,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7021992339"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/f67607db26c743738e48ee1fbe576653c94268be""}"
720,SubmitCommit,2022-07-19 22:20:23,stefanberger,unfork_merge,"swtpm: Move TPMLIB_ChooseTPMVersion into capabilities_print_json

All callers to capabilities_print_json() call TPMLIB_ChooseTPMVersion
right before. Move it into the function now and check the return
code.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""14b0a1199bdd089a98feff4b6f91c087a97c7627"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-18T22:24:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-19T22:20:23Z""}}"
720,OpenPR,2022-07-19 22:22:51,stefanberger,unfork_merge,,
720,MergePR,2022-07-19 23:17:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7024674508"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/bf3f51753967bb20e7cbca7c910e0f64481f5624""}"
721,SubmitCommit,2022-07-19 23:30:57,stefanberger,unfork_merge,"swtpm: Ignore error if TPMLIB_ChooseTPMVersion for printing caps fails

Revert the change from the previous patch that shows an error when
TPMLIB_ChooseTPMVersion fails but rather ignore the error as before.
If a TPM 2 is supported then tpm-2.0 capability verb will be shown
and if a TPM 1.2 is supported then tpm-1.2 will be shown, thus
allowing someone reading the JSON to determine what is supported.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9784ab5880fac00925a38327a6235d25829b8576"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-19T23:27:56Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-19T23:30:57Z""}}"
721,OpenPR,2022-07-19 23:31:21,stefanberger,unfork_merge,,
721,MergePR,2022-07-20 01:39:23,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7025260272"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/76001cd26c8800cf21226ff693d8103e2cb2345f""}"
723,SubmitCommit,2022-08-02 02:53:14,arkivm,fork_close,"swtpm_setup: Append socket option when --tpm is specified

When swtpm is not in path and passed via --tpm, we get an incorrect error
message that
> swtpm at ./build/bin/swtpm does not support TPM 2
despite having the actual capabilities.

Fix that by delaying the addition of socket option until we find a valid
swtpm binary.

Also refactor the code a bit such that we invoke g_find_program_in_path
in the end.

Signed-off-by: Vikram Narayanan <vikram186@gmail.com>","{""sha"": ""1ffd0f04e2ec36aaadfba4827a31d0b2f86f5837"", ""author"": {""name"": ""Vikram Narayanan"", ""email"": ""vikram186@gmail.com"", ""date"": ""2022-08-02T02:53:14Z""}, ""committer"": {""name"": ""Vikram Narayanan"", ""email"": ""vikram186@gmail.com"", ""date"": ""2022-08-02T02:53:14Z""}}"
723,OpenPR,2022-08-02 02:58:15,arkivm,fork_close,,
723,ClosePR,2022-08-02 14:18:17,arkivm,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7110435209"", ""commit_url"": null}"
723,DeleteBranch,2022-08-02 14:18:23,arkivm,fork_close,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7110436048"", ""commit_url"": null}"
726,SubmitCommit,2022-08-09 20:15:05,stefanberger,unfork_merge,"tests: Move swtpm_open_cmddev into swtpm_cmd_tx

Move swtpm_open_cmddev call into swtpm_cmd_tx since the latter function is
always called in a subshell that previously inherited the file descriptor
opened by the test cases. Remove swtpm_cmd_tx from nearly all test cases
and also remove closing of file descriptor 100 via 'exec 100>&-' from test
cases since this is not necessary anymore.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1daf8d7f5fd5ec1ec3bcc13eff6b08fa7a10fa28"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-09T20:04:43Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-09T20:15:05Z""}}"
726,OpenPR,2022-08-09 20:15:38,stefanberger,unfork_merge,,
726,IssueComment,2022-08-09 20:53:39,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3980](https://coveralls.io/builds/51541004)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.817%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/51541004/badge)](https://coveralls.io/builds/51541004) |
| :-- | --: |
| Change from base [Build 3957](https://coveralls.io/builds/51086884): |  0.0% |
| Covered Lines: | 6138 |
| Relevant Lines: | 8204 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1209885947"", ""author_association"": ""NONE""}"
726,MergePR,2022-08-09 21:10:37,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7158886715"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/b255d07010a8a7c585ba40d0e4be163485badc69""}"
726,DeleteBranch,2022-08-09 21:10:40,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7158886939"", ""commit_url"": null}"
727,SubmitCommit,2022-08-09 21:28:00,stefanberger,unfork_merge,"swtpm: cuse: Restrict opening CUSE device to one openable file descriptor

Restrict the opening of the CUSE device to one single file descriptor. We
can modify the CUSE TPM in this way since the kernel's /dev/tpm0 cannot be
opened multiple times, either, and the CUSE TPM should behave in the same
way.

Adjust test the partial reads case to only open CUSE device file once by
using a python program. Close the open file descriptor 100 before using
swtpm_ioctl to avoid failures.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""233e818dcc553ad6f05eed7212989c8abb856f6c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-09T18:40:49Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-09T21:28:00Z""}}"
727,OpenPR,2022-08-09 21:31:15,stefanberger,unfork_merge,,
727,MergePR,2022-08-09 22:27:07,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7159227712"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/bcf1fa951c06519ae498e1949f029309579a51c1""}"
727,DeleteBranch,2022-08-09 22:27:10,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7159227887"", ""commit_url"": null}"
728,OpenPR,2022-08-10 00:05:43,stefanberger,unfork_merge,,
728,Revise,2022-08-11 12:42:39,stefanberger,unfork_merge,"swtpm: cuse: Extend usage of FILE_OPS_LOCK to protect a reading thread

Extend usage of the FILE_OPS_LOCK to prevent other threads from reading or
writing commands or doing ioctls while the current thread is reading a
response. This prevents a race condition where ptm_read_offset is set to 0
by a thread writing a new command to the device while the current thread
is reading a response from the device and needs this offset.

Resolves: https://github.com/stefanberger/swtpm/issues/725
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b46302df87bb07810052fe981c77b5edce4802ef"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-09T23:58:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-11T12:42:39Z""}}"
728,HeadRefForcePushed,2022-08-11 12:42:49,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7171323826"", ""commit_url"": null}"
728,MergePR,2022-08-12 12:54:51,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7178967728"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/c4adfa3e57470d6005554e4e7dacec14cbc127e4""}"
728,DeleteBranch,2022-08-12 12:55:07,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7178969667"", ""commit_url"": null}"
729,SubmitCommit,2022-08-10 22:39:10,stefanberger,unfork_merge,"swtpm: Travial reformatting of arrays of structs

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""8490f33d3de0ec138a8b2c7fdf46efebc91d3317"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T22:39:08Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T22:39:10Z""}}"
729,SubmitCommit,2022-08-10 22:47:56,stefanberger,unfork_merge,"man: Replace swtpm_cuse man page with redirect to swtpm man page

The swtpm man page also covers the CUSE TPM, so do not maintain the
swtpm_cuse man page anymore but replace it with a redirect to the swtpm
mane page instead.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""8ce7a82489272b4f74ceb8b122478c9cd89a7d9c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T22:43:07Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T22:47:56Z""}}"
729,OpenPR,2022-08-10 22:51:03,stefanberger,unfork_merge,,
729,MergePR,2022-08-10 23:30:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7167844825"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/0fb6f9001b6726b1425e58fdfec995c275dc4dff""}"
730,SubmitCommit,2022-08-10 23:31:49,stefanberger,unfork_merge,"swtpm_setup: Add missing newline to help screen

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b181a16095978ef37e58e84fafb49b6e98d0e387"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T17:59:41Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T23:31:49Z""}}"
730,OpenPR,2022-08-10 23:32:14,stefanberger,unfork_merge,,
730,MergePR,2022-08-11 00:39:00,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7168042108"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/b8c1a0fc88df83488977de6e2e4019759411d38c""}"
731,SubmitCommit,2022-08-11 18:23:10,stefanberger,unfork_merge,"tests: Remove dump of logfile at end of test

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""e3f8836de84cba152e1595fb1edba630fefa2fae"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-11T15:58:44Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-11T18:23:10Z""}}"
731,OpenPR,2022-08-11 18:23:31,stefanberger,unfork_merge,,
731,MergePR,2022-08-11 19:02:25,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7174217804"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/54de243efd11e93e9d1c06efbe19f36e456948d4""}"
732,OpenPR,2022-08-11 19:08:37,stefanberger,unfork_merge,,
732,CrossReferenced,2022-08-11 19:10:39,stefanberger,unfork_merge,Live migrations fail when using shared storage,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/724"", ""is_pull_request"": false}}"
732,IssueComment,2022-08-11 19:11:43,stefanberger,unfork_merge,"UPDATE: LIBVIRT WILL NEED TO BE MODIFIED. YOU CANNOT USE THIS PATCH.

The patch to apply to this branch to **simulate** `--migration incoming,release-lock-outgoing` on the command line and use it with existing libvirt to try out migration with shared storage. Later on libvirt will need to be patched to passed these options.

```
From 8241c2250eef90088e1126365953745bd919e395 Mon Sep 17 00:00:00 2001
From: Stefan Berger <stefanb@linux.ibm.com>
Date: Wed, 10 Aug 2022 19:35:41 -0400
Subject: [PATCH] temp: Simulate '--migration incoming,release-lock-outgoing'
 by setting flags

This breaks the test case in this series!
---
 src/swtpm/swtpm.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/swtpm/swtpm.c b/src/swtpm/swtpm.c
index aa14066..47b11ee 100644
--- a/src/swtpm/swtpm.c
+++ b/src/swtpm/swtpm.c
@@ -486,6 +486,8 @@ int swtpm_main(int argc, char **argv, const char *prgname, const char *iface)
         goto exit_failure;
     }

+    mlp.incoming_migration = mlp.release_lock_outgoing = true;
+
     if (server) {
         if (server_get_fd(server) >= 0) {
             mlp.fd = server_set_fd(server, -1);
--
2.37.1

```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1212384831"", ""author_association"": ""OWNER""}"
732,IssueComment,2022-08-11 19:24:30,stefanberger,unfork_merge,"This is a bit of a concern -- very difficult/almost impossible to test and trigger and verify in a real-world scenario:
```
When migrating a VM the migration may fail and execution will then resume
one the originating side. In this fallback case the swtpm on the
destination side may need some time to terminate and release the lock.
Therefore, add a loop to the code attempting to re-lock the storage
directory on the source side for a few times until on the destination
side swtpm has released the lock. Retry the locking for 100 times
with 10ms in between. The retries will only ever be necessary of a TPM 2
command is immediately executed upon resume and this may be difficult
to test. The negative side effects of this could be that the loop is not
long enough to grab the lock or that a short command sent by the TPM
driver will time out due to the retries.
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1212396171"", ""author_association"": ""OWNER""}"
732,HeadRefForcePushed,2022-08-11 21:45:33,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7175169223"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-11 22:30:25,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7175355999"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-12 19:45:23,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7181562621"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-16 13:03:00,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7197066764"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-18 14:10:14,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7214764982"", ""commit_url"": null}"
732,ReviewComment,2022-08-18 16:40:45,stefanberger,unfork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/732#pullrequestreview-1077684459""}"
732,ReviewComment,2022-08-18 16:43:11,stefanberger,unfork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/732#pullrequestreview-1077687555""}"
732,HeadRefForcePushed,2022-08-18 18:47:14,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7216672433"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-20 19:28:53,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7226714308"", ""commit_url"": null}"
732,IssueComment,2022-08-20 20:07:40,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4053](https://coveralls.io/builds/51985714)

* **108** of **136**   **(79.41%)**  changed or added relevant lines in **10** files are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage increased (+**0.07%**) to **74.961%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/ctrlchannel.c](https://coveralls.io/builds/51985714/source?filename=src%2Fswtpm%2Fctrlchannel.c#L898) | 14 | 15 | 93.33%
| [src/swtpm/swtpm_nvstore.c](https://coveralls.io/builds/51985714/source?filename=src%2Fswtpm%2Fswtpm_nvstore.c#L219) | 10 | 12 | 83.33%
| [src/swtpm/swtpm_chardev.c](https://coveralls.io/builds/51985714/source?filename=src%2Fswtpm%2Fswtpm_chardev.c#L473) | 5 | 8 | 62.5%
| [src/swtpm/common.c](https://coveralls.io/builds/51985714/source?filename=src%2Fswtpm%2Fcommon.c#L1381) | 14 | 19 | 73.68%
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/51985714/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L146) | 2 | 7 | 28.57%
| [src/swtpm/cuse_tpm.c](https://coveralls.io/builds/51985714/source?filename=src%2Fswtpm%2Fcuse_tpm.c#L953) | 30 | 36 | 83.33%
| [src/swtpm_ioctl/tpm_ioctl.c](https://coveralls.io/builds/51985714/source?filename=src%2Fswtpm_ioctl%2Ftpm_ioctl.c#L1053) | 8 | 14 | 57.14%
<!-- | **Total:** | **108** | **136** | **79.41%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/swtpm_nvstore_dir.c](https://coveralls.io/builds/51985714/source?filename=src%2Fswtpm%2Fswtpm_nvstore_dir.c#L157) | 1 | 65.91% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/51985714/badge)](https://coveralls.io/builds/51985714) |
| :-- | --: |
| Change from base [Build 4051](https://coveralls.io/builds/51984130): |  0.07% |
| Covered Lines: | 6311 |
| Relevant Lines: | 8419 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1221399443"", ""author_association"": ""NONE""}"
732,IssueComment,2022-08-21 19:29:30,stefanberger,unfork_merge,"libvirt support for shared storage is here: https://github.com/stefanberger/libvirt-tpm/tree/master%2Bswtpm_shared_storage.v1

I'll post these patches on the libvirt mailing list soon.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1221606915"", ""author_association"": ""OWNER""}"
732,HeadRefForcePushed,2022-08-22 16:18:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7234351572"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-23 11:11:07,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7240925151"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-23 20:59:15,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7245512979"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-25 17:21:20,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7261455458"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-26 13:25:42,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7267652674"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-26 14:01:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7267928450"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-26 14:59:31,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7268360526"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-26 17:14:30,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7269197133"", ""commit_url"": null}"
732,HeadRefForcePushed,2022-08-26 18:41:40,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7269671268"", ""commit_url"": null}"
732,CrossReferenced,2022-08-30 13:10:08,jean-edouard,unfork_merge,Add VMI backend storage and persistent TPM support,"{""reference"": {""url"": ""https://api.github.com/repos/kubevirt/kubevirt/issues/8156"", ""is_pull_request"": true}}"
732,Revise,2022-09-01 15:44:19,stefanberger,unfork_merge,"swtpm: Move locking of storage into tpmlib_start()

Move the locking of the storage into tpmlib_start() after the call to
TPMLIB_MainInit() which was previously doing the locking when the prepare
function was called in the SWTPM_NVRAM_Init() callback invoked by
TPMLIB_MainInit().

This allows for conditional locking in tpmlib_start() using a flag later
on.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d6901006ead19f039231c9cc290ee9bcef9566a2"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T16:17:37Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-01T15:44:19Z""}}"
732,Revise,2022-09-01 15:44:20,stefanberger,unfork_merge,"swtpm: Introduce --migration option and 'incoming' parameter

Introduce the --migration option along with the 'incoming' parameter
that allows to defer the locking of the storage until either

- the reception of the TPM's state is started
- a TPM command is about to be processed

Note that the reception of CMD_INIT does not enable the storage lock.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>
Resolves: https://github.com/stefanberger/swtpm/issues/724","{""sha"": ""94c70d750482faa638767e7a13a75d4808729f53"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T19:30:15Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-01T15:44:20Z""}}"
732,Revise,2022-09-01 15:44:20,stefanberger,unfork_merge,"swtpm: Implement release-lock-outgoing parameter for --migration option

Implement the release-lock-outgoing parameter for the --migration option
that causes the storage lock to be released once the 'savestate' blob
transfer has been initiated. To not release the lock too early users must
first get the 'permanent' and 'volatile' state blobs and the 'savestate'
blob must be transferred as the last blob.

When migrating a VM the migration may fail and execution will then resume
on the originating side. In this fallback case the swtpm on the
destination side may need some time to terminate and release the lock.
Therefore, add a loop to the code attempting to re-lock the storage
directory on the source side for a few times until on the destination
side swtpm has released the lock. Retry the locking for 100 times
with 10ms in between. The retries will only ever be necessary if a TPM
command is immediately executed upon resume [this may be difficult
to test]. The negative side effects of this could be that the loop is not
long enough to grab the lock or that a short-duration TPM command will
time out inside the VM due to the retries delaying when it is processed.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>
Resolves: https://github.com/stefanberger/swtpm/issues/724","{""sha"": ""a767566940337be6dc59149161b866e1348cb2dd"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T20:25:36Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-01T15:44:20Z""}}"
732,Revise,2022-09-01 15:44:20,stefanberger,unfork_merge,"swtpm: Advertise --migration option in capabilities JSON

Advertise the capability of supporting the --migration option
in the capabilies JSON that now has the cmdarg-migration verb:

$ swtpm socket --print-capabilities | jq
{
  ""type"": ""swtpm"",
  ""features"": [
    ""tpm-1.2"",
    ""tpm-2.0"",
    ""tpm-send-command-header"",
    ""flags-opt-startup"",
    ""flags-opt-disable-auto-shutdown"",
    ""cmdarg-seccomp"",
    ""cmdarg-key-fd"",
    ""cmdarg-pwd-fd"",
    ""cmdarg-print-states"",
    ""cmdarg-migration"",
    ""nvram-backend-dir"",
    ""nvram-backend-file""
  ],
  ""version"": ""0.8.0""
}

Adjust test cases and extend man page.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""80143c3d8faf1321d555aded5114aa7b95e5585e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-10T21:41:25Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-01T15:44:20Z""}}"
732,HeadRefForcePushed,2022-09-01 15:44:37,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7306532554"", ""commit_url"": null}"
732,Revise,2022-09-01 20:20:38,stefanberger,unfork_merge,"swtpm: Implement CMD_LOCK_STORAGE to lock storage

Implement CMD_LOCK_STORAGE / PTM_LOCK_STORAGE for a user to be able to
lock the storage of the storage backend (if supported) after its lock
has been released for example when the 'savestate' blob was received
while the TPM state was migrated.

Also adjust test case and extend man pages.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""dce46fe37b417a18036878ac7bf56896f7a972bd"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-23T20:07:24Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-01T20:20:38Z""}}"
732,Revise,2022-09-01 20:20:38,stefanberger,unfork_merge,"tests: Add test case for state migration and storage locking

Add a test case that monitors the locking of the storage by swtpm using the
directory storage backend to ensure that the lock is taken at the right
time and released when required.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1cef1f201a80813ae3c4ca203b395635393b4926"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-11T15:56:26Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-01T20:20:38Z""}}"
732,HeadRefForcePushed,2022-09-01 20:22:06,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7308397548"", ""commit_url"": null}"
732,MergePR,2022-09-06 18:08:45,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7332750679"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e5fdd1c181d0414ad27a0f4f72c49020fbc1ac6e""}"
732,DeleteBranch,2022-09-06 18:08:49,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7332751129"", ""commit_url"": null}"
733,SubmitCommit,2022-08-12 17:00:03,stefanberger,unfork_merge,"swtpm: Add some more recent syscalls to seccomp profile

Add some more recent syscalls to the disallowlist in the seccomp
profile.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3a05ca2b9bd1b8b093a4e4658bee967d0248bca0"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-12T16:53:27Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-12T17:00:03Z""}}"
733,OpenPR,2022-08-12 17:00:32,stefanberger,unfork_merge,,
733,IssueComment,2022-08-12 17:38:03,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 3996](https://coveralls.io/builds/51630402)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.817%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/51630402/badge)](https://coveralls.io/builds/51630402) |
| :-- | --: |
| Change from base [Build 3995](https://coveralls.io/builds/51625073): |  0.0% |
| Covered Lines: | 6144 |
| Relevant Lines: | 8212 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1213357340"", ""author_association"": ""NONE""}"
733,MergePR,2022-08-12 17:51:34,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7180903329"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/cf1f966c25e53b0b9e602f79439119ab184ae4eb""}"
734,OpenPR,2022-08-15 12:06:50,hnj2,fork_merge,,
734,IssueComment,2022-08-15 13:09:54,stefanberger,fork_merge,You are right. Do you want to update your commit with your Signed-off-by and just state that it fixes a typo in the sycall name fsmount? Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1214994555"", ""author_association"": ""OWNER""}"
734,IssueComment,2022-08-15 13:11:10,stefanberger,fork_merge,And please prefix the commit header with `swtpm:`.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1214995920"", ""author_association"": ""OWNER""}"
734,HeadRefForcePushed,2022-08-15 14:16:20,hnj2,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7189026552"", ""commit_url"": null}"
734,IssueComment,2022-08-15 14:22:20,hnj2,fork_merge,"Made the changes :wink: 
What about the code duplication:
```
104: #ifdef __NR_fsmount
105:         SCMP_SYS(fsmount),
106: #endif
...
111: #ifdef __NR_move_mount
112:         SCMP_SYS(move_mount),
113: #endif
...
118: #ifdef __NR_fsmount
119:         SCMP_SYS(fsmount),
120: #endif
...
124: #ifdef __NR_move_mount
125:         SCMP_SYS(move_mount),
126: #endif
```","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1215071188"", ""author_association"": ""CONTRIBUTOR""}"
734,IssueComment,2022-08-15 14:28:02,stefanberger,fork_merge,"> Made the changes ????
> What about the code duplication:

You can remove one of them as well... ????
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1215077152"", ""author_association"": ""OWNER""}"
734,ReviewComment,2022-08-15 14:37:22,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/734#pullrequestreview-1072774958""}"
734,HeadRefForcePushed,2022-08-15 14:47:29,hnj2,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7189256914"", ""commit_url"": null}"
734,Revise,2022-08-15 14:48:03,hnj2,fork_merge,"swtpm: Fixed typo `fs_mount` vs `fsmount` and removed duplicates.

The project wouldn't compile on my ubuntu 20.04.1 based system with the error message:
```
  CC       libswtpm_libtpms_la-seccomp_profile.lo
In file included from seccomp_profile.c:44:
seccomp_profile.c: In function ‘create_seccomp_profile’:
seccomp_profile.c:105:9: error: ‘__SNR_fs_mount’ undeclared (first use in this function)
  105 |         SCMP_SYS(fs_mount),
      |         ^~~~~~~~
seccomp_profile.c:105:9: note: each undeclared identifier is reported only once for each function it appears in
```

Additionally, there were some duplicates in the profile.

Signed-off-by: Hans Niklas Jacob <hnj@posteo.de>","{""sha"": ""87fe0248ccb5d428ba0bfa920f5841d37e3ac015"", ""author"": {""name"": ""Hans"", ""email"": ""49440977+hnj2@users.noreply.github.com"", ""date"": ""2022-08-15T12:06:27Z""}, ""committer"": {""name"": ""Hans Niklas Jacob"", ""email"": ""hnj@posteo.de"", ""date"": ""2022-08-15T14:48:03Z""}}"
734,HeadRefForcePushed,2022-08-15 14:48:12,hnj2,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7189261496"", ""commit_url"": null}"
734,MergePR,2022-08-15 15:33:02,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7189565170"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/eaa9f92201bff08f7a1f386d3d74012fa7b6a812""}"
734,IssueCommentSupplement,2022-08-15 15:39:51,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1215187102"", ""author_association"": ""OWNER""}"
735,OpenPR,2022-08-15 14:44:41,stefanberger,unfork_merge,,
735,RenameTitle,2022-08-15 14:45:15,stefanberger,unfork_merge,,"{""rename"": {""from"": ""Refactor FIPS related function"", ""to"": ""Refactor FIPS related code""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7189240978""}"
735,Revise,2022-08-15 15:33:57,stefanberger,unfork_merge,"swtpm: Rename disable_fips_mode() and move into tpmlib_start()

Rename disable_fips_mode() to fips_mode_disable() amd move into
tpmlib_start() after TPMLIB_MainInit(). Clean up the duplicate
prototype.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3683a0ab576e910af08efd9346bb90a6493ca38f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-20T20:58:28Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-15T15:33:57Z""}}"
735,HeadRefForcePushed,2022-08-15 15:39:44,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7189609988"", ""commit_url"": null}"
735,Revise,2022-08-15 15:41:48,stefanberger,unfork_merge,"swtpm: Implement fips_mode_enabled()

Implement fips_mode_enabeld() to check whether FIPS is enabledand
use the new function to check for FIPS mode enablement before
trying to disable it.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""773db56111d1ecf6d9589c84a5fd8f9de134ba7e"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-07-23T06:32:44Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-15T15:41:48Z""}}"
735,HeadRefForcePushed,2022-08-15 15:42:13,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7189626109"", ""commit_url"": null}"
735,MergePR,2022-08-15 16:56:43,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7190087666"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/5e03ed6c322ff59ecc5cc621729a2442863599a1""}"
736,SubmitCommit,2022-08-15 17:49:54,stefanberger,unfork_merge,"swtpm: seccomp: Check for __SNR_xyz rather than __NR_xyz

If seccomp-syscalls.h lags behind the syscall definition of __NR_xyz then
the __SNR_xyz #define is not available. Therefore, switch to check for
__SNR_xyz #define because they are available if __NR_xyz is available.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""15a36383bb1cae1eaf06e3b6187640aa5e3181b8"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-15T17:49:31Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-15T17:49:54Z""}}"
736,OpenPR,2022-08-15 17:50:47,stefanberger,unfork_merge,,
736,MergePR,2022-08-15 19:44:52,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7191093399"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/841b9319e89967dec675003fa4e83f6186753906""}"
737,SubmitCommit,2022-08-16 12:20:17,stefanberger,unfork_merge,"swtpm_ioctl: Only close file descriptor if >= 0 (Coverity)

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7327b9f8ba71778f3abc8d5b48da2cf26a6d43ba"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-16T11:51:36Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-16T12:20:17Z""}}"
737,OpenPR,2022-08-16 12:20:30,stefanberger,unfork_merge,,
737,MergePR,2022-08-16 13:00:42,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7197047778"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/132f51d41b7d3d2b34753fa2a0693c5067438c31""}"
739,SubmitCommit,2022-08-22 18:14:17,stefanberger,unfork_merge,"swtpm: Include opensslv.h to get OPENSSL_VERSION_NUMBER

Include openssl/opensslv.h to avoid the following error on Ubuntu:

fips.c: In function 'fips_mode_enabled':
fips.c:61:16: error: implicit declaration of function 'EVP_default_properties_is_fips_enabled' [-Werror=implicit-function-declaration]
   61 |     int mode = EVP_default_properties_is_fips_enabled(NULL);
      |                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Resolves: https://github.com/stefanberger/libtpms/issues/345
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""1797d58a9fa30ff88f277119f0684a384f8971f8"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-22T17:59:34Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-22T18:14:17Z""}}"
739,SubmitCommit,2022-08-22 18:14:25,stefanberger,unfork_merge,"swtpm: Check for defined __SNR_MOUNT_setattr and __NR_mount_setattr

Address the following compilation error on Debian:

In file included from /usr/include/seccomp.h:821,
                 from seccomp_profile.c:44:
seccomp_profile.c: In function 'create_seccomp_profile':
seccomp_profile.c:115:9: error: '__NR_mount_setattr' undeclared (first use in this function)
  115 |         SCMP_SYS(mount_setattr),
      |         ^~~~~~~~
seccomp_profile.c:115:9: note: each undeclared identifier is reported only once for each function it appears in
seccomp_profile.c:172:9: error: '__NR_quotactl_fd' undeclared (first use in this function)
  172 |         SCMP_SYS(quotactl_fd),
      |         ^~~~~~~~

We need to do this since they are defined like this:

 #define __SNR_mount_setattr             __NR_mount_setattr
 #define __SNR_quotactl_fd               __NR_quotactl_fd

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""50071d9c74b4d0a8be502b5be3e1179e6a1f84f3"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-22T18:11:47Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-22T18:14:25Z""}}"
739,OpenPR,2022-08-22 18:23:46,stefanberger,unfork_merge,,
739,IssueComment,2022-08-22 19:02:07,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4033](https://coveralls.io/builds/51848937)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **75.088%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/51848937/badge)](https://coveralls.io/builds/51848937) |
| :-- | --: |
| Change from base [Build 4029](https://coveralls.io/builds/51797683): |  0.0% |
| Covered Lines: | 6206 |
| Relevant Lines: | 8265 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1222791126"", ""author_association"": ""NONE""}"
739,MergePR,2022-08-22 19:27:18,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7235675995"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/df494163fa42fc1c44721b9612a2899b6213378e""}"
740,OpenPR,2022-08-23 16:41:04,rosslagerwall,fork_merge,,
740,IssueComment,2022-08-24 12:12:57,stefanberger,fork_merge,"Thanks. The patch looks good to me. Ideally there would be a test case for this as well, one derived from an existing test case should be possible to add.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1225638609"", ""author_association"": ""OWNER""}"
740,ReviewComment,2022-08-24 16:17:50,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/740#pullrequestreview-1084111996""}"
740,Revise,2022-08-25 12:52:02,xennifer,fork_merge,"swtpm: Add a chroot option

Add an option to enter a chroot after starting swtpm. This is useful for
sandboxing purposes. When this option is used, it is expected that swtpm
is started as root and the --runas option is used to subsequently drop
privileges (otherwise the chroot could be escaped).

Signed-off-by: Jennifer Herbert <jennifer.herbert@citrix.com>
Signed-off-by: Ross Lagerwall <ross.lagerwall@citrix.com>","{""sha"": ""e21e149195fb6be218e7acc352b3154eecaca6eb"", ""author"": {""name"": ""Jennifer Herbert"", ""email"": ""jennifer.herbert@citrix.com"", ""date"": ""2022-08-23T16:08:10Z""}, ""committer"": {""name"": ""Ross Lagerwall"", ""email"": ""ross.lagerwall@citrix.com"", ""date"": ""2022-08-25T12:52:02Z""}}"
740,HeadRefForcePushed,2022-08-25 12:52:35,rosslagerwall,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7259218677"", ""commit_url"": null}"
740,ClosePR,2022-08-25 14:03:20,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7259842179"", ""commit_url"": null}"
740,ReopenPR,2022-08-25 14:04:27,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7259852172"", ""commit_url"": null}"
740,MergePR,2022-08-25 14:04:35,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7259853389"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/68e5428492365c50ec6e2dfcada6621b61c91666""}"
740,IssueCommentSupplement,2022-08-25 14:05:25,stefanberger,fork_merge,Merged now. thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1227309559"", ""author_association"": ""OWNER""}"
740,IssueCommentSupplement,2022-08-25 15:25:22,stefanberger,fork_merge,Does this work with the CUSE interface for you?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1227417005"", ""author_association"": ""OWNER""}"
740,IssueCommentSupplement,2022-08-25 16:02:05,stefanberger,fork_merge,"> Does this work with the CUSE interface for you?

It did not work for me since on my system tpmfs is mounted with the nodev option.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1227470175"", ""author_association"": ""OWNER""}"
740,IssueCommentSupplement,2022-08-25 16:28:30,rosslagerwall,fork_merge,"All the new tests passed for me. On my system /tmp is not a tmpfs so I guess that explains it.

The testcases could create the chroot dir in the `tests` directory which is less likely to be a tmpfs and skip the test if it is a tmpfs.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1227500105"", ""author_association"": ""CONTRIBUTOR""}"
740,IssueCommentSupplement,2022-08-25 16:34:28,stefanberger,fork_merge,I opened PR #742 now to fix it.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1227506217"", ""author_association"": ""OWNER""}"
741,SubmitCommit,2022-08-24 13:20:17,stefanberger,unfork_merge,"swtpm_setup: Add missing description for --vmid to help screen

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""c742b2d1b649ee40284be6eb925af4894a87466f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-24T13:17:24Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-24T13:20:17Z""}}"
741,OpenPR,2022-08-24 13:21:12,stefanberger,unfork_merge,,
741,MergePR,2022-08-24 14:26:56,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7251510523"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/ef005d9f0bf6265c7cf345d1a4e2615b943110ff""}"
742,SubmitCommit,2022-08-25 15:59:03,stefanberger,unfork_merge,"tests: If filesystem is mounted with nodev opt skip CUSE chroot test

The CUSE TPM test will not work if the filesystem the test case runs
on is mounted with the 'nodev' option since the CUSE TPM can then
not use /tmp/.../dev/cuse.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2fd3c1e503e4b0d151c7773ea018c3b499677507"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-25T15:58:06Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-25T15:59:03Z""}}"
742,SubmitCommit,2022-08-25 16:07:26,stefanberger,unfork_merge,"swtpm: Advertise the --chroot option with cmdarg-chroot

Advertise the availability of the chroot option with the cmdarg-chroot
verb. Document it in the man page.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""75410320d3a326bb1812905e0ef4fabf53f4a18b"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-25T16:06:04Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-25T16:07:26Z""}}"
742,OpenPR,2022-08-25 16:30:56,stefanberger,unfork_merge,,
742,CrossReferenced,2022-08-25 16:34:28,stefanberger,unfork_merge,swtpm: Add a chroot option,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/740"", ""is_pull_request"": true}}"
742,ReviewApproved,2022-08-25 17:09:06,rosslagerwall,unfork_merge,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/742#pullrequestreview-1085820782""}"
742,IssueComment,2022-08-25 17:10:25,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4043](https://coveralls.io/builds/51951614)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.894%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/51951614/badge)](https://coveralls.io/builds/51951614) |
| :-- | --: |
| Change from base [Build 4042](https://coveralls.io/builds/51947168): |  0.0% |
| Covered Lines: | 6211 |
| Relevant Lines: | 8293 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1227543928"", ""author_association"": ""NONE""}"
742,MergePR,2022-08-25 17:13:20,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7261406410"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/cdc39fd97750466a9bfa367bb544af7571447898""}"
743,SubmitCommit,2022-08-25 20:02:30,stefanberger,unfork_merge,"swtpm: Implement stub for fips_mode_enabled (OpenBSD)

On OpenBSD openssl/fips.h is not available and FIPS_mode() is not
available, so implement a stub for fips_mode_enabled().

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""af337317f3660c9f66c58fa922c885544309694d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-25T20:00:10Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-25T20:02:30Z""}}"
743,OpenPR,2022-08-25 20:03:32,stefanberger,unfork_merge,,
743,MergePR,2022-08-25 23:06:19,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7263331211"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/98d009bc99f3e55ba83b2d6fca31fb5a5967e7ca""}"
744,SubmitCommit,2022-08-26 11:44:45,stefanberger,unfork_merge,"headers: Synchronize with header in QEMU project

QEMU has made a change to a copy of this header file with the following
reason:

On Solaris and Haiku, the _IO() macros are defined in <sys/ioccom.h>.
Add a proper check for this header to our build system, and make sure
to include the header in tpm_ioctl.h to fix a build failure on Solaris
and Haiku.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""32080b2f57d80fc48e78914c8a9d8519d48b61bf"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-26T11:42:56Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-26T11:44:45Z""}}"
744,OpenPR,2022-08-26 12:03:39,stefanberger,unfork_merge,,
744,MergePR,2022-08-26 13:20:30,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7267614358"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/e86fd8e225587f30cdf9d8ed0f635d7e52354b8c""}"
745,SubmitCommit,2022-08-26 17:23:11,stefanberger,unfork_merge,"tests: Check for fallocate tool and its support for --posix

Older versions of fallocate do not support the --posix option that the test
needs. If --posix is not supported, skip the test.

Also check for availability of the losetup tool.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""17f324b091308ddeff2e365926cf9b727a0b2e46"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-26T17:22:04Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-08-26T17:23:11Z""}}"
745,OpenPR,2022-08-26 17:24:19,stefanberger,unfork_merge,,
745,IssueComment,2022-08-26 18:39:54,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4055](https://coveralls.io/builds/51988607)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.894%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/51988607/badge)](https://coveralls.io/builds/51988607) |
| :-- | --: |
| Change from base [Build 4051](https://coveralls.io/builds/51984130): |  0.0% |
| Covered Lines: | 6211 |
| Relevant Lines: | 8293 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1228804788"", ""author_association"": ""NONE""}"
745,MergePR,2022-08-26 18:41:06,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7269668641"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/959bbb5a193277d823f0d8728908095abd44c22c""}"
746,SubmitCommit,2022-09-01 14:54:22,stefanberger,unfork_merge,"headers: Apply #ifndef's for _WIN32 from QEMU project

Apply recent changes to this file from upstream QEMU project using
a few #ifndef _WIN32 to make code compileable on Windows.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""497969a0f0ea58a2a260f382251e71db3b58e4a7"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-01T14:54:19Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-01T14:54:22Z""}}"
746,OpenPR,2022-09-01 15:00:52,stefanberger,unfork_merge,,
746,MergePR,2022-09-01 15:43:34,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7306524147"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/b4e6725cb02c7bdc1849cfc34470cd7b9c3906aa""}"
748,SubmitCommit,2022-09-07 19:53:21,stefanberger,unfork_merge,"CHANGES: Add documentation for changes in 0.6.4

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""21ee9eeff5b60af9eeb8d4e1ffef4ae7db009c77"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-07T19:53:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-07T19:53:21Z""}}"
748,OpenPR,2022-09-07 19:58:41,stefanberger,unfork_merge,,
748,BaseRefChanged,2022-09-07 19:59:05,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7341775007"", ""commit_url"": null}"
748,Revise,2022-09-07 20:00:00,stefanberger,unfork_merge,"debian/rpm: Adjust changelog for 0.6.4 release

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6b177e2660b667bf34600b026a65e21fe52829c4"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-07T19:56:51Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-07T20:00:00Z""}}"
748,HeadRefForcePushed,2022-09-07 20:00:16,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7341781206"", ""commit_url"": null}"
748,IssueComment,2022-09-07 20:38:07,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4068](https://coveralls.io/builds/52289245)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.474%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/52289245/badge)](https://coveralls.io/builds/52289245) |
| :-- | --: |
| Change from base [Build 3806](https://coveralls.io/builds/47856553): |  0.0% |
| Covered Lines: | 5456 |
| Relevant Lines: | 7326 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1239847198"", ""author_association"": ""NONE""}"
748,MergePR,2022-09-08 13:19:49,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7347741455"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/72eea4bdef99a75dd01d909da4c0f9fda2028ff5""}"
750,OpenPR,2022-09-15 16:35:55,stefanberger,unfork_merge,,
750,Revise,2022-09-15 16:36:32,stefanberger,unfork_merge,"swtpm: Do 300 locking retries instead of only 100

Increase the number of locking retries to 300 over 3 seconds
instead of 100 over 1 second. This gives the failing side more
time to release the lock.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d687c45bc13f24fbe091033019122a14a182f8bf"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-15T16:36:32Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-15T16:36:32Z""}}"
750,HeadRefForcePushed,2022-09-15 16:36:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7396660275"", ""commit_url"": null}"
750,IssueComment,2022-09-15 17:14:45,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4077](https://coveralls.io/builds/52509992)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.964%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/52509992/badge)](https://coveralls.io/builds/52509992) |
| :-- | --: |
| Change from base [Build 4071](https://coveralls.io/builds/52346234): |  0.0% |
| Covered Lines: | 6312 |
| Relevant Lines: | 8420 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1248385887"", ""author_association"": ""NONE""}"
750,MergePR,2022-09-20 17:00:35,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7424138202"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/4e4e6e82cb588a39070dbfecb0af11514a794429""}"
752,SubmitCommit,2022-09-19 12:52:27,stefanberger,unfork_merge,"debian: Do not remove swtpm_cuse.8 via clean file

swtpm_cuse.8 is not generated anymore but its a static file now
that must not be removed anymore via the debian/clean file.

Resolves: https://github.com/stefanberger/swtpm/issues/751
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9772461f88285f5433e2ea1315a3f95531c5022d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-19T12:47:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-19T12:52:27Z""}}"
752,OpenPR,2022-09-19 12:54:02,stefanberger,unfork_merge,,
752,CrossReferenced,2022-09-19 12:54:23,stefanberger,unfork_merge,swtpm_cuse.8 does not exist and cannot be created,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/751"", ""is_pull_request"": false}}"
752,IssueComment,2022-09-19 13:33:52,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4081](https://coveralls.io/builds/52576780)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.964%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/52576780/badge)](https://coveralls.io/builds/52576780) |
| :-- | --: |
| Change from base [Build 4071](https://coveralls.io/builds/52346234): |  0.0% |
| Covered Lines: | 6312 |
| Relevant Lines: | 8420 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1251029001"", ""author_association"": ""NONE""}"
752,MergePR,2022-09-19 14:00:47,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7413953258"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/34886d2841f1f3e7753a4e040fda41e2da3b9929""}"
752,DeleteBranch,2022-09-22 19:26:00,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7442375785"", ""commit_url"": null}"
754,SubmitCommit,2022-09-21 19:41:14,stefanberger,unfork_merge,"swtpm,man: Clarify that --terminate works only for TCP data channel

The --terminate option is only for the TCP data channel.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""ff1393cbfad8ef24786344186941c37673613c9c"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-21T19:39:31Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-21T19:41:14Z""}}"
754,OpenPR,2022-09-21 19:41:35,stefanberger,unfork_merge,,
754,CrossReferenced,2022-09-21 19:43:57,stefanberger,unfork_merge,swtpm doesn't exit on connection close when started with clientfd,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/753"", ""is_pull_request"": false}}"
754,MergePR,2022-09-21 21:20:19,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7434378950"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/448f6326d71083f4fac74b9b4671dd392fd00f32""}"
755,SubmitCommit,2022-09-22 00:16:18,stefanberger,unfork_merge,"swtpm: Add missing '%' to %08x

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""91cabcc3c6e9b6dd7186665a5e9120a2bafae448"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T00:09:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T00:16:18Z""}}"
755,OpenPR,2022-09-22 00:26:47,stefanberger,unfork_merge,,
755,Revise,2022-09-22 12:23:02,stefanberger,unfork_merge,"swtpm: Also send TPM2_Shutdown when swtpm terminates by signal

Also send TPM2_Shutdown when swtpm is terminated by a signal or due to
lost connection (--terminate option). Previously supported reasons for
sending the TPM2_Shutdown were primarily related to commands sent via
the command channel.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""ef6ff5874d534980c0dbf19bf036af1ae040eb88"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T00:11:12Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T12:23:02Z""}}"
755,Revise,2022-09-22 12:23:20,stefanberger,unfork_merge,"swtpm: Set tpm_running = false after TPMLIB_Terminate() on CMD_SHUTDOWN

Set tpm_running = false after TPMLIB_Terminate() call on CMD_SHUTDOWN
to prevent a call to tpmlib_maybe_send_tpm2_shutdown() at the exit
of the mainloop.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""b7760b312c8b4a44ebef562bd78d3d270162d1c0"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T12:17:15Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T12:23:20Z""}}"
755,HeadRefForcePushed,2022-09-22 12:23:33,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7439095010"", ""commit_url"": null}"
755,MergePR,2022-09-22 13:52:10,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7439860439"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/185832c8d4be95fa9305279240ca33b7403cfc91""}"
756,SubmitCommit,2022-09-22 15:03:48,stefanberger,unfork_merge,"swtpm: Implement terminate parameter for ctrl channel loss

Implement support for the terminate parameter for the control channel
option so that swtpm terminates once the control channel connection is
lost. The primary use case is QEMU that holds the control channel
permanently.

Resolves: https://github.com/stefanberger/swtpm/issues/753
Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""d321215ccece7a8db27369f93f05648e1c6431c8"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T12:47:49Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T15:03:48Z""}}"
756,SubmitCommit,2022-09-22 15:04:14,stefanberger,unfork_merge,"swtpm: Extend capabilities JSON and show ctrl-opt-terminate

Extend the capabilities JSON and show the support for the terminate
parameter of the --ctrl option.

Adjust test cases.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""78d612307e5d7c6deef73369d31b08e30e78c19f"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T13:35:59Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T15:04:14Z""}}"
756,SubmitCommit,2022-09-22 15:04:14,stefanberger,unfork_merge,"tests: Use SOCK_STREAM for CMD_SET_DATAFD socketpair

Switch to SOCK_STREAM for the CMD_SET_DATAFD socketpair where the one
end is passed to swtpm to test that this type of socket will cause
automatic termination of swtpm when the connection is lost. This is also
the socket type that QEMU uses.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9d468947935437a84436d0c3c8c6e8a37550b345"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T14:28:21Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T15:04:14Z""}}"
756,OpenPR,2022-09-22 15:08:17,stefanberger,unfork_merge,,
756,CrossReferenced,2022-09-22 15:09:24,stefanberger,unfork_merge,swtpm doesn't exit on connection close when started with clientfd,"{""reference"": {""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/753"", ""is_pull_request"": false}}"
756,IssueComment,2022-09-22 15:39:27,DaanDeMeyer,unfork_merge,Thank you! This looks like exactly what I need.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1255209638"", ""author_association"": ""NONE""}"
756,Revise,2022-09-22 15:45:41,stefanberger,unfork_merge,"tests: Test automatic termination upon loss of ctrl channel connection

Extend the test_ctrlchannel3 to test for automatic termination of swtpm
upon loss of control channel connection.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""391785906c72298e2040fb004a5025ece52218bb"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T15:01:26Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T15:45:41Z""}}"
756,HeadRefForcePushed,2022-09-22 15:47:11,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7440910457"", ""commit_url"": null}"
756,Revise,2022-09-22 15:51:43,stefanberger,unfork_merge,"tests: Replicate test_ctrlchannel3 for TPM 2 to test_tpm2_ctrlchannel3

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""9e050dbbf3d604ac74d5908e9b1fed69de522868"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T15:33:58Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-22T15:51:43Z""}}"
756,HeadRefForcePushed,2022-09-22 15:51:50,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7440947636"", ""commit_url"": null}"
756,IssueComment,2022-09-22 17:09:22,stefanberger,unfork_merge,@DaanDeMeyer  Can you test it?,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1255313017"", ""author_association"": ""OWNER""}"
756,IssueComment,2022-09-22 17:11:19,DaanDeMeyer,unfork_merge,Will do,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1255315097"", ""author_association"": ""NONE""}"
756,IssueComment,2022-09-22 17:23:02,DaanDeMeyer,unfork_merge,Works perfectly!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1255327312"", ""author_association"": ""NONE""}"
756,MergePR,2022-09-22 17:27:38,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7441622157"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/aa92bbf61597e9149aa4d98e2c82c0d2ee38ad71""}"
756,DeleteBranch,2022-09-22 17:27:41,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7441622420"", ""commit_url"": null}"
756,IssueCommentSupplement,2022-09-22 17:31:00,stefanberger,unfork_merge,thanks for testing,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1255336122"", ""author_association"": ""OWNER""}"
757,OpenPR,2022-09-26 20:18:07,stefanberger,unfork_merge,,
757,IssueComment,2022-09-26 20:59:08,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4097](https://coveralls.io/builds/52791433)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.979%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/52791433/badge)](https://coveralls.io/builds/52791433) |
| :-- | --: |
| Change from base [Build 4093](https://coveralls.io/builds/52716331): |  0.0% |
| Covered Lines: | 6323 |
| Relevant Lines: | 8433 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1258625401"", ""author_association"": ""NONE""}"
757,RenameTitle,2022-09-27 11:22:27,stefanberger,unfork_merge,,"{""rename"": {""from"": ""CHANGES: Add more documentation for changes in 0.8.0"", ""to"": ""CHANGES: Add documentation for changes in 0.8.0""}, ""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7467541550""}"
757,Revise,2022-09-27 11:23:19,stefanberger,unfork_merge,"CHANGES: Add documentation for changes in 0.8.0

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""958bfe747ba4df6bf48521cde04e2c754de97f37"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-26T19:48:35Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-27T11:23:19Z""}}"
757,HeadRefForcePushed,2022-09-27 11:23:33,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7467551656"", ""commit_url"": null}"
757,MergePR,2022-09-29 11:36:33,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7485894249"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/8cbb6dae185fef1e25c115c989210c2704a438c0""}"
757,DeleteBranch,2022-09-29 12:10:01,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7486142169"", ""commit_url"": null}"
759,OpenPR,2022-09-30 14:12:44,stefanberger,unfork_merge,,
759,Revise,2022-09-30 14:13:05,stefanberger,unfork_merge,"swtpm: Fix memory leak in case realloc fails

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""7fce431322dea1ad235e3e66359637d3a63b23c1"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-30T14:13:05Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-30T14:13:05Z""}}"
759,HeadRefForcePushed,2022-09-30 14:13:23,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7495895864"", ""commit_url"": null}"
759,MergePR,2022-09-30 15:06:13,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7496335102"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/c94a1c4cbdae46f98f1d35b01195c45e71ea1724""}"
760,SubmitCommit,2022-09-30 16:30:11,stefanberger,unfork_merge,"swtpm: Return TPM_FAIL if SWTPM_NVRAM_DecrytpData is called without key

Return TPM_FAIL if SWTPM_NVRAM_DecryptData() is called without a key or
if an unhandle type of encryption mode is encountered. Previously this
function would return no error but also would not do any decryption if
no key was provided. Consequently, it would then also not return a byte
array with decrypted data which in turn could led to potential NULL
pointer accesses in subsequent calls. However, all current callers check
whether they have a valid key before they call this function. So the
change is primarily done for static analyzers, such as gcc -fanalyzer,
to ease code analysis.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""6ab294ebff07ef2624c42a1164f68dffac89ce8d"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-30T16:17:00Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-09-30T16:30:11Z""}}"
760,OpenPR,2022-09-30 16:31:08,stefanberger,unfork_merge,,
760,MergePR,2022-09-30 17:12:06,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7497213963"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/7d79ecd694db05f1592ce86a42fb908e9df50ae0""}"
762,SubmitCommit,2022-10-05 00:22:37,stefanberger,unfork_merge,"swtpm: Add another exit label to avoid gcc -fanalyzer false positive

Move existing exit label before the return statement and add another
label that includes the free(filebuffer). This avoids a false positive
by 'gcc -fanalyzer' that seems to think that free(filebuffer)
would double-free filebuffer after filebuffer = realloc(tmp, ..)
failure.

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""0438602cb68dd24a5697320df8f243b214eecfde"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-10-05T00:22:34Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-10-05T00:22:37Z""}}"
762,OpenPR,2022-10-05 00:29:12,stefanberger,unfork_merge,,
762,MergePR,2022-10-05 11:37:16,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7524419868"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/87ce53ffc4f1254313ba42cbf5637af4d947f5f7""}"
765,OpenPR,2022-10-27 15:39:14,rosslagerwall,fork_merge,,
765,IssueComment,2022-10-27 16:19:09,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 4130](https://coveralls.io/builds/53707565)

* **4** of **4**   **(100.0%)**  changed or added relevant lines in **1** file are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage increased (+**0.009%**) to **74.976%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/53707565/badge)](https://coveralls.io/builds/53707565) |
| :-- | --: |
| Change from base [Build 4118](https://coveralls.io/builds/53283965): |  0.009% |
| Covered Lines: | 6325 |
| Relevant Lines: | 8436 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1293771607"", ""author_association"": ""NONE""}"
765,ReviewComment,2022-10-27 17:02:06,stefanberger,fork_merge,,"{""author_association"": ""OWNER"", ""html_url"": ""https://github.com/stefanberger/swtpm/pull/765#pullrequestreview-1158683587""}"
765,Revise,2022-10-28 16:09:22,rosslagerwall,fork_merge,"swtpm_setup: Configure swtpm to log to stdout/err if needed

If swtpm_setup is configured with a log file, it launches swtpm
configured with the same log file. If not, swtpm_setup logs will go to
stdout/stderr and it should configure swtpm to do the same.

Signed-off-by: Ross Lagerwall <ross.lagerwall@citrix.com>","{""sha"": ""f7723770b5552266cf3946e7513545cd81734c63"", ""author"": {""name"": ""Ross Lagerwall"", ""email"": ""ross.lagerwall@citrix.com"", ""date"": ""2022-10-27T15:30:11Z""}, ""committer"": {""name"": ""Ross Lagerwall"", ""email"": ""ross.lagerwall@citrix.com"", ""date"": ""2022-10-28T16:09:22Z""}}"
765,HeadRefForcePushed,2022-10-28 16:15:09,rosslagerwall,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7693029105"", ""commit_url"": null}"
765,IssueComment,2022-10-28 16:16:16,rosslagerwall,fork_merge,I don't have a system with glib 2.74 to test this on but I think it should work now.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1295186974"", ""author_association"": ""CONTRIBUTOR""}"
765,IssueComment,2022-11-01 21:15:04,stefanberger,fork_merge,"> I don't have a system with glib 2.74 to test this on but I think it should work now.

Why are you submitting patches that you haven't even tried out yourself?","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1299184916"", ""author_association"": ""OWNER""}"
765,IssueComment,2022-11-01 22:01:43,stefanberger,fork_merge,I tried it on Fedora Rawhide now.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1299284050"", ""author_association"": ""OWNER""}"
765,MergePR,2022-11-01 22:01:47,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7717522531"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/a2abd3b67def3d488c59d68ec430f857e8f441a7""}"
765,IssueCommentSupplement,2022-11-01 22:01:54,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1299284234"", ""author_association"": ""OWNER""}"
765,IssueCommentSupplement,2022-11-02 14:33:35,rosslagerwall,fork_merge,"> Why are you submitting patches that you haven't even tried out yourself?

I have built the patch and tested that it does the right thing, just not against glib 2.74 as I didn't have a distro with that version available. The `G_SPAWN_CHILD_INHERITS_{STDOUT,STDERR}` flag is implied by the default (no flag) behaviour anyway so the behaviour should be the same regardless.

Anyway, thanks for testing it on Fedora Rawhide.","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1300541070"", ""author_association"": ""CONTRIBUTOR""}"
766,SubmitCommit,2022-11-02 14:35:16,stefanberger,unfork_merge,"tests: Pass --verify-profile=medium to certtool if supported

certtool emits the following message if --verify-profile is not
passed:

Note that no verification profile was selected. In the future the medium profile will be enabled by default.
Use --verify-profile low to apply the default verification of NORMAL priority string.

Pass the --verify-profile option if certtool supports it (since ~3.6.12).

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3100f708e2e19953df6576fd4e4e6b179550ed08"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-11-02T14:21:52Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-11-02T14:35:16Z""}}"
766,OpenPR,2022-11-02 14:36:00,stefanberger,unfork_merge,,
766,MergePR,2022-11-02 15:14:20,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7724416387"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/22e975dc0587964e30070950d97a3d59e5e2fb89""}"
767,SubmitCommit,2022-11-10 16:44:33,stefanberger,unfork_merge,"CHANGES: Add more documentation for changes in 0.8.0

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2a90929ce5d7527e92a710188571df47aa939b25"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-11-10T16:43:57Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-11-10T16:44:33Z""}}"
767,SubmitCommit,2022-11-10 16:44:33,stefanberger,unfork_merge,"debian/rpm: Adjust changelog for 0.8.0 release

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""2a00eb50d9f2c7c12f84bfee269e04b6588ac4cd"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-11-10T16:39:39Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-11-10T16:44:33Z""}}"
767,OpenPR,2022-11-10 16:45:26,stefanberger,unfork_merge,,
767,IssueComment,2022-11-10 17:23:40,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4140](https://coveralls.io/builds/54108432)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.976%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/54108432/badge)](https://coveralls.io/builds/54108432) |
| :-- | --: |
| Change from base [Build 4136](https://coveralls.io/builds/53918038): |  0.0% |
| Covered Lines: | 6325 |
| Relevant Lines: | 8436 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1310634514"", ""author_association"": ""NONE""}"
767,MergePR,2022-11-10 17:24:08,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7785506762"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/2ae7b019370760e17f4f2675195a91ca53950eda""}"
768,SubmitCommit,2022-11-11 09:28:45,zippy2,fork_merge,"swtpm.spec: Reflect minimal gnutls version

The configure script requires at least gnutls-3.4.0 but this is
not reflected in the spec file.

Signed-off-by: Michal Privoznik <mprivozn@redhat.com>","{""sha"": ""a4465fb1fbac2aaedbbbb8e0f4cc3f7aac9af195"", ""author"": {""name"": ""Michal Privoznik"", ""email"": ""mprivozn@redhat.com"", ""date"": ""2022-11-11T09:28:45Z""}, ""committer"": {""name"": ""Michal Privoznik"", ""email"": ""mprivozn@redhat.com"", ""date"": ""2022-11-11T09:28:45Z""}}"
768,OpenPR,2022-11-11 10:59:31,zippy2,fork_merge,,
768,IssueComment,2022-11-11 16:09:12,stefanberger,fork_merge,Thanks.,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1311897084"", ""author_association"": ""OWNER""}"
768,MergePR,2022-11-11 16:58:29,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7793669579"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/dcd1b575e67811570a27661b8ff53ef5316b9ccf""}"
769,SubmitCommit,2022-11-11 16:13:33,stefanberger,unfork_merge,"build-sys: Bump up version to 0.9.0 at beginning of dev cycle

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""3f8c471f9fd48c0ab1fed526df4fbeb53f606666"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-11-11T16:13:33Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-11-11T16:13:33Z""}}"
769,OpenPR,2022-11-11 16:14:04,stefanberger,unfork_merge,,
769,IssueComment,2022-11-11 16:52:41,coveralls,unfork_merge,"## Pull Request Test Coverage Report for [Build 4144](https://coveralls.io/builds/54142320)

* **0** of **0**   changed or added relevant lines in **0** files are covered.
* No unchanged relevant lines lost coverage.
* Overall coverage remained the same at **74.976%**

---



|  Totals | [![Coverage Status](https://coveralls.io/builds/54142320/badge)](https://coveralls.io/builds/54142320) |
| :-- | --: |
| Change from base [Build 4143](https://coveralls.io/builds/54139336): |  0.0% |
| Covered Lines: | 6325 |
| Relevant Lines: | 8436 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1311942017"", ""author_association"": ""NONE""}"
769,MergePR,2022-11-11 16:58:12,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7793667542"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/6709a4ee545bb07cfe320420204ef8a865b14b15""}"
772,SubmitCommit,2022-12-02 14:22:04,zippy2,fork_merge,"swtpm: Restore logging to stderr on log open failure

When opening a log file fails (--log file=/some/path) for
whatever reason the @logfd variable is left set to -1 (the retval
of open()). And due to how _logprintf() is written, the
subsequent attempt to log this failure (logprintf()) returns too
early not printing the useful error.

Therefore, restore the original (CONSOLE_LOGGING) value.

Signed-off-by: Michal Privoznik <mprivozn@redhat.com>","{""sha"": ""a84ae1f2d0e578e68ec9fc75e47f58127b465492"", ""author"": {""name"": ""Michal Privoznik"", ""email"": ""mprivozn@redhat.com"", ""date"": ""2022-12-02T14:22:04Z""}, ""committer"": {""name"": ""Michal Privoznik"", ""email"": ""mprivozn@redhat.com"", ""date"": ""2022-12-02T14:22:04Z""}}"
772,OpenPR,2022-12-02 14:28:37,zippy2,fork_merge,,
772,IssueComment,2022-12-02 14:42:04,stefanberger,fork_merge,Thank you!,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1335337536"", ""author_association"": ""OWNER""}"
772,IssueComment,2022-12-02 16:03:07,coveralls,fork_merge,"## Pull Request Test Coverage Report for [Build 4161](https://coveralls.io/builds/54792148)

* **1** of **2**   **(50.0%)**  changed or added relevant lines in **1** file are covered.
* **1** unchanged line in **1** file lost coverage.
* Overall coverage decreased (**-0.02%**) to **74.959%**

---

|  Changes Missing Coverage | Covered Lines | Changed/Added Lines | % |
| :-----|--------------|--------|---: |
| [src/swtpm/logging.c](https://coveralls.io/builds/54792148/source?filename=src%2Fswtpm%2Flogging.c#L95) | 1 | 2 | 50.0%
<!-- | **Total:** | **1** | **2** | **50.0%** | -->

|  Files with Coverage Reduction | New Missed Lines | % |
| :-----|--------------|--: |
| [src/swtpm/logging.c](https://coveralls.io/builds/54792148/source?filename=src%2Fswtpm%2Flogging.c#L96) | 1 | 85.71% |
<!-- | **Total:** | **1** |  | -->

|  Totals | [![Coverage Status](https://coveralls.io/builds/54792148/badge)](https://coveralls.io/builds/54792148) |
| :-- | --: |
| Change from base [Build 4149](https://coveralls.io/builds/54364146): |  -0.02% |
| Covered Lines: | 6325 |
| Relevant Lines: | 8438 |

---
##### ????  - [Coveralls](https://coveralls.io)
","{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/comments/1335471641"", ""author_association"": ""NONE""}"
772,MergePR,2022-12-02 16:08:46,stefanberger,fork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7941975866"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/c6b78f49f5515f56f675557263776bcd86000fb5""}"
774,SubmitCommit,2022-12-08 19:08:03,stefanberger,unfork_merge,"CHANGES: Add documentation for changes in 0.5.5

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""a0c59d6003aceb16f7b8f1855f9806d52d467cbd"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-12-08T19:08:03Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-12-08T19:08:03Z""}}"
774,SubmitCommit,2022-12-08 19:13:20,stefanberger,unfork_merge,"debian/rpm: Adjust changelog for 0.5.5 release

Signed-off-by: Stefan Berger <stefanb@linux.ibm.com>","{""sha"": ""eb79a9f44c77c22b432257a4d14c4cae43ae9390"", ""author"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-12-08T19:13:20Z""}, ""committer"": {""name"": ""Stefan Berger"", ""email"": ""stefanb@linux.ibm.com"", ""date"": ""2022-12-08T19:13:20Z""}}"
774,OpenPR,2022-12-08 19:15:07,stefanberger,unfork_merge,,
774,MergePR,2022-12-09 01:27:58,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7994401975"", ""commit_url"": ""https://api.github.com/repos/stefanberger/swtpm/commits/73364ecb0fa33e45923921ca0e08ccf9e247fa75""}"
774,DeleteBranch,2022-12-09 01:43:33,stefanberger,unfork_merge,,"{""url"": ""https://api.github.com/repos/stefanberger/swtpm/issues/events/7994468035"", ""commit_url"": null}"
