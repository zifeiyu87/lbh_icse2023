case:concept:name,concept:name,time:timestamp,people,scene,message,description
167,SubmitCommit,2021-01-28 09:55:57,notroj,fork_close,"Attempt building slapd container from CentOS base image pulled from quay.io
to work around the docker hub pull rate limiting.","{""sha"": ""13ae2eeade6cd9cd2a55fbb383bf7f5d7c8e4d3b"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-01-28T09:55:57Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-01-28T09:55:57Z""}}"
167,OpenPR,2021-01-28 09:57:37,notroj,fork_close,,
167,ClosePR,2021-01-29 12:43:10,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4265978023"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/bdd21c82ea69f8334b7a7b2cfcc28bc5fb3740d9""}"
168,SubmitCommit,2021-02-05 08:46:47,rpluem,fork_close,"Do not allow to set empty bind passwords to be set via AuthLDAPBindPassword

Binds with empty passwords always succeed, but in case the password of the
user was not empty subsequent LDAP operations fail.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1885939 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 3e4c918fba9fe8306eed1fcbdc19699af30e23b8)","{""sha"": ""b3219a5d601f589846078fb7b93b88a197f2a80b"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-01-27T08:01:06Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-02-05T08:46:47Z""}}"
168,SubmitCommit,2021-02-05 08:58:00,rpluem,fork_close,"Before doing any bind check that the provided username is not NULL and that the
password is neither NULL nor empty.

Binds with empty passwords always succeed, but in case the password of the
user was not empty subsequent LDAP operations fail.
This causes authentications that use user supplied credentials
(AuthLDAPInitialBindAsUser set to on) to fail with status code 500 instead of
401 if the user supplied an empty password.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1885940 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit ec1d14ccf6d4f8061f3aea0f4d9870f5c445f5c9)","{""sha"": ""625fc1b21450ef4f11c988535152633af5c8dcb3"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-01-27T08:08:56Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-02-05T08:58:00Z""}}"
168,SubmitCommit,2021-02-05 08:59:58,rpluem,fork_close,"* Document r1885939 and r1885940

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1885941 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit e408c5f1af83148c9a7166ab4abfe560674878b1)","{""sha"": ""1f9d8b2d826e9e83ab53dcbe80fb1d3e37cff5e0"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-01-27T08:20:37Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-02-05T08:59:58Z""}}"
168,SubmitCommit,2021-02-05 09:01:15,rpluem,fork_close,"* Add lognumber

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1885945 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit e36c52e0a3133f456a2a2186c2ec1a09a2727bcc)","{""sha"": ""bae02e8bfd997156917ebe79d512cfd561aa7e36"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-01-27T17:07:30Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-02-05T09:01:15Z""}}"
168,OpenPR,2021-02-05 09:03:10,rpluem,fork_close,,
168,ClosePR,2021-03-02 19:41:28,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4397762220"", ""commit_url"": null}"
168,DeleteBranch,2021-03-02 19:41:36,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4397762867"", ""commit_url"": null}"
169,SubmitCommit,2021-02-06 00:58:31,ylavic,fork_close,mod_http2: Fix workers stop synchronization on pchild cleanup.,"{""sha"": ""ff7483ccb018ffb59b2ef0f26f61b5442e47fb30"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-02-06T00:58:31Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-02-06T00:58:31Z""}}"
169,OpenPR,2021-02-06 01:07:56,ylavic,fork_close,,
169,Revise,2021-02-06 10:36:58,ylavic,fork_close,"Comments, cleanups.","{""sha"": ""6e164ec6c1c58d46a6c9171c8f8b2227e1843560"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-02-06T10:36:58Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-02-06T10:36:58Z""}}"
169,ClosePR,2021-02-06 12:17:52,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4299073941"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/42f33b4171aaebc0ab3e62187d12c14a1aebad68""}"
170,SubmitCommit,2021-02-11 09:38:14,rpluem,fork_close,"* If we face a timeout during receiving the response from the backend and if
  we pinged it successfully before don't assume the whole backend has failed.
  Assume that only the request has failed and return a gateway timeout then.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1398307 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 6dd8e07528e30a48a0288c0b4ccb706eed3466fc)","{""sha"": ""53d7873c4df0f2d3dc38aabc059115b3250bdfd5"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2012-10-15T14:38:04Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-02-11T09:38:14Z""}}"
170,SubmitCommit,2021-02-11 09:41:29,DRuggeri,fork_close,"Add failontimeout to allow server admin to mark balancer member in err if IO timeout occurs.

The changes to the other files of r1465839 have been already backported as r1476689.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1465839 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit d31632f33cf0975b0b4b347d22dbc0d67b06268e)","{""sha"": ""4093955efa1770602b6ec1c3d077ee3c7ec99eea"", ""author"": {""name"": ""Daniel Ruggeri"", ""email"": ""druggeri@apache.org"", ""date"": ""2013-04-09T00:18:42Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-02-11T09:41:29Z""}}"
170,SubmitCommit,2021-02-11 10:07:28,jimjag,fork_close,"ping tuning via Yann Ylavic <ylavic.dev@gmail.com>

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1530603 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 6284650f6dbf49625eddb20411348977abdf13db)","{""sha"": ""a2b457241a0ac311c1c1c8f79dec44dfbc932ded"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2013-10-09T13:38:45Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-02-11T10:07:28Z""}}"
170,SubmitCommit,2021-02-11 10:09:53,Christophe Jaillet,fork_close,"Use 'apr_table_setn' instead of 'apr_table_set' when possible in order to save memory.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1578759 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 845a77becadc7f9469579b4a5d65e93f14ae99da)","{""sha"": ""83fb7b1e0385bc62e16c121e599a2f0f80b49371"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2014-03-18T06:51:49Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-02-11T10:09:53Z""}}"
170,SubmitCommit,2021-02-11 10:14:34,ylavic,fork_close,"mod_proxy: axe negative ""ping"" parameter setting and handling.
This used to check for the backend connection readability only (instead of
the full ping/100-continue round-trip), but the case is already handled by
ap_proxy_connect_backend() which is always called.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1729507 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 447582e5f41fce01869948f281b3c17793c3d34a)","{""sha"": ""a350d78e8f84a936fba929545d3cb45e5fb685ca"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2016-02-09T23:38:59Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-02-11T10:14:34Z""}}"
170,OpenPR,2021-02-11 10:16:52,rpluem,fork_close,,
170,ClosePR,2021-03-02 20:04:15,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4397856220"", ""commit_url"": null}"
170,DeleteBranch,2021-03-02 20:04:19,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4397856431"", ""commit_url"": null}"
172,OpenPR,2021-02-24 10:52:33,notroj,fork_close,,
172,Revise,2021-02-24 10:54:09,notroj,fork_close,"* configure.in: Check for CMSG_DATA here, and define HAVE_FDPASSING
  and $ap_has_fdpassing if fd passing is supported.

* modules/generator/config5.m4,
  modules/generator/mod_cgid.c: Drop configure flag for mod_cgid
  fdpassing support, instead enable where possible by default.

* modules/proxy/config.m4: Rely on configure test for CMSG_DATA.

* .travis.yml: Drop specific test for fdpassing.","{""sha"": ""177169ee06893bdaba18bcf0f870f089c92ec48d"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-02-24T10:45:27Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-02-24T10:54:09Z""}}"
172,Revise,2021-02-24 14:45:21,notroj,fork_close,Add back a Travis configuration w/o CMSG_DATA available.,"{""sha"": ""09346dce3492fb2679d7d23c4feee5f036fa6dbc"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-02-24T14:45:21Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-02-24T14:45:21Z""}}"
172,ClosePR,2021-02-25 09:12:07,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4375404074"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/ce017390110ce49ca9eccba8b2eabfc2870b7932""}"
173,SubmitCommit,2021-02-25 08:49:20,DamianFekete,fork_close,"ab: add flag to make HTTP/1.1 requests

Fixes #65155.","{""sha"": ""ffc783063ab27ff3c12839b3e3e521b7ea73d686"", ""author"": {""name"": ""Andrei Damian-Fekete"", ""email"": ""andrei@tehnica.org"", ""date"": ""2021-02-25T08:49:20Z""}, ""committer"": {""name"": ""Andrei Damian-Fekete"", ""email"": ""andrei@tehnica.org"", ""date"": ""2021-02-25T08:49:20Z""}}"
173,OpenPR,2021-02-25 09:04:24,DamianFekete,fork_close,,
173,ReviewComment,2021-02-25 10:53:55,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/173#pullrequestreview-598437031""}"
173,IssueCommentSupplement,2021-02-25 13:01:36,DamianFekete,fork_close,"Well, no features from HTTP/1.1 are really supported, so this PR doesn't make sense.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/785878327"", ""author_association"": ""NONE""}"
173,ClosePR,2021-02-25 13:01:36,DamianFekete,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4376433555"", ""commit_url"": null}"
174,OpenPR,2021-03-02 17:06:26,notroj,fork_close,,
174,Revise,2021-03-03 10:50:07,notroj,fork_close,Slightly simplify balancer_handler logic (no functional change).,"{""sha"": ""21cd2390bd35008bc6bc25f219bf828c18c19b10"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-02T17:05:42Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-03T10:50:07Z""}}"
174,ClosePR,2021-03-03 14:27:41,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4402323913"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/00940b1ea9ab085e6bf9396941aebeec7e2cae33""}"
175,SubmitCommit,2021-03-03 10:35:49,Stefan Eissing,fork_close,"mod_h2 v1.15.17 changes for the apache 2.4.x release branch.

 * Log requests and sent the configured error response in case of early detected
   errors like too many or too long headers. [Ruediger Pluem]
 * added test for buffering across a mod_http2+mod_proxy_http2 connection
 * added TRACE2 logging to show buffering flag when writing task output
 * new option 'H2OutputBuffering on/off' which controls the buffering of stream output.
   The default is on, which is the behaviour of older mod-h2 versions. When off, all
   bytes are made available immediately to the main connection for sending them
   out to the client. This fixes interop issues with certain flavours of gRPC, see
   als #207.","{""sha"": ""b21f71adb8f4704f5f810f8ae114134102899fa3"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-03T10:35:49Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-03T10:35:49Z""}}"
175,OpenPR,2021-03-03 10:38:23,icing,fork_close,,
175,ClosePR,2021-06-02 13:16:41,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4831652206"", ""commit_url"": null}"
175,DeleteBranch,2021-06-11 10:49:35,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4877245151"", ""commit_url"": null}"
176,OpenPR,2021-03-03 17:53:33,notroj,fork_close,,
176,Revise,2021-03-19 16:34:08,notroj,fork_close,"Merge r1826206, r1880678, r1880743, r1880924 from trunk:

* modules/lua/config.m4 (CHECK_LUA): Support Debian-style
  pkg-config naming for lua.

Support building against Lua 5.4 by adjusting to the 3-arg form of
lua_resume().

* modules/lua/config.m4 (CHECK_LUA): Check for lua5.4 paths.

* modules/lua/mod_lua.c (lua_output_filter_handle,
  lua_input_filter_handle): Check that exactly one item is on the
  stack as indicated by lua_resume().

improve Lua 5.4 handling

* Correctly define lua_resume for Lua <= 5.1

Submitted by: Lubos Uhliarik <luhliari redhat.com>, jorton, rpluem, gbechis
PR: 64591","{""sha"": ""d94bd009772c67eba6f110088d3352255d10c590"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-03T17:52:24Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-19T16:34:08Z""}}"
176,IssueCommentSupplement,2021-04-19 19:35:53,notroj,fork_close,Merged in a76af5be329c4f0f28b27bbdbb34b9298f2cc26d,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/822731409"", ""author_association"": ""COLLABORATOR""}"
176,ClosePR,2021-04-19 19:35:53,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4614750764"", ""commit_url"": null}"
177,OpenPR,2021-03-08 13:02:28,notroj,fork_close,,
177,ReviewRejected,2021-03-09 21:44:19,michael-o,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/177#pullrequestreview-608102667""}"
177,ReviewRejected,2021-03-11 18:38:30,michael-o,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/177#pullrequestreview-610101434""}"
177,Revise,2021-03-17 10:09:58,notroj,fork_close,"Add SSL_{CLIENT,SERVER}_B64CERT to export the base64url(DER) of the
server/client cert.

PR: 65169

Switch to plain base64 encoding.

Add +ExportBase64CertData flag for SSLOptions to enable export of
SSL_{CLIENT,SERVER}_B64CERT.

Use plain base64 for the SSL_{SERVER,CLIENT}_B64CERT encoding.","{""sha"": ""a405aa855c17224080f1adaba2b1cc2a52860481"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-08T13:01:17Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-17T10:09:58Z""}}"
177,Revise,2021-03-17 11:01:12,notroj,fork_close,Add SSL_CLIENT_B64CERT_CHAIN_* support.,"{""sha"": ""bb78b74ebb21a64c80eac424f1b9887621041cc2"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-17T11:01:12Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-17T11:01:12Z""}}"
177,Revise,2021-03-17 11:11:34,notroj,fork_close,Fix length comparison.,"{""sha"": ""964dd962e306c882edb67819f5488e531d07e5d8"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-17T11:11:34Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-17T11:11:34Z""}}"
177,ReviewRejected,2021-03-17 12:14:41,michael-o,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/177#pullrequestreview-614232317""}"
177,Revise,2021-03-18 09:02:13,notroj,fork_close,"Fix variable offset, fix PEM/non-PEM pass-through.","{""sha"": ""40d6c4e4b0c7fb9c8d2e483d20711d0bed04966e"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-18T09:02:13Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-03-18T09:02:13Z""}}"
177,ClosePR,2021-03-19 15:15:50,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4482822783"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/1c76cd30813ac630b3ced614247bb96fa24df964""}"
178,SubmitCommit,2020-08-11 12:09:44,jimjag,fork_close,"Merge r1879878 from trunk:

Avoid NULL pointer dereferences for empty environment variable values
Submitted by: rpluem
Reviewed by: jailletc36, covener, gbechis, jim


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880773 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b203c575a360a734e3f9739c4fc65e2e8aec9e1a"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-08-11T12:09:44Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-08-11T12:09:44Z""}}"
178,SubmitCommit,2020-08-15 13:51:15,Lucien Gentis,fork_close,"fr doc XML files updates.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880876 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8334a1726cecd1f498e4167a1a48bc8b34571a58"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-08-15T13:51:15Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-08-15T13:51:15Z""}}"
178,SubmitCommit,2020-08-15 13:52:18,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880877 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""9cd22b3c1ecaafcf02abc6613b9ac79d962cf360"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-08-15T13:52:18Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-08-15T13:52:18Z""}}"
178,SubmitCommit,2020-08-16 14:17:11,Christophe Jaillet,fork_close,"Propose.
(no vote from me, I don't know how to test)

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880899 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""372126fbdd841f655294f7e2408051c189a75488"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-08-16T14:17:11Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-08-16T14:17:11Z""}}"
178,SubmitCommit,2020-08-17 11:57:14,rpluem,fork_close,"* Vote and promote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880926 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4b85745c7c85342d1b638725e42c4481f297ef99"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-17T11:57:14Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-17T11:57:14Z""}}"
178,SubmitCommit,2020-08-17 12:53:28,notroj,fork_close,"Add another rev for mod_ssl TLSv1.3 buffering fix, and reset vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880928 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""48b507c32e1dc4be7dfd577c0e04c777fd468ec6"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-08-17T12:53:28Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-08-17T12:53:28Z""}}"
178,SubmitCommit,2020-08-17 13:37:54,rpluem,fork_close,"* Vote and promote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880929 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ca449350371e265f7cc1fa973291867c116a7b99"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-17T13:37:54Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-17T13:37:54Z""}}"
178,SubmitCommit,2020-08-17 15:31:16,rpluem,fork_close,"* Vote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880935 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fd950a2febcf0b03b844976a53a7c488329b1266"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-17T15:31:16Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-17T15:31:16Z""}}"
178,SubmitCommit,2020-08-18 10:13:35,Rainer Jung,fork_close,"Document limitations for private key format in
SSLProxyMachineCertificateFile and
SSLProxyMachineCertificatePath. PR 63935.

Backport of r1880958 from trunk.

[skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880960 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b77b4fe595813180567a99569f066e9f9ada2d5f"", ""author"": {""name"": ""Rainer Jung"", ""email"": ""rjung@apache.org"", ""date"": ""2020-08-18T10:13:35Z""}, ""committer"": {""name"": ""Rainer Jung"", ""email"": ""rjung@apache.org"", ""date"": ""2020-08-18T10:13:35Z""}}"
178,SubmitCommit,2020-08-18 10:14:04,Rainer Jung,fork_close,"xforms. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1880961 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""af28585a00c1bfbe20c31e500e0d63b62bb0e37b"", ""author"": {""name"": ""Rainer Jung"", ""email"": ""rjung@apache.org"", ""date"": ""2020-08-18T10:14:04Z""}, ""committer"": {""name"": ""Rainer Jung"", ""email"": ""rjung@apache.org"", ""date"": ""2020-08-18T10:14:04Z""}}"
178,SubmitCommit,2020-08-24 15:39:56,rpluem,fork_close,"Merge r1859213 from trunk:

* Only do one retry to be more in line with the other modules.

Note: mod_proxy_http2 is still experimental and thus CTR even for backports.

Reviewed by: rpluem


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881147 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""060dd8c1f90f81f00d736ccbf936794f5c8ff941"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-24T15:39:56Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-24T15:39:56Z""}}"
178,SubmitCommit,2020-08-28 06:40:15,rpluem,fork_close,"* Add proposal

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881268 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6eb0abe37e393d5189ec6b2d4db6122ef676ec2d"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-28T06:40:15Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-28T06:40:15Z""}}"
178,SubmitCommit,2020-08-29 14:41:22,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881300 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8ce7ed6ce4e718d945154bde977a40ee3353b974"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-08-29T14:41:22Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-08-29T14:41:22Z""}}"
178,SubmitCommit,2020-08-29 14:42:31,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881301 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8f7fdbd7d1cf4b4e977ee2b41631bc6e7ebc9821"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-08-29T14:42:31Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-08-29T14:42:31Z""}}"
178,SubmitCommit,2020-08-30 20:48:58,Christophe Jaillet,fork_close,"Propose

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881333 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""481e43fca280a10617677b80062bcee61d928efc"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-08-30T20:48:58Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-08-30T20:48:58Z""}}"
178,SubmitCommit,2020-08-31 06:47:12,rpluem,fork_close,"* Vote

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881337 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a2533dbc0ba15e0f59cc4d14dfffaa87190c5701"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-31T06:47:12Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-08-31T06:47:12Z""}}"
178,SubmitCommit,2020-09-09 15:02:25,Giovanni Bechis,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881592 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b0bcd449b778827664b8c0f7f61516cc7bcf2619"", ""author"": {""name"": ""Giovanni Bechis"", ""email"": ""gbechis@apache.org"", ""date"": ""2020-09-09T15:02:25Z""}, ""committer"": {""name"": ""Giovanni Bechis"", ""email"": ""gbechis@apache.org"", ""date"": ""2020-09-09T15:02:25Z""}}"
178,SubmitCommit,2020-09-14 11:00:02,notroj,fork_close,"Vote. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881708 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ce2f71c63177084fa92968ac022dee948fbbdbd1"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-09-14T11:00:02Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-09-14T11:00:02Z""}}"
178,SubmitCommit,2020-09-14 13:16:54,notroj,fork_close,"Merge r1870095, r1870097, r1880927 from trunk:

Buffer HTTP request bodies for TLSv1.3 PHA in the same way as for
TLSv<1.3 renegotiation.

* modules/ssl/ssl_engine_kernel.c (fill_reneg_buffer): Factor
  out...
  (ssl_hook_Access_classic): ... from here.
  (ssl_hook_Access_modern): Use it here too.

Add logno.

* modules/ssl/ssl_engine_kernel.c (ssl_hook_Access_modern): Move
  fill_reneg_buffer() call down after r->connection->master
  check.

Submitted by: jorton
Reviewed by: jorton, rpluem, gbechis


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881713 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b173dcafbf1cd9e5e227f428af82f71844721012"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-09-14T13:16:54Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-09-14T13:16:54Z""}}"
178,SubmitCommit,2020-09-14 13:20:06,notroj,fork_close,"1xDone, 2xVote, +[skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881714 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b8b7427312d41fb455d47e79b39d3a7bf9b381aa"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-09-14T13:20:06Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-09-14T13:20:06Z""}}"
178,SubmitCommit,2020-09-15 07:15:38,rpluem,fork_close,"* Promote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881727 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e006a6d8c163e9b38d0574095b5d5ec02b603b60"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-09-15T07:15:38Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-09-15T07:15:38Z""}}"
178,SubmitCommit,2020-09-15 07:19:13,rpluem,fork_close,"Merge r1879822, r1879831, r1879840 from trunk:

Add a new way to document changes

* Makefile.in: Define the update-changes target to merge the change files
  from the changes directory to the top of the CHANGES file and remove
  them afterwards. If a Subversion binary was found during configure try
  to svn rm them otherwise just delete them.

* configure.in: Search for the Subversion binary.

* acinclude.m4: Set the corresponding Makefile variable for the Subversion
  binary.

* README.CHANGES: New file to document the new approach.


Can we have mercy with people working on case-preserving file systems?


Consider case insensitive filessystems

Consider case insensitive filessystems and thus choose a new non conflicting
name for the directory to store CHANGES entries.

Reviewed by: rpluem, jim, jorton


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881728 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ed119f2f8f0b8c2aaac1a349ccab43a814d0450b"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-09-15T07:19:13Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-09-15T07:19:13Z""}}"
178,SubmitCommit,2020-09-15 08:50:59,notroj,fork_close,"Merge r1880602, r1881396 from trunk: [under CTR for Travis changes]

Fail for more abort() errors in error_log.
Fail if a core dump is produced, and dump the backtrace if so.
(e.g. during parent or child process shutdown, core dumps will
not show up as test case failures so would not otherwise be caught)

Catch assert() failures.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881735 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e2585c7dc80ff3aefb9a0ee608bb2b3dc4c21490"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-09-15T08:50:59Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-09-15T08:50:59Z""}}"
178,SubmitCommit,2020-09-15 12:44:06,rpluem,fork_close,"* Propose

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1881737 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4b97b0f760b77f319f650a06b2cfa9878b637b21"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-09-15T12:44:06Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-09-15T12:44:06Z""}}"
178,SubmitCommit,2020-09-25 20:53:20,Christophe Jaillet,fork_close,"Propose [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882027 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""582dc89e2aa61c2a0614eaf39c8f436b99207dfb"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-09-25T20:53:20Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-09-25T20:53:20Z""}}"
178,SubmitCommit,2020-09-25 21:06:48,Christophe Jaillet,fork_close,"Merge r1880500, r1880501, r1880509 from trunk

   * Slightly speed-up the execution of the test framework.

Submitted by: jailletc36
Reviewed by: jailletc36, rpluem, jorton
Backported by: jailletc36

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882028 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b428ab04feb1fb44af17640e09fe4fe95e1d7137"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-09-25T21:06:48Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-09-25T21:06:48Z""}}"
178,SubmitCommit,2020-09-25 21:14:33,Christophe Jaillet,fork_close,"Merge r1874011, r1874055, r1874062 from trunk

   * event, worker: avoid UBSan exception calling memcpy(,NULL,0) at startup.

Submitted by: jorton, jailletc36, ylavic
Reviewed by: jailletc36, rpluem, jorton
Backported by: jailletc36

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882029 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f3977b305dd8beb35378124c3aba0b124da6baa8"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-09-25T21:14:33Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-09-25T21:14:33Z""}}"
178,SubmitCommit,2020-09-25 21:16:09,Christophe Jaillet,fork_close,"Remove backported entries [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882030 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e442284e61e3e112cd5742ea94420001e20554d0"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-09-25T21:16:09Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-09-25T21:16:09Z""}}"
178,SubmitCommit,2020-10-02 16:04:28,Christophe Jaillet,fork_close,"Document that HTTPS and SSL_TLS_SNI environment variables are always defined, regardless of 'SSLOptions StdEnvVars' .

Fix some small style issues to improve syntax hightlight.

PR 64783.
r1882199 on trunk [skip ci]

While at it synch with trunk:
   - fix two typos
   - remove some trailing space
   - do not use <em> tags for 'on|off' parameters

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882201 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c2d85254b959eab3578168fbe92a570ff270ec31"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-10-02T16:04:28Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-10-02T16:04:28Z""}}"
178,SubmitCommit,2020-10-02 16:25:02,Christophe Jaillet,fork_close,"Fix a typo.
One should always ./build.sh before commiting changes :-(

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882202 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5d1fcad001214a74b4307b9ab424b645128248c1"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-10-02T16:25:02Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-10-02T16:25:02Z""}}"
178,SubmitCommit,2020-10-02 16:25:55,Christophe Jaillet,fork_close,"xforms

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882203 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cd6210805254a7e8fdf2b0aa8e265ce27a150deb"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-10-02T16:25:55Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-10-02T16:25:55Z""}}"
178,SubmitCommit,2020-10-03 13:43:47,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882218 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a864292c3bfa8035d9dfe65cdf608af766e57813"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-03T13:43:47Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-03T13:43:47Z""}}"
178,SubmitCommit,2020-10-03 13:46:23,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882219 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8919f19dd567fd9f9070fa22342811635b1fe971"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-03T13:46:23Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-03T13:46:23Z""}}"
178,SubmitCommit,2020-10-03 13:47:25,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882220 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c9e6def9401ff8bab8bc9a9b10c5c3cff816b5bd"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-03T13:47:25Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-03T13:47:25Z""}}"
178,SubmitCommit,2020-10-13 11:08:37,Lucien Gentis,fork_close,"Russian doc - from KOI8-R to UTF-8


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882453 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1f1a9870119ff3aedae01ccf1308e2f8a66a39f0"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:08:37Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:08:37Z""}}"
178,SubmitCommit,2020-10-13 11:20:30,Lucien Gentis,fork_close,"Russian doc - first files added.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882454 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e2ff3d2fd1f52360ac58cf68c4e723e4d4a43bbb"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:20:30Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:20:30Z""}}"
178,SubmitCommit,2020-10-13 11:25:34,Lucien Gentis,fork_close,"Russian doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882455 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5f4e9f92cb1a5c1afa87a13d5d5d893d2ca20613"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:25:34Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:25:34Z""}}"
178,SubmitCommit,2020-10-13 11:26:42,Lucien Gentis,fork_close,"Russian doc - deleting obsolete file.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882456 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""68fd4e14b52161e7f8856bf6beddc53fee3fe7b7"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:26:42Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:26:42Z""}}"
178,SubmitCommit,2020-10-13 11:30:03,Lucien Gentis,fork_close,"Rebuild all doc for russian integration.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882457 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""632e2316f676f7846bea93ce97c4cb85f1b0aa1c"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:30:03Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:30:03Z""}}"
178,SubmitCommit,2020-10-13 11:36:08,Lucien Gentis,fork_close,"Russian doc - deleting obsolete file.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882458 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f79c0c3896e66b85861cd28b7ba328c6e967b294"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:36:08Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-10-13T11:36:08Z""}}"
178,SubmitCommit,2020-10-15 13:48:39,Stefan Eissing,fork_close,"Merged /httpd/httpd/trunk:r1882542

  *) mod_md: lowered the required minimal libcurl version from 7.50 to 7.29
     as proposed by <alexander.gerasimov@codeit.pro>.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882543 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""bec117f4970614845ed5f1e06ba6df7d635cb705"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2020-10-15T13:48:39Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2020-10-15T13:48:39Z""}}"
178,SubmitCommit,2020-10-27 07:51:43,jfclere,fork_close,"Add my vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1882906 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""683b3e35462fcc898a8dd40d6d14b38025a983bd"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2020-10-27T07:51:43Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2020-10-27T07:51:43Z""}}"
178,SubmitCommit,2020-11-01 12:13:33,Christophe Jaillet,fork_close,"Fix a typo

(r1883040 on trunk)

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883043 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""99f82bed1b1fae10ea57c77ec9e8444b8ad4261c"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-01T12:13:33Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-01T12:13:33Z""}}"
178,SubmitCommit,2020-11-01 12:15:19,Christophe Jaillet,fork_close,"rebuild

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883044 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2d34a77ce32373b83b1196e49149312b9c997b90"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-01T12:15:19Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-01T12:15:19Z""}}"
178,SubmitCommit,2020-11-01 12:39:39,Christophe Jaillet,fork_close,"Add some mod_proxy_uwsgi related tweaks

(r1883045 in trunk)

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883046 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""edb14fcf04de5d36ed1ad0328d59f4857485d0a2"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-01T12:39:39Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-01T12:39:39Z""}}"
178,SubmitCommit,2020-11-01 12:42:53,Christophe Jaillet,fork_close,"Rebuild

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883047 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""03130d619ef082858326c902ccf7a44967e242e3"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-01T12:42:53Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-01T12:42:53Z""}}"
178,SubmitCommit,2020-11-02 18:24:15,Giovanni Bechis,fork_close,"vote and propose [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883071 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d38bcb709adb168553fed9d73fe9d470db1c95b8"", ""author"": {""name"": ""Giovanni Bechis"", ""email"": ""gbechis@apache.org"", ""date"": ""2020-11-02T18:24:15Z""}, ""committer"": {""name"": ""Giovanni Bechis"", ""email"": ""gbechis@apache.org"", ""date"": ""2020-11-02T18:24:15Z""}}"
178,SubmitCommit,2020-11-07 15:35:59,Lucien Gentis,fork_close,"fr doc XML files updates.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883181 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6ac4a4892f24cb3ff604e109128ecffcca0e101b"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-07T15:35:59Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-07T15:35:59Z""}}"
178,SubmitCommit,2020-11-07 15:36:54,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883182 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5f1bd776b45823d1c560dbb9f7b0876273303bd6"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-07T15:36:54Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-07T15:36:54Z""}}"
178,SubmitCommit,2020-11-08 17:33:26,Lucien Gentis,fork_close,"fr doc translation update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883207 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3f92c02ae3a749a32ba0c5ee5221b2135b43b283"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-08T17:33:26Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-08T17:33:26Z""}}"
178,SubmitCommit,2020-11-08 17:34:17,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883208 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4f826436fbc24f53caadc66e6c5c1f12cc7f279a"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-08T17:34:17Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-08T17:34:17Z""}}"
178,SubmitCommit,2020-11-09 07:04:46,Christophe Jaillet,fork_close,"Fix a misleading typo

(r1882219 in trunk)

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883220 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""12b8274e08eb2515da51a9f3993f34a63b48ca7e"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-09T07:04:46Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-09T07:04:46Z""}}"
178,SubmitCommit,2020-11-14 07:04:18,Christophe Jaillet,fork_close,"Fix 2 typo [skip ci]

(r1883410 in trunk)

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883411 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d522990cde24545833024705c7872ccfe5a77e82"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-14T07:04:18Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-14T07:04:18Z""}}"
178,SubmitCommit,2020-11-14 07:35:48,Christophe Jaillet,fork_close,"Remove a useless and erroneous precision about the upper limit of LimitRequestFields.

While at it, improve an unrelated syntax highlight somewhere else.

 [skip ci]
(r1883412 in trunk)

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883413 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""074ae100df0bbe830a118ac5768e7242b4fa4d96"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-14T07:35:48Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-14T07:35:48Z""}}"
178,SubmitCommit,2020-11-14 08:41:27,Christophe Jaillet,fork_close,"Explain limitation of UnDefine syntax as already noted in Define.
Increase visibility of a warning, to be consistent with Define

PR 64909

(r1883417 in trunk) [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883418 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f354e7af73d0c19bf4a6f4b4f2ca3218d316db85"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-14T08:41:27Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-14T08:41:27Z""}}"
178,SubmitCommit,2020-11-14 09:01:13,Christophe Jaillet,fork_close,"Backport:
   - r1859106: Axe some outdated compatibility notes
   - r1878824: Add some html syntax highlight to a piece of code. + some missing links
   - r1878825: Fix typo in r1878824

Remove some trainling space to synch with trunk

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883419 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3523e5560632a08b11a0a9f9c13124e5b4b6c5a3"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-14T09:01:13Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2020-11-14T09:01:13Z""}}"
178,SubmitCommit,2020-11-16 12:01:43,ylavic,fork_close,"Propose, vote, promote. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883474 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""bc362a282df56921245363728798fa765eb57ea8"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-11-16T12:01:43Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-11-16T12:01:43Z""}}"
178,SubmitCommit,2020-11-16 12:24:12,rpluem,fork_close,"Merge r1881620, r1881635 from trunk:

Process early errors via a dummy HTTP/1.1 request as well

Process early errors via a dummy HTTP/1.1 request as well to ensure
that the request gets logged correctly and possible custom error
pages are considered. The previous way of directly sending a HTTP/2
answer with the HTTP status code appropriate for the error is more
efficient, but does not log the request nor sents a possible custom
error page.

* modules/http2/h2.h: Add http_status to h2_request struct and define
  H2_HTTP_STATUS_UNSET.

* modules/http2/h2_request.c(h2_request_create_rec): Check if
  http_status is set for the request and die with the
  status code it contains if set.

* modules/http2/h2_session.c(on_header_cb): Adjust the error condition
  now that we mark early errors via http_status: Only return an error
  if the status is not success and http_status is not H2_HTTP_STATUS_UNSET.

* modules/http2/h2_stream.c(set_error_response): Set http_status
  on the request instead of creating headers for a response and a
  respective brigade.

Github: closes #137


* Changelog for r1881620

Submitted by: rpluem
Reviewed by: rpluem, giovanni, ylavic

Github: closes #142


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883475 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f7173e91099ce59dc1654e5a94b3cde7a892f7fa"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-11-16T12:24:12Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-11-16T12:24:12Z""}}"
178,SubmitCommit,2020-11-17 10:02:18,notroj,fork_close,"Votes, [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883515 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""11176c61be60d0371c580e62d76376782af0955c"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-11-17T10:02:18Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-11-17T10:02:18Z""}}"
178,SubmitCommit,2020-11-17 14:54:04,jimjag,fork_close,"Vote on some proposals



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883531 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""24c22d3963475e82b36ff81f87b0cfe00dc0ed37"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T14:54:04Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T14:54:04Z""}}"
178,SubmitCommit,2020-11-17 14:54:50,jimjag,fork_close,"promote



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883532 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7542e89cf33c07de9b1ef0087b78b36e7d4850e1"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T14:54:50Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T14:54:50Z""}}"
178,SubmitCommit,2020-11-17 14:55:29,jimjag,fork_close,"mod_http2: Remove .gitignore. It is not present in trunk and
     contains problematic entries for our tree (especially Makefile.in).


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883533 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7f380f8f5e7f5eefd11222649ff0fa9cf587c3bc"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T14:55:29Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T14:55:29Z""}}"
178,SubmitCommit,2020-11-17 14:59:04,jimjag,fork_close,"Merge r1776290, r1869399 from trunk:

let wstunnel run first

Since wstunnel can step aside based on the Upgrade: header.



mod_proxy: Add proxy check_trans hook.

This allows proxy modules to decline request handling at early stage.
Then mod_proxy_wstunnel can implement that hook to verify that an Upgrade
is requested, and otherwise hand over to mod_proxy_http.

Submitted by: covener, ylavic
Reviewed by: jim, rpluem, jfclere


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883534 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a834551b8393065e8124767d5d9fbafb4ec8fd96"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T14:59:04Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T14:59:04Z""}}"
178,SubmitCommit,2020-11-17 15:01:09,jimjag,fork_close,"Merge r1877552 from trunk:

mpm_event: reset listener_is_wakeable on reload.
Submitted by: ylavic
Reviewed by: ylavic, jorton, jim


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883535 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fd7fda02a9637289e283bf4cb63695bf3f904a25"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T15:01:09Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T15:01:09Z""}}"
178,SubmitCommit,2020-11-17 15:03:40,jimjag,fork_close,"Merge r1873762, r1881263 from trunk:

add SameSite to RewriteRule ... ... [CO]



samesite: fix check for 0, add ""false"" alternative.



Submitted by: covener
Reviewed by: rpluem, gbechis, jim


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883536 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""34cbc2cd9197ba7062fb31f14f82647f55ba4d6d"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T15:03:40Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T15:03:40Z""}}"
178,SubmitCommit,2020-11-17 15:04:12,jimjag,fork_close,"Merge r1883096 from trunk:

mpm_event: don't kill keepalive connections on connections_above_limit().

Before r1819855 (backported to 2.4.30), mpm_event killed keepalive connections
only when workers were exhausted, while this commit set workers_were_busy for
connections_above_limit().

Restore prior to r1819855 behaviour, and since ap_queue_info_num_idlers() is
now part of connections_above_limit(), let's update workers_were_busy there
only when necessary.

Submitted by: ylavic
Reviewed by: ylavic, jorton, jim


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883537 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""36f4ae4ff2ef54898b6859d69d46e6987cfa3c8b"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T15:04:12Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T15:04:12Z""}}"
178,SubmitCommit,2020-11-17 15:04:40,jimjag,fork_close,"Merge r1883097 from trunk:

mpm_event: don't reset connections after lingering close timeout

While httpd is supposed to do lingering close for incoming data, it has no
control anyway over outgoing/pending data once they are handled by the
system.

So don't reset the connection after lingering close times out, otherwise the
system won't do its own lingering close to flush un-acked data.

The connection reset was introduced by r1802875 and backported to 2.4.28.

Submitted by: ylavic
Reviewed by: ylavic, jorton, jim


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883538 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7e972831bc0d45607aec8f492dfbb592ed8c88cc"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T15:04:40Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2020-11-17T15:04:40Z""}}"
178,SubmitCommit,2020-11-17 20:21:20,rpluem,fork_close,"Merge r1882776, r1882999, r1883072 from trunk:

* Two first tests using Ubuntu Focal

* Condition is not needed on Focal as the system APR (1.6) is recent enough for trunk [skip ci]

* Do UBSan testing on Focal now

Changes to .travis.yml are CTR on 2.4.x.

Submitted by: rpluem


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883561 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7a89e5902e7bab2f7618155bb296c3c1ff1cde75"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-11-17T20:21:20Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-11-17T20:21:20Z""}}"
178,SubmitCommit,2020-11-19 11:28:08,notroj,fork_close,"Disable UBSan testing on 2.4.x since the various fixes are not
merged from trunk.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883637 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b3ff2fef41ec3025f44cfeb1b3afc6d4d41548cd"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-11-19T11:28:08Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-11-19T11:28:08Z""}}"
178,SubmitCommit,2020-11-21 13:32:03,Lucien Gentis,fork_close,"inappropriate </dl> tag.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883696 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""99eaf08043f41ba96947828c9c707024214a4977"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-21T13:32:03Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-21T13:32:03Z""}}"
178,SubmitCommit,2020-11-21 13:36:43,Lucien Gentis,fork_close,"fr doc XML files updates.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883697 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a3611e3a6f0039c76c27014c0dfb260c0c2b7009"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-21T13:36:43Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-21T13:36:43Z""}}"
178,SubmitCommit,2020-11-21 13:38:00,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883698 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""02ab01d724b608b15ca759bdb50e04c462640eb4"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-21T13:38:00Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2020-11-21T13:38:00Z""}}"
178,SubmitCommit,2020-11-30 09:37:28,notroj,fork_close,"Nominate. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1883948 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8f6368ad9e88bc55388c660ec890c928b898a5c3"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-11-30T09:37:28Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-11-30T09:37:28Z""}}"
178,SubmitCommit,2020-12-08 23:16:56,ylavic,fork_close,"Vote, propose [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884222 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""edc3b9d235f2e36615325ae08b8f0842f21d7340"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-08T23:16:56Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-08T23:16:56Z""}}"
178,SubmitCommit,2020-12-10 16:54:32,ylavic,fork_close,"Propose.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884287 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4ac428dcaada6610fbf17c545dc54518052abbc9"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-10T16:54:32Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-10T16:54:32Z""}}"
178,SubmitCommit,2020-12-11 00:24:33,ylavic,fork_close,"Merge r1883776, r1883781, r1883813, r1884138, r1884182 from trunk:


For pool-debug builds, use APR/APR-util 1.7.x branches to pick
up e.g. the r1883751 locking fixes.

Re-enable mod_http2 and mod_ssl_ct in prefork pool-debug build
after r1883704 and r1883667.

[prefork+pool-debug still w/o http2 until r1884170 is backported]


Adjust name for pool-debug build.


Run the LDAP testing without pool-debug for the time being.


Cosmetics (and one more ci pass, just in case).


ci: have an ASan run w/o pool-debug too.

[ASan disabled on 2.4.x for now until r1883708+r1884208 are backported]


Submitted by: jorton, ylavic, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884291 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b86ae218fcfc0116d2afcb269e458be77223e137"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T00:24:33Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T00:24:33Z""}}"
178,SubmitCommit,2020-12-11 00:58:10,ylavic,fork_close,"Propose [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884294 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2dbb4be292fa011a6a33a787894d1f3d959391f8"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T00:58:10Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T00:58:10Z""}}"
178,SubmitCommit,2020-12-11 07:53:35,rpluem,fork_close,"* Trigger CI

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884301 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""788be62b007c11e86c497541fbbe0740d7c9345b"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-12-11T07:53:35Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2020-12-11T07:53:35Z""}}"
178,SubmitCommit,2020-12-11 13:15:00,ylavic,fork_close,"Merge r1879441, r1879448, r1879594, r1883854, r1884136, r1884292 from trunk:

Add additional test suite runs for the prefork & event pool-debug builds:
- run with SSLSessionCache defined (after r1879430)
- run with ""SSLProtocol TLSv1.2""


Adjust for r1879447 to specify shmcb is tested when 
TEST_SSL_SESSCACHE is defined. [skip ci]


For TEST_SSL=1 runs, test SSLSessionCache with shmcb, memcached
and redis socache providers.  Force TLSv1.2 for these runs since
TLSv1.3 doesn't use the cache.


Stop testing if a core dump was generated during the main test suite run.


Add ASan (AddressSanitizer) build and tests to ci.


ci: add a run for MPM worker w/ pool-debug.


Submitted by: jorton, ylavic, ylavic

Index: .travis.yml
===================================================================
--- .travis.yml	(revision 1884310)
+++ .travis.yml	(working copy)
@@ -250,6 +250,13 @@ jobs:
            TEST_MALLOC=1 TEST_SSL=1
            CLEAR_CACHE=1
     # -------------------------------------------------------------------------
+    - name: Linux Ubuntu, Shared MPMs (worker), pool-debug, SSL/TLS variants
+      env: APR_VERSION=1.7.x APR_CONFIG=""--enable-pool-debug""
+           APU_VERSION=1.7.x APU_CONFIG=""--with-crypto --with-ldap""
+           CONFIG=""--enable-mods-shared=reallyall --enable-mpms-shared=all --with-mpm=worker""
+           TEST_MALLOC=1 TEST_SSL=1
+           CLEAR_CACHE=1
+    # -------------------------------------------------------------------------
     - name: Linux Ubuntu, Shared MPMs (prefork), pool-debug, SSL/TLS variants
       env: APR_VERSION=1.7.x APR_CONFIG=""--enable-pool-debug""
            APU_VERSION=1.7.x APU_CONFIG=""--with-crypto --with-ldap""
Index: test/travis_before_linux.sh
===================================================================
--- test/travis_before_linux.sh	(revision 1884310)
+++ test/travis_before_linux.sh	(working copy)
@@ -104,6 +104,13 @@ if test -v TEST_LDAP -a -x test/perl-framework/scr
     popd
 fi
 
+if test -v TEST_SSL; then
+    pushd test/perl-framework
+       ./scripts/memcached-init.sh
+       ./scripts/redis-init.sh
+    popd
+fi
+
 if test -v APR_VERSION; then
     install_apx apr ${APR_VERSION} ""${APR_CONFIG}""
     APU_CONFIG=""$APU_CONFIG --with-apr=$HOME/root/apr-${APR_VERSION}""
Index: test/travis_run_linux.sh
===================================================================
--- test/travis_run_linux.sh	(revision 1884310)
+++ test/travis_run_linux.sh	(working copy)
@@ -77,6 +77,10 @@ if ! test -v SKIP_TESTING; then
         export UBSAN_OPTIONS=""log_path=$PWD/ubsan.log""
     fi
 
+    if test -v TEST_ASAN; then
+        export ASAN_OPTIONS=""log_path=$PWD/asan.log""
+    fi
+
     if test -v WITH_TEST_SUITE; then
         make check TESTS=""${TESTS}"" TEST_CONFIG=""${TEST_ARGS}""
         RV=$?
@@ -88,8 +92,25 @@ if ! test -v SKIP_TESTING; then
             RV=$?
         popd
     fi
-    if test -v LITMUS; then
+
+    # Skip further testing if a core dump was created during the test
+    # suite run above.
+    if test $RV -eq 0 -a -f test/perl-framework/t/core; then
+        RV=4
+    fi            
+    
+    if test -v TEST_SSL -a $RV -eq 0; then
         pushd test/perl-framework
+            for cache in shmcb redis:localhost:6379 memcache:localhost:11211; do
+                SSL_SESSCACHE=$cache ./t/TEST -sslproto TLSv1.2 -defines TEST_SSL_SESSCACHE t/ssl
+                RV=$?
+                test $RV -eq 0 || break
+            done
+        popd
+    fi
+
+    if test -v LITMUS -a $RV -eq 0; then
+        pushd test/perl-framework
            mkdir -p t/htdocs/modules/dav
            ./t/TEST -start
            # litmus uses $TESTS, so unset it.
@@ -123,9 +144,18 @@ if ! test -v SKIP_TESTING; then
         RV=3
     fi
 
+    if test -v TEST_ASAN && ls asan.log.* &> /dev/null; then
+        cat asan.log.*
+
+        # ASan can report memory leaks, fail on errors only
+        if grep -q ""ERROR: AddressSanitizer:"" `ls asan.log.*`; then
+            RV=4
+        fi
+    fi
+
     if test -f test/perl-framework/t/core; then
         gdb -ex 'thread apply all backtrace' -batch ./httpd test/perl-framework/t/core
-        RV=4
+        RV=5
     fi
 
     exit $RV
Index: .
===================================================================
--- .	(revision 1884310)
+++ .	(working copy)

Property changes on: .
___________________________________________________________________
Modified: svn:mergeinfo
## -0,0 +0,1 ##
   Merged /httpd/httpd/trunk:r1879441,1879448,1879594,1883854,1884136,1884292


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884311 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""23c5bfcd0123ea2ddda53fcbf3fb52d7bfdd3348"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T13:15:00Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T13:15:00Z""}}"
178,SubmitCommit,2020-12-11 14:20:08,notroj,fork_close,"Vote, [skip ci], happy friday.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884312 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c350dfca951315fab2a8e888d7b74728988e3caf"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-11T14:20:08Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-11T14:20:08Z""}}"
178,SubmitCommit,2020-12-11 14:21:23,covener,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884313 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a8f5a215b0e8386fdd415f3753358be118689924"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2020-12-11T14:21:23Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2020-12-11T14:21:23Z""}}"
178,SubmitCommit,2020-12-11 14:21:51,covener,fork_close,"promote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884314 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e4b402be89a3156eeb895d633654905b04d67c12"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2020-12-11T14:21:51Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2020-12-11T14:21:51Z""}}"
178,SubmitCommit,2020-12-11 14:46:12,ylavic,fork_close,"Merge r1883708, r1884208 from trunk:

core: reset ap_runtime_dir to NULL after AP_SQ_MS_DESTROY_CONFIG.

ap_runtime_dir_relative() might reuse ap_runtime_dir from previously cleared
pconf otherwise.


Rearrange and clear global core config state allocated out of pconf
from a single cleanup:

* server/core.c (reset_config): Clear ap_runtime_dir here, rather than
  in register_hooks.


Submitted by: ylavic, jorton
Reviewed by: ylavic, jorton, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884316 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5925ff28a4211cd9af5277b114e5c55e20ec3958"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:46:12Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:46:12Z""}}"
178,SubmitCommit,2020-12-11 14:46:46,ylavic,fork_close,"Backported. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884317 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cbfd1a9d871b0cca739719b40cd635230e9d622b"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:46:46Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:46:46Z""}}"
178,SubmitCommit,2020-12-11 14:49:12,ylavic,fork_close,"Merge r1884169, r1884170 from trunk:

mod_http2: Rename server_pool as pchild in h2_workers_create()

To clarify which parent pool the workers threads have.
And add a comment about workers_pool_cleanup()'s role and when it runs.

No functional change.


mod_http2: stop/wait the workers threads before their pool is killed.

There shouldn't be any worker thread active when pchild is destroyed (thus each
thread's pool), so register workers_pool_cleanup as a pre_cleanup of pchild.

This is to avoid races like the below stacktrace, where slot_run() threads
are still running when clean_child_exit() is called.

Thread 23 (Thread 0x7f4865b79800 (LWP 3740)):
#0  0x00007f4864dec449 in pthread_cond_destroy@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
#1  0x00007f4865020117 in run_cleanups (cref=<optimized out>) at memory/unix/apr_pools.c:2629
#2  pool_clear_debug (pool=pool@entry=0x558a5297e4a0, file_line=0x558a5237456b ""event.c:757"") at memory/unix/apr_pools.c:1830
#3  0x00007f486501ffee in pool_destroy_debug (pool=0x558a5297e4a0, file_line=<optimized out>) at memory/unix/apr_pools.c:1915
#4  0x00007f48650200f0 in pool_clear_debug (pool=pool@entry=0x558a52a41070, file_line=0x558a5237456b ""event.c:757"") at memory/unix/apr_pools.c:1827
#5  0x00007f486501ffee in pool_destroy_debug (pool=0x558a52a41070, file_line=<optimized out>) at memory/unix/apr_pools.c:1915
#6  0x00007f486502085c in apr_pool_destroy_debug (pool=<optimized out>, file_line=<optimized out>) at memory/unix/apr_pools.c:1957
#7  0x0000558a52326cfc in clean_child_exit (code=0) at event.c:757
#8  0x0000558a52327969 in child_main (child_num_arg=child_num_arg@entry=1, child_bucket=child_bucket@entry=0) at event.c:2926
#9  0x0000558a52327ce5 in make_child (s=0x558a52c9f840, slot=slot@entry=1, bucket=0) at event.c:2992
#10 0x0000558a52327d4c in startup_children (number_to_start=2, number_to_start@entry=3) at event.c:3015
#11 0x0000558a523289ac in event_run (_pconf=<optimized out>, plog=0x558a5273ce00, s=0x558a52c9f840) at event.c:3374
#12 0x0000558a5233e91e in ap_run_mpm (pconf=0x558a5270cbe0, plog=0x558a5273ce00, s=0x558a52c9f840) at mpm_common.c:100
#13 0x0000558a5231b763 in main (argc=<optimized out>, argv=<optimized out>) at main.c:844

Thread 2 (Thread 0x7f4840b70700 (LWP 3836)):
#0  0x00007f4864dec9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
#1  0x00007f486501f65d in apr_thread_cond_wait (cond=<optimized out>, mutex=<optimized out>) at locks/unix/thread_cond.c:68
#2  0x00007f484e14ae4a in get_next (slot=0x558a528d5fe0) at h2_workers.c:209
#3  slot_run (thread=0x558a52828b30, wctx=0x558a528d5fe0) at h2_workers.c:228
#4  0x00007f4864de66db in start_thread () from /lib/x86_64-linux-gnu/libpthread.so.0
#5  0x00007f4864b0f88f in clone () from /lib/x86_64-linux-gnu/libc.so.6

Thread 1 (Thread 0x7f4841b72700 (LWP 3834)):
#0  0x00007f4864a2ce97 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007f4864a2e801 in abort () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007f4865020865 in apr_pool_destroy_debug (pool=<optimized out>, file_line=<optimized out>) at memory/unix/apr_pools.c:1955
#3  0x00007f486502b536 in apr_thread_exit (thd=thd@entry=0x558a52ba8980, retval=retval@entry=0) at threadproc/unix/thread.c:206
#4  0x00007f484e14aec6 in slot_run (thread=0x558a52ba8980, wctx=0x558a528d6060) at h2_workers.c:248
#5  0x00007f4864de66db in start_thread () from /lib/x86_64-linux-gnu/libpthread.so.0
#6  0x00007f4864b0f88f in clone () from /lib/x86_64-linux-gnu/libc.so.6


Submitted by: ylavic
Reviewed by: ylavic, jorton, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884318 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fd70b17ea50e9f3e9243d0b5818a2cc63dee2eb1"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:49:12Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:49:12Z""}}"
178,SubmitCommit,2020-12-11 14:49:46,ylavic,fork_close,"Backported. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884319 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4601fa3ddb601cc378ef0f7d57dc746cc49b3b30"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:49:46Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:49:46Z""}}"
178,SubmitCommit,2020-12-11 14:55:20,ylavic,fork_close,"Merge r1876626 from trunk:

* server/mpm/prefork/prefork.c (prefork_pre_config): Use pconf as
  passed to the hook with ap_fatal_signal_child_setup, since
  prefork.c's pconf ""global"" is not set until the (later) open_logs
  hook, and if built as a DSO it may be reset inbetween.

* server/mpm/motorz/motorz.c (motorz_pre_config): Likewise.

[event and worker do not appear to have the same issue]


Submitted by: jorton
Reviewed by: https://lists.apache.org/thread.html/rc43315d87ac9bb92a6e0e4068d7680e7044df0a1640d514fd40f19fd%40%3Cdev.httpd.apache.org%3E


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884320 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""03b7224de00e33b3bd0b93a7f2c00a4e0183ef94"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:55:20Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T14:55:20Z""}}"
178,SubmitCommit,2020-12-11 15:00:24,ylavic,fork_close,"ci: ASan and prefork w/ mod_http2 should be good for 2.4.x now.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884321 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""696491d23faba6de1cfa14d144f39e96c556414b"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T15:00:24Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T15:00:24Z""}}"
178,SubmitCommit,2020-12-11 15:04:12,ylavic,fork_close,"yml syntax after r1884321.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884323 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fb6943738065d1f86d7c84b98bdf519f2bdfacd9"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T15:04:12Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T15:04:12Z""}}"
178,SubmitCommit,2020-12-11 15:10:40,ylavic,fork_close,"Promote.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884325 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3e82736734d87249abe1ac374f9a948590062def"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T15:10:40Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-11T15:10:40Z""}}"
178,SubmitCommit,2020-12-12 02:10:49,ylavic,fork_close,"ci: disable ASan pool-debug for now.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884339 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f6931e1b141706b3a89753d56aa846d83d9aad53"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-12T02:10:49Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-12T02:10:49Z""}}"
178,SubmitCommit,2020-12-13 10:17:55,ylavic,fork_close,"Merge r1883709 from trunk:

mod_example_hooks: fix global ""trace"" string lifetime.

[Assuming experiment/CTR here, fixes an ASan crash prevent ci]
Reviewed/backported by: ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884378 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b2254f13ba373c8f860a24c573bef32bace27558"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-13T10:17:55Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-13T10:17:55Z""}}"
178,SubmitCommit,2020-12-13 15:50:56,ylavic,fork_close,"ci: Re-enable ASan pool-debug.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884383 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a8a634ef570734a348655ca9b5b6e6d2df7da09d"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-13T15:50:56Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-13T15:50:56Z""}}"
178,SubmitCommit,2020-12-14 09:30:44,ylavic,fork_close,"Propose fixes for APR_POOL_DEBUG correctness.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884408 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5a6c25def1620cf7615997b53b20ca9040b8ac07"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-14T09:30:44Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-14T09:30:44Z""}}"
178,SubmitCommit,2020-12-14 09:33:10,ylavic,fork_close,"Typo [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884409 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8abca254a70a8e2b4cfc784b65865a6bd30e9634"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-14T09:33:10Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-14T09:33:10Z""}}"
178,SubmitCommit,2020-12-15 09:19:26,notroj,fork_close,"Vote*N, [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884449 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a7489b7b99b3e50ec99b70de120060d5f9b34e30"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-15T09:19:26Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-15T09:19:26Z""}}"
178,SubmitCommit,2020-12-15 09:21:08,notroj,fork_close,"Merge r1883947 from trunk:

* modules/metadata/mod_unique_id.c: Use base64url encoding for
  uuencoder table.

PR: 57044
Submitted by: Michael Kaufmann <apache-bugzilla michael-kaufmann.ch>
Reviewed by: jorton, ylavic, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884450 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8ad4484868d9148e79d97951781d24c6d84c1716"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-15T09:21:08Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-15T09:21:08Z""}}"
178,SubmitCommit,2020-12-15 09:22:15,notroj,fork_close,"Backported*1, [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884451 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c43518501228e0868d8dbbb4812750199a21e96d"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-15T09:22:15Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-15T09:22:15Z""}}"
178,SubmitCommit,2020-12-16 10:15:06,ylavic,fork_close,"Merge CHANGES entries [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884493 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5176c5408e013752a75e7d42acd18b0c0b358e2b"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-16T10:15:06Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-16T10:15:06Z""}}"
178,SubmitCommit,2020-12-16 10:28:05,ylavic,fork_close,"Propose a series of core / mod_proxy changes to address (long) pending issues.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884495 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8d3b9db561e888935eed70bc4316b3d90210b0fa"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-16T10:28:05Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2020-12-16T10:28:05Z""}}"
178,SubmitCommit,2020-12-16 16:15:42,notroj,fork_close,"Propose*1. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1884503 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d4af6245e3c65702fa41f7fa3fdad40b8e40bdea"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-16T16:15:42Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-12-16T16:15:42Z""}}"
178,SubmitCommit,2021-01-03 09:10:04,Christophe Jaillet,fork_close,"Use Require instead of Allow and Deny.

While at it, removes the ""based on the value of"" because, it is not really based on the value of the environment variable, but on its existence or not.

PR 65048

(r1885046 on trunk)

While at it, remove some trailing spaces and add some """" to improve syntax color highlighting.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885047 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""89530fd952e644f886830cc80bd0158fd52c8b0e"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-03T09:10:04Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-03T09:10:04Z""}}"
178,SubmitCommit,2021-01-03 12:44:16,Christophe Jaillet,fork_close,"Fix a typo in a comment.

(r1326229 on trunk)

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885062 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7a688a26dee378b9bbef29312ad56a1d9cefc3cd"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-03T12:44:16Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-03T12:44:16Z""}}"
178,SubmitCommit,2021-01-04 14:37:58,covener,fork_close,"vote/promote.  

proxy series review is cursory but nowhere to go but forward

[skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885103 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e375a86019d9fb9cd6762b89753fc5165c8e8e10"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-04T14:37:58Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-04T14:37:58Z""}}"
178,SubmitCommit,2021-01-05 10:20:45,ylavic,fork_close,"Merge r1883704, r1883707 from trunk:


mod_proxy_http2: thread safety with MPM prefork, still..

The allocator of pchild has no mutex with MPM prefork, but we need one
for h2 workers threads synchronization.

Even though mod_http2 shouldn't be used with prefork, better be safe than
sorry, so forcibly set the mutex in h2_child_init() if it doesn't exist.

This prevents the below situation:

AddressSanitizer: heap-use-after-free on address 0x6250003ea938 at pc 0x7fe229f40f3c bp 0x7fe22146dd30 sp 0x7fe22146dd28

WRITE of size 8 at 0x6250003ea938 thread T4
    #0 0x7fe229f40f3b in apr_pool_destroy memory/unix/apr_pools.c:1015
                         `-> if ((*pool->ref = pool->sibling) != NULL)
    #1 0x7fe229f6ef1a in apr_thread_exit threadproc/unix/thread.c:206
    #2 0x7fe223a26671 in slot_run /home/yle/src/apache/httpd/trunk.ro/modules/http2/h2_workers.c:248
    #3 0x7fe229f6ebcc in dummy_worker threadproc/unix/thread.c:142
    #4 0x7fe229ecbea6 in start_thread nptl/pthread_create.c:477
    #5 0x7fe229df9d4e in __clone (/lib/x86_64-linux-gnu/libc.so.6+0xfdd4e)

0x6250003ea938 is located 56 bytes inside of 8192-byte region [0x6250003ea900,0x6250003ec900)
freed by thread T6 here:
    #0 0x7fe22a1ecb6f in __interceptor_free (/usr/lib/x86_64-linux-gnu/libasan.so.6+0xa9b6f)
    #1 0x7fe229f3fe38 in allocator_free memory/unix/apr_pools.c:507
    #2 0x7fe229f4107b in apr_pool_destroy memory/unix/apr_pools.c:1043
    #3 0x7fe229f6ef1a in apr_thread_exit threadproc/unix/thread.c:206
    #4 0x7fe223a26671 in slot_run /home/yle/src/apache/httpd/trunk.ro/modules/http2/h2_workers.c:248
    #5 0x7fe229f6ebcc in dummy_worker threadproc/unix/thread.c:142
    #6 0x7fe229ecbea6 in start_thread nptl/pthread_create.c:477



mod_proxy_http2: follow up to r1883704.

For event/worker MPMs, pchild uses pconf's allocator, so its is NULL.


Submitted by: ylavic
Reviewed by: ylavic, jorton, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885138 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fb3f3ea09d62429d60827f8e1de23b4cda954f4f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:20:45Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:20:45Z""}}"
178,SubmitCommit,2021-01-05 10:23:21,ylavic,fork_close,"Merge r1883729 from trunk:

core: fix c->client_ip for unix socket connections.

Catch apr_socket_addr_get() error in core_create_conn() to avoid uninitialized
conn_rec->client_ip. This can happen for mod_proxy connections using unix
sockets, which are not handled by apr_socket_addr_get() until APR's r1883728
(trunk only for now).

Submitted by: ylavic
Reviewed by: ylavic, jorton, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885139 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""bb6dc5cbc69a7fe32f4b14a5c7b7207b158b5db5"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:23:21Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:23:21Z""}}"
178,SubmitCommit,2021-01-05 10:26:40,ylavic,fork_close,"Merge r1883730 from trunk:

mod_case_filter_in: fix memory leak.

Each ap_malloc()ed buffer should be free()d with its bucket.

Submitted by: ylavic
Reviewed by: ylavic, jorton, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885140 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1147de3b279cc5c86e2e1144d53510fb933ac515"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:26:40Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:26:40Z""}}"
178,SubmitCommit,2021-01-05 10:30:09,ylavic,fork_close,"Merge r1883744 from trunk:

mod_proxy: pconf vs pchild consistency, and correctness in ONE_PROCESS mode.

Consistently use pconf for ap_proxy_define_{worker,balancer}() and pchild for
ap_proxu_initialize_{worker,balancer}() in mod_proxy [child_]init code.

pchild is needed in _initialize() for mutexes/shms' child_init and cleanup,
and to avoid a crash on shutdown (i.e. ap_terminate) in ONE_PROCESS mode,
where worker->cp->pool is destroyed twice, let's register conn_pool_cleanup()
as a pre_cleanup of pchild.

Submitted by: ylavic
Reviewed by: ylavic, jorton, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885141 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""44dfe7d94581c0b525f521ec050925fc4fb6fcda"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:30:09Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:30:09Z""}}"
178,SubmitCommit,2021-01-05 10:42:52,ylavic,fork_close,"Merge r1883810 from trunk:

mod_auth_digest: fix crash with ONE_PROCESS (debug) mode shutdown.

Avoid double free/cleanup by just letting shm/rmm/global_mutex cleanups do
their work on restart/exit.

Set the globals to NULL in initialize_tables() should cleanup_tables() be
called on error.

Submitted by: ylavic
Reviewed by: ylavic, jorton, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885142 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""08f3405064801e1834c9d1fbe6ec2994528c2d05"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:42:52Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T10:42:52Z""}}"
178,SubmitCommit,2021-01-05 11:10:08,ylavic,fork_close,"Backported [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885143 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""071375a5a176b02deaba28f42a1d8f9841d58dd2"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T11:10:08Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T11:10:08Z""}}"
178,SubmitCommit,2021-01-05 12:29:00,ylavic,fork_close,"Merge r1881311 from trunk:

Avoid a core dump at startup if ""AllowOverride nonfatal"" is used without any '=' after ""nonfatal"".

Note that ""nonfatal="" (without anything else) or ""nonfatal=foo"" are still not reported as erroneous and are silently ignored.

Submitted by: jailletc36
Reviewed by: jailletc36, giovanni, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885144 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1c575842839108a8e9e5c0055e558fde14558c0b"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T12:29:00Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T12:29:00Z""}}"
178,SubmitCommit,2021-01-05 12:29:38,ylavic,fork_close,"Backported [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885145 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""21a0596e4e6abf714a5f837160e231e009997e95"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T12:29:38Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-05T12:29:38Z""}}"
178,SubmitCommit,2021-01-07 17:54:39,ylavic,fork_close,"Update, vote, promote. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885248 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""877b8f3b8151aa20b6d1fc8df77f23558de543ed"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-07T17:54:39Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-07T17:54:39Z""}}"
178,SubmitCommit,2021-01-07 20:07:27,Christophe Jaillet,fork_close,"Easy proposal

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885250 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ed31a96288190bf18579c01a65b68746f6782637"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-07T20:07:27Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-07T20:07:27Z""}}"
178,SubmitCommit,2021-01-07 21:01:42,ylavic,fork_close,"Vote. [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885251 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8ccb8692498ceaa53a2d412aa5de11a7e788f743"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-07T21:01:42Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-07T21:01:42Z""}}"
178,SubmitCommit,2021-01-08 21:03:05,Christophe Jaillet,fork_close,"Easy proposal

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885278 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0d9f2910a6f74d08f3d00517f9a44ed32720bd2e"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-08T21:03:05Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-08T21:03:05Z""}}"
178,SubmitCommit,2021-01-09 14:33:09,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885297 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""783a50547f12412ee16c3d4f10da15749157d7f7"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-09T14:33:09Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-09T14:33:09Z""}}"
178,SubmitCommit,2021-01-09 14:33:52,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885298 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3d30d1eca214b2a78e76b8e1b7bc7633b5d8c007"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-09T14:33:52Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-09T14:33:52Z""}}"
178,SubmitCommit,2021-01-10 16:40:38,Christophe Jaillet,fork_close,"Proposal to synch most of the ap_cstr_casecmp[n] mess between 2.4.x and trunk

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885337 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""51ccd2110e0864da26f2f8caa5e8f27cfd25549f"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-10T16:40:38Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-10T16:40:38Z""}}"
178,SubmitCommit,2021-01-11 08:52:50,notroj,fork_close,"Review*1. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885357 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""16b39dbc0ce8e7ec99185f4ae9c4f99e9abd3f4a"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-01-11T08:52:50Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-01-11T08:52:50Z""}}"
178,SubmitCommit,2021-01-14 03:01:33,covener,fork_close,"Merge r1885464 from trunk:

PR55078: remove old Protocol info

followup to 1885463

[skip ci]




git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885465 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c051716405a8cdc8c4944907e381d2852c12ee64"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-14T03:01:33Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-14T03:01:33Z""}}"
178,SubmitCommit,2021-01-15 22:09:14,nilgun,fork_close,"update for sync with English docs.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885534 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2098baf14ccac3ff6c4690cdb85fd60f7cee28c9"", ""author"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-01-15T22:09:14Z""}, ""committer"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-01-15T22:09:14Z""}}"
178,SubmitCommit,2021-01-15 22:09:40,nilgun,fork_close,"update transformations. 

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885535 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""37ff9a39464e9830ee9c8a191a4c85ad21d6175b"", ""author"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-01-15T22:09:40Z""}, ""committer"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-01-15T22:09:40Z""}}"
178,SubmitCommit,2021-01-16 13:01:05,minfrin,fork_close,"Vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885561 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""316358c53dfc1f5c5db7c896d22abdb051cc9592"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:01:05Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:01:05Z""}}"
178,SubmitCommit,2021-01-16 13:03:49,minfrin,fork_close,"Backport to 2.4:

  *) core: Make writing the pidfile atomic to avoid startup failures
     after (e.g.) system crashes, but also races with multiple
     concurrent ""httpd -k restart"" runs which have a race between
     reading and writing a fresh pidfile.
     trunk patch: https://svn.apache.org/r1875153
                  https://svn.apache.org/r1875240
                  https://svn.apache.org/r1877645
     2.4.x patch: https://patch-diff.githubusercontent.com/raw/apache/httpd/pull/163.patch
     +1: jorton, covener, ylavic



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885562 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""eb163c2416261182091566a3b22a77f48f01bc52"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:03:49Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:03:49Z""}}"
178,SubmitCommit,2021-01-16 13:24:22,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885566 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""38f2adbd848b25906456c7a9275728384be27dd0"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-16T13:24:22Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-16T13:24:22Z""}}"
178,SubmitCommit,2021-01-16 13:25:08,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885567 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8c37f7c078e5e4f6e84dce3e5f60c2006d043d9f"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-16T13:25:08Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-16T13:25:08Z""}}"
178,SubmitCommit,2021-01-16 13:26:45,minfrin,fork_close,"Vote, then promote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885568 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0223ceffa13487d565c40107241aee916ca157d7"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:26:45Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:26:45Z""}}"
178,SubmitCommit,2021-01-16 13:27:39,minfrin,fork_close,"Backport to 2.4:

  *) core: Correctly strip unwanted headers on 304 response
     Trunk version of patch:
        http://svn.apache.org/r1881590
        http://svn.apache.org/r1881624
     +1: ylavic, covener, minfrin



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885569 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2d0e7dc5659f34250301fa5fc0ce4de6f63c25d6"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:27:39Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:27:39Z""}}"
178,SubmitCommit,2021-01-16 13:48:47,minfrin,fork_close,"Vote followed by a promote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885570 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""417d070d8e364059850b43841eedc4b84b69b5d8"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:48:47Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:48:47Z""}}"
178,SubmitCommit,2021-01-16 13:49:50,minfrin,fork_close,"Backport to 2.4:

  *) mod_proxy_http: Fix 100-continue deadlock for spooled request bodies. BZ 63855.
     trunk patch: https://svn.apache.org/r1769760
                  https://svn.apache.org/r1770220
                  https://svn.apache.org/r1868576
                  https://svn.apache.org/r1868653
                  https://svn.apache.org/r1883639
                  https://svn.apache.org/r1883640
                  https://svn.apache.org/r1884218
                  https://svn.apache.org/r1884220
     2.4.x patch: http://people.apache.org/~ylavic/patches/2.4.x-bz63855-1on5.patch
                  https://github.com/apache/httpd/pull/154
     +1: ylavic, covener, minfrin



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885571 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""97597452bbdadcbe561cd14fc3ee9049e7d371dd"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:49:50Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T13:49:50Z""}}"
178,SubmitCommit,2021-01-16 14:06:51,minfrin,fork_close,"Vote and after that promote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885572 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""65c9a4db432f63730e2e81ef4fcbf9255af0038d"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T14:06:51Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T14:06:51Z""}}"
178,SubmitCommit,2021-01-16 14:08:29,minfrin,fork_close,"Backport to 2.4:

  *) core: output filtering improvements (ease following patches, align trunk/2.4)
     trunk patch: https://svn.apache.org/r1836032
                  https://svn.apache.org/r1884295
                  https://svn.apache.org/r1884296
                  https://svn.apache.org/r1884304
                  https://svn.apache.org/r1836237
                  https://svn.apache.org/r1836258
                  https://svn.apache.org/r1836354
                  https://svn.apache.org/r1843939
     2.4.x patch: http://people.apache.org/~ylavic/patches/2.4.x-core_output_filtering-2on5.patch
                  https://github.com/apache/httpd/pull/156
     +1: ylavic, covener, minfrin
     ylavic: These core output filter changes are needed for the proxy
             tunneling loop to work properly/non-blocking (PR 158 below). They
             do not include the major filter setaside/reinstate changes from
             trunk, reluing on existing 2.4 c->data_in_{input,output}_filter
             flags only.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885573 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""18c4ac516f146dbbff7c4cc6b4cb8cda2f79090a"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T14:08:29Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T14:08:29Z""}}"
178,SubmitCommit,2021-01-16 14:20:35,minfrin,fork_close,"Promote after a vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885574 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7b5a2d3668308b5704ac6a59cc9e1564056fbc5f"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T14:20:35Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T14:20:35Z""}}"
178,SubmitCommit,2021-01-16 14:22:41,minfrin,fork_close,"Backport 2.4:

  *) mod_proxy_http: individual status codes for ProxyErrorOverride. BZ 63628
     trunk patch: https://svn.apache.org/r1754974
                  https://svn.apache.org/r1754975
                  https://svn.apache.org/r1876404
                  https://svn.apache.org/r1877696
                  https://svn.apache.org/r1877697
                  https://svn.apache.org/r1877728
     2.4.x patch: http://people.apache.org/~ylavic/patches/2.4.x-mod_proxy_http-override-3on5.patch
                  https://github.com/apache/httpd/pull/157
     +1: ylavic, covener, minfrin
     ylavic: Besides ProxyErrorOverride individual status codes, merging now
             the non-functional changes in ap_proxy_http_process_response()
             around ProxyErrorOverride code helps reducing conflicts with the
             following commits, and with trunk/2.4 alignment still.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885575 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""41cdf59f2343f11fca5152542d843c3403c233db"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T14:22:41Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-16T14:22:41Z""}}"
178,SubmitCommit,2021-01-16 16:33:54,covener,fork_close,"readd vote

[skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885577 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a8bb8e370916d3a00439d8203353368b32ee4804"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-16T16:33:54Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-16T16:33:54Z""}}"
178,SubmitCommit,2021-01-17 16:20:29,minfrin,fork_close,"Vote followed by a promote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885604 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4517db552311936a77d8384c2872694d1fd656bb"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T16:20:29Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T16:20:29Z""}}"
178,SubmitCommit,2021-01-17 16:21:35,minfrin,fork_close,"Backport to v2.4:

  *) mod_proxy_http: handle upgrade/tunneling protocols. BZ 61616 is about
                     mod_proxy_connect but there has been wstunnel reports
                     on dev@ about that too lately.
     trunk patch: https://svn.apache.org/r1678771
                  https://svn.apache.org/r1832348
                  https://svn.apache.org/r1869338
                  https://svn.apache.org/r1869420
                  https://svn.apache.org/r1878367
                  https://svn.apache.org/r1877557
                  https://svn.apache.org/r1877558
                  https://svn.apache.org/r1877646
                  https://svn.apache.org/r1877695
                  https://svn.apache.org/r1879401
                  https://svn.apache.org/r1879402
                  https://svn.apache.org/r1880200
                  https://svn.apache.org/r1885239
                  https://svn.apache.org/r1885240
                  https://svn.apache.org/r1885244
     2.4.x patch: http://people.apache.org/~ylavic/patches/2.4.x-mod_proxy_http-upgrade-4on5-v2.patch
                  https://github.com/apache/httpd/pull/158
     +1: ylavic, covener, minfrin
     ylavic: All the corresponding trunk changes to mod_proxy_wstunnel (but
             r1885239) have been dropped for this backport proposal, the goal
             being to handle upgrade in mod_proxy_http from now, while r1885239
             allows to benefit from the Upgrade improvements done in proxy_http
             with existing wstunnel configurations (provided mod_proxy_http
             module is loaded).



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885605 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fa22b50457c81465b5079dc44c7f1f1cb7431f5d"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T16:21:35Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T16:21:35Z""}}"
178,SubmitCommit,2021-01-17 16:39:51,minfrin,fork_close,"Promote directly following a vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885606 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f9785f476c3930dc02b78115474c73b66dd163cd"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T16:39:51Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T16:39:51Z""}}"
178,SubmitCommit,2021-01-17 16:41:47,minfrin,fork_close,"Backport to 2.4:

  *) mod_proxy: common spooling code to allow mod_proxy_fgci proxy-sendcl. BZ 57087
     trunk patch: https://svn.apache.org/r1884067
                  https://svn.apache.org/r1884068
                  https://svn.apache.org/r1884069
                  https://svn.apache.org/r1884070
     2.4.x patch: http://people.apache.org/~ylavic/patches/2.4.x-mod_proxy_fcgi-sendcl-5on5.patch
                  https://github.com/apache/httpd/pull/162
     +1: ylavic, covener, minfrin
     ylavic: Long standing BZ (always send Content-Length, according to the CGI
             specs) which is addressed by reusing mod_proxy_http's spooling
             code (moved to proxy_util) in mod_proxy_fcgi. The user still needs
             to SetEnv proxy-sendcl for that (2.4 compat).



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885607 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8d5648e4d7481ab22954322155b6646a95b16449"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T16:41:47Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T16:41:47Z""}}"
178,SubmitCommit,2021-01-17 16:48:20,Christophe Jaillet,fork_close,"Backport r1885581 to fix test-framework failure

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885608 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7e6ff775c60c4ae80a12d4daa16e08796a34d6f7"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-17T16:48:20Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-17T16:48:20Z""}}"
178,SubmitCommit,2021-01-17 17:03:23,minfrin,fork_close,"Vote followed directly by a promote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885609 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7f26ec7cf40891e76aabc7fd190a03a8969da32a"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:03:23Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:03:23Z""}}"
178,SubmitCommit,2021-01-17 17:07:42,minfrin,fork_close,"Backport to v2.4:

  *) Easy patches: synch 2.4.x and trunk
        - mod_dav: save a few cycles
        - mod_{ssl,md}: init_stapling_status hooks should return an int
        - util_md5: avoid temporary stack result in ap_md5_binary()
        - mod_proxy_balancer: Add a missing </tr>
        - mod_md: get_stapling_status hooks should return an int
        - mod_session: Improve a message about SessionExpiryUpdateInterval values
     trunk patch:
          http://svn.apache.org/r1837388
          http://svn.apache.org/r1876549
          http://svn.apache.org/r1877551
          http://svn.apache.org/r1882210
          http://svn.apache.org/r1882399
          http://svn.apache.org/r1883414
     2.4.x patch: svn merge -c 1837388,1876549,1877551,1882210,1882399,1883414 ^/httpd/httpd/trunk .
     +1: jailletc36, ylavic, minfrin



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885610 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""af0f1c68ae8a97dbfdb60b8ca8aa1a797700015d"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:07:42Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:07:42Z""}}"
178,SubmitCommit,2021-01-17 17:20:20,minfrin,fork_close,"Vote, then promote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885611 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d9a9437cb0646075d09bd19fcffc86554d5d81aa"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:20:20Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:20:20Z""}}"
178,SubmitCommit,2021-01-17 17:23:37,minfrin,fork_close,"Backport to 2.4:

  *) Easy patches: synch 2.4.x and trunk
        - mod_http2: Fix ascii art
        - mod_http2: fix some dox comments
        - mod_dav: Don't call memcpy(,NULL,0)
        - mod_ssl: Pass base_server in OpenSSL init log message
        - .gdbinit: tab to space
        - mod_so: don't try to load modules from a NULL path
        - mod_cache_file/mod_lua: Add missing ""const"" or ""static const"" qualifiers
                                  in some command_rec definitions
        - mod_lua: Fix compilation error if APR_HAS_THREADS is not defined
        - core/log: fix an harmless warning spoted by gcc 10
        - mod_ssl: update comment
     trunk patch:
          http://svn.apache.org/r1810233
          http://svn.apache.org/r1827530
          http://svn.apache.org/r1874144
          http://svn.apache.org/r1877262
          http://svn.apache.org/r1878263
          http://svn.apache.org/r1880461
          http://svn.apache.org/r1882053
          http://svn.apache.org/r1882060
          http://svn.apache.org/r1883452
          http://svn.apache.org/r1884551
     2.4.x patch: svn merge -c 1810233,1827530,1874144,1877262,1878263,1880461,1882053,1882060,1883452,1884551 ^/httpd/httpd/trunk .
     +1: jailletc36, jorton, minfrin



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885612 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""64143c9eb8f8d59c373e5f01f2c2522da7e22b29"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:23:37Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:23:37Z""}}"
178,SubmitCommit,2021-01-17 17:32:45,minfrin,fork_close,"Comment.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885614 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8531c5f034a3a179b0a2b83d18bbfe4123bfde1e"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:32:45Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-17T17:32:45Z""}}"
178,SubmitCommit,2021-01-17 21:00:19,ylavic,fork_close,"Add mergeinfos after backports.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885623 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""36be41bf6e2a57cce0cfd1be1e5d31a3ea20334b"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-17T21:00:19Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-17T21:00:19Z""}}"
178,SubmitCommit,2021-01-17 22:46:45,ylavic,fork_close,"Merge r1884306, r1885626 from trunk:

ci: generate as many core files as there are crashes.


Get Lua dev package from liblua5.3-dev.

Call sysctl though sudo.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885628 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""35cb7368e468fc0d31c36f8faac6edf5acba73ea"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-17T22:46:45Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-17T22:46:45Z""}}"
178,SubmitCommit,2021-01-17 22:53:59,ylavic,fork_close,"Merge r1884326 from trunk:

Fix bash syntax in travis_run_linux.sh.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885629 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""70a27d700129cefbb221dbe7ae8044d1baece410"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-17T22:53:59Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-17T22:53:59Z""}}"
178,SubmitCommit,2021-01-17 23:56:55,covener,fork_close,"Merge r1885631 from trunk:

other half of command



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885632 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""580dad90a6ab95f4ab1bb354b7bc9d8a75e42fe4"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-17T23:56:55Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-17T23:56:55Z""}}"
178,SubmitCommit,2021-01-18 09:15:37,notroj,fork_close,"Remove non-user-visible changes, plus other tweaks. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885641 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2b8176c3c7c2d6054e2495692d32567936a009f8"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-01-18T09:15:37Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-01-18T09:15:37Z""}}"
178,SubmitCommit,2021-01-18 17:14:00,ylavic,fork_close,"Propose [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885660 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""98a66e44697362c50403e1e275ba476f51662bd0"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T17:14:00Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T17:14:00Z""}}"
178,SubmitCommit,2021-01-18 17:24:59,covener,fork_close,"vote

[skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885662 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1bea011be2164b03b8c77ce360f2bbc6efa0f954"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-18T17:24:59Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-01-18T17:24:59Z""}}"
178,SubmitCommit,2021-01-18 17:28:21,Christophe Jaillet,fork_close,"Update proposal

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885663 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3f4217413da1d212532257a69aaa4d812bcf778d"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-18T17:28:21Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-18T17:28:21Z""}}"
178,SubmitCommit,2021-01-18 17:31:23,Christophe Jaillet,fork_close,"Vote + promote

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885664 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""08daeb2cc17057f4a3b7d20256e65e08e8d2f729"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-18T17:31:23Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-18T17:31:23Z""}}"
178,SubmitCommit,2021-01-18 17:39:12,ylavic,fork_close,"Merge r1885659 from trunk:

mod_auth_digest: Fast validation of the nonce's base64 to fail early if
                 the format can't match anyway.

Submitted by: ylavic
Reviewed by: ylavic, covener, jailletc36


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885666 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3b6431eb9c9dba603385f70a2131ab4a01bf0d3b"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T17:39:12Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T17:39:12Z""}}"
178,SubmitCommit,2021-01-18 17:39:53,ylavic,fork_close,"Backported [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885667 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a2abff55329f4c6a58cc1a9e5f6fb18eed518c30"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T17:39:53Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T17:39:53Z""}}"
178,SubmitCommit,2021-01-18 19:37:18,Christophe Jaillet,fork_close,"Synch lowercase/Uppercase in a comment with trunk

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885671 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""898cfd71c02f82137732362ad266b50f99066dc2"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-18T19:37:18Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-18T19:37:18Z""}}"
178,SubmitCommit,2021-01-18 20:54:36,minfrin,fork_close,"Vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885672 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""441515718940dccf7a1be849892d975128882cd9"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-18T20:54:36Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-01-18T20:54:36Z""}}"
178,SubmitCommit,2021-01-18 21:26:30,ylavic,fork_close,"Vote & promote. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885673 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""70a12c644cd707aaf49055ce6b2d012949537ea4"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T21:26:30Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T21:26:30Z""}}"
178,SubmitCommit,2021-01-18 21:29:59,ylavic,fork_close,"Vote (by inspection) & promote. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885674 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""25fa100f9689af4a2f102065749d3ff7b7fe78f1"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T21:29:59Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-18T21:29:59Z""}}"
178,SubmitCommit,2021-01-19 14:21:54,ylavic,fork_close,"Propose fix for PR 63010. [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885692 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e611b2022f5177fcccfe95b61d2d72063f0456cb"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-19T14:21:54Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-01-19T14:21:54Z""}}"
178,SubmitCommit,2021-01-19 19:29:43,Christophe Jaillet,fork_close,"Merge most of r1747469 from trunk

      * When ap_cstr_casecmp[n] have been introduced, in r1747469, it has 
         introduced many differences between 2.4.x and trunk.
         Direct backporting was not that easy because:
            - it was initialy introduced as ap_casecmpstr[n] with several patches
            - it touched some files that were not in 2.4.x branch
         Later, parts of it have already been backported.

         This patch tries to clean all this.

Submitted by: many people
Reviewed by: jailletc36, minfrin, ylavic
Backported by: jailletc36

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885697 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5ace948f421647ae58ae8ea8adf3695019c0d24b"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-19T19:29:43Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-19T19:29:43Z""}}"
178,SubmitCommit,2021-01-21 11:41:58,notroj,fork_close,"Propose coalescing fixes for mod_ssl. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885753 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7e70155a58ac188ce2e8e7c09b064e3843538507"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-01-21T11:41:58Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-01-21T11:41:58Z""}}"
178,SubmitCommit,2021-01-22 16:46:12,Christophe Jaillet,fork_close,"Merge r1881303,r1881304,r1881305,r1881306 from trunk

  *) Fix some Windows 64 compilation warnings

Submitted by: jailletc36
Reviewed by: jailletc36, minfrin, ylavic (by inspection)
Backported by: jailletc36

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885806 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2c05a18fcca368685942c4d444e01391dc1eae4d"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-22T16:46:12Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-22T16:46:12Z""}}"
178,SubmitCommit,2021-01-22 16:46:52,Christophe Jaillet,fork_close,"Remove backported item

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885807 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ff0c66c9540268cab005f9958832f17775288eea"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-22T16:46:52Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-22T16:46:52Z""}}"
178,SubmitCommit,2021-01-22 16:56:26,Christophe Jaillet,fork_close,"Update mergeinfo

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885808 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""846b46787ec721590fd77c5a1bb39c074b984235"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-22T16:56:26Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-22T16:56:26Z""}}"
178,SubmitCommit,2021-01-23 06:54:18,Christophe Jaillet,fork_close,"Add some missing hyper links to directives.
Remove some <var> in <syntax> to be more consistant with the rest of the doc.
Remove a duplicated traling ""."".

(r1885833 on trunk)

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885834 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""70da9dee8a5fc17464b6174a16f6f25f6ec7cdef"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-23T06:54:18Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-23T06:54:18Z""}}"
178,SubmitCommit,2021-01-23 07:29:38,Christophe Jaillet,fork_close,"s/2020/2021/

Happy New Year!

(r1885835 on trunk)

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885836 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8a375fcf49c174683a20fafbcc055c54f4d9525f"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-23T07:29:38Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-23T07:29:38Z""}}"
178,SubmitCommit,2021-01-23 08:11:39,Christophe Jaillet,fork_close,"Synch with trunk:
	Fix a typo
	Remove a useless empty line
	Turn a tab into spaces to be consistent

(r1740880 on trunk)

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885837 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""af3e61e81d3597312b8556876fdbf9bb43f9f81b"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-23T08:11:39Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-23T08:11:39Z""}}"
178,SubmitCommit,2021-01-23 14:36:23,Lucien Gentis,fork_close,"fr doc XML files updates.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885852 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1eb73f5d8bc309c85522f7e91347c74be4604d85"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-23T14:36:23Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-23T14:36:23Z""}}"
178,SubmitCommit,2021-01-23 14:39:00,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1885853 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cabededf518f0bb3eadb710adfb5a531ddd3315e"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-23T14:39:00Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-01-23T14:39:00Z""}}"
178,SubmitCommit,2021-01-31 22:00:36,Christophe Jaillet,fork_close,"Propose

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886086 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5ca565a8dba7f17abb1a47b22a42b316c3a35b9b"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-31T22:00:36Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-01-31T22:00:36Z""}}"
178,SubmitCommit,2021-02-01 10:33:02,rpluem,fork_close,"* Propose

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886099 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""63213236115fc8a95ca4f3acfc3ec69668543826"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-02-01T10:33:02Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-02-01T10:33:02Z""}}"
178,SubmitCommit,2021-02-02 14:12:10,notroj,fork_close,"Votes. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886123 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cf53bc266a227f0b1694c78820d78055ac4a92f7"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-02-02T14:12:10Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-02-02T14:12:10Z""}}"
178,SubmitCommit,2021-02-02 23:32:51,ylavic,fork_close,"Propose, vote/promote. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886145 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6088ed78c90e49ca3e635fd3de64ecb2619c3e96"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-02-02T23:32:51Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-02-02T23:32:51Z""}}"
178,SubmitCommit,2021-02-03 12:01:15,ylavic,fork_close,"Update proposal. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886155 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""94a38e0f40699ad987df6fd4a9c93ada0d403f49"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-02-03T12:01:15Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-02-03T12:01:15Z""}}"
178,SubmitCommit,2021-02-05 09:34:56,rpluem,fork_close,"* Propose

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886226 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""bcea0374799fba016a9ccfd8d15119a778afffc4"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-02-05T09:34:56Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-02-05T09:34:56Z""}}"
178,SubmitCommit,2021-02-11 10:49:17,rpluem,fork_close,"* Add proposal

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886417 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3da903e6e5eb0422535dde42cc0ba98867c2305b"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-02-11T10:49:17Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-02-11T10:49:17Z""}}"
178,SubmitCommit,2021-02-11 10:51:19,rpluem,fork_close,"Merge r1886098 from trunk:

* Do variable setting in a more portable way such that it works on MacOS as well
Submitted by: rpluem
Reviewed by: rpluem, jorton, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886418 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""af3a612cd114478a5967b7ed14f6f105d3d517d3"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-02-11T10:51:19Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-02-11T10:51:19Z""}}"
178,SubmitCommit,2021-02-24 21:52:57,ylavic,fork_close,"Update proposal [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886894 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""9b765d027be4b92281fea71678e21c2e217128e4"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-02-24T21:52:57Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-02-24T21:52:57Z""}}"
178,SubmitCommit,2021-02-25 11:25:50,ylavic,fork_close,"Votes [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886913 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d58525ea7eaa8c3c6c2f5dfda2b2d998385ae003"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-02-25T11:25:50Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-02-25T11:25:50Z""}}"
178,SubmitCommit,2021-02-28 11:43:57,Christophe Jaillet,fork_close,"Add missing pt translation

PR 41433

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886995 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1c7b7a1f9bdc105fa71b7f94e33bc143c695d044"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-02-28T11:43:57Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-02-28T11:43:57Z""}}"
178,SubmitCommit,2021-02-28 14:28:53,Christophe Jaillet,fork_close,"Add an example.
Synch with 2.4.x (syntax highlight) + secret introduced in 2.4.42.
Small doc rearrangement so that the ""Beyond this list of basic attributes"" is actually after the description of all items.

Mostly r 1792168 + r1886996 on trunk


[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1886997 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""322c51e1f5fd6e7c24c3fe3b3c736447eca33a26"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-02-28T14:28:53Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-02-28T14:28:53Z""}}"
178,SubmitCommit,2021-03-01 20:20:42,ylavic,fork_close,"Propose.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887054 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""af4d2cdec8e1c71669e0c57c3b51fe6d0deab1f3"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-01T20:20:42Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-01T20:20:42Z""}}"
178,SubmitCommit,2021-03-01 20:35:36,covener,fork_close,"vote/promote where I can 


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887055 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3dcfd313f8a441c2cfe9cac27b0f086828580a59"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-03-01T20:35:36Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-03-01T20:35:36Z""}}"
178,SubmitCommit,2021-03-01 20:39:58,covener,fork_close,"move to stalled


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887056 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4f9feabcd015385f922a3d3f7517e07bb96e5ca7"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-03-01T20:39:58Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-03-01T20:39:58Z""}}"
178,SubmitCommit,2021-03-01 20:40:37,covener,fork_close,"move, not copy.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887057 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0d04e6673912d7edff4cb92a4272de5211139fb6"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-03-01T20:40:37Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-03-01T20:40:37Z""}}"
178,SubmitCommit,2021-03-01 22:43:27,Christophe Jaillet,fork_close,"Vote

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887059 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fd612e82a989eeccd37ce6ed7f792078d0c7506f"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-01T22:43:27Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-01T22:43:27Z""}}"
178,SubmitCommit,2021-03-02 07:43:35,rpluem,fork_close,"Merge r1885939, r1885940, r1885941, r1885945 from trunk:

Do not allow to set empty bind passwords to be set via AuthLDAPBindPassword

Binds with empty passwords always succeed, but in case the password of the
user was not empty subsequent LDAP operations fail.


Before doing any bind check that the provided username is not NULL and that the
password is neither NULL nor empty.

Binds with empty passwords always succeed, but in case the password of the
user was not empty subsequent LDAP operations fail.
This causes authentications that use user supplied credentials
(AuthLDAPInitialBindAsUser set to on) to fail with status code 500 instead of
401 if the user supplied an empty password.


* Document r1885939 and r1885940

* Add lognumber

Reviewed by: rpluem, ylavic, covener

Github: closes #168


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887080 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""427d38fa7e31bd9e96c6a90f143f4aa286e8769f"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-03-02T07:43:35Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-03-02T07:43:35Z""}}"
178,SubmitCommit,2021-03-02 07:44:18,rpluem,fork_close,"* Backported in r1887080. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887081 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""eedca7bc7cd2845564938b989c7b3cef9c6b3f96"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-03-02T07:44:18Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-03-02T07:44:18Z""}}"
178,SubmitCommit,2021-03-02 14:46:45,Stefan Eissing,fork_close,"vote

[skip ci]



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887086 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""265f768597acb443f54a9da2c633bae411323473"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-02T14:46:45Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-02T14:46:45Z""}}"
178,SubmitCommit,2021-03-02 14:57:07,Stefan Eissing,fork_close,"vote and promote.

[skip ci]



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887088 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8afb50aec9b739a61e388500775d7151b0f9bcc9"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-02T14:57:07Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-02T14:57:07Z""}}"
178,SubmitCommit,2021-03-02 15:26:12,Stefan Eissing,fork_close,"vote and promote

[skip ci]



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887089 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d40961fcef88632623068bd55f55e859e9cbdb70"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-02T15:26:12Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-02T15:26:12Z""}}"
178,SubmitCommit,2021-03-02 15:35:55,ylavic,fork_close,"Merge r1887050, r1887052 from trunk:

mod_session: save one apr_strtok() in session_identity_decode().

When the encoding is invalid (missing '='), no need to parse further.


mod_session: account for the '&' in identity_concat().


Submitted by: ylavic
Reviewed by: ylavic, covener, jailletc36


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887090 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""97c9e9d66cd2520e8d76d278368f15227f9cc5c5"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T15:35:55Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T15:35:55Z""}}"
178,SubmitCommit,2021-03-02 15:37:12,ylavic,fork_close,"Backported [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887091 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""37fdb995bb313423bfae558e4ed401776ddbbf3d"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T15:37:12Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T15:37:12Z""}}"
178,SubmitCommit,2021-03-02 15:39:23,Stefan Eissing,fork_close,"vote and promote. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887092 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d9fcb966e486c6324332990af91cd7c1aea6e0a7"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-02T15:39:23Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-02T15:39:23Z""}}"
178,SubmitCommit,2021-03-02 20:02:32,rpluem,fork_close,"Merge r1398307, r1465839, r1530603, r1578759, r1729507 from trunk:

* If we face a timeout during receiving the response from the backend and if
  we pinged it successfully before don't assume the whole backend has failed.
  Assume that only the request has failed and return a gateway timeout then.



Add failontimeout to allow server admin to mark balancer member in err if IO timeout occurs.

ping tuning via Yann Ylavic <ylavic.dev@gmail.com>


Use 'apr_table_setn' instead of 'apr_table_set' when possible in order to save memory.

mod_proxy: axe negative ""ping"" parameter setting and handling.
This used to check for the backend connection readability only (instead of
the full ping/100-continue round-trip), but the case is already handled by
ap_proxy_connect_backend() which is always called.


Submitted by: rpluem, druggeri, jim, jailletc36, ylavic
Reviewed by: rpluem, ylavic, icing

Github: closes #170


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887116 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""599310caf39a1eaf62ab0fe54fd212ed27fdd4c3"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-03-02T20:02:32Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-03-02T20:02:32Z""}}"
178,SubmitCommit,2021-03-02 20:50:40,ylavic,fork_close,"Merge r1886141, r1886151 from trunk:

* We need to check for (!scheme && (u = strchr(url, ':')) && (u - url) > 14)
  later as (!scheme || u[0] != '/' || u[1] != '/' || u[2] == '\0') is true
  for requests with the CONNECT method which we need to decline. But in many
  cases requests with the CONNECT method have (u - url) > 14 as in this
  case (u - url) is the length of the FQDN the forward proxy should connect
  to.


mod_proxy_http: follow up to r1886141, axe overlong scheme check.

Since mod_proxy can see CONNECT URIs, ""hostname:port"" versus ""scheme:""
is hardly distinguishable (we don't want to limit the length of hostnames),
and we don't allocate the scheme anymore while parsing, let's simply decline
unrecognized schemes (overlong or not) and be caught by the no-handler case
if there really is no proxy handler interested.


Submitted by: rpluem, ylavic
Reviewed by: ylavic, covener, icing


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887118 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""9f7d27daddf1c1df1f6f6b56c756c04fe51470b5"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T20:50:40Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T20:50:40Z""}}"
178,SubmitCommit,2021-03-02 20:51:55,ylavic,fork_close,"Merge r1885691 from trunk:

mod_proxy_hcheck: don't pile up health checks.  PR 63010.

Prevent health checks from running for a worker until the last one is fully
finished, to avoid making things worse (memory growth, #connections, ..).

This is done by zeroing worker->s->updated before scheduling the worker in the
threadpool, and resetting the time when it's finished. The scheduler then does
nothing if worker->s->updated is zero.

Also, to save some apr_time_now() calls when !HC_USE_THREADS, *baton->now is
updated in the callback and reused by the scheduler.


Submitted by: ylavic
Reviewed by: ylavic, covener, icing


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887119 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""184a3aa8b71d9701ba1d7087d53c69cb663d0c32"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T20:51:55Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T20:51:55Z""}}"
178,SubmitCommit,2021-03-02 20:53:57,ylavic,fork_close,"Apply CHANGES and axe backported entries. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887120 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3f0a538af88be5cf7fe2bfaae838fd2a26a89e2f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T20:53:57Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-02T20:53:57Z""}}"
178,SubmitCommit,2021-03-03 10:43:28,Stefan Eissing,fork_close,"Propose http2 backport. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887137 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e1b7cda5d50590a6dd61ac26472c01233dde1c81"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-03T10:43:28Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-03T10:43:28Z""}}"
178,SubmitCommit,2021-03-03 17:40:36,notroj,fork_close,"Merge r1875871, r1875879, r1875881, r1875883, r1875988, r1876014, r1876037, r1876787 from trunk:

mod_ssl: Extend the coalescing filter to avoid sending HTTP response
headers in a separate TLS record to the response body in some cases.

* modules/ssl/ssl_engine_io.c:
  Increase size of coalesce buffer to AP_IOBUFSIZE (8Kb).
  (ssl_io_filter_coalesce): Try harder to fill the prefix which
  gets coalesced, including a read&split of a morphing bucket type

* modules/ssl/ssl_engine_io.c: (ssl_io_filter_coalesce): Handle the
  case of a bucket which morphs to a bucket short enough to fit within
  the buffer without needing to split.

* modules/ssl/ssl_engine_io.c: Update comment, no function change, 

* modules/ssl/ssl_engine_io.c (ssl_io_filter_coalesce): Treat zero-length
  buckets consistently (ignore them) after a morphing bucket morphs.

* modules/ssl/ssl_engine_io.c (ssl_io_filter_coalesce): Handle the case
  where apr_bucket_read fails with an error and hence our current bucket
  remains the morphing bucket and is not replaced with a 'data' bucket.
  If the error is not EAGAIN, error out with an AP_FILTER_ERROR,
  otherwise just do not consider the morphing bucket that has no data for
  coalesce.

* modules/ssl/ssl_engine_io.c (ssl_io_filter_coalesce): Further tweaks
  to logic, comments and debugging:
  - allow buffering up to exactly COALESCE_BYTES rather than COALESCE_BYTES-1.
  - put bucket type name in logging output
  - do not coalesce a single-bucket prefix of length equal to the
    buffer size (which would be a pointless memory copy).

* modules/ssl/ssl_engine_io.c (ssl_io_filter_coalesce): Update comment only. 

Submitted by: jorton, rpluem
Reviewed by: jorton, ylavic, icing
Github: closes #113


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887154 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""906cb0c0642ac2ddcc30308b894a9176b1eff621"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-03T17:40:36Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-03T17:40:36Z""}}"
178,SubmitCommit,2021-03-03 17:43:04,notroj,fork_close,"Merge r1874007 from trunk:

* modules/ssl/ssl_util_ocsp.c (serialize_request): Set the Connection header
  to close to indicate that we do not want to keep the HTTP connection to the
  OCSP responder alive. We don't reuse the connections currently and if the
  OCSP responder keeps the connection alive this could cause us to wait for
  keepalive timeout of the OCSP responder to timeout until we finish our
  reading of the OCSP response.

PR: 64135
Submitted by: rpluem
Reviewed by: jorton, ylavic, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887155 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8fd786f4f0ff79c6b94f48ba8b24b01eaefa322a"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-03T17:43:04Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-03T17:43:04Z""}}"
178,SubmitCommit,2021-03-03 17:43:23,notroj,fork_close,"Merged*2, [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887156 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""24401852aa2aeb4f6bbdfcf61a07541ec56be692"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-03T17:43:23Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-03T17:43:23Z""}}"
178,SubmitCommit,2021-03-04 09:09:33,notroj,fork_close,"Propose Lua 5.4 support. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887166 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ef73d54fc81f45efe52f2d98b482fb420a135555"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-04T09:09:33Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-04T09:09:33Z""}}"
178,SubmitCommit,2021-03-05 23:03:51,Christophe Jaillet,fork_close,"Fixe some typo in CHANGES.

Thanks to: https://fossies.org/linux/test/httpd-2.4.x-snap.tar.bz2/codespell.html

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887235 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c910f286abbb729ae76adee32b8f739b02165bb0"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-05T23:03:51Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-05T23:03:51Z""}}"
178,SubmitCommit,2021-03-05 23:09:20,Christophe Jaillet,fork_close,"Remove duplicated CHANGES entry

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887236 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d1c4b7575fbaaa01fb9b405c7dbfb8e928234bac"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-05T23:09:20Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-05T23:09:20Z""}}"
178,SubmitCommit,2021-03-06 07:27:41,Christophe Jaillet,fork_close,"Propose

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887246 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""445602281939ea2eb972ef50fe04344ba079f27e"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-06T07:27:41Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-06T07:27:41Z""}}"
178,SubmitCommit,2021-03-06 08:27:20,Christophe Jaillet,fork_close,"Propose

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887247 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ee3a0ca8ec59b3b42e679549339bdecd39eb1b20"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-06T08:27:20Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-06T08:27:20Z""}}"
178,SubmitCommit,2021-03-06 14:03:54,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887260 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""efe96f44503f9d39912174c3ddd211eb7cd06876"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-06T14:03:54Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-06T14:03:54Z""}}"
178,SubmitCommit,2021-03-06 14:04:41,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887261 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e5fa6f9413783dac46909bf4ca7ab1446e771c5b"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-06T14:04:41Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-06T14:04:41Z""}}"
178,SubmitCommit,2021-03-06 14:56:28,ylavic,fork_close,"Votes. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887263 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""9354e585582b971b1a78607f5de103d8ecd0fd3d"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-06T14:56:28Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-06T14:56:28Z""}}"
178,SubmitCommit,2021-03-09 11:22:59,Stefan Eissing,fork_close,Changes from trunk regarding the new `ap_ssl_*` functions and hooks.,"{""sha"": ""3a1698b2676f56f281f354a34a7dbde6935ade2f"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:22:59Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:22:59Z""}}"
178,SubmitCommit,2021-03-09 11:38:54,Stefan Eissing,fork_close,"  *) mod_md: v2.4.0 with improvements and bugfixes
     - MDPrivateKeys allows the specification of several types. Beside ""RSA"" plus
     optional key lengths elliptic curves can be configured. This means you can
     have multiple certificates for a Managed Domain with different key types.
     With ```MDPrivateKeys secp384r1 rsa2048``` you get one ECDSA  and one RSA
     certificate and all modern client will use the shorter ECDSA, while older
     client will get the RSA certificate.
     Many thanks to @tlhackque who pushed and helped on this.
     - Support added for MDomains consisting of a wildcard. Configuring
     ```MDomain *.host.net``` will match all virtual hosts matching that pattern
     and obtain one certificate for it (assuming you have 'dns-01' challenge
     support configured). Addresses #239.
     - Removed support for ACMEv1 servers. The only known installation used to
     be Let's Encrypt which has disabled that version more than a year ago for
     new accounts.
     - Andreas Ulm (<https://github.com/root360-AndreasUlm>) implemented the
     ```renewing``` call to ```MDMessageCmd``` that can deny a certificate
     renewal attempt. This is useful in clustered installations, as
     discussed in #233).
     - New event ```challenge-setup:<type>:<domain>```, triggered when the
     challenge data for a domain has been created. This is invoked before the
     ACME server is told to check for it. The type is one of the ACME challenge
     types. This is invoked for every DNS name in a MDomain.
     - The max delay for retries has been raised to daily (this is like all
     retries jittered somewhat to avoid repeats at fixed time of day).
     - Certain error codes reported by the ACME server that indicate a problem
     with the configured data now immediately switch to daily retries. For
     example: if the ACME server rejects a contact email or a domain name,
     frequent retries will most likely not solve the problem. But daily retries
     still make sense as there might be an error at the server and un-supervised
     certificate renewal is the goal. Refs #222.
     - Test case and work around for domain names > 64 octets. Fixes #227.
     When the first DNS name of an MD is longer than 63 octets, the certificate
     request will not contain a CN field, but leave it up to the CA to choose one.
     Currently, Lets Encrypt looks for a shorter name in the SAN list given and
     fails the request if none is found. But it is really up to the CA (and what
     browsers/libs accept here) and may change over the years. That is why
     the decision is best made at the CA.
     - Retry delays now have a random +/-[0-50]% modification applied to let
     retries from several servers spread out more, should they have been
     restarted at the same time of day.
     - Fixed several places where the 'badNonce' return code from an ACME server
     was not handled correctly. The test server 'pebble' simulates this behaviour
     by default and helps nicely in verifying this behaviour. Thanks, pebble!
     - Set the default `MDActivationDelay` to 0. This was confusing to users that
     new certificates were deemed not usably before a day of delay. When clocks are
     correct, using a new certificate right away should not pose a problem.
     - When handling ACME authorization resources, the module no longer requires
     the server to return a ""Location"" header, as was necessary in ACMEv1.
     Fixes #216.
     - Fixed a theoretical uninitialized read when testing for JSON error responses
     from the ACME CA. Reported at <https://bz.apache.org/bugzilla/show_bug.cgi?id=64297>.
     - ACME problem reports from CAs that include parameters in the Content-Type
     header are handled correctly. (Previously, the problem text would not be
     reported and retries could exist CA limits.)
     - Account Update transactions to V2 CAs now use the correct POST-AS-GET method.
     Previously, an empty JSON object was sent - which apparently LE accepted,
     but others reject.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887337 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""db648acbc08154729eb8bd451ab6aa16e59dbed8"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-08T18:05:50Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:38:54Z""}}"
178,SubmitCommit,2021-03-09 11:40:38,Stefan Eissing,fork_close,"log tags, my nemesis

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887340 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""085b186776a7f9cd7f3b1aa34779145d25bec2eb"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-08T19:50:54Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:40:38Z""}}"
178,SubmitCommit,2021-03-09 11:41:22,Stefan Eissing,fork_close,"Use ASN1_STRING_data() if openssl verison < 1.1.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887342 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""88562a51de768e2b56d5d027e4868d1be2e55115"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-08T20:15:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:41:22Z""}}"
178,SubmitCommit,2021-03-09 11:41:22,Stefan Eissing,fork_close,"refrain from handling ip address alt names in pre 1.1 openssl

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887343 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""71b5f52f764512ca5f7e11044e97ba02fe752f4e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-08T21:51:53Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:41:22Z""}}"
178,SubmitCommit,2021-03-09 11:41:49,Stefan Eissing,fork_close,"lets try ASN1_STRING_data() for openssl 1.0.2

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887360 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""508ae2f3fc259659aac2808656359ea994fde772"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-09T09:20:24Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:41:49Z""}}"
178,SubmitCommit,2021-03-09 12:04:09,Stefan Eissing,fork_close,"Changed ap_ssl_answer_challenge() and its hook to provide PEM data for
certificate and key instead of file names.

Added support for this in mod_ssl and verified with a local mod_md
version that uses it.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887151 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3e89afefbca822581c4d2a4b626bb0e100053017"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-03T15:52:18Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T12:04:09Z""}}"
178,SubmitCommit,2021-03-09 12:05:12,Stefan Eissing,fork_close,"And the necessary log tags added just shortly afterwards.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887152 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6c153770896720ce4e1fb2060cacf022eb469125"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-03T15:52:56Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T12:05:12Z""}}"
178,SubmitCommit,2021-03-09 13:55:25,notroj,fork_close,"Votes. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887368 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4afeabb9caf1d38faa65e2e5dc427b59fe31e0a2"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-09T13:55:25Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-09T13:55:25Z""}}"
178,SubmitCommit,2021-03-09 14:41:20,jfclere,fork_close,"Votes. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887371 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2c0e76e771411f07fb44e85464da9299cb7851df"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-03-09T14:41:20Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-03-09T14:41:20Z""}}"
178,SubmitCommit,2021-03-09 15:37:55,ylavic,fork_close,"Promote [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887373 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ef4723061ce67a8a8f80878d078196ce1be04b44"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T15:37:55Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T15:37:55Z""}}"
178,SubmitCommit,2021-03-09 15:44:30,ylavic,fork_close,"Merge r1883668, r1886255 from trunk:

mod_http2: explicitely apr_thread_exit() at the end of slot_run().

Calling apr_thread_exit() before returning from the thread function avoids
leaking the thread's pool (until/unless APR-2.0 is used).


mod_http2: Fix workers synchronization on pchild cleanup.

When the MPM child exits and pre-workers_pool_cleanup() is called, all the
workers are not necessarily in their idle critical section, thus aborting slots
in the ->idle list only may leave worker threads alive, later blocked in the
idle critical section with no one to wake them.

Instead of the per-slot ->aborted flag, workers_pool_cleanup() will now set
workers->aborted ""globally"" such that slot_run() does not wait to be woken up
from idle in this case, and all workers really exit.

Also, for workers_pool_cleanup() to wait for all the workers to reach the
->zombies list before returning, a new ->all_done condition variable is armed
when the last thread exits. Since this depends on the atomic ->worker_count to
reach zero, for accuracy the increment in activate_slot() is moved before the
thread startup.


* modules/http2/h2_workers.h (struct h2_workers): volatilize ->aborted and
  add the ->all_done condition variable.

* modules/http2/h2_workers.c (push_slot, pop_slot): volatilize the h2_slot*
  being cas-ed.

* modules/http2/h2_workers.c (cleanup_zombies): rename to join_zombies(), and
  move ->worker_count atomic inc to slot_done().

* modules/http2/h2_workers.c (get_next): when workers->aborted, leave and don't
  wait for ->not_idle. Return an int/bool since it's gotten / not gotten.

* modules/http2/h2_workers.c (slot_done): signal ->all_done when the last
  worker and the MPM child are exiting.

* modules/http2/h2_workers.c (slot_run): rework the loops now that get_next()
  is the stop signal.

* modules/http2/h2_workers.c (workers_pool_cleanup): wait for ->all_done when
  needed, and remove the !workers->aborted condition since the cleanup will
  only be called once.

* modules/http2/h2_workers.c (activate_slot): move ->worker_count atomic inc
  before the thread creation and handle failure rollback.


github: closes #169

Submitted by: ylavic
Reviewed by: ylavic, icing, jorton


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887374 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""928b83ac663620127dafa986730eca8b74295004"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T15:44:30Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T15:44:30Z""}}"
178,SubmitCommit,2021-03-09 16:09:07,ylavic,fork_close,"Merge r1875353 from trunk:

* modules/proxy/mod_proxy_http.c (ap_proxy_http_process_response): Clear any
  possible returned buckets in the brigade in the error case. As we want to
  close the connection anyway there is no sensible content we could still
  sent and hence doing the needed life time transformation of the buckets
  would be a waste.

PR: 64234

Submitted by: rpluem
Reviewed by: ylavic, jorton, jfclere


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887378 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e7d7feb58b2a37a65f0cca5d2f5a55a148d3f3d2"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:09:07Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:09:07Z""}}"
178,SubmitCommit,2021-03-09 16:10:38,ylavic,fork_close,"Backported [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887379 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4770f57dcb4234c91442f06decaa09bf44a58ef1"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:10:38Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:10:38Z""}}"
178,SubmitCommit,2021-03-09 16:12:52,ylavic,fork_close,"Merge r1883184 from trunk:

Optimize 'ap_list_provider_names'.

Save some memory and potentialy avoid some useless copy .

Using 'goto' is not realy in line with httpd coding style, but the function is small and still readable IMHO.


Submitted by: jailletc36
Reviewed by: jailletc36, jorton, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887380 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""77b2843d14cedfc4b06336e8a560d6ddd8904a43"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:12:52Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:12:52Z""}}"
178,SubmitCommit,2021-03-09 16:14:18,ylavic,fork_close,"Backported in r1887380 [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887381 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b9fda92b13aafe8babb1667e1a50ab8bf14a0afc"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:14:18Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:14:18Z""}}"
178,SubmitCommit,2021-03-09 16:15:45,ylavic,fork_close,"Merge r1874674 from trunk:

bubble up an error if none of the passhrases work

previously, the un-decodable z->encoded would get set to NULL
but success would be returned


Submitted by: covener
Reviewed by: jailletc36, ylavic, covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887382 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""05d91046714911d5ce0c4bb20d7c49358e0f1d35"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:15:45Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:15:45Z""}}"
178,SubmitCommit,2021-03-09 16:16:18,ylavic,fork_close,"Backported in r1887382 [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887383 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b442289123f4878711f213eaf5e1a66d1b750900"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:16:18Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:16:18Z""}}"
178,SubmitCommit,2021-03-09 16:28:23,ylavic,fork_close,"Merge r1879285, r1879322, r1879345, r1879346, r1879465, r1879469, r1879470, r1879488, r1879541, r1879548 from trunk:

""[mod_dav_fs etag handling] should really honor the FileETag setting"".
- It now does.
- Add ""Digest"" to FileETag directive, allowing a strong ETag to be
  generated using a file digest.
- Add ap_make_etag_ex() and ap_set_etag_fd() to allow full control over
  ETag generation.
- Add concept of ""binary notes"" to request_rec, allowing packed bit flags
  to be added to a request.
- First binary note - AP_REQUEST_STRONG_ETAG - allows modules to force
  the ETag to a strong ETag to comply with RFC requirements, such as those
  mandated by various WebDAV extensions.


Be defensive when the request is missing.


Remove tabs.


Use a dedicated constant for the base64 sha1 length.


Be defensive when calculating the digest. Make sure the offset is initialised
to zero before reading the current offset.


Seek to the start of the file when calculating the ETag.


Add log numbers to util_etag.c.


Add MMAP support to ETag generation.


Use a brigade instead of direct reads, allow APR to handle MMAP.


Bump the logno.


Submitted by: minfrin
Reviewed by: minfrin, jim, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887384 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1d65a704e05de6d1c4a0c67108ed8703cddb6cb0"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:28:23Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:28:23Z""}}"
178,SubmitCommit,2021-03-09 16:30:07,ylavic,fork_close,"Backported in r1887384 [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887385 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""77652683490197f16ce8028982068602c6cfb3b4"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:30:07Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:30:07Z""}}"
178,SubmitCommit,2021-03-09 16:35:03,ylavic,fork_close,"Merge r1887244, r1887245 from trunk:

Fix a potential duplicated ID generation issue under heavy load.
This is due to a non thread safe use of a counter.

Use a counter for each thread instead to avoid the issue.

PR 65159


Follow-up to r1887244.

Wrong version of the patch attached :(


Submitted by: jailletc36
Reviewed by: jailletc36, ylavic, jorton


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887386 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5ae750cc05eb182da6e30abcbcb9ef84a7248b07"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:35:03Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:35:03Z""}}"
178,SubmitCommit,2021-03-09 16:35:32,ylavic,fork_close,"Backported in r1887386 [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887387 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a8ce1704a084572a39b7ef07e2f0d62c09f34862"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:35:32Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T16:35:32Z""}}"
178,SubmitCommit,2021-03-09 18:15:22,ylavic,fork_close,"Fix APLOGNO(10258) missing from r1887384.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887390 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""56e910ce9c0cc4e976950fb00cd5f84cb01a0279"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T18:15:22Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-09T18:15:22Z""}}"
178,SubmitCommit,2021-03-13 10:56:57,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887576 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""314b636cdd568f8671554c0313dc64983dc4f08d"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-13T10:56:57Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-13T10:56:57Z""}}"
178,SubmitCommit,2021-03-13 10:58:07,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887577 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""12affdbc55da0584626e1ed1601e353f7f60a6e1"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-13T10:58:07Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-13T10:58:07Z""}}"
178,SubmitCommit,2021-03-13 16:24:07,Christophe Jaillet,fork_close,"Add a note

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887601 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""46b209f777df7dae0c6b3d70e3a595c5d71cadcb"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-13T16:24:07Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-13T16:24:07Z""}}"
178,SubmitCommit,2021-03-14 16:16:34,Christophe Jaillet,fork_close,"Axe modules.apache.org.

It has been off-line for a long time now, and there is no plan to bring it up, AFAIK.

r1887636 on trunk
+ a few changes to synch with trunk

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887638 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ff3991e9b84cf4d9f592351c7ecb21081fd53f0d"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-14T16:16:34Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-03-14T16:16:34Z""}}"
178,SubmitCommit,2021-03-17 12:11:08,ylavic,fork_close,"Propose. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887751 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f50e1840f8060244f0bbdc4755b60302b7cea5d3"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-17T12:11:08Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-03-17T12:11:08Z""}}"
178,SubmitCommit,2021-03-19 16:12:29,notroj,fork_close,"Merge r1880958 from trunk:

Document limitations for private key format in
SSLProxyMachineCertificateFile and
SSLProxyMachineCertificatePath. PR 63935.

Plus, further tweak text to explain failure mode specific to 2.4.

Submitted by: rjung, jorton
Reviewed by: jorton



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887813 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0d00b37e0dd0a6c211bdab32539b42b5ff630a01"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-19T16:12:29Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-19T16:12:29Z""}}"
178,SubmitCommit,2021-03-19 16:38:51,notroj,fork_close,"Update Lua proposal, thanks to jailletc36 for catching missing commit.
[skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887814 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b84e13f583a57d1f5df197e4d685638506c6fc26"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-19T16:38:51Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-19T16:38:51Z""}}"
178,SubmitCommit,2021-03-19 16:52:59,notroj,fork_close,"Vote, [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887815 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0b51b92cb85170866c37ef67d20c176fe5975692"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-19T16:52:59Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-03-19T16:52:59Z""}}"
178,SubmitCommit,2021-03-20 13:33:31,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887851 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3faa929273b0663e3c49bf02d46f154b727d72c9"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-20T13:33:31Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-20T13:33:31Z""}}"
178,SubmitCommit,2021-03-20 13:34:22,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1887852 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1dc07f7a0a223af464dfc0e41ae31e7c2948eb8b"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-20T13:34:22Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-03-20T13:34:22Z""}}"
178,SubmitCommit,2021-03-22 09:56:33,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""59a6770d424cf794bd27d1d7418df969442f114a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-22T09:56:33Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-22T09:56:33Z""}}"
178,SubmitCommit,2021-03-24 12:52:36,covener,fork_close,"Merge r1888002 from trunk:

pull in forward-dns example from authz_host

lots of people miss it reading the doc for Require in authz_core only




git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1888003 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""33a54c56ad59c9ddaeaacb0d821beabf76925fd9"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-03-24T12:52:36Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-03-24T12:52:36Z""}}"
178,SubmitCommit,2021-03-24 13:24:25,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""337e9a42ba191c0e8527965c03408945955a8281"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-24T13:24:25Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-24T13:24:25Z""}}"
178,SubmitCommit,2021-03-24 13:45:46,Stefan Eissing,fork_close,mod_md: synchronized with git and apache trunk including r1888006.,"{""sha"": ""6f165a554f6f6b44081dbd3b00738edde37f8665"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-24T13:45:46Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-24T13:45:46Z""}}"
178,OpenPR,2021-03-24 14:08:48,icing,fork_close,,
178,ClosePR,2021-03-24 14:31:27,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4502286734"", ""commit_url"": null}"
179,SubmitCommit,2021-03-09 11:22:59,Stefan Eissing,fork_close,Changes from trunk regarding the new `ap_ssl_*` functions and hooks.,"{""sha"": ""3a1698b2676f56f281f354a34a7dbde6935ade2f"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:22:59Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:22:59Z""}}"
179,SubmitCommit,2021-03-09 11:38:54,Stefan Eissing,fork_close,"  *) mod_md: v2.4.0 with improvements and bugfixes
     - MDPrivateKeys allows the specification of several types. Beside ""RSA"" plus
     optional key lengths elliptic curves can be configured. This means you can
     have multiple certificates for a Managed Domain with different key types.
     With ```MDPrivateKeys secp384r1 rsa2048``` you get one ECDSA  and one RSA
     certificate and all modern client will use the shorter ECDSA, while older
     client will get the RSA certificate.
     Many thanks to @tlhackque who pushed and helped on this.
     - Support added for MDomains consisting of a wildcard. Configuring
     ```MDomain *.host.net``` will match all virtual hosts matching that pattern
     and obtain one certificate for it (assuming you have 'dns-01' challenge
     support configured). Addresses #239.
     - Removed support for ACMEv1 servers. The only known installation used to
     be Let's Encrypt which has disabled that version more than a year ago for
     new accounts.
     - Andreas Ulm (<https://github.com/root360-AndreasUlm>) implemented the
     ```renewing``` call to ```MDMessageCmd``` that can deny a certificate
     renewal attempt. This is useful in clustered installations, as
     discussed in #233).
     - New event ```challenge-setup:<type>:<domain>```, triggered when the
     challenge data for a domain has been created. This is invoked before the
     ACME server is told to check for it. The type is one of the ACME challenge
     types. This is invoked for every DNS name in a MDomain.
     - The max delay for retries has been raised to daily (this is like all
     retries jittered somewhat to avoid repeats at fixed time of day).
     - Certain error codes reported by the ACME server that indicate a problem
     with the configured data now immediately switch to daily retries. For
     example: if the ACME server rejects a contact email or a domain name,
     frequent retries will most likely not solve the problem. But daily retries
     still make sense as there might be an error at the server and un-supervised
     certificate renewal is the goal. Refs #222.
     - Test case and work around for domain names > 64 octets. Fixes #227.
     When the first DNS name of an MD is longer than 63 octets, the certificate
     request will not contain a CN field, but leave it up to the CA to choose one.
     Currently, Lets Encrypt looks for a shorter name in the SAN list given and
     fails the request if none is found. But it is really up to the CA (and what
     browsers/libs accept here) and may change over the years. That is why
     the decision is best made at the CA.
     - Retry delays now have a random +/-[0-50]% modification applied to let
     retries from several servers spread out more, should they have been
     restarted at the same time of day.
     - Fixed several places where the 'badNonce' return code from an ACME server
     was not handled correctly. The test server 'pebble' simulates this behaviour
     by default and helps nicely in verifying this behaviour. Thanks, pebble!
     - Set the default `MDActivationDelay` to 0. This was confusing to users that
     new certificates were deemed not usably before a day of delay. When clocks are
     correct, using a new certificate right away should not pose a problem.
     - When handling ACME authorization resources, the module no longer requires
     the server to return a ""Location"" header, as was necessary in ACMEv1.
     Fixes #216.
     - Fixed a theoretical uninitialized read when testing for JSON error responses
     from the ACME CA. Reported at <https://bz.apache.org/bugzilla/show_bug.cgi?id=64297>.
     - ACME problem reports from CAs that include parameters in the Content-Type
     header are handled correctly. (Previously, the problem text would not be
     reported and retries could exist CA limits.)
     - Account Update transactions to V2 CAs now use the correct POST-AS-GET method.
     Previously, an empty JSON object was sent - which apparently LE accepted,
     but others reject.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887337 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""db648acbc08154729eb8bd451ab6aa16e59dbed8"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-08T18:05:50Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:38:54Z""}}"
179,SubmitCommit,2021-03-09 11:40:38,Stefan Eissing,fork_close,"log tags, my nemesis

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887340 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""085b186776a7f9cd7f3b1aa34779145d25bec2eb"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-08T19:50:54Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:40:38Z""}}"
179,SubmitCommit,2021-03-09 11:41:22,Stefan Eissing,fork_close,"Use ASN1_STRING_data() if openssl verison < 1.1.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887342 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""88562a51de768e2b56d5d027e4868d1be2e55115"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-08T20:15:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:41:22Z""}}"
179,SubmitCommit,2021-03-09 11:41:22,Stefan Eissing,fork_close,"refrain from handling ip address alt names in pre 1.1 openssl

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887343 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""71b5f52f764512ca5f7e11044e97ba02fe752f4e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-08T21:51:53Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:41:22Z""}}"
179,SubmitCommit,2021-03-09 11:41:49,Stefan Eissing,fork_close,"lets try ASN1_STRING_data() for openssl 1.0.2

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887360 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""508ae2f3fc259659aac2808656359ea994fde772"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-09T09:20:24Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T11:41:49Z""}}"
179,SubmitCommit,2021-03-09 12:04:09,Stefan Eissing,fork_close,"Changed ap_ssl_answer_challenge() and its hook to provide PEM data for
certificate and key instead of file names.

Added support for this in mod_ssl and verified with a local mod_md
version that uses it.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887151 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3e89afefbca822581c4d2a4b626bb0e100053017"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-03T15:52:18Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T12:04:09Z""}}"
179,SubmitCommit,2021-03-09 12:05:12,Stefan Eissing,fork_close,"And the necessary log tags added just shortly afterwards.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887152 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6c153770896720ce4e1fb2060cacf022eb469125"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-03T15:52:56Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-09T12:05:12Z""}}"
179,SubmitCommit,2021-03-22 09:56:33,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""59a6770d424cf794bd27d1d7418df969442f114a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-22T09:56:33Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-22T09:56:33Z""}}"
179,SubmitCommit,2021-03-24 13:24:25,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""337e9a42ba191c0e8527965c03408945955a8281"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-24T13:24:25Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-24T13:24:25Z""}}"
179,SubmitCommit,2021-03-24 13:45:46,Stefan Eissing,fork_close,mod_md: synchronized with git and apache trunk including r1888006.,"{""sha"": ""6f165a554f6f6b44081dbd3b00738edde37f8665"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-24T13:45:46Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-24T13:45:46Z""}}"
179,OpenPR,2021-03-24 14:32:43,icing,fork_close,,
179,Revise,2021-03-26 12:51:28,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""65b1ca08c40118b1060657ac9edd12c5ac4065b0"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-26T12:51:28Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-26T12:51:28Z""}}"
179,Revise,2021-03-26 15:17:43,Stefan Eissing,fork_close,"Using the new ap_ssl_conn_is_ssl() and ap_ssl_var_lookup() in all internal modules.

 * leaving mod_nw_ssl and mod_ssl itself untouched
 * removing mod_ssl.h includes where no longer necessary
 * some modules might skip post_config hooks, but those were left in, even when empty now.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1887364 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""dc77d391019f4110ff8463d29aa1c56c74a79446"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-09T12:55:55Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-26T15:17:43Z""}}"
179,Revise,2021-03-26 16:01:00,Stefan Eissing,fork_close,"Integrated commit 587d17015167f442c98efaf497504fe3825a3fe7

*) core: provide ap_ssl_* functions in new http_ssl.h header file.","{""sha"": ""042e2d4d3cf618894a92299a259884f47f2ab24a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-26T16:01:00Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-26T16:01:00Z""}}"
179,Revise,2021-03-26 16:02:16,Stefan Eissing,fork_close,"Fixing mod_lua to use new http_ssl.h header file as well.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1888084 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7ec894b199cfb58144e6f59c70231a6acf3cf775"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-03-26T11:44:30Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-03-26T16:02:16Z""}}"
179,Revise,2021-04-12 08:12:46,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""f51d0a4d920387167e0223107466973876a48069"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-12T08:12:46Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-12T08:12:46Z""}}"
179,Revise,2021-04-13 11:29:09,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""3871264cf54ac8c0111c2d631a4035f79a4e017d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-13T11:29:09Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-13T11:29:09Z""}}"
179,Revise,2021-04-13 11:49:04,Stefan Eissing,fork_close,"  *) core/mod_ssl/mod_md: adding OCSP response provisioning as core feature. This
     allows modules to access and provide OCSP response data without being tied
     of each other. The data is exchanged in standard, portable formats (PEM encoded
     certificates and DER encoded responses), so that the actual SSL/crypto
     implementations used by the modules are independant of each other.
     Registration and retrieval happen in the context of a server (server_rec)
     which modules may use to decide if they are configured for this or not.
     The area of changes:
     1. core: defines 2 functions in include/http_ssl.h, so that modules may
        register a certificate, together with its issuer certificate for OCSP
        response provisioning and ask for current response data (DER bytes) later.
        Also, 2 hooks are defined that allow modules to implement this OCSP
        provisioning.
     2. mod_ssl uses the new functions, in addition to what it did already, to
        register its certificates this way. If no one is interested in providing
        OCSP, it falls back to its own (if configured) stapling implementation.
     3. mod_md registers itself at the core hooks for OCSP provisioning. Depending
        on configuration, it will accept registrations of its own certificates only,
        all certficates or none.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1888723 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""124a9c23e48096631543135e78e802c6f9cecdb8"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-04-13T11:12:00Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-13T11:49:04Z""}}"
179,Revise,2021-04-13 11:50:16,Stefan Eissing,fork_close,"update the damn log tags.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1888724 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""65dd4b48abab83999d79ef0b9fec0f61b7049bd7"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-04-13T11:13:48Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-13T11:50:16Z""}}"
179,Revise,2021-04-13 11:50:35,Stefan Eissing,fork_close,"mod_md: fixed a conversion warning, bumped version number.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1888726 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b4f08c4d94fa49537c4247749d8d257b57cc2c25"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-04-13T11:27:09Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-13T11:50:35Z""}}"
179,Revise,2021-04-13 12:32:34,Stefan Eissing,fork_close,"Merge r1888729 from trunk:

server/protocol.c: remove old hooks links that had been moved to server/ssl.c","{""sha"": ""8c088a39da3f034172ebf4498c6fd7cb942802bf"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-13T12:32:34Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-13T12:32:34Z""}}"
179,ReviewComment,2021-04-20 09:56:20,rpluem,fork_close,Reviewed core and ssl.,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/179#pullrequestreview-639624328""}"
179,IssueComment,2021-04-20 10:05:25,icing,fork_close,"The `(char*)` casts are my mistake. I am fine with changing the nitpicks. Will update this, probably today.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/823151845"", ""author_association"": ""CONTRIBUTOR""}"
179,Revise,2021-04-20 12:34:05,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""c863e73a3adbe892907eafd9e66372c0101484fe"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-20T12:34:05Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-20T12:34:05Z""}}"
179,Revise,2021-04-20 14:30:43,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""ef766e507c34a12e0dc24711c54b97845cf05174"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-20T14:30:43Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-20T14:30:43Z""}}"
179,Revise,2021-04-20 14:39:19,Stefan Eissing,fork_close,"Merge of 2d2e2aee89760f2da93b1a2d89723d65bd241b9c from trunk (r1889009).

    core/ap_ssl_*: changes after review by rpluem
     - removed no longer needed (char*) casts when looking
       up ssl variables.
     - move 'goto cleanup;' on separate source line
     - fixed check for wrong optional function in ap_run_ssl_var_lookup
     - remove ap_bytes_t again from httpd.h and passes now ocsp
       identifier as separate const char* and apr_size_t. This
       follows more how such data is passed in the rest of the
       server.","{""sha"": ""451d9bff2116987c3a8615cde0610f59c97be9a0"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-20T14:39:19Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-20T14:39:19Z""}}"
179,ReviewComment,2021-04-20 15:13:07,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/179#pullrequestreview-640079838""}"
179,Revise,2021-04-21 14:21:03,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""24ec07cb06a4a4b87c27c37940c52933d7afd7ec"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-21T14:21:03Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-21T14:21:03Z""}}"
179,Revise,2021-04-22 12:30:15,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""d6af1f4cc90c3490d39fa6fbd0f4f3be29fef0c2"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-22T12:30:15Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-22T12:30:15Z""}}"
179,Revise,2021-04-22 12:48:13,Stefan Eissing,fork_close,"mod_md: make sure its post-config hook runs before mod_watchdog. if
  not, mod_watchdog thinks it has nothing to do, if no one else installs
  any watchdog instance.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1889101 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2b480c3402646f918ac8eca7f29b3a00f38dcb61"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-04-22T10:17:02Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-04-22T12:48:13Z""}}"
179,Revise,2021-05-10 08:08:00,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""f7d886117d0ed106e6fed2437dbbfeaa4878eba4"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-05-10T08:08:00Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-05-10T08:08:00Z""}}"
179,Revise,2021-05-10 08:11:03,Stefan Eissing,fork_close,Separated the additions to CHANGES into 2 files underneath change-entries.,"{""sha"": ""16bd57ca3990b3bf02d9808f0c90d8bf0663e79d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-05-10T08:11:03Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-05-10T08:11:03Z""}}"
179,Revise,2021-05-11 08:38:22,Stefan Eissing,fork_close,remove a merge fragment in ap_mmn.h.,"{""sha"": ""5d73e3c215e688ced860dc28b9bbd0e7c9a674f8"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-05-11T08:38:22Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-05-11T08:38:22Z""}}"
179,ReviewApproved,2021-05-11 22:58:21,bigio,fork_close,,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/apache/httpd/pull/179#pullrequestreview-657288850""}"
179,Revise,2021-05-12 07:27:04,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/2.4.x-ap_ssl_things,"{""sha"": ""b8068266e9d47bf9739d5370d92ada4608489bf9"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-05-12T07:27:04Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-05-12T07:27:04Z""}}"
179,Revise,2021-05-12 07:30:54,Stefan Eissing,fork_close," * Spelling fixes after review by @bigio.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1889788 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""014395b43ba4d8907a02c1c1779cd720d513c1fa"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-12T07:25:52Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-05-12T07:30:54Z""}}"
179,IssueCommentSupplement,2021-05-17 08:02:40,icing,fork_close,Has been merged into subversion 2.4.x branch by r1889793.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/842107126"", ""author_association"": ""CONTRIBUTOR""}"
179,ClosePR,2021-05-17 08:02:40,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4752903401"", ""commit_url"": null}"
179,DeleteBranch,2021-06-11 10:49:33,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4877245031"", ""commit_url"": null}"
184,SubmitCommit,2021-05-04 09:39:09,notroj,fork_close,"Focal builds are already using gcc 9.3; drop gcc-8/9/10 testing
in favour of 10 + 11.","{""sha"": ""c33436e04d3712ed3b81e91fd8e4b4ac2141883b"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-04T09:39:09Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-04T09:39:09Z""}}"
184,OpenPR,2021-05-04 09:40:23,notroj,fork_close,,
184,Revise,2021-05-06 11:15:40,notroj,fork_close,"Try gcc -fanalyzer mode here, there is no gcc 11 for older Ubuntu.","{""sha"": ""dc4cea84965c687ce25d527576693cbce0205505"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-06T11:15:40Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-06T11:15:40Z""}}"
184,ClosePR,2021-05-07 14:18:18,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4702289579"", ""commit_url"": null}"
186,SubmitCommit,2021-05-07 14:28:43,notroj,fork_close,Fix APR_RING issues which cause warnings with GCC 11.,"{""sha"": ""b3df7d1f13f1a95a9b534d89ef733b8e6348558c"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-07T14:28:43Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-07T14:28:43Z""}}"
186,OpenPR,2021-05-07 14:29:15,notroj,fork_close,,
186,ClosePR,2021-05-17 11:56:44,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4754133160"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/2d84124e5cbe14803bddf86201220c6f79b3c7a5""}"
187,OpenPR,2021-05-12 17:19:29,ylavic,fork_close,,
187,Revise,2021-05-16 11:35:03,ylavic,fork_close,Common HTTP/1 parsing code between core and h2.,"{""sha"": ""e5e45baa7db5298e490086926a3a6735fadbb808"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-05-12T17:14:12Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-05-16T11:35:03Z""}}"
187,ReviewRejected,2021-05-17 19:24:37,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/187#pullrequestreview-658326424""}"
187,IssueCommentSupplement,2021-05-30 22:25:03,ylavic,fork_close,Backported in https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890245 (ecebcc035ccd8d0e2984fe41420d9e944f456b3c),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/851070448"", ""author_association"": ""MEMBER""}"
187,ClosePR,2021-05-30 22:25:03,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4817650718"", ""commit_url"": null}"
187,DeleteBranch,2021-05-30 22:25:15,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4817650860"", ""commit_url"": null}"
188,SubmitCommit,2021-05-18 15:08:02,notroj,fork_close,"Try using SSL_CTX_set_dh_auto() which is present in 1.1.1 and later.
It looks like the OpenSSL-internal implementation doesn't use a cache
of generated DH * objects, instead calling BN_bin2bn() each invocation.
Not sure whether this performance impact matters.  The
SSL_CTX_set_tmp_dh_callback() API is deprecated in OpenSSL 3.0.","{""sha"": ""db3fe41409f9f223119d052d73fde28ae9668d5e"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-18T15:08:02Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-18T15:08:02Z""}}"
188,OpenPR,2021-05-18 16:02:52,notroj,fork_close,,
188,ReviewRejected,2021-05-19 07:23:41,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/188#pullrequestreview-662847100""}"
188,Revise,2021-05-19 10:24:28,notroj,fork_close,Fix use of MODSSL_USE_OPENSSL_PRE_1_1_API per rpluem's review.,"{""sha"": ""6ff0b04eae0151f74be0c6c22baef22998fe0f0e"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-19T10:24:28Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-05-19T10:24:28Z""}}"
188,ReviewApproved,2021-05-19 11:17:53,bigio,fork_close,,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/apache/httpd/pull/188#pullrequestreview-663065512""}"
188,RenameTitle,2021-05-19 11:22:57,notroj,fork_close,,"{""rename"": {""from"": ""Try using SSL_CTX_set_dh_auto() which is present in 1.1.1 and later."", ""to"": ""Try using SSL_CTX_set_dh_auto() which is present in 1.1.0 and later.""}, ""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4766040442""}"
188,ReviewApproved,2021-05-19 11:58:14,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/188#pullrequestreview-663104138""}"
188,ClosePR,2021-05-21 09:58:25,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4778374815"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/9ce47de74a7b7746107c4eced3abd5985baf690f""}"
190,SubmitCommit,2021-06-01 14:21:48,Stefan Eissing,fork_close,"  * core/mod_proxy/mod_ssl:
    Adding `outgoing` flag to conn_rec, indicating a connection is
    initiated by the server to somewhere, in contrast to incoming
    connections from clients.
    Adding 'ap_ssl_bind_outgoing()` function that marks a connection
    as outgoing and is used by mod_proxy instead of the previous
    optional function `ssl_engine_set`. This enables other SSL
    module to secure proxy connections.
    The optional functions `ssl_engine_set`, `ssl_engine_disable` and
    `ssl_proxy_enable` are now provided by the core to have backward
    compatibility with non-httpd modules that might use them. mod_ssl
    itself no longer registers these functions, but keeps them in its
    header for backward compatibility.
    The core provided optional function wrap any registered function
    like it was done for `ssl_is_ssl`.","{""sha"": ""867fa126f21575f104a1717ac49eaf1d8a558d77"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-01T14:21:48Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-01T14:21:48Z""}}"
190,SubmitCommit,2021-06-01 14:27:30,Stefan Eissing,fork_close,* remove unnecessary explicit setting of c->outgoing,"{""sha"": ""f406ef04dc92c80fd56c63ffdd1c16166cf3a17f"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-01T14:27:30Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-01T14:27:30Z""}}"
190,OpenPR,2021-06-01 14:31:02,icing,fork_close,,
190,Revise,2021-06-02 13:00:01,Stefan Eissing,fork_close,"Improved implementation of ssl/proxy interworking after tests with more than 1 module:
 * Change the `ssl_outgoing` hook to be a RUN_FIRST on the first OK
 * Documented the return values of the functions more clearly
 * Fixed ap_ssl_bind_outgoing() to call any existing, old style OPTIONAL
   functions. They are asked to engage if no hook returned OK or
   are asked to disable if there was.
 * Fixed mod_ssl to disable on default for outgoing connections.
   So, unless its hook takes over, it does not activate.","{""sha"": ""84607628244601a2e6322c81fe4158b4299665c7"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-02T13:00:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-02T13:00:01Z""}}"
190,ReviewRejected,2021-06-03 16:30:09,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/190#pullrequestreview-675414577""}"
190,Revise,2021-06-04 10:27:32,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/ssl_proxy,"{""sha"": ""1fe47af8e91bcdeb4beb67128cd80dac1fdd8224"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T10:27:32Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T10:27:32Z""}}"
190,Revise,2021-06-04 10:57:55,Stefan Eissing,fork_close, * Several fixes after review by rpluem.,"{""sha"": ""df612e3df58fed939f40f0e0674a5f5027c14fe0"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T10:57:55Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T10:57:55Z""}}"
190,IssueComment,2021-06-04 10:59:05,icing,fork_close,Addressed the issues raised by @rpluem - thanks for watching out for me!,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/854617124"", ""author_association"": ""CONTRIBUTOR""}"
190,ReviewComment,2021-06-04 13:38:06,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/190#pullrequestreview-676295144""}"
190,ReviewComment,2021-06-04 13:38:21,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/190#pullrequestreview-676295387""}"
190,Revise,2021-06-04 13:47:29,Stefan Eissing,fork_close,propert formatting of change entry.,"{""sha"": ""68078aa3e70ae0cc1eb95bbba3512db51505b306"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T13:47:29Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T13:47:29Z""}}"
190,ReviewComment,2021-06-04 13:50:06,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/190#pullrequestreview-676306980""}"
190,Revise,2021-06-04 13:54:49,Stefan Eissing,fork_close,removing approved comment about a paramter rename.,"{""sha"": ""e0a6e0ab3adb320aa10d8e7c52185675b7f81277"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T13:54:49Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T13:54:49Z""}}"
190,ReviewComment,2021-06-04 14:06:05,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/190#pullrequestreview-676323526""}"
190,ReviewComment,2021-06-04 14:17:53,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/190#pullrequestreview-676335440""}"
190,ReviewComment,2021-06-04 14:28:17,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/190#pullrequestreview-676347388""}"
190,ReviewComment,2021-06-04 14:36:01,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/190#pullrequestreview-676355265""}"
190,Revise,2021-06-04 14:51:19,Stefan Eissing,fork_close," * remove assert() on init_connectin_ctx() only be called with dir_conf on outgoing
   connections as ylavic correctly notes, this may happen on Upgrades as well.","{""sha"": ""7c0aeef267d44b2cc8e7b3d374915ae88e3fafff"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T14:51:19Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T14:51:19Z""}}"
190,Revise,2021-06-04 15:08:23,Stefan Eissing,fork_close, * rename hook `ssl_outoing` to `ssl_bind_outgoing` as suggest by ylavic.,"{""sha"": ""54ae61bd037e451043e7ac672bb00a20634ef135"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T15:08:23Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T15:08:23Z""}}"
190,IssueComment,2021-06-08 09:10:01,icing,fork_close,"@ylavic  and @rpluem : if the current state is ok with you, I'd like to apply this to trunk.

I have also some thoughts on how to improve here (adding SNI hostname, and APLN to the bind_outgoing()), but that can be discussed separately.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/856600166"", ""author_association"": ""CONTRIBUTOR""}"
190,ReviewApproved,2021-06-08 09:27:22,ylavic,fork_close,"Works for me, thanks Stefan!","{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/190#pullrequestreview-678300591""}"
190,IssueComment,2021-06-08 09:28:53,icing,fork_close,Thanks for reviewing! This rework certainly was not easy and your keen eyes helped a lot!,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/856614264"", ""author_association"": ""CONTRIBUTOR""}"
190,IssueComment,2021-06-08 11:01:33,rpluem,fork_close,Fine with me as well. Thanks for taking care.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/856665848"", ""author_association"": ""CONTRIBUTOR""}"
190,IssueComment,2021-06-08 14:38:12,icing,fork_close,Thank you all! Merged as r1890605 into trunk.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/856825511"", ""author_association"": ""CONTRIBUTOR""}"
190,ClosePR,2021-06-08 14:38:19,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4859006651"", ""commit_url"": null}"
190,CrossReferenced,2021-07-07 12:46:53,rpluem,fork_close,new ap_ssl_bind_outgoing for multi ssl support in proxy connections,"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/203"", ""is_pull_request"": true}}"
193,SubmitCommit,2021-06-04 05:54:19,jfclere,fork_close,First try...,"{""sha"": ""c4c5446820440f88b4daea870048e4a9f64f0dad"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-04T05:54:19Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-04T05:54:19Z""}}"
193,SubmitCommit,2021-06-04 06:41:09,jfclere,fork_close,Call ap_run_pre_translate_name().,"{""sha"": ""7479b41ee478e692fa759badc9737ed24558f6fa"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-04T06:41:09Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-04T06:41:09Z""}}"
193,OpenPR,2021-06-07 08:27:53,jfclere,fork_close,,
193,IssueComment,2021-06-07 17:47:10,ylavic,fork_close,"This seems to be missing some changes in ap_process_request_internal(), the commits to be backported would be:
- r1879074 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879074)
- r1879075 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879075)
- r1879076 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879076)
- r1879077 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879077)
- r1879078 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879078)
- r1879079 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879079)
- r1879080 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879080)
- r1879094 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879094)
- r1879095 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879095)
- r1879110 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879110)
- r1879111 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879111)
- r1879112 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879112)
- r1879114 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879114)
- r1879116 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879116)
- r1879117 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879117)
- r1879137 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879137)
- r1879144 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879144)
- r1879145 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879145)
- r1879147 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879147)
- r1879149 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879149)
- r1879235 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879235)
- r1879360 (https://svn.apache.org/repos/asf/httpd/httpd/trunk@1879360)

The above includes all the changes, not only mod_proxy's, but if we go for this backport I think that they all matter.

The full patch would be:
```
Index: docs/manual/developer/modguide.xml
===================================================================
--- docs/manual/developer/modguide.xml	(revision 1890572)
+++ docs/manual/developer/modguide.xml	(working copy)
@@ -237,6 +237,7 @@ can create. Some other ways of hooking are:
 <li><code>ap_hook_child_init</code>: Place a hook that executes when a child process is spawned (commonly used for initializing modules after the server has forked)</li>
 <li><code>ap_hook_pre_config</code>: Place a hook that executes before any configuration data has been read (very early hook)</li>
 <li><code>ap_hook_post_config</code>: Place a hook that executes after configuration has been parsed, but before the server has forked</li>
+<li><code>ap_hook_pre_translate_name</code>: Place a hook that executes when a URI needs to be translated into a filename on the server, before decoding</li>
 <li><code>ap_hook_translate_name</code>: Place a hook that executes when a URI needs to be translated into a filename on the server (think <code>mod_rewrite</code>)</li>
 <li><code>ap_hook_quick_handler</code>: Similar to <code>ap_hook_handler</code>, except it is run before any other request hooks (translation, auth, fixups etc)</li>
 <li><code>ap_hook_log_transaction</code>: Place a hook that executes when the server is about to add a log entry of the current request</li>
Index: docs/manual/mod/mod_log_debug.xml
===================================================================
--- docs/manual/mod/mod_log_debug.xml	(revision 1890572)
+++ docs/manual/mod/mod_log_debug.xml	(working copy)
@@ -103,6 +103,7 @@
     <table border=""1"" style=""zebra"">
     <columnspec><column width=""1""/></columnspec>
     <tr><th>Name</th></tr>
+    <tr><td><code>pre_translate_name</code></td></tr>
     <tr><td><code>translate_name</code></td></tr>
     <tr><td><code>type_checker</code></td></tr>
     <tr><td><code>quick_handler</code></td></tr>
Index: docs/manual/mod/mod_lua.xml
===================================================================
--- docs/manual/mod/mod_lua.xml	(revision 1890572)
+++ docs/manual/mod/mod_lua.xml	(working copy)
@@ -216,6 +216,13 @@ performing access control, or setting mime types:<
             been mapped to a host or virtual host</td>
     </tr>
     <tr>
+        <td>Pre-Translate name</td>
+        <td><directive module=""mod_lua"">LuaHookPreTranslateName</directive></td>
+        <td>This phase translates the requested URI into a filename on the
+            system, before decoding occurs. Modules such as <module>mod_proxy</module>
+            can operate in this phase.</td>
+    </tr>
+    <tr>
         <td>Translate name</td>
         <td><directive module=""mod_lua"">LuaHookTranslateName</directive></td>
         <td>This phase translates the requested URI into a filename on the 
@@ -438,8 +445,8 @@ end
           <td><code>filename</code></td>
           <td>string</td>
           <td>yes</td>
-          <td>The file name that the request maps to, f.x. /www/example.com/foo.txt. This can be 
-            changed in the translate-name or map-to-storage phases of a request to allow the 
+          <td>The file name that the request maps to, f.x. /www/example.com/foo.txt. This can be
+            changed in the pre-translate-name, translate-name or map-to-storage phases of a request to allow the
             default handler (or script handlers) to serve a different file than what was requested.</td>
         </tr>
         <tr>
@@ -538,7 +545,7 @@ end
           <td>string</td>
           <td>yes</td>
           <td>Denotes whether this is a proxy request or not. This value is generally set in 
-            the post_read_request/translate_name phase of a request.</td>
+              the post_read_request/pre_translate_name/translate_name phase of a request.</td>
         </tr>
         <tr>
           <td><code>range</code></td>
@@ -1495,6 +1502,23 @@ end
 </directivesynopsis>
 
 <directivesynopsis>
+<name>LuaHookPreTranslate</name>
+<description>Provide a hook for the pre_translate phase of a request
+processing</description>
+<syntax>LuaHookPreTranslate  /path/to/lua/script.lua hook_function_name</syntax>
+<contextlist><context>server config</context><context>virtual host</context>
+<context>directory</context><context>.htaccess</context>
+</contextlist>
+<override>All</override>
+<usage>
+<p>
+    Just like LuaHookTranslateName, but executed at the pre_translate phase,
+    where the URI-path is not percent decoded.
+</p>
+</usage>
+</directivesynopsis>
+
+<directivesynopsis>
 <name>LuaHookFixups</name>
 <description>Provide a hook for the fixups phase of a request
 processing</description>
Index: include/ap_mmn.h
===================================================================
--- include/ap_mmn.h	(revision 1890572)
+++ include/ap_mmn.h	(working copy)
@@ -562,6 +562,10 @@
  * 20120211.106 (2.4.49-dev) Add ap_create_request().
  * 20120211.107 (2.4.49-dev) Add ap_parse_request_line() and
  *                           ap_check_request_header()
+ * 20120211.108 (2.4.49-dev) Add ap_normalize_path()
+ * 20120211.109 (2.4.49-dev) Add pre_translate_name hook
+ * 20120211.110 (2.4.49-dev) Add map_encoded_one and map_encoded_all bits to
+ *                           proxy_server_conf
  */
 
 #define MODULE_MAGIC_COOKIE 0x41503234UL /* ""AP24"" */
@@ -569,7 +573,7 @@
 #ifndef MODULE_MAGIC_NUMBER_MAJOR
 #define MODULE_MAGIC_NUMBER_MAJOR 20120211
 #endif
-#define MODULE_MAGIC_NUMBER_MINOR 107                 /* 0...n */
+#define MODULE_MAGIC_NUMBER_MINOR 110                 /* 0...n */
 
 /**
  * Determine if the server's current MODULE_MAGIC_NUMBER is at least a
Index: include/http_request.h
===================================================================
--- include/http_request.h	(revision 1890572)
+++ include/http_request.h	(working copy)
@@ -364,6 +364,18 @@ AP_DECLARE_HOOK(int,create_request,(request_rec *r
 
 /**
  * This hook allow modules an opportunity to translate the URI into an
+ * actual filename, before URL decoding happens.
+ * @param r The current request
+ * @return DECLINED to let other modules handle the pre-translation,
+ *         OK if it was handled and no other module should process it,
+ *         DONE if no further transformation should happen on the URI,
+ *         HTTP_... in case of error.
+ * @ingroup hooks
+ */
+AP_DECLARE_HOOK(int,pre_translate_name,(request_rec *r))
+
+/**
+ * This hook allow modules an opportunity to translate the URI into an
  * actual filename.  If no modules do anything special, the server's default
  * rules will be followed.
  * @param r The current request
Index: include/httpd.h
===================================================================
--- include/httpd.h	(revision 1890572)
+++ include/httpd.h	(working copy)
@@ -1762,7 +1762,22 @@ AP_DECLARE(void) ap_no2slash(char *name);
  */
 AP_DECLARE(void) ap_no2slash_ex(char *name, int is_fs_path);
 
+#define AP_NORMALIZE_ALLOW_RELATIVE     (1u <<  0)
+#define AP_NORMALIZE_NOT_ABOVE_ROOT     (1u <<  1)
+#define AP_NORMALIZE_DECODE_UNRESERVED  (1u <<  2)
+#define AP_NORMALIZE_MERGE_SLASHES      (1u <<  3)
+#define AP_NORMALIZE_DROP_PARAMETERS    (1u <<  4)
+
 /**
+ * Remove all ////, /./ and /xx/../ substrings from a path, and more
+ * depending on passed in flags.
+ * @param path The path to normalize
+ * @param flags bitmask of AP_NORMALIZE_* flags
+ * @return non-zero on success
+ */
+AP_DECLARE(int) ap_normalize_path(char *path, unsigned int flags);
+
+/**
  * Remove all ./ and xx/../ substrings from a file name. Also remove
  * any leading ../ or /../ substrings.
  * @param name the file name to parse
Index: modules/dav/main/util.c
===================================================================
--- modules/dav/main/util.c	(revision 1890572)
+++ modules/dav/main/util.c	(working copy)
@@ -664,7 +664,13 @@ static dav_error * dav_process_if_header(request_r
             /* note that parsed_uri.path is allocated; we can trash it */
 
             /* clean up the URI a bit */
-            ap_getparents(parsed_uri.path);
+            if (!ap_normalize_path(parsed_uri.path,
+                                   AP_NORMALIZE_NOT_ABOVE_ROOT |
+                                   AP_NORMALIZE_DECODE_UNRESERVED)) {
+                return dav_new_error(r->pool, HTTP_BAD_REQUEST,
+                                     DAV_ERR_IF_TAGGED, rv,
+                                     ""Invalid URI path tagged If-header."");
+            }
 
             /* the resources we will compare to have unencoded paths */
             if (ap_unescape_url(parsed_uri.path) != OK) {
Index: modules/examples/mod_example_hooks.c
===================================================================
--- modules/examples/mod_example_hooks.c	(revision 1890572)
+++ modules/examples/mod_example_hooks.c	(working copy)
@@ -1175,6 +1175,22 @@ static int x_post_read_request(request_rec *r)
 
 /*
  * This routine gives our module an opportunity to translate the URI into an
+ * actual filename, before URL decoding happens.
+ *
+ * This is a RUN_FIRST hook.
+ */
+static int x_pre_translate_name(request_rec *r)
+{
+    /*
+     * We don't actually *do* anything here, except note the fact that we were
+     * called.
+     */
+    trace_request(r, ""x_pre_translate_name()"");
+    return DECLINED;
+}
+
+/*
+ * This routine gives our module an opportunity to translate the URI into an
  * actual filename.  If we don't do anything special, the server's default
  * rules (Alias directives and the like) will continue to be followed.
  *
@@ -1467,6 +1483,7 @@ static void x_register_hooks(apr_pool_t *p)
     ap_hook_log_transaction(x_log_transaction, NULL, NULL, APR_HOOK_MIDDLE);
     ap_hook_http_scheme(x_http_scheme, NULL, NULL, APR_HOOK_MIDDLE);
     ap_hook_default_port(x_default_port, NULL, NULL, APR_HOOK_MIDDLE);
+    ap_hook_pre_translate_name(x_pre_translate_name, NULL, NULL, APR_HOOK_MIDDLE);
     ap_hook_translate_name(x_translate_name, NULL, NULL, APR_HOOK_MIDDLE);
     ap_hook_map_to_storage(x_map_to_storage, NULL,NULL, APR_HOOK_MIDDLE);
     ap_hook_header_parser(x_header_parser, NULL, NULL, APR_HOOK_MIDDLE);
Index: modules/generators/mod_autoindex.c
===================================================================
--- modules/generators/mod_autoindex.c	(revision 1890572)
+++ modules/generators/mod_autoindex.c	(working copy)
@@ -1266,8 +1266,9 @@ static struct ent *make_parent_entry(apr_int32_t a
     if (!(p->name = ap_make_full_path(r->pool, r->uri, ""../""))) {
         return (NULL);
     }
-    ap_getparents(p->name);
-    if (!*p->name) {
+    if (!ap_normalize_path(p->name, AP_NORMALIZE_ALLOW_RELATIVE |
+                                    AP_NORMALIZE_NOT_ABOVE_ROOT)
+            || p->name[0] == '\0') {
         return (NULL);
     }
 
Index: modules/generators/mod_info.c
===================================================================
--- modules/generators/mod_info.c	(revision 1890572)
+++ modules/generators/mod_info.c	(working copy)
@@ -322,6 +322,7 @@ static const hook_lookup_t request_hooks[] = {
     {""HTTP Scheme"", ap_hook_get_http_scheme},
     {""Default Port"", ap_hook_get_default_port},
     {""Quick Handler"", ap_hook_get_quick_handler},
+    {""Pre-Translate Name"", ap_hook_get_pre_translate_name},
     {""Translate Name"", ap_hook_get_translate_name},
     {""Map to Storage"", ap_hook_get_map_to_storage},
     {""Check Access"", ap_hook_get_access_checker_ex},
Index: modules/loggers/mod_log_debug.c
===================================================================
--- modules/loggers/mod_log_debug.c	(revision 1890572)
+++ modules/loggers/mod_log_debug.c	(working copy)
@@ -49,6 +49,7 @@ static const char * const hooks[] = {
     ""check_authn"",          /*  9 */
     ""check_authz"",          /* 10 */
     ""insert_filter"",        /* 11 */
+    ""pre_translate_name"",   /* 12 */
     NULL
 };
 
@@ -109,6 +110,12 @@ static int log_debug_handler(request_rec *r)
     return DECLINED;
 }
 
+static int log_debug_pre_translate_name(request_rec *r)
+{
+    do_debug_log(r, hooks[12]);
+    return DECLINED;
+}
+
 static int log_debug_translate_name(request_rec *r)
 {
     do_debug_log(r, hooks[3]);
@@ -263,6 +270,7 @@ static void register_hooks(apr_pool_t *p)
     ap_hook_log_transaction(log_debug_log_transaction, NULL, NULL, APR_HOOK_FIRST);
     ap_hook_quick_handler(log_debug_quick_handler, NULL, NULL, APR_HOOK_FIRST);
     ap_hook_handler(log_debug_handler, NULL, NULL, APR_HOOK_FIRST);
+    ap_hook_pre_translate_name(log_debug_pre_translate_name, NULL, NULL, APR_HOOK_FIRST);
     ap_hook_translate_name(log_debug_translate_name, NULL, NULL, APR_HOOK_FIRST);
     ap_hook_map_to_storage(log_debug_map_to_storage, NULL, NULL, APR_HOOK_FIRST);
     ap_hook_fixups(log_debug_fixups, NULL, NULL, APR_HOOK_FIRST);
Index: modules/lua/mod_lua.c
===================================================================
--- modules/lua/mod_lua.c	(revision 1890572)
+++ modules/lua/mod_lua.c	(working copy)
@@ -1202,6 +1202,11 @@ static int lua_check_user_id_harness_last(request_
 }
 */
 
+static int lua_pre_trans_name_harness(request_rec *r)
+{
+    return lua_request_rec_hook_harness(r, ""pre_translate_name"", APR_HOOK_MIDDLE);
+}
+
 static int lua_translate_name_harness_first(request_rec *r)
 {
     return lua_request_rec_hook_harness(r, ""translate_name"", AP_LUA_HOOK_FIRST);
@@ -1274,6 +1279,21 @@ static int lua_quick_harness(request_rec *r, int l
     return lua_request_rec_hook_harness(r, ""quick"", APR_HOOK_MIDDLE);
 }
 
+static const char *register_pre_trans_name_hook(cmd_parms *cmd, void *_cfg,
+                                                const char *file,
+                                                const char *function)
+{
+    return register_named_file_function_hook(""pre_translate_name"", cmd, _cfg, file,
+                                             function, APR_HOOK_MIDDLE);
+}
+
+static const char *register_pre_trans_name_block(cmd_parms *cmd, void *_cfg,
+                                                 const char *line)
+{
+    return register_named_block_function_hook(""pre_translate_name"", cmd, _cfg,
+                                              line);
+}
+
 static const char *register_translate_name_hook(cmd_parms *cmd, void *_cfg,
                                                 const char *file,
                                                 const char *function,
@@ -1842,6 +1862,14 @@ static const command_rec lua_commands[] = {
     AP_INIT_TAKE3(""LuaAuthzProvider"", register_authz_provider, NULL, RSRC_CONF|EXEC_ON_READ,
                   ""Provide an authorization provider""),
 
+    AP_INIT_TAKE2(""LuaHookPreTranslateName"", register_pre_trans_name_hook, NULL,
+                  OR_ALL,
+                  ""Provide a hook for the pre_translate name phase of request processing""),
+
+    AP_INIT_RAW_ARGS(""<LuaHookPreTranslateName"", register_pre_trans_name_block, NULL,
+                     EXEC_ON_READ | OR_ALL,
+                     ""Provide a hook for the pre_translate name phase of request processing""),
+
     AP_INIT_TAKE23(""LuaHookTranslateName"", register_translate_name_hook, NULL,
                   OR_ALL,
                   ""Provide a hook for the translate name phase of request processing""),
@@ -2092,6 +2120,9 @@ static void lua_register_hooks(apr_pool_t *p)
                            APR_HOOK_MIDDLE);
 
     /* http_request.h hooks */
+    ap_hook_pre_translate_name(lua_pre_trans_name_harness, NULL, NULL,
+                               APR_HOOK_MIDDLE);
+
     ap_hook_translate_name(lua_translate_name_harness_first, NULL, NULL,
                            AP_LUA_HOOK_FIRST);
     ap_hook_translate_name(lua_translate_name_harness, NULL, NULL,
Index: modules/proxy/mod_proxy.c
===================================================================
--- modules/proxy/mod_proxy.c	(revision 1890572)
+++ modules/proxy/mod_proxy.c	(working copy)
@@ -17,6 +17,7 @@
 #include ""mod_proxy.h""
 #include ""mod_core.h""
 #include ""apr_optional.h""
+#include ""apr_strings.h""
 #include ""scoreboard.h""
 #include ""mod_status.h""
 #include ""proxy_util.h""
@@ -560,6 +561,201 @@ static int alias_match(const char *uri, const char
     return urip - uri;
 }
 
+/*
+ * Inspired by mod_jk's jk_servlet_normalize().
+ */
+static int alias_match_servlet(apr_pool_t *p,
+                               const char **urip,
+                               const char *alias)
+{
+    char *map;
+    const char *uri = *urip;
+    apr_array_header_t *stack;
+    int map_pos, uri_pos, alias_pos, first_pos;
+    int alias_depth = 0, depth;
+
+    /* Both uri and alias should start with '/' */
+    if (uri[0] != '/' || alias[0] != '/') {
+        return 0;
+    }
+
+    stack = apr_array_make(p, 5, sizeof(int));
+    map = apr_palloc(p, strlen(uri) + 1);
+    map[0] = '/';
+    map[1] = '\0';
+
+    map_pos = uri_pos = alias_pos = first_pos = 1;
+    while (uri[uri_pos] != '\0') {
+        /* Remove path parameters ;foo=bar/ from any path segment */
+        if (uri[uri_pos] == ';') {
+            do {
+                uri_pos++;
+            } while (uri[uri_pos] != '/' && uri[uri_pos] != '\0');
+            continue;
+        }
+
+        if (map[map_pos - 1] == '/') {
+            /* Collapse ///// sequences to / */
+            if (uri[uri_pos] == '/') {
+                do {
+                    uri_pos++;
+                } while (uri[uri_pos] == '/');
+                continue;
+            }
+
+            if (uri[uri_pos] == '.') {
+                /* Remove /./ segments */
+                if (uri[uri_pos + 1] == '/'
+                        || uri[uri_pos + 1] == ';'
+                        || uri[uri_pos + 1] == '\0') {
+                    uri_pos++;
+                    if (uri[uri_pos] == '/') {
+                        uri_pos++;
+                    }
+                    continue;
+                }
+
+                /* Remove /xx/../ segments */
+                if (uri[uri_pos + 1] == '.'
+                    && (uri[uri_pos + 2] == '/'
+                        || uri[uri_pos + 2] == ';'
+                        || uri[uri_pos + 2] == '\0')) {
+                    /* Wind map segment back the previous one */
+                    if (map_pos == 1) {
+                        /* Above root */
+                        return 0;
+                    }
+                    do {
+                        map_pos--;
+                    } while (map[map_pos - 1] != '/');
+                    map[map_pos] = '\0';
+
+                    /* Wind alias segment back, unless in deeper segment */
+                    if (alias_depth == stack->nelts) {
+                        if (alias[alias_pos] == '\0') {
+                            alias_pos--;
+                        }
+                        while (alias_pos > 0 && alias[alias_pos] == '/') {
+                            alias_pos--;
+                        }
+                        while (alias_pos > 0 && alias[alias_pos - 1] != '/') {
+                            alias_pos--;
+                        }
+                        AP_DEBUG_ASSERT(alias_pos > 0);
+                        alias_depth--;
+                    }
+                    apr_array_pop(stack);
+
+                    /* Move uri forward to the next segment */
+                    uri_pos += 2;
+                    if (uri[uri_pos] == '/') {
+                        uri_pos++;
+                    }
+                    first_pos = 0;
+                    continue;
+                }
+            }
+            if (first_pos) {
+                while (uri[first_pos] == '/') {
+                    first_pos++;
+                }
+            }
+
+            /* New segment */
+            APR_ARRAY_PUSH(stack, int) = first_pos ? first_pos : uri_pos;
+            if (alias[alias_pos] != '\0') {
+                if (alias[alias_pos - 1] != '/') {
+                    /* Remain in pair with uri segments */
+                    do {
+                        alias_pos++;
+                    } while (alias[alias_pos - 1] != '/' && alias[alias_pos]);
+                }
+                while (alias[alias_pos] == '/') {
+                    alias_pos++;
+                }
+                if (alias[alias_pos] != '\0') {
+                    alias_depth++;
+                }
+            }
+        }
+
+        if (alias[alias_pos] != '\0') {
+            int *match = &APR_ARRAY_IDX(stack, alias_depth - 1, int);
+            if (*match) {
+                if (alias[alias_pos] != uri[uri_pos]) {
+                    /* Current segment does not match */
+                    *match = 0;
+                }
+                else if (alias[alias_pos + 1] == '\0'
+                         && alias[alias_pos] != '/') {
+                    if (uri[uri_pos + 1] == ';') {
+                        /* We'll preserve the parameters of the last
+                         * segment if it does not end with '/', so mark
+                         * the match as negative for below handling.
+                         */
+                        *match = -(uri_pos + 1);
+                    }
+                    else if (uri[uri_pos + 1] != '/'
+                             && uri[uri_pos + 1] != '\0') {
+                        /* Last segment does not match all the way */
+                        *match = 0;
+                    }
+                }
+            }
+            /* Don't go past the segment if the uri isn't there yet */
+            if (alias[alias_pos] != '/' || uri[uri_pos] == '/') {
+                alias_pos++;
+            }
+        }
+
+        if (uri[uri_pos] == '/') {
+            first_pos = uri_pos + 1;
+        }
+        map[map_pos++] = uri[uri_pos++];
+        map[map_pos] = '\0';
+    }
+
+    /* Can't reach the end of uri before the end of the alias,
+     * for example if uri is ""/"" and alias is ""/examples""
+     */
+    if (alias[alias_pos] != '\0') {
+        return 0;
+    }
+
+    /* Check whether each alias segment matched */
+    for (depth = 0; depth < alias_depth; ++depth) {
+        if (!APR_ARRAY_IDX(stack, depth, int)) {
+            return 0;
+        }
+    }
+
+    /* If alias_depth == stack->nelts we have a full match, i.e.
+     * uri == alias so we can return uri_pos as is (the end of uri)
+     */
+    if (alias_depth < stack->nelts) {
+        /* Return the segment following the alias */
+        uri_pos = APR_ARRAY_IDX(stack, alias_depth, int);
+        if (alias_depth) {
+            /* But if the last segment of the alias does not end with '/'
+             * and the corresponding segment of the uri has parameters,
+             * we want to forward those parameters (see above for the
+             * negative pos trick/mark).
+             */
+            int pos = APR_ARRAY_IDX(stack, alias_depth - 1, int);
+            if (pos < 0) {
+                uri_pos = -pos;
+            }
+        }
+    }
+    /* If the alias lacks a trailing slash, take it from the uri (if any) */
+    if (alias[alias_pos - 1] != '/' && uri[uri_pos - 1] == '/') {
+        uri_pos--;
+    }
+
+    *urip = map;
+    return uri_pos;
+}
+
 /* Detect if an absoluteURI should be proxied or not.  Note that we
  * have to do this during this phase because later phases are
  * ""short-circuiting""... i.e. translate_names will end when the first
@@ -670,6 +866,7 @@ PROXY_DECLARE(int) ap_proxy_trans_match(request_re
     int mismatch = 0;
     unsigned int nocanon = ent->flags & PROXYPASS_NOCANON;
     const char *use_uri = nocanon ? r->unparsed_uri : r->uri;
+    const char *servlet_uri = NULL;
 
     if (dconf && (dconf->interpolate_env == 1) && (ent->flags & PROXYPASS_INTERPOLATE)) {
         fake = proxy_interpolate(r, ent->fake);
@@ -730,7 +927,14 @@ PROXY_DECLARE(int) ap_proxy_trans_match(request_re
         }
     }
     else {
-        len = alias_match(r->uri, fake);
+        if ((ent->flags & PROXYPASS_MAP_SERVLET) == PROXYPASS_MAP_SERVLET) {
+            servlet_uri = r->uri;
+            len = alias_match_servlet(r->pool, &servlet_uri, fake);
+            nocanon = 0; /* ignored since servlet's normalization applies */
+        }
+        else {
+            len = alias_match(r->uri, fake);
+        }
 
         if (len != 0) {
             if ((real[0] == '!') && (real[1] == '\0')) {
@@ -761,7 +965,7 @@ PROXY_DECLARE(int) ap_proxy_trans_match(request_re
          */
         int rc = proxy_run_check_trans(r, found + 6);
         if (rc != OK && rc != DECLINED) {
-            return DONE;
+            return HTTP_CONTINUE;
         }
 
         r->filename = found;
@@ -775,19 +979,33 @@ PROXY_DECLARE(int) ap_proxy_trans_match(request_re
             apr_table_setn(r->notes, ""proxy-noquery"", ""1"");
         }
 
+        if (servlet_uri) {
+            ap_log_rerror(APLOG_MARK, APLOG_TRACE1, 0, r, APLOGNO(10248)
+                          ""Servlet path '%s' (%s) matches proxy handler '%s'"",
+                          r->uri, servlet_uri, found);
+            /* Apply servlet normalization to r->uri so that <Location> or any
+             * directory context match does not have to handle path parameters.
+             * We change r->uri in-place so that r->parsed_uri.path is updated
+             * too. Since normalized servlet_uri is necessarily shorter than
+             * the original r->uri, strcpy() is fine.
+             */
+            AP_DEBUG_ASSERT(strlen(r->uri) >= strlen(servlet_uri));
+            strcpy(r->uri, servlet_uri);
+            return DONE;
+        }
+
         ap_log_rerror(APLOG_MARK, APLOG_TRACE1, 0, r, APLOGNO(03464)
                       ""URI path '%s' matches proxy handler '%s'"", r->uri,
                       found);
-
         return OK;
     }
 
-    return DONE;
+    return HTTP_CONTINUE;
 }
 
-static int proxy_trans(request_rec *r)
+static int proxy_trans(request_rec *r, int pre_trans)
 {
-    int i;
+    int i, enc;
     struct proxy_alias *ent;
     proxy_dir_conf *dconf;
     proxy_server_conf *conf;
@@ -794,11 +1012,32 @@ PROXY_DECLARE(int) ap_proxy_trans_match(request_re
 
     if (r->proxyreq) {
         /* someone has already set up the proxy, it was possibly ourselves
-         * in proxy_detect
+         * in proxy_detect (DONE will prevent further decoding of r->uri,
+         * only if proxyreq is set before pre_trans already).
          */
-        return OK;
+        return pre_trans ? DONE : OK;
     }
 
+    /* In early pre_trans hook, r->uri was not manipulated yet so we are
+     * compliant with RFC1945 at this point. Otherwise, it probably isn't
+     * an issue because this is a hybrid proxy/origin server.
+     */
+
+    dconf = ap_get_module_config(r->per_dir_config, &proxy_module);
+    conf = (proxy_server_conf *) ap_get_module_config(r->server->module_config,
+                                                      &proxy_module);
+
+    /* Always and only do PROXY_MAP_ENCODED mapping in pre_trans, when
+     * r->uri is still encoded, or we might consider for instance that
+     * a decoded sub-delim is now a delimiter (e.g. ""%3B"" => ';' for
+     * path parameters), which it's not.
+     */
+    if ((pre_trans && !conf->map_encoded_one)
+            || (!pre_trans && conf->map_encoded_all)) {
+        /* Fast path, nothing at this stage */
+        return DECLINED;
+    }
+
     if ((r->unparsed_uri[0] == '*' && r->unparsed_uri[1] == '\0')
         || !r->uri || r->uri[0] != '/') {
         return DECLINED;
@@ -808,37 +1047,42 @@ PROXY_DECLARE(int) ap_proxy_trans_match(request_re
         return DECLINED;
     }
 
-    /* XXX: since r->uri has been manipulated already we're not really
-     * compliant with RFC1945 at this point.  But this probably isn't
-     * an issue because this is a hybrid proxy/origin server.
-     */
-
-    dconf = ap_get_module_config(r->per_dir_config, &proxy_module);
-
     /* short way - this location is reverse proxied? */
     if (dconf->alias) {
-        int rv = ap_proxy_trans_match(r, dconf->alias, dconf);
-        if (DONE != rv) {
-            return rv;
+        enc = (dconf->alias->flags & PROXYPASS_MAP_ENCODED) != 0;
+        if (!(pre_trans ^ enc)) {
+            int rv = ap_proxy_trans_match(r, dconf->alias, dconf);
+            if (rv != HTTP_CONTINUE) {
+                return rv;
+            }
         }
     }
 
-    conf = (proxy_server_conf *) ap_get_module_config(r->server->module_config,
-                                                      &proxy_module);
-
     /* long way - walk the list of aliases, find a match */
-    if (conf->aliases->nelts) {
-        ent = (struct proxy_alias *) conf->aliases->elts;
-        for (i = 0; i < conf->aliases->nelts; i++) {
-            int rv = ap_proxy_trans_match(r, &ent[i], dconf);
-            if (DONE != rv) {
+    for (i = 0; i < conf->aliases->nelts; i++) {
+        ent = &((struct proxy_alias *)conf->aliases->elts)[i];
+        enc = (ent->flags & PROXYPASS_MAP_ENCODED) != 0;
+        if (!(pre_trans ^ enc)) {
+            int rv = ap_proxy_trans_match(r, ent, dconf);
+            if (rv != HTTP_CONTINUE) {
                 return rv;
             }
         }
     }
+
     return DECLINED;
 }
 
+static int proxy_pre_translate_name(request_rec *r)
+{
+    return proxy_trans(r, 1);
+}
+
+static int proxy_translate_name(request_rec *r)
+{
+    return proxy_trans(r, 0);
+}
+
 static int proxy_walk(request_rec *r)
 {
     proxy_server_conf *sconf = ap_get_module_config(r->server->module_config,
@@ -1359,6 +1603,8 @@ static void * create_proxy_config(apr_pool_t *p, s
     ps->forward = NULL;
     ps->reverse = NULL;
     ps->domain = NULL;
+    ps->map_encoded_one = 0;
+    ps->map_encoded_all = 1;
     ps->id = apr_psprintf(p, ""p%x"", 1); /* simply for storage size */
     ps->viaopt = via_off; /* initially backward compatible with 1.3.1 */
     ps->viaopt_set = 0; /* 0 means default */
@@ -1516,6 +1762,9 @@ static void * merge_proxy_config(apr_pool_t *p, vo
     ps->forward = overrides->forward ? overrides->forward : base->forward;
     ps->reverse = overrides->reverse ? overrides->reverse : base->reverse;
 
+    ps->map_encoded_one = overrides->map_encoded_one || base->map_encoded_one;
+    ps->map_encoded_all = overrides->map_encoded_all && base->map_encoded_all;
+
     ps->domain = (overrides->domain == NULL) ? base->domain : overrides->domain;
     ps->id = (overrides->id == NULL) ? base->id : overrides->id;
     ps->viaopt = (overrides->viaopt_set == 0) ? base->viaopt : overrides->viaopt;
@@ -1640,7 +1889,7 @@ static void *merge_proxy_dir_config(apr_pool_t *p,
                                              : add->forward_100_continue;
     new->forward_100_continue_set = add->forward_100_continue_set
                                     || base->forward_100_continue_set;
-    
+
     return new;
 }
 
@@ -1814,11 +2063,31 @@ static const char *
                            ""in the form 'key=value'."";
                 }
             }
-            else
+            else {
                 *val++ = '\0';
-            apr_table_setn(params, word, val);
+            }
+            if (!strcasecmp(word, ""mapping"")) {
+                if (!strcasecmp(val, ""encoded"")) {
+                    flags |= PROXYPASS_MAP_ENCODED;
+                }
+                else if (!strcasecmp(val, ""servlet"")) {
+                    flags |= PROXYPASS_MAP_SERVLET;
+                }
+                else {
+                    return ""unknown mapping"";
+                }
+            }
+            else {
+                apr_table_setn(params, word, val);
+            }
         }
-    };
+    }
+    if (flags & PROXYPASS_MAP_ENCODED) {
+        conf->map_encoded_one = 1;
+    }
+    else {
+        conf->map_encoded_all = 0;
+    }
 
     if (r == NULL) {
         return ""ProxyPass|ProxyPassMatch needs a path when not defined in a location"";
@@ -3142,7 +3411,10 @@ static void register_hooks(apr_pool_t *p)
     /* handler */
     ap_hook_handler(proxy_handler, NULL, NULL, APR_HOOK_FIRST);
     /* filename-to-URI translation */
-    ap_hook_translate_name(proxy_trans, aszSucc, NULL, APR_HOOK_FIRST);
+    ap_hook_pre_translate_name(proxy_pre_translate_name, NULL, NULL,
+                               APR_HOOK_MIDDLE);
+    ap_hook_translate_name(proxy_translate_name, aszSucc, NULL,
+                           APR_HOOK_FIRST);
     /* walk <Proxy > entries and suppress default TRACE behavior */
     ap_hook_map_to_storage(proxy_map_location, NULL,NULL, APR_HOOK_FIRST);
     /* fixups */
Index: modules/proxy/mod_proxy.h
===================================================================
--- modules/proxy/mod_proxy.h	(revision 1890572)
+++ modules/proxy/mod_proxy.h	(working copy)
@@ -124,6 +124,8 @@ struct proxy_remote {
 #define PROXYPASS_NOCANON 0x01
 #define PROXYPASS_INTERPOLATE 0x02
 #define PROXYPASS_NOQUERY 0x04
+#define PROXYPASS_MAP_ENCODED 0x08
+#define PROXYPASS_MAP_SERVLET 0x18 /* + MAP_ENCODED */
 struct proxy_alias {
     const char  *real;
     const char  *fake;
@@ -200,6 +202,8 @@ typedef struct {
     unsigned int inherit_set:1;
     unsigned int ppinherit:1;
     unsigned int ppinherit_set:1;
+    unsigned int map_encoded_one:1;
+    unsigned int map_encoded_all:1;
 } proxy_server_conf;
 
 typedef struct {
@@ -1171,7 +1175,11 @@ PROXY_DECLARE(apr_status_t) ap_proxy_sync_balancer
  * @param r     request
  * @param ent   proxy_alias record
  * @param dconf per-dir config or NULL
- * @return      DECLINED, DONE or OK if matched
+ * @return      OK if the alias matched,
+ *              DONE if the alias matched and r->uri was normalized so
+ *                   no further transformation should happen on it,
+ *              DECLINED if proxying is disabled for this alias,
+ *              HTTP_CONTINUE if the alias did not match
  */
 PROXY_DECLARE(int) ap_proxy_trans_match(request_rec *r,
                                         struct proxy_alias *ent,
Index: server/request.c
===================================================================
--- server/request.c	(revision 1890572)
+++ server/request.c	(working copy)
@@ -59,6 +59,7 @@
 #define APLOG_MODULE_INDEX AP_CORE_MODULE_INDEX
 
 APR_HOOK_STRUCT(
+    APR_HOOK_LINK(pre_translate_name)
     APR_HOOK_LINK(translate_name)
     APR_HOOK_LINK(map_to_storage)
     APR_HOOK_LINK(check_user_id)
@@ -74,6 +75,8 @@ APR_HOOK_STRUCT(
     APR_HOOK_LINK(force_authn)
 )
 
+AP_IMPLEMENT_HOOK_RUN_FIRST(int,pre_translate_name,
+                            (request_rec *r), (r), DECLINED)
 AP_IMPLEMENT_HOOK_RUN_FIRST(int,translate_name,
                             (request_rec *r), (r), DECLINED)
 AP_IMPLEMENT_HOOK_RUN_FIRST(int,map_to_storage,
@@ -157,6 +160,26 @@ AP_DECLARE(int) ap_some_authn_required(request_rec
     return rv;
 }
 
+static int walk_location_and_if(request_rec *r)
+{
+    int access_status;
+
+    if ((access_status = ap_location_walk(r))) {
+        return access_status;
+    }
+    if ((access_status = ap_if_walk(r))) {
+        return access_status;
+    }
+
+    {
+        core_dir_config *d = ap_get_core_module_config(r->per_dir_config);
+        if (d->log)
+            r->log = d->log;
+    }
+
+    return OK;
+}
+
 /* This is the master logic for processing requests.  Do NOT duplicate
  * this logic elsewhere, or the security model will be broken by future
  * API changes.  Each phase must be individually optimized to pick up
@@ -164,17 +187,65 @@ AP_DECLARE(int) ap_some_authn_required(request_rec
  */
 AP_DECLARE(int) ap_process_request_internal(request_rec *r)
 {
+    int access_status = DECLINED;
     int file_req = (r->main && r->filename);
-    int access_status;
-    core_dir_config *d;
     core_server_config *sconf =
         ap_get_core_module_config(r->server->module_config);
+    unsigned int normalize_flags;
 
-    /* Ignore embedded %2F's in path for proxy requests */
-    if (!r->proxyreq && r->parsed_uri.path) {
-        d = ap_get_core_module_config(r->per_dir_config);
+    normalize_flags = AP_NORMALIZE_NOT_ABOVE_ROOT;
+    if (sconf->merge_slashes != AP_CORE_CONFIG_OFF) { 
+        normalize_flags |= AP_NORMALIZE_MERGE_SLASHES;
+    }
+    if (file_req) {
+        /* File subrequests can have a relative path. */
+        normalize_flags |= AP_NORMALIZE_ALLOW_RELATIVE;
+    }
+
+    if (r->parsed_uri.path) {
+        /* Normalize: remove /./ and shrink /../ segments, plus
+         * decode unreserved chars (first time only to avoid
+         * double decoding after ap_unescape_url() below).
+         */
+        if (!ap_normalize_path(r->parsed_uri.path,
+                               normalize_flags |
+                               AP_NORMALIZE_DECODE_UNRESERVED)) {
+            ap_log_rerror(APLOG_MARK, APLOG_ERR, 0, r, APLOGNO(10244)
+                          ""invalid URI path (%s)"", r->unparsed_uri);
+            return HTTP_BAD_REQUEST;
+        }
+    }
+
+    /* All file subrequests are a huge pain... they cannot bubble through the
+     * next several steps.  Only file subrequests are allowed an empty uri,
+     * otherwise let (pre_)translate_name kill the request.
+     */
+    if (!file_req) {
+        ap_conf_vector_t *per_dir_config = r->per_dir_config;
+
+        if ((access_status = walk_location_and_if(r))) {
+            return access_status;
+        }
+
+        /* Let pre_translate_name hooks work with non-decoded URIs, and
+         * eventually prevent further URI transformations (return DONE).
+         */
+        access_status = ap_run_pre_translate_name(r);
+        if (ap_is_HTTP_ERROR(access_status)) {
+            return access_status;
+        }
+
+        /* Throw away pre_trans only merging */
+        r->per_dir_config = per_dir_config;
+    }
+
+    /* Ignore URL unescaping for translated URIs already */
+    if (access_status != DONE && r->parsed_uri.path) {
+        core_dir_config *d = ap_get_core_module_config(r->per_dir_config);
+
         if (d->allow_encoded_slashes) {
-            access_status = ap_unescape_url_keep2f(r->parsed_uri.path, d->decode_encoded_slashes);
+            access_status = ap_unescape_url_keep2f(r->parsed_uri.path,
+                                                   d->decode_encoded_slashes);
         }
         else {
             access_status = ap_unescape_url(r->parsed_uri.path);
@@ -183,40 +254,27 @@ AP_DECLARE(int) ap_process_request_internal(reques
             if (access_status == HTTP_NOT_FOUND) {
                 if (! d->allow_encoded_slashes) {
                     ap_log_rerror(APLOG_MARK, APLOG_INFO, 0, r, APLOGNO(00026)
-                                  ""found %%2f (encoded '/') in URI ""
-                                  ""(decoded='%s'), returning 404"",
-                                  r->parsed_uri.path);
+                                  ""found %%2f (encoded '/') in URI path (%s), ""
+                                  ""returning 404"", r->unparsed_uri);
                 }
             }
             return access_status;
         }
-    }
 
-    ap_getparents(r->uri);     /* OK --- shrinking transformations... */
-    if (sconf->merge_slashes != AP_CORE_CONFIG_OFF) { 
-        ap_no2slash(r->uri);
-        if (r->parsed_uri.path) {
-            ap_no2slash(r->parsed_uri.path);
+        if (d->allow_encoded_slashes && d->decode_encoded_slashes) {
+            /* Decoding slashes might have created new // or /./ or /../
+             * segments (e.g. ""/.%2F/""), so re-normalize.
+             */
+            ap_normalize_path(r->parsed_uri.path, normalize_flags);
         }
-     }
+    }
 
-    /* All file subrequests are a huge pain... they cannot bubble through the
-     * next several steps.  Only file subrequests are allowed an empty uri,
-     * otherwise let translate_name kill the request.
-     */
+    /* Same, translate_name is not suited for file subrequests */
     if (!file_req) {
-        if ((access_status = ap_location_walk(r))) {
+        if ((access_status = walk_location_and_if(r))) {
             return access_status;
         }
-        if ((access_status = ap_if_walk(r))) {
-            return access_status;
-        }
 
-        d = ap_get_core_module_config(r->per_dir_config);
-        if (d->log) {
-            r->log = d->log;
-        }
-
         if ((access_status = ap_run_translate_name(r))) {
             return decl_die(access_status, ""translate"", r);
         }
@@ -233,18 +291,10 @@ AP_DECLARE(int) ap_process_request_internal(reques
 
     /* Rerun the location walk, which overrides any map_to_storage config.
      */
-    if ((access_status = ap_location_walk(r))) {
+    if ((access_status = walk_location_and_if(r))) {
         return access_status;
     }
-    if ((access_status = ap_if_walk(r))) {
-        return access_status;
-    }
 
-    d = ap_get_core_module_config(r->per_dir_config);
-    if (d->log) {
-        r->log = d->log;
-    }
-
     if ((access_status = ap_run_post_perdir_config(r))) {
         return access_status;
     }
@@ -1370,7 +1420,7 @@ AP_DECLARE(int) ap_directory_walk(request_rec *r)
     r->canonical_filename = r->filename;
 
     if (r->finfo.filetype == APR_DIR) {
-        cache->cached = r->filename;
+        cache->cached = apr_pstrdup(r->pool, r->filename);
     }
     else {
         cache->cached = ap_make_dirstr_parent(r->pool, r->filename);
@@ -1467,7 +1517,7 @@ AP_DECLARE(int) ap_location_walk(request_rec *r)
         apr_pool_t *rxpool = NULL;
 
         cached &= auth_internal_per_conf;
-        cache->cached = entry_uri;
+        cache->cached = apr_pstrdup(r->pool, entry_uri);
 
         /* Go through the location entries, and check for matches.
          * We apply the directive sections in given order, we should
Index: server/util.c
===================================================================
--- server/util.c	(revision 1890572)
+++ server/util.c	(working copy)
@@ -76,7 +76,7 @@
 #include ""test_char.h""
 
 /* Win32/NetWare/OS2 need to check for both forward and back slashes
- * in ap_getparents() and ap_escape_url.
+ * in ap_normalize_path() and ap_escape_url().
  */
 #ifdef CASE_BLIND_FILESYSTEM
 #define IS_SLASH(s) ((s == '/') || (s == '\\'))
@@ -491,75 +491,127 @@ AP_DECLARE(apr_status_t) ap_pregsub_ex(apr_pool_t
     return rc;
 }
 
+/* Forward declare */
+static char x2c(const char *what);
+
+#define IS_SLASH_OR_NUL(s) (s == '\0' || IS_SLASH(s))
+
 /*
- * Parse .. so we don't compromise security
+ * Inspired by mod_jk's jk_servlet_normalize().
  */
-AP_DECLARE(void) ap_getparents(char *name)
+AP_DECLARE(int) ap_normalize_path(char *path, unsigned int flags)
 {
-    char *next;
-    int l, w, first_dot;
+    int ret = 1;
+    apr_size_t l = 1, w = 1;
 
-    /* Four paseses, as per RFC 1808 */
-    /* a) remove ./ path segments */
-    for (next = name; *next && (*next != '.'); next++) {
-    }
+    if (!IS_SLASH(path[0])) {
+        /* Besides ""OPTIONS *"", a request-target should start with '/'
+         * per RFC 7230 section 5.3, so anything else is invalid.
+         */
+        if (path[0] == '*' && path[1] == '\0') {
+            return 1;
+        }
+        /* However, AP_NORMALIZE_ALLOW_RELATIVE can be used to bypass
+         * this restriction (e.g. for subrequest file lookups).
+         */
+        if (!(flags & AP_NORMALIZE_ALLOW_RELATIVE) || path[0] == '\0') {
+            return 0;
+        }
 
-    l = w = first_dot = next - name;
-    while (name[l] != '\0') {
-        if (name[l] == '.' && IS_SLASH(name[l + 1])
-            && (l == 0 || IS_SLASH(name[l - 1])))
-            l += 2;
-        else
-            name[w++] = name[l++];
+        l = w = 0;
     }
 
-    /* b) remove trailing . path, segment */
-    if (w == 1 && name[0] == '.')
-        w--;
-    else if (w > 1 && name[w - 1] == '.' && IS_SLASH(name[w - 2]))
-        w--;
-    name[w] = '\0';
+    while (path[l] != '\0') {
+        /* RFC-3986 section 2.3:
+         *  For consistency, percent-encoded octets in the ranges of
+         *  ALPHA (%41-%5A and %61-%7A), DIGIT (%30-%39), hyphen (%2D),
+         *  period (%2E), underscore (%5F), or tilde (%7E) should [...]
+         *  be decoded to their corresponding unreserved characters by
+         *  URI normalizers.
+         */
+        if ((flags & AP_NORMALIZE_DECODE_UNRESERVED)
+                && path[l] == '%' && apr_isxdigit(path[l + 1])
+                                  && apr_isxdigit(path[l + 2])) {
+            const char c = x2c(&path[l + 1]);
+            if (apr_isalnum(c) || (c && strchr(""-._~"", c))) {
+                /* Replace last char and fall through as the current
+                 * read position */
+                l += 2;
+                path[l] = c;
+            }
+        }
 
-    /* c) remove all xx/../ segments. (including leading ../ and /../) */
-    l = first_dot;
+        if ((flags & AP_NORMALIZE_DROP_PARAMETERS) && path[l] == ';') {
+            do {
+                l++;
+            } while (!IS_SLASH_OR_NUL(path[l]));
+            continue;
+        }
 
-    while (name[l] != '\0') {
-        if (name[l] == '.' && name[l + 1] == '.' && IS_SLASH(name[l + 2])
-            && (l == 0 || IS_SLASH(name[l - 1]))) {
-            int m = l + 3, n;
+        if (w == 0 || IS_SLASH(path[w - 1])) {
+            /* Collapse ///// sequences to / */
+            if ((flags & AP_NORMALIZE_MERGE_SLASHES) && IS_SLASH(path[l])) {
+                do {
+                    l++;
+                } while (IS_SLASH(path[l]));
+                continue;
+            }
 
-            l = l - 2;
-            if (l >= 0) {
-                while (l >= 0 && !IS_SLASH(name[l]))
-                    l--;
-                l++;
+            if (path[l] == '.') {
+                /* Remove /./ segments */
+                if (IS_SLASH_OR_NUL(path[l + 1])) {
+                    l++;
+                    if (path[l]) {
+                        l++;
+                    }
+                    continue;
+                }
+
+                /* Remove /xx/../ segments */
+                if (path[l + 1] == '.' && IS_SLASH_OR_NUL(path[l + 2])) {
+                    /* Wind w back to remove the previous segment */
+                    if (w > 1) {
+                        do {
+                            w--;
+                        } while (w && !IS_SLASH(path[w - 1]));
+                    }
+                    else {
+                        /* Already at root, ignore and return a failure
+                         * if asked to.
+                         */
+                        if (flags & AP_NORMALIZE_NOT_ABOVE_ROOT) {
+                            ret = 0;
+                        }
+                    }
+
+                    /* Move l forward to the next segment */
+                    l += 2;
+                    if (path[l]) {
+                        l++;
+                    }
+                    continue;
+                }
             }
-            else
-                l = 0;
-            n = l;
-            while ((name[n] = name[m]))
-                (++n, ++m);
         }
-        else
-            ++l;
+
+        path[w++] = path[l++];
     }
+    path[w] = '\0';
 
-    /* d) remove trailing xx/.. segment. */
-    if (l == 2 && name[0] == '.' && name[1] == '.')
+    return ret;
+}
+
+/*
+ * Parse .. so we don't compromise security
+ */
+AP_DECLARE(void) ap_getparents(char *name)
+{
+    if (!ap_normalize_path(name, AP_NORMALIZE_NOT_ABOVE_ROOT |
+                                 AP_NORMALIZE_ALLOW_RELATIVE)) {
         name[0] = '\0';
-    else if (l > 2 && name[l - 1] == '.' && name[l - 2] == '.'
-             && IS_SLASH(name[l - 3])) {
-        l = l - 4;
-        if (l >= 0) {
-            while (l >= 0 && !IS_SLASH(name[l]))
-                l--;
-            l++;
-        }
-        else
-            l = 0;
-        name[l] = '\0';
     }
 }
+
 AP_DECLARE(void) ap_no2slash_ex(char *name, int is_fs_path)
 {
 
Index: .
===================================================================
--- .	(revision 1890572)
+++ .	(working copy)

Property changes on: .
___________________________________________________________________
Modified: svn:mergeinfo
## -0,0 +0,1 ##
   Merged /httpd/httpd/trunk:r1879074-1879080,1879094-1879095,1879110-1879112,1879114,1879116-1879117,1879137,1879144-1879145,1879147,1879149,1879235,1879360
```","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/856137707"", ""author_association"": ""MEMBER""}"
193,IssueComment,2021-06-08 05:54:23,jfclere,fork_close,"On 07/06/2021 19:47, ylavic wrote:
> This seems to be missing some changes in ap_process_request_internal(), 
> the commits to be backported would be:
> 
>   * r1879074 ***@***.***
>     ***@***.***>)
>   * r1879075 ***@***.***
>     ***@***.***>)
>   * r1879076 ***@***.***
>     ***@***.***>)
>   * r1879077 ***@***.***
>     ***@***.***>)
>   * r1879078 ***@***.***
>     ***@***.***>)
>   * r1879079 ***@***.***
>     ***@***.***>)
>   * r1879080 ***@***.***
>     ***@***.***>)
>   * r1879094 ***@***.***
>     ***@***.***>)
>   * r1879095 ***@***.***
>     ***@***.***>)
>   * r1879110 ***@***.***
>     ***@***.***>)
>   * r1879111 ***@***.***
>     ***@***.***>)
>   * r1879112 ***@***.***
>     ***@***.***>)
>   * r1879114 ***@***.***
>     ***@***.***>)
>   * r1879116 ***@***.***
>     ***@***.***>)
>   * r1879117 ***@***.***
>     ***@***.***>)
>   * r1879137 ***@***.***
>     ***@***.***>)
>   * r1879144 ***@***.***
>     ***@***.***>)
>   * r1879145 ***@***.***
>     ***@***.***>)
>   * r1879147 ***@***.***
>     ***@***.***>)
>   * r1879149 ***@***.***
>     ***@***.***>)
>   * r1879235 ***@***.***
>     ***@***.***>)
>   * r1879360 ***@***.***
>     ***@***.***>)
> 
> The above includes all the changes, not only mod_proxy's, but if we go 
> for this backport I think that they all matter.

OK I will do another try not limited to mod_proxy. Thnaks for the review.

> 
> The full patch would be:
> 
> |Index: docs/manual/developer/modguide.xml 
> =================================================================== --- 
> docs/manual/developer/modguide.xml (revision 1890572) +++ 
> docs/manual/developer/modguide.xml (working copy) @@ -237,6 +237,7 @@ 
> can create. Some other ways of hooking are: 
> <li><code>ap_hook_child_init</code>: Place a hook that executes when a 
> child process is spawned (commonly used for initializing modules after 
> the server has forked)</li> <li><code>ap_hook_pre_config</code>: Place a 
> hook that executes before any configuration data has been read (very 
> early hook)</li> <li><code>ap_hook_post_config</code>: Place a hook that 
> executes after configuration has been parsed, but before the server has 
> forked</li> +<li><code>ap_hook_pre_translate_name</code>: Place a hook 
> that executes when a URI needs to be translated into a filename on the 
> server, before decoding</li> <li><code>ap_hook_translate_name</code>: 
> Place a hook that executes when a URI needs to be translated into a 
> filename on the server (think <code>mod_rewrite</code>)</li> 
> <li><code>ap_hook_quick_handler</code>: Similar to 
> <code>ap_hook_handler</code>, except it is run before any other request 
> hooks (translation, auth, fixups etc)</li> 
> <li><code>ap_hook_log_transaction</code>: Place a hook that executes 
> when the server is about to add a log entry of the current request</li> 
> Index: docs/manual/mod/mod_log_debug.xml 
> =================================================================== --- 
> docs/manual/mod/mod_log_debug.xml (revision 1890572) +++ 
> docs/manual/mod/mod_log_debug.xml (working copy) @@ -103,6 +103,7 @@ 
> <table border=""1"" style=""zebra""> <columnspec><column 
> width=""1""/></columnspec> <tr><th>Name</th></tr> + 
> <tr><td><code>pre_translate_name</code></td></tr> 
> <tr><td><code>translate_name</code></td></tr> 
> <tr><td><code>type_checker</code></td></tr> 
> <tr><td><code>quick_handler</code></td></tr> Index: 
> docs/manual/mod/mod_lua.xml 
> =================================================================== --- 
> docs/manual/mod/mod_lua.xml (revision 1890572) +++ 
> docs/manual/mod/mod_lua.xml (working copy) @@ -216,6 +216,13 @@ 
> performing access control, or setting mime types:< been mapped to a host 
> or virtual host</td> </tr> <tr> + <td>Pre-Translate name</td> + 
> <td><directive module=""mod_lua"">LuaHookPreTranslateName</directive></td> 
> + <td>This phase translates the requested URI into a filename on the + 
> system, before decoding occurs. Modules such as 
> <module>mod_proxy</module> + can operate in this phase.</td> + </tr> + 
> <tr> <td>Translate name</td> <td><directive 
> module=""mod_lua"">LuaHookTranslateName</directive></td> <td>This phase 
> translates the requested URI into a filename on the @@ -438,8 +445,8 @@ 
> end <td><code>filename</code></td> <td>string</td> <td>yes</td> - 
> <td>The file name that the request maps to, f.x. 
> /www/example.com/foo.txt. This can be - changed in the translate-name or 
> map-to-storage phases of a request to allow the + <td>The file name that 
> the request maps to, f.x. /www/example.com/foo.txt. This can be + 
> changed in the pre-translate-name, translate-name or map-to-storage 
> phases of a request to allow the default handler (or script handlers) to 
> serve a different file than what was requested.</td> </tr> <tr> @@ 
> -538,7 +545,7 @@ end <td>string</td> <td>yes</td> <td>Denotes whether 
> this is a proxy request or not. This value is generally set in - the 
> post_read_request/translate_name phase of a request.</td> + the 
> post_read_request/pre_translate_name/translate_name phase of a 
> request.</td> </tr> <tr> <td><code>range</code></td> @@ -1495,6 +1502,23 
> @@ end </directivesynopsis> <directivesynopsis> 
> +<name>LuaHookPreTranslate</name> +<description>Provide a hook for the 
> pre_translate phase of a request +processing</description> 
> +<syntax>LuaHookPreTranslate /path/to/lua/script.lua 
> hook_function_name</syntax> +<contextlist><context>server 
> config</context><context>virtual host</context> 
> +<context>directory</context><context>.htaccess</context> 
> +</contextlist> +<override>All</override> +<usage> +<p> + Just like 
> LuaHookTranslateName, but executed at the pre_translate phase, + where 
> the URI-path is not percent decoded. +</p> +</usage> 
> +</directivesynopsis> + +<directivesynopsis> <name>LuaHookFixups</name> 
> <description>Provide a hook for the fixups phase of a request 
> processing</description> Index: include/ap_mmn.h 
> =================================================================== --- 
> include/ap_mmn.h (revision 1890572) +++ include/ap_mmn.h (working copy) 
> @@ -562,6 +562,10 @@ * 20120211.106 (2.4.49-dev) Add 
> ap_create_request(). * 20120211.107 (2.4.49-dev) Add 
> ap_parse_request_line() and * ap_check_request_header() + * 20120211.108 
> (2.4.49-dev) Add ap_normalize_path() + * 20120211.109 (2.4.49-dev) Add 
> pre_translate_name hook + * 20120211.110 (2.4.49-dev) Add 
> map_encoded_one and map_encoded_all bits to + * proxy_server_conf */ 
> #define MODULE_MAGIC_COOKIE 0x41503234UL /* ""AP24"" */ @@ -569,7 +573,7 
> @@ #ifndef MODULE_MAGIC_NUMBER_MAJOR #define MODULE_MAGIC_NUMBER_MAJOR 
> 20120211 #endif -#define MODULE_MAGIC_NUMBER_MINOR 107 /* 0...n */ 
> +#define MODULE_MAGIC_NUMBER_MINOR 110 /* 0...n */ /** * Determine if 
> the server's current MODULE_MAGIC_NUMBER is at least a Index: 
> include/http_request.h 
> =================================================================== --- 
> include/http_request.h (revision 1890572) +++ include/http_request.h 
> (working copy) @@ -364,6 +364,18 @@ 
> AP_DECLARE_HOOK(int,create_request,(request_rec *r /** * This hook allow 
> modules an opportunity to translate the URI into an + * actual filename, 
> before URL decoding happens. + * @param r The current request + * 
> @return DECLINED to let other modules handle the pre-translation, + * OK 
> if it was handled and no other module should process it, + * DONE if no 
> further transformation should happen on the URI, + * HTTP_... in case of 
> error. + * @ingroup hooks + */ 
> +AP_DECLARE_HOOK(int,pre_translate_name,(request_rec *r)) + +/** + * 
> This hook allow modules an opportunity to translate the URI into an * 
> actual filename. If no modules do anything special, the server's default 
> * rules will be followed. * @param r The current request Index: 
> include/httpd.h 
> =================================================================== --- 
> include/httpd.h (revision 1890572) +++ include/httpd.h (working copy) @@ 
> -1762,7 +1762,22 @@ AP_DECLARE(void) ap_no2slash(char *name); */ 
> AP_DECLARE(void) ap_no2slash_ex(char *name, int is_fs_path); +#define 
> AP_NORMALIZE_ALLOW_RELATIVE (1u << 0) +#define 
> AP_NORMALIZE_NOT_ABOVE_ROOT (1u << 1) +#define 
> AP_NORMALIZE_DECODE_UNRESERVED (1u << 2) +#define 
> AP_NORMALIZE_MERGE_SLASHES (1u << 3) +#define 
> AP_NORMALIZE_DROP_PARAMETERS (1u << 4) + /** + * Remove all ////, /./ 
> and /xx/../ substrings from a path, and more + * depending on passed in 
> flags. + * @param path The path to normalize + * @param flags bitmask of 
> AP_NORMALIZE_* flags + * @return non-zero on success + */ 
> +AP_DECLARE(int) ap_normalize_path(char *path, unsigned int flags); + 
> +/** * Remove all ./ and xx/../ substrings from a file name. Also remove 
> * any leading ../ or /../ substrings. * @param name the file name to 
> parse Index: modules/dav/main/util.c 
> =================================================================== --- 
> modules/dav/main/util.c (revision 1890572) +++ modules/dav/main/util.c 
> (working copy) @@ -664,7 +664,13 @@ static dav_error * 
> dav_process_if_header(request_r /* note that parsed_uri.path is 
> allocated; we can trash it */ /* clean up the URI a bit */ - 
> ap_getparents(parsed_uri.path); + if 
> (!ap_normalize_path(parsed_uri.path, + AP_NORMALIZE_NOT_ABOVE_ROOT | + 
> AP_NORMALIZE_DECODE_UNRESERVED)) { + return dav_new_error(r->pool, 
> HTTP_BAD_REQUEST, + DAV_ERR_IF_TAGGED, rv, + ""Invalid URI path tagged 
> If-header.""); + } /* the resources we will compare to have unencoded 
> paths */ if (ap_unescape_url(parsed_uri.path) != OK) { Index: 
> modules/examples/mod_example_hooks.c 
> =================================================================== --- 
> modules/examples/mod_example_hooks.c (revision 1890572) +++ 
> modules/examples/mod_example_hooks.c (working copy) @@ -1175,6 +1175,22 
> @@ static int x_post_read_request(request_rec *r) /* * This routine 
> gives our module an opportunity to translate the URI into an + * actual 
> filename, before URL decoding happens. + * + * This is a RUN_FIRST hook. 
> + */ +static int x_pre_translate_name(request_rec *r) +{ + /* + * We 
> don't actually *do* anything here, except note the fact that we were + * 
> called. + */ + trace_request(r, ""x_pre_translate_name()""); + return 
> DECLINED; +} + +/* + * This routine gives our module an opportunity to 
> translate the URI into an * actual filename. If we don't do anything 
> special, the server's default * rules (Alias directives and the like) 
> will continue to be followed. * @@ -1467,6 +1483,7 @@ static void 
> x_register_hooks(apr_pool_t *p) 
> ap_hook_log_transaction(x_log_transaction, NULL, NULL, APR_HOOK_MIDDLE); 
> ap_hook_http_scheme(x_http_scheme, NULL, NULL, APR_HOOK_MIDDLE); 
> ap_hook_default_port(x_default_port, NULL, NULL, APR_HOOK_MIDDLE); + 
> ap_hook_pre_translate_name(x_pre_translate_name, NULL, NULL, 
> APR_HOOK_MIDDLE); ap_hook_translate_name(x_translate_name, NULL, NULL, 
> APR_HOOK_MIDDLE); ap_hook_map_to_storage(x_map_to_storage, NULL,NULL, 
> APR_HOOK_MIDDLE); ap_hook_header_parser(x_header_parser, NULL, NULL, 
> APR_HOOK_MIDDLE); Index: modules/generators/mod_autoindex.c 
> =================================================================== --- 
> modules/generators/mod_autoindex.c (revision 1890572) +++ 
> modules/generators/mod_autoindex.c (working copy) @@ -1266,8 +1266,9 @@ 
> static struct ent *make_parent_entry(apr_int32_t a if (!(p->name = 
> ap_make_full_path(r->pool, r->uri, ""../""))) { return (NULL); } - 
> ap_getparents(p->name); - if (!*p->name) { + if 
> (!ap_normalize_path(p->name, AP_NORMALIZE_ALLOW_RELATIVE | + 
> AP_NORMALIZE_NOT_ABOVE_ROOT) + || p->name[0] == '\0') { return (NULL); } 
> Index: modules/generators/mod_info.c 
> =================================================================== --- 
> modules/generators/mod_info.c (revision 1890572) +++ 
> modules/generators/mod_info.c (working copy) @@ -322,6 +322,7 @@ static 
> const hook_lookup_t request_hooks[] = { {""HTTP Scheme"", 
> ap_hook_get_http_scheme}, {""Default Port"", ap_hook_get_default_port}, 
> {""Quick Handler"", ap_hook_get_quick_handler}, + {""Pre-Translate Name"", 
> ap_hook_get_pre_translate_name}, {""Translate Name"", 
> ap_hook_get_translate_name}, {""Map to Storage"", 
> ap_hook_get_map_to_storage}, {""Check Access"", 
> ap_hook_get_access_checker_ex}, Index: modules/loggers/mod_log_debug.c 
> =================================================================== --- 
> modules/loggers/mod_log_debug.c (revision 1890572) +++ 
> modules/loggers/mod_log_debug.c (working copy) @@ -49,6 +49,7 @@ static 
> const char * const hooks[] = { ""check_authn"", /* 9 */ ""check_authz"", /* 
> 10 */ ""insert_filter"", /* 11 */ + ""pre_translate_name"", /* 12 */ NULL }; 
> @@ -109,6 +110,12 @@ static int log_debug_handler(request_rec *r) return 
> DECLINED; } +static int log_debug_pre_translate_name(request_rec *r) +{ 
> + do_debug_log(r, hooks[12]); + return DECLINED; +} + static int 
> log_debug_translate_name(request_rec *r) { do_debug_log(r, hooks[3]); @@ 
> -263,6 +270,7 @@ static void register_hooks(apr_pool_t *p) 
> ap_hook_log_transaction(log_debug_log_transaction, NULL, NULL, 
> APR_HOOK_FIRST); ap_hook_quick_handler(log_debug_quick_handler, NULL, 
> NULL, APR_HOOK_FIRST); ap_hook_handler(log_debug_handler, NULL, NULL, 
> APR_HOOK_FIRST); + 
> ap_hook_pre_translate_name(log_debug_pre_translate_name, NULL, NULL, 
> APR_HOOK_FIRST); ap_hook_translate_name(log_debug_translate_name, NULL, 
> NULL, APR_HOOK_FIRST); ap_hook_map_to_storage(log_debug_map_to_storage, 
> NULL, NULL, APR_HOOK_FIRST); ap_hook_fixups(log_debug_fixups, NULL, 
> NULL, APR_HOOK_FIRST); Index: modules/lua/mod_lua.c 
> =================================================================== --- 
> modules/lua/mod_lua.c (revision 1890572) +++ modules/lua/mod_lua.c 
> (working copy) @@ -1202,6 +1202,11 @@ static int 
> lua_check_user_id_harness_last(request_ } */ +static int 
> lua_pre_trans_name_harness(request_rec *r) +{ + return 
> lua_request_rec_hook_harness(r, ""pre_translate_name"", APR_HOOK_MIDDLE); 
> +} + static int lua_translate_name_harness_first(request_rec *r) { 
> return lua_request_rec_hook_harness(r, ""translate_name"", 
> AP_LUA_HOOK_FIRST); @@ -1274,6 +1279,21 @@ static int 
> lua_quick_harness(request_rec *r, int l return 
> lua_request_rec_hook_harness(r, ""quick"", APR_HOOK_MIDDLE); } +static 
> const char *register_pre_trans_name_hook(cmd_parms *cmd, void *_cfg, + 
> const char *file, + const char *function) +{ + return 
> register_named_file_function_hook(""pre_translate_name"", cmd, _cfg, file, 
> + function, APR_HOOK_MIDDLE); +} + +static const char 
> *register_pre_trans_name_block(cmd_parms *cmd, void *_cfg, + const char 
> *line) +{ + return 
> register_named_block_function_hook(""pre_translate_name"", cmd, _cfg, + 
> line); +} + static const char *register_translate_name_hook(cmd_parms 
> *cmd, void *_cfg, const char *file, const char *function, @@ -1842,6 
> +1862,14 @@ static const command_rec lua_commands[] = { 
> AP_INIT_TAKE3(""LuaAuthzProvider"", register_authz_provider, NULL, 
> RSRC_CONF|EXEC_ON_READ, ""Provide an authorization provider""), + 
> AP_INIT_TAKE2(""LuaHookPreTranslateName"", register_pre_trans_name_hook, 
> NULL, + OR_ALL, + ""Provide a hook for the pre_translate name phase of 
> request processing""), + + AP_INIT_RAW_ARGS(""<LuaHookPreTranslateName"", 
> register_pre_trans_name_block, NULL, + EXEC_ON_READ | OR_ALL, + ""Provide 
> a hook for the pre_translate name phase of request processing""), + 
> AP_INIT_TAKE23(""LuaHookTranslateName"", register_translate_name_hook, 
> NULL, OR_ALL, ""Provide a hook for the translate name phase of request 
> processing""), @@ -2092,6 +2120,9 @@ static void 
> lua_register_hooks(apr_pool_t *p) APR_HOOK_MIDDLE); /* http_request.h 
> hooks */ + ap_hook_pre_translate_name(lua_pre_trans_name_harness, NULL, 
> NULL, + APR_HOOK_MIDDLE); + 
> ap_hook_translate_name(lua_translate_name_harness_first, NULL, NULL, 
> AP_LUA_HOOK_FIRST); ap_hook_translate_name(lua_translate_name_harness, 
> NULL, NULL, Index: modules/proxy/mod_proxy.c 
> =================================================================== --- 
> modules/proxy/mod_proxy.c (revision 1890572) +++ 
> modules/proxy/mod_proxy.c (working copy) @@ -17,6 +17,7 @@ #include 
> ""mod_proxy.h"" #include ""mod_core.h"" #include ""apr_optional.h"" +#include 
> ""apr_strings.h"" #include ""scoreboard.h"" #include ""mod_status.h"" #include 
> ""proxy_util.h"" @@ -560,6 +561,201 @@ static int alias_match(const char 
> *uri, const char return urip - uri; } +/* + * Inspired by mod_jk's 
> jk_servlet_normalize(). + */ +static int alias_match_servlet(apr_pool_t 
> *p, + const char **urip, + const char *alias) +{ + char *map; + const 
> char *uri = *urip; + apr_array_header_t *stack; + int map_pos, uri_pos, 
> alias_pos, first_pos; + int alias_depth = 0, depth; + + /* Both uri and 
> alias should start with '/' */ + if (uri[0] != '/' || alias[0] != '/') { 
> + return 0; + } + + stack = apr_array_make(p, 5, sizeof(int)); + map = 
> apr_palloc(p, strlen(uri) + 1); + map[0] = '/'; + map[1] = '\0'; + + 
> map_pos = uri_pos = alias_pos = first_pos = 1; + while (uri[uri_pos] != 
> '\0') { + /* Remove path parameters ;foo=bar/ from any path segment */ + 
> if (uri[uri_pos] == ';') { + do { + uri_pos++; + } while (uri[uri_pos] 
> != '/' && uri[uri_pos] != '\0'); + continue; + } + + if (map[map_pos - 
> 1] == '/') { + /* Collapse ///// sequences to / */ + if (uri[uri_pos] == 
> '/') { + do { + uri_pos++; + } while (uri[uri_pos] == '/'); + continue; 
> + } + + if (uri[uri_pos] == '.') { + /* Remove /./ segments */ + if 
> (uri[uri_pos + 1] == '/' + || uri[uri_pos + 1] == ';' + || uri[uri_pos + 
> 1] == '\0') { + uri_pos++; + if (uri[uri_pos] == '/') { + uri_pos++; + } 
> + continue; + } + + /* Remove /xx/../ segments */ + if (uri[uri_pos + 1] 
> == '.' + && (uri[uri_pos + 2] == '/' + || uri[uri_pos + 2] == ';' + || 
> uri[uri_pos + 2] == '\0')) { + /* Wind map segment back the previous one 
> */ + if (map_pos == 1) { + /* Above root */ + return 0; + } + do { + 
> map_pos--; + } while (map[map_pos - 1] != '/'); + map[map_pos] = '\0'; + 
> + /* Wind alias segment back, unless in deeper segment */ + if 
> (alias_depth == stack->nelts) { + if (alias[alias_pos] == '\0') { + 
> alias_pos--; + } + while (alias_pos > 0 && alias[alias_pos] == '/') { + 
> alias_pos--; + } + while (alias_pos > 0 && alias[alias_pos - 1] != '/') 
> { + alias_pos--; + } + AP_DEBUG_ASSERT(alias_pos > 0); + alias_depth--; 
> + } + apr_array_pop(stack); + + /* Move uri forward to the next segment 
> */ + uri_pos += 2; + if (uri[uri_pos] == '/') { + uri_pos++; + } + 
> first_pos = 0; + continue; + } + } + if (first_pos) { + while 
> (uri[first_pos] == '/') { + first_pos++; + } + } + + /* New segment */ + 
> APR_ARRAY_PUSH(stack, int) = first_pos ? first_pos : uri_pos; + if 
> (alias[alias_pos] != '\0') { + if (alias[alias_pos - 1] != '/') { + /* 
> Remain in pair with uri segments */ + do { + alias_pos++; + } while 
> (alias[alias_pos - 1] != '/' && alias[alias_pos]); + } + while 
> (alias[alias_pos] == '/') { + alias_pos++; + } + if (alias[alias_pos] != 
> '\0') { + alias_depth++; + } + } + } + + if (alias[alias_pos] != '\0') { 
> + int *match = &APR_ARRAY_IDX(stack, alias_depth - 1, int); + if 
> (*match) { + if (alias[alias_pos] != uri[uri_pos]) { + /* Current 
> segment does not match */ + *match = 0; + } + else if (alias[alias_pos + 
> 1] == '\0' + && alias[alias_pos] != '/') { + if (uri[uri_pos + 1] == 
> ';') { + /* We'll preserve the parameters of the last + * segment if it 
> does not end with '/', so mark + * the match as negative for below 
> handling. + */ + *match = -(uri_pos + 1); + } + else if (uri[uri_pos + 
> 1] != '/' + && uri[uri_pos + 1] != '\0') { + /* Last segment does not 
> match all the way */ + *match = 0; + } + } + } + /* Don't go past the 
> segment if the uri isn't there yet */ + if (alias[alias_pos] != '/' || 
> uri[uri_pos] == '/') { + alias_pos++; + } + } + + if (uri[uri_pos] == 
> '/') { + first_pos = uri_pos + 1; + } + map[map_pos++] = uri[uri_pos++]; 
> + map[map_pos] = '\0'; + } + + /* Can't reach the end of uri before the 
> end of the alias, + * for example if uri is ""/"" and alias is ""/examples"" 
> + */ + if (alias[alias_pos] != '\0') { + return 0; + } + + /* Check 
> whether each alias segment matched */ + for (depth = 0; depth < 
> alias_depth; ++depth) { + if (!APR_ARRAY_IDX(stack, depth, int)) { + 
> return 0; + } + } + + /* If alias_depth == stack->nelts we have a full 
> match, i.e. + * uri == alias so we can return uri_pos as is (the end of 
> uri) + */ + if (alias_depth < stack->nelts) { + /* Return the segment 
> following the alias */ + uri_pos = APR_ARRAY_IDX(stack, alias_depth, 
> int); + if (alias_depth) { + /* But if the last segment of the alias 
> does not end with '/' + * and the corresponding segment of the uri has 
> parameters, + * we want to forward those parameters (see above for the + 
> * negative pos trick/mark). + */ + int pos = APR_ARRAY_IDX(stack, 
> alias_depth - 1, int); + if (pos < 0) { + uri_pos = -pos; + } + } + } + 
> /* If the alias lacks a trailing slash, take it from the uri (if any) */ 
> + if (alias[alias_pos - 1] != '/' && uri[uri_pos - 1] == '/') { + 
> uri_pos--; + } + + *urip = map; + return uri_pos; +} + /* Detect if an 
> absoluteURI should be proxied or not. Note that we * have to do this 
> during this phase because later phases are * ""short-circuiting""... i.e. 
> translate_names will end when the first @@ -670,6 +866,7 @@ 
> PROXY_DECLARE(int) ap_proxy_trans_match(request_re int mismatch = 0; 
> unsigned int nocanon = ent->flags & PROXYPASS_NOCANON; const char 
> *use_uri = nocanon ? r->unparsed_uri : r->uri; + const char *servlet_uri 
> = NULL; if (dconf && (dconf->interpolate_env == 1) && (ent->flags & 
> PROXYPASS_INTERPOLATE)) { fake = proxy_interpolate(r, ent->fake); @@ 
> -730,7 +927,14 @@ PROXY_DECLARE(int) ap_proxy_trans_match(request_re } } 
> else { - len = alias_match(r->uri, fake); + if ((ent->flags & 
> PROXYPASS_MAP_SERVLET) == PROXYPASS_MAP_SERVLET) { + servlet_uri = 
> r->uri; + len = alias_match_servlet(r->pool, &servlet_uri, fake); + 
> nocanon = 0; /* ignored since servlet's normalization applies */ + } + 
> else { + len = alias_match(r->uri, fake); + } if (len != 0) { if 
> ((real[0] == '!') && (real[1] == '\0')) { @@ -761,7 +965,7 @@ 
> PROXY_DECLARE(int) ap_proxy_trans_match(request_re */ int rc = 
> proxy_run_check_trans(r, found + 6); if (rc != OK && rc != DECLINED) { - 
> return DONE; + return HTTP_CONTINUE; } r->filename = found; @@ -775,19 
> +979,33 @@ PROXY_DECLARE(int) ap_proxy_trans_match(request_re 
> apr_table_setn(r->notes, ""proxy-noquery"", ""1""); } + if (servlet_uri) { + 
> ap_log_rerror(APLOG_MARK, APLOG_TRACE1, 0, r, APLOGNO(10248) + ""Servlet 
> path '%s' (%s) matches proxy handler '%s'"", + r->uri, servlet_uri, 
> found); + /* Apply servlet normalization to r->uri so that <Location> or 
> any + * directory context match does not have to handle path parameters. 
> + * We change r->uri in-place so that r->parsed_uri.path is updated + * 
> too. Since normalized servlet_uri is necessarily shorter than + * the 
> original r->uri, strcpy() is fine. + */ + AP_DEBUG_ASSERT(strlen(r->uri) 
>  >= strlen(servlet_uri)); + strcpy(r->uri, servlet_uri); + return DONE; 
> + } + ap_log_rerror(APLOG_MARK, APLOG_TRACE1, 0, r, APLOGNO(03464) ""URI 
> path '%s' matches proxy handler '%s'"", r->uri, found); - return OK; } - 
> return DONE; + return HTTP_CONTINUE; } -static int 
> proxy_trans(request_rec *r) +static int proxy_trans(request_rec *r, int 
> pre_trans) { - int i; + int i, enc; struct proxy_alias *ent; 
> proxy_dir_conf *dconf; proxy_server_conf *conf; @@ -794,11 +1012,32 @@ 
> PROXY_DECLARE(int) ap_proxy_trans_match(request_re if (r->proxyreq) { /* 
> someone has already set up the proxy, it was possibly ourselves - * in 
> proxy_detect + * in proxy_detect (DONE will prevent further decoding of 
> r->uri, + * only if proxyreq is set before pre_trans already). */ - 
> return OK; + return pre_trans ? DONE : OK; } + /* In early pre_trans 
> hook, r->uri was not manipulated yet so we are + * compliant with 
> RFC1945 at this point. Otherwise, it probably isn't + * an issue because 
> this is a hybrid proxy/origin server. + */ + + dconf = 
> ap_get_module_config(r->per_dir_config, &proxy_module); + conf = 
> (proxy_server_conf *) ap_get_module_config(r->server->module_config, + 
> &proxy_module); + + /* Always and only do PROXY_MAP_ENCODED mapping in 
> pre_trans, when + * r->uri is still encoded, or we might consider for 
> instance that + * a decoded sub-delim is now a delimiter (e.g. ""%3B"" => 
> ';' for + * path parameters), which it's not. + */ + if ((pre_trans && 
> !conf->map_encoded_one) + || (!pre_trans && conf->map_encoded_all)) { + 
> /* Fast path, nothing at this stage */ + return DECLINED; + } + if 
> ((r->unparsed_uri[0] == '*' && r->unparsed_uri[1] == '\0') || !r->uri || 
> r->uri[0] != '/') { return DECLINED; @@ -808,37 +1047,42 @@ 
> PROXY_DECLARE(int) ap_proxy_trans_match(request_re return DECLINED; } - 
> /* XXX: since r->uri has been manipulated already we're not really - * 
> compliant with RFC1945 at this point. But this probably isn't - * an 
> issue because this is a hybrid proxy/origin server. - */ - - dconf = 
> ap_get_module_config(r->per_dir_config, &proxy_module); - /* short way - 
> this location is reverse proxied? */ if (dconf->alias) { - int rv = 
> ap_proxy_trans_match(r, dconf->alias, dconf); - if (DONE != rv) { - 
> return rv; + enc = (dconf->alias->flags & PROXYPASS_MAP_ENCODED) != 0; + 
> if (!(pre_trans ^ enc)) { + int rv = ap_proxy_trans_match(r, 
> dconf->alias, dconf); + if (rv != HTTP_CONTINUE) { + return rv; + } } } 
> - conf = (proxy_server_conf *) 
> ap_get_module_config(r->server->module_config, - &proxy_module); - /* 
> long way - walk the list of aliases, find a match */ - if 
> (conf->aliases->nelts) { - ent = (struct proxy_alias *) 
> conf->aliases->elts; - for (i = 0; i < conf->aliases->nelts; i++) { - 
> int rv = ap_proxy_trans_match(r, &ent[i], dconf); - if (DONE != rv) { + 
> for (i = 0; i < conf->aliases->nelts; i++) { + ent = &((struct 
> proxy_alias *)conf->aliases->elts)[i]; + enc = (ent->flags & 
> PROXYPASS_MAP_ENCODED) != 0; + if (!(pre_trans ^ enc)) { + int rv = 
> ap_proxy_trans_match(r, ent, dconf); + if (rv != HTTP_CONTINUE) { return 
> rv; } } } + return DECLINED; } +static int 
> proxy_pre_translate_name(request_rec *r) +{ + return proxy_trans(r, 1); 
> +} + +static int proxy_translate_name(request_rec *r) +{ + return 
> proxy_trans(r, 0); +} + static int proxy_walk(request_rec *r) { 
> proxy_server_conf *sconf = 
> ap_get_module_config(r->server->module_config, @@ -1359,6 +1603,8 @@ 
> static void * create_proxy_config(apr_pool_t *p, s ps->forward = NULL; 
> ps->reverse = NULL; ps->domain = NULL; + ps->map_encoded_one = 0; + 
> ps->map_encoded_all = 1; ps->id = apr_psprintf(p, ""p%x"", 1); /* simply 
> for storage size */ ps->viaopt = via_off; /* initially backward 
> compatible with 1.3.1 */ ps->viaopt_set = 0; /* 0 means default */ @@ 
> -1516,6 +1762,9 @@ static void * merge_proxy_config(apr_pool_t *p, vo 
> ps->forward = overrides->forward ? overrides->forward : base->forward; 
> ps->reverse = overrides->reverse ? overrides->reverse : base->reverse; + 
> ps->map_encoded_one = overrides->map_encoded_one || 
> base->map_encoded_one; + ps->map_encoded_all = 
> overrides->map_encoded_all && base->map_encoded_all; + ps->domain = 
> (overrides->domain == NULL) ? base->domain : overrides->domain; ps->id = 
> (overrides->id == NULL) ? base->id : overrides->id; ps->viaopt = 
> (overrides->viaopt_set == 0) ? base->viaopt : overrides->viaopt; @@ 
> -1640,7 +1889,7 @@ static void *merge_proxy_dir_config(apr_pool_t *p, : 
> add->forward_100_continue; new->forward_100_continue_set = 
> add->forward_100_continue_set || base->forward_100_continue_set; - + 
> return new; } @@ -1814,11 +2063,31 @@ static const char * ""in the form 
> 'key=value'.""; } } - else + else { *val++ = '\0'; - 
> apr_table_setn(params, word, val); + } + if (!strcasecmp(word, 
> ""mapping"")) { + if (!strcasecmp(val, ""encoded"")) { + flags |= 
> PROXYPASS_MAP_ENCODED; + } + else if (!strcasecmp(val, ""servlet"")) { + 
> flags |= PROXYPASS_MAP_SERVLET; + } + else { + return ""unknown mapping""; 
> + } + } + else { + apr_table_setn(params, word, val); + } } - }; + } + 
> if (flags & PROXYPASS_MAP_ENCODED) { + conf->map_encoded_one = 1; + } + 
> else { + conf->map_encoded_all = 0; + } if (r == NULL) { return 
> ""ProxyPass|ProxyPassMatch needs a path when not defined in a location""; 
> @@ -3142,7 +3411,10 @@ static void register_hooks(apr_pool_t *p) /* 
> handler */ ap_hook_handler(proxy_handler, NULL, NULL, APR_HOOK_FIRST); 
> /* filename-to-URI translation */ - ap_hook_translate_name(proxy_trans, 
> aszSucc, NULL, APR_HOOK_FIRST); + 
> ap_hook_pre_translate_name(proxy_pre_translate_name, NULL, NULL, + 
> APR_HOOK_MIDDLE); + ap_hook_translate_name(proxy_translate_name, 
> aszSucc, NULL, + APR_HOOK_FIRST); /* walk <Proxy > entries and suppress 
> default TRACE behavior */ ap_hook_map_to_storage(proxy_map_location, 
> NULL,NULL, APR_HOOK_FIRST); /* fixups */ Index: 
> modules/proxy/mod_proxy.h 
> =================================================================== --- 
> modules/proxy/mod_proxy.h (revision 1890572) +++ 
> modules/proxy/mod_proxy.h (working copy) @@ -124,6 +124,8 @@ struct 
> proxy_remote { #define PROXYPASS_NOCANON 0x01 #define 
> PROXYPASS_INTERPOLATE 0x02 #define PROXYPASS_NOQUERY 0x04 +#define 
> PROXYPASS_MAP_ENCODED 0x08 +#define PROXYPASS_MAP_SERVLET 0x18 /* + 
> MAP_ENCODED */ struct proxy_alias { const char *real; const char *fake; 
> @@ -200,6 +202,8 @@ typedef struct { unsigned int inherit_set:1; 
> unsigned int ppinherit:1; unsigned int ppinherit_set:1; + unsigned int 
> map_encoded_one:1; + unsigned int map_encoded_all:1; } 
> proxy_server_conf; typedef struct { @@ -1171,7 +1175,11 @@ 
> PROXY_DECLARE(apr_status_t) ap_proxy_sync_balancer * @param r request * 
> @param ent proxy_alias record * @param dconf per-dir config or NULL - * 
> @return DECLINED, DONE or OK if matched + * @return OK if the alias 
> matched, + * DONE if the alias matched and r->uri was normalized so + * 
> no further transformation should happen on it, + * DECLINED if proxying 
> is disabled for this alias, + * HTTP_CONTINUE if the alias did not match 
> */ PROXY_DECLARE(int) ap_proxy_trans_match(request_rec *r, struct 
> proxy_alias *ent, Index: server/request.c 
> =================================================================== --- 
> server/request.c (revision 1890572) +++ server/request.c (working copy) 
> @@ -59,6 +59,7 @@ #define APLOG_MODULE_INDEX AP_CORE_MODULE_INDEX 
> APR_HOOK_STRUCT( + APR_HOOK_LINK(pre_translate_name) 
> APR_HOOK_LINK(translate_name) APR_HOOK_LINK(map_to_storage) 
> APR_HOOK_LINK(check_user_id) @@ -74,6 +75,8 @@ APR_HOOK_STRUCT( 
> APR_HOOK_LINK(force_authn) ) 
> +AP_IMPLEMENT_HOOK_RUN_FIRST(int,pre_translate_name, + (request_rec *r), 
> (r), DECLINED) AP_IMPLEMENT_HOOK_RUN_FIRST(int,translate_name, 
> (request_rec *r), (r), DECLINED) 
> AP_IMPLEMENT_HOOK_RUN_FIRST(int,map_to_storage, @@ -157,6 +160,26 @@ 
> AP_DECLARE(int) ap_some_authn_required(request_rec return rv; } +static 
> int walk_location_and_if(request_rec *r) +{ + int access_status; + + if 
> ((access_status = ap_location_walk(r))) { + return access_status; + } + 
> if ((access_status = ap_if_walk(r))) { + return access_status; + } + + { 
> + core_dir_config *d = ap_get_core_module_config(r->per_dir_config); + 
> if (d->log) + r->log = d->log; + } + + return OK; +} + /* This is the 
> master logic for processing requests. Do NOT duplicate * this logic 
> elsewhere, or the security model will be broken by future * API changes. 
> Each phase must be individually optimized to pick up @@ -164,17 +187,65 
> @@ AP_DECLARE(int) ap_some_authn_required(request_rec */ AP_DECLARE(int) 
> ap_process_request_internal(request_rec *r) { + int access_status = 
> DECLINED; int file_req = (r->main && r->filename); - int access_status; 
> - core_dir_config *d; core_server_config *sconf = 
> ap_get_core_module_config(r->server->module_config); + unsigned int 
> normalize_flags; - /* Ignore embedded %2F's in path for proxy requests 
> */ - if (!r->proxyreq && r->parsed_uri.path) { - d = 
> ap_get_core_module_config(r->per_dir_config); + normalize_flags = 
> AP_NORMALIZE_NOT_ABOVE_ROOT; + if (sconf->merge_slashes != 
> AP_CORE_CONFIG_OFF) { + normalize_flags |= AP_NORMALIZE_MERGE_SLASHES; + 
> } + if (file_req) { + /* File subrequests can have a relative path. */ + 
> normalize_flags |= AP_NORMALIZE_ALLOW_RELATIVE; + } + + if 
> (r->parsed_uri.path) { + /* Normalize: remove /./ and shrink /../ 
> segments, plus + * decode unreserved chars (first time only to avoid + * 
> double decoding after ap_unescape_url() below). + */ + if 
> (!ap_normalize_path(r->parsed_uri.path, + normalize_flags | + 
> AP_NORMALIZE_DECODE_UNRESERVED)) { + ap_log_rerror(APLOG_MARK, 
> APLOG_ERR, 0, r, APLOGNO(10244) + ""invalid URI path (%s)"", 
> r->unparsed_uri); + return HTTP_BAD_REQUEST; + } + } + + /* All file 
> subrequests are a huge pain... they cannot bubble through the + * next 
> several steps. Only file subrequests are allowed an empty uri, + * 
> otherwise let (pre_)translate_name kill the request. + */ + if 
> (!file_req) { + ap_conf_vector_t *per_dir_config = r->per_dir_config; + 
> + if ((access_status = walk_location_and_if(r))) { + return 
> access_status; + } + + /* Let pre_translate_name hooks work with 
> non-decoded URIs, and + * eventually prevent further URI transformations 
> (return DONE). + */ + access_status = ap_run_pre_translate_name(r); + if 
> (ap_is_HTTP_ERROR(access_status)) { + return access_status; + } + + /* 
> Throw away pre_trans only merging */ + r->per_dir_config = 
> per_dir_config; + } + + /* Ignore URL unescaping for translated URIs 
> already */ + if (access_status != DONE && r->parsed_uri.path) { + 
> core_dir_config *d = ap_get_core_module_config(r->per_dir_config); + if 
> (d->allow_encoded_slashes) { - access_status = 
> ap_unescape_url_keep2f(r->parsed_uri.path, d->decode_encoded_slashes); + 
> access_status = ap_unescape_url_keep2f(r->parsed_uri.path, + 
> d->decode_encoded_slashes); } else { access_status = 
> ap_unescape_url(r->parsed_uri.path); @@ -183,40 +254,27 @@ 
> AP_DECLARE(int) ap_process_request_internal(reques if (access_status == 
> HTTP_NOT_FOUND) { if (! d->allow_encoded_slashes) { 
> ap_log_rerror(APLOG_MARK, APLOG_INFO, 0, r, APLOGNO(00026) - ""found %%2f 
> (encoded '/') in URI "" - ""(decoded='%s'), returning 404"", - 
> r->parsed_uri.path); + ""found %%2f (encoded '/') in URI path (%s), "" + 
> ""returning 404"", r->unparsed_uri); } } return access_status; } - } - 
> ap_getparents(r->uri); /* OK --- shrinking transformations... */ - if 
> (sconf->merge_slashes != AP_CORE_CONFIG_OFF) { - ap_no2slash(r->uri); - 
> if (r->parsed_uri.path) { - ap_no2slash(r->parsed_uri.path); + if 
> (d->allow_encoded_slashes && d->decode_encoded_slashes) { + /* Decoding 
> slashes might have created new // or /./ or /../ + * segments (e.g. 
> ""/.%2F/""), so re-normalize. + */ + ap_normalize_path(r->parsed_uri.path, 
> normalize_flags); } - } + } - /* All file subrequests are a huge pain... 
> they cannot bubble through the - * next several steps. Only file 
> subrequests are allowed an empty uri, - * otherwise let translate_name 
> kill the request. - */ + /* Same, translate_name is not suited for file 
> subrequests */ if (!file_req) { - if ((access_status = 
> ap_location_walk(r))) { + if ((access_status = walk_location_and_if(r))) 
> { return access_status; } - if ((access_status = ap_if_walk(r))) { - 
> return access_status; - } - d = 
> ap_get_core_module_config(r->per_dir_config); - if (d->log) { - r->log = 
> d->log; - } - if ((access_status = ap_run_translate_name(r))) { return 
> decl_die(access_status, ""translate"", r); } @@ -233,18 +291,10 @@ 
> AP_DECLARE(int) ap_process_request_internal(reques /* Rerun the location 
> walk, which overrides any map_to_storage config. */ - if ((access_status 
> = ap_location_walk(r))) { + if ((access_status = 
> walk_location_and_if(r))) { return access_status; } - if ((access_status 
> = ap_if_walk(r))) { - return access_status; - } - d = 
> ap_get_core_module_config(r->per_dir_config); - if (d->log) { - r->log = 
> d->log; - } - if ((access_status = ap_run_post_perdir_config(r))) { 
> return access_status; } @@ -1370,7 +1420,7 @@ AP_DECLARE(int) 
> ap_directory_walk(request_rec *r) r->canonical_filename = r->filename; 
> if (r->finfo.filetype == APR_DIR) { - cache->cached = r->filename; + 
> cache->cached = apr_pstrdup(r->pool, r->filename); } else { 
> cache->cached = ap_make_dirstr_parent(r->pool, r->filename); @@ -1467,7 
> +1517,7 @@ AP_DECLARE(int) ap_location_walk(request_rec *r) apr_pool_t 
> *rxpool = NULL; cached &= auth_internal_per_conf; - cache->cached = 
> entry_uri; + cache->cached = apr_pstrdup(r->pool, entry_uri); /* Go 
> through the location entries, and check for matches. * We apply the 
> directive sections in given order, we should Index: server/util.c 
> =================================================================== --- 
> server/util.c (revision 1890572) +++ server/util.c (working copy) @@ 
> -76,7 +76,7 @@ #include ""test_char.h"" /* Win32/NetWare/OS2 need to check 
> for both forward and back slashes - * in ap_getparents() and 
> ap_escape_url. + * in ap_normalize_path() and ap_escape_url(). */ #ifdef 
> CASE_BLIND_FILESYSTEM #define IS_SLASH(s) ((s == '/') || (s == '\\')) @@ 
> -491,75 +491,127 @@ AP_DECLARE(apr_status_t) ap_pregsub_ex(apr_pool_t 
> return rc; } +/* Forward declare */ +static char x2c(const char *what); 
> + +#define IS_SLASH_OR_NUL(s) (s == '\0' || IS_SLASH(s)) + /* - * Parse 
> .. so we don't compromise security + * Inspired by mod_jk's 
> jk_servlet_normalize(). */ -AP_DECLARE(void) ap_getparents(char *name) 
> +AP_DECLARE(int) ap_normalize_path(char *path, unsigned int flags) { - 
> char *next; - int l, w, first_dot; + int ret = 1; + apr_size_t l = 1, w 
> = 1; - /* Four paseses, as per RFC 1808 */ - /* a) remove ./ path 
> segments */ - for (next = name; *next && (*next != '.'); next++) { - } + 
> if (!IS_SLASH(path[0])) { + /* Besides ""OPTIONS *"", a request-target 
> should start with '/' + * per RFC 7230 section 5.3, so anything else is 
> invalid. + */ + if (path[0] == '*' && path[1] == '\0') { + return 1; + } 
> + /* However, AP_NORMALIZE_ALLOW_RELATIVE can be used to bypass + * this 
> restriction (e.g. for subrequest file lookups). + */ + if (!(flags & 
> AP_NORMALIZE_ALLOW_RELATIVE) || path[0] == '\0') { + return 0; + } - l = 
> w = first_dot = next - name; - while (name[l] != '\0') { - if (name[l] 
> == '.' && IS_SLASH(name[l + 1]) - && (l == 0 || IS_SLASH(name[l - 1]))) 
> - l += 2; - else - name[w++] = name[l++]; + l = w = 0; } - /* b) remove 
> trailing . path, segment */ - if (w == 1 && name[0] == '.') - w--; - 
> else if (w > 1 && name[w - 1] == '.' && IS_SLASH(name[w - 2])) - w--; - 
> name[w] = '\0'; + while (path[l] != '\0') { + /* RFC-3986 section 2.3: + 
> * For consistency, percent-encoded octets in the ranges of + * ALPHA 
> (%41-%5A and %61-%7A), DIGIT (%30-%39), hyphen (%2D), + * period (%2E), 
> underscore (%5F), or tilde (%7E) should [...] + * be decoded to their 
> corresponding unreserved characters by + * URI normalizers. + */ + if 
> ((flags & AP_NORMALIZE_DECODE_UNRESERVED) + && path[l] == '%' && 
> apr_isxdigit(path[l + 1]) + && apr_isxdigit(path[l + 2])) { + const char 
> c = x2c(&path[l + 1]); + if (apr_isalnum(c) || (c && strchr(""-._~"", c))) 
> { + /* Replace last char and fall through as the current + * read 
> position */ + l += 2; + path[l] = c; + } + } - /* c) remove all xx/../ 
> segments. (including leading ../ and /../) */ - l = first_dot; + if 
> ((flags & AP_NORMALIZE_DROP_PARAMETERS) && path[l] == ';') { + do { + 
> l++; + } while (!IS_SLASH_OR_NUL(path[l])); + continue; + } - while 
> (name[l] != '\0') { - if (name[l] == '.' && name[l + 1] == '.' && 
> IS_SLASH(name[l + 2]) - && (l == 0 || IS_SLASH(name[l - 1]))) { - int m 
> = l + 3, n; + if (w == 0 || IS_SLASH(path[w - 1])) { + /* Collapse ///// 
> sequences to / */ + if ((flags & AP_NORMALIZE_MERGE_SLASHES) && 
> IS_SLASH(path[l])) { + do { + l++; + } while (IS_SLASH(path[l])); + 
> continue; + } - l = l - 2; - if (l >= 0) { - while (l >= 0 && 
> !IS_SLASH(name[l])) - l--; - l++; + if (path[l] == '.') { + /* Remove 
> /./ segments */ + if (IS_SLASH_OR_NUL(path[l + 1])) { + l++; + if 
> (path[l]) { + l++; + } + continue; + } + + /* Remove /xx/../ segments */ 
> + if (path[l + 1] == '.' && IS_SLASH_OR_NUL(path[l + 2])) { + /* Wind w 
> back to remove the previous segment */ + if (w > 1) { + do { + w--; + } 
> while (w && !IS_SLASH(path[w - 1])); + } + else { + /* Already at root, 
> ignore and return a failure + * if asked to. + */ + if (flags & 
> AP_NORMALIZE_NOT_ABOVE_ROOT) { + ret = 0; + } + } + + /* Move l forward 
> to the next segment */ + l += 2; + if (path[l]) { + l++; + } + continue; 
> + } } - else - l = 0; - n = l; - while ((name[n] = name[m])) - (++n, 
> ++m); } - else - ++l; + + path[w++] = path[l++]; } + path[w] = '\0'; - 
> /* d) remove trailing xx/.. segment. */ - if (l == 2 && name[0] == '.' 
> && name[1] == '.') + return ret; +} + +/* + * Parse .. so we don't 
> compromise security + */ +AP_DECLARE(void) ap_getparents(char *name) +{ 
> + if (!ap_normalize_path(name, AP_NORMALIZE_NOT_ABOVE_ROOT | + 
> AP_NORMALIZE_ALLOW_RELATIVE)) { name[0] = '\0'; - else if (l > 2 && 
> name[l - 1] == '.' && name[l - 2] == '.' - && IS_SLASH(name[l - 3])) { - 
> l = l - 4; - if (l >= 0) { - while (l >= 0 && !IS_SLASH(name[l])) - l--; 
> - l++; - } - else - l = 0; - name[l] = '\0'; } } + AP_DECLARE(void) 
> ap_no2slash_ex(char *name, int is_fs_path) { Index: . 
> =================================================================== --- 
> . (revision 1890572) +++ . (working copy) Property changes on: . 
> ___________________________________________________________________ 
> Modified: svn:mergeinfo ## -0,0 +0,1 ## Merged 
> /httpd/httpd/trunk:r1879074-1879080,1879094-1879095,1879110-1879112,1879114,1879116-1879117,1879137,1879144-1879145,1879147,1879149,1879235,1879360 
> |
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub 
> <https://github.com/apache/httpd/pull/193#issuecomment-856137707>, or 
> unsubscribe 
> <https://github.com/notifications/unsubscribe-auth/AACNKB2ZZSZHGVTTPC4RJYDTRUA23ANCNFSM46HENSFQ>.
> 


-- 
Cheers

Jean-Frederic
","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/856467068"", ""author_association"": ""CONTRIBUTOR""}"
193,IssueCommentSupplement,2021-06-09 09:50:46,jfclere,fork_close,started https://github.com/apache/httpd/pull/194 to replace it.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/857554933"", ""author_association"": ""CONTRIBUTOR""}"
193,ClosePR,2021-06-09 09:50:46,jfclere,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4863918554"", ""commit_url"": null}"
194,SubmitCommit,2021-06-08 09:29:17,jfclere,fork_close,back port r1879074,"{""sha"": ""e795efc845140cc312892d6a623f6963504ef608"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T09:29:17Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T09:29:17Z""}}"
194,SubmitCommit,2021-06-08 09:42:01,jfclere,fork_close,back port 1879075 and r1879076.,"{""sha"": ""707ec018419ddbb492848205a7edb04d244abb42"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T09:42:01Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T09:42:01Z""}}"
194,SubmitCommit,2021-06-08 09:57:06,jfclere,fork_close,back port r1879077.,"{""sha"": ""0996f8f42a3071dc0037e9b7bdff26d5c2538db6"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T09:57:06Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T09:57:06Z""}}"
194,SubmitCommit,2021-06-08 11:26:50,jfclere,fork_close,"Add:
    r1879079
    r1879080
    r1879094
    r1879095
    r1879110
    r1879111
    r1879112
    r1879114
to the back port.","{""sha"": ""4b9dfb992cd54ed9aeeaa95a753e722577927c66"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T11:26:50Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T11:26:50Z""}}"
194,SubmitCommit,2021-06-08 12:18:33,jfclere,fork_close,back port r1879116,"{""sha"": ""dff655a304249d0dbdc9c5db2aeb6d80cfdb0733"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T12:18:33Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T12:18:33Z""}}"
194,SubmitCommit,2021-06-08 15:57:25,jfclere,fork_close,"back port:
    r1879117
    r1879137
    r1879144
    r1879145.","{""sha"": ""f06ba0f1c3f76c6d2057f3009d94b3f6f634bc4a"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T15:57:25Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T15:57:25Z""}}"
194,SubmitCommit,2021-06-08 16:11:41,jfclere,fork_close,"Add:
    r1879147
    r1879149
    r1879235
    r1879360","{""sha"": ""1ae07ee159682b504c29833e70b8996c15780613"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T16:11:41Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-08T16:11:41Z""}}"
194,OpenPR,2021-06-08 16:27:29,jfclere,fork_close,,
194,ReviewComment,2021-06-08 17:00:37,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/194#pullrequestreview-678773596""}"
194,ReviewComment,2021-06-08 17:05:04,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/194#pullrequestreview-678777634""}"
194,Revise,2021-06-09 09:33:51,jfclere,fork_close,Adjust the r->connection->log that doesn't belong to 2.4.x,"{""sha"": ""3a67f7acfd15961332f4541f8ab3dfbfed177fca"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-09T09:33:51Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2021-06-09T09:33:51Z""}}"
194,CrossReferenced,2021-06-09 09:50:46,jfclere,fork_close,back port the mapping=servlet to 2.4.x,"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/193"", ""is_pull_request"": true}}"
194,ReviewApproved,2021-07-22 18:24:04,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/194#pullrequestreview-713107562""}"
194,IssueComment,2021-08-20 13:26:14,ylavic,fork_close,Merged to 2.4.x in https://github.com/apache/httpd/commit/6a5d3e006b8dc8aca1a267a8607864e1c3607f61 (r1892161),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/902692066"", ""author_association"": ""MEMBER""}"
194,IssueCommentSupplement,2021-12-16 11:34:36,ylavic,fork_close,Merged,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/995709987"", ""author_association"": ""MEMBER""}"
194,ClosePR,2021-12-16 11:34:36,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5777717407"", ""commit_url"": null}"
195,SubmitCommit,2021-06-01 14:21:48,Stefan Eissing,fork_close,"  * core/mod_proxy/mod_ssl:
    Adding `outgoing` flag to conn_rec, indicating a connection is
    initiated by the server to somewhere, in contrast to incoming
    connections from clients.
    Adding 'ap_ssl_bind_outgoing()` function that marks a connection
    as outgoing and is used by mod_proxy instead of the previous
    optional function `ssl_engine_set`. This enables other SSL
    module to secure proxy connections.
    The optional functions `ssl_engine_set`, `ssl_engine_disable` and
    `ssl_proxy_enable` are now provided by the core to have backward
    compatibility with non-httpd modules that might use them. mod_ssl
    itself no longer registers these functions, but keeps them in its
    header for backward compatibility.
    The core provided optional function wrap any registered function
    like it was done for `ssl_is_ssl`.","{""sha"": ""867fa126f21575f104a1717ac49eaf1d8a558d77"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-01T14:21:48Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-01T14:21:48Z""}}"
195,SubmitCommit,2021-06-01 14:27:30,Stefan Eissing,fork_close,* remove unnecessary explicit setting of c->outgoing,"{""sha"": ""f406ef04dc92c80fd56c63ffdd1c16166cf3a17f"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-01T14:27:30Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-01T14:27:30Z""}}"
195,SubmitCommit,2021-06-02 13:00:01,Stefan Eissing,fork_close,"Improved implementation of ssl/proxy interworking after tests with more than 1 module:
 * Change the `ssl_outgoing` hook to be a RUN_FIRST on the first OK
 * Documented the return values of the functions more clearly
 * Fixed ap_ssl_bind_outgoing() to call any existing, old style OPTIONAL
   functions. They are asked to engage if no hook returned OK or
   are asked to disable if there was.
 * Fixed mod_ssl to disable on default for outgoing connections.
   So, unless its hook takes over, it does not activate.","{""sha"": ""84607628244601a2e6322c81fe4158b4299665c7"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-02T13:00:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-02T13:00:01Z""}}"
195,SubmitCommit,2021-06-04 10:27:32,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/ssl_proxy,"{""sha"": ""1fe47af8e91bcdeb4beb67128cd80dac1fdd8224"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T10:27:32Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T10:27:32Z""}}"
195,SubmitCommit,2021-06-04 10:57:55,Stefan Eissing,fork_close, * Several fixes after review by rpluem.,"{""sha"": ""df612e3df58fed939f40f0e0674a5f5027c14fe0"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T10:57:55Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T10:57:55Z""}}"
195,SubmitCommit,2021-06-04 13:47:29,Stefan Eissing,fork_close,propert formatting of change entry.,"{""sha"": ""68078aa3e70ae0cc1eb95bbba3512db51505b306"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T13:47:29Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T13:47:29Z""}}"
195,SubmitCommit,2021-06-04 13:54:49,Stefan Eissing,fork_close,removing approved comment about a paramter rename.,"{""sha"": ""e0a6e0ab3adb320aa10d8e7c52185675b7f81277"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T13:54:49Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T13:54:49Z""}}"
195,SubmitCommit,2021-06-04 14:51:19,Stefan Eissing,fork_close," * remove assert() on init_connectin_ctx() only be called with dir_conf on outgoing
   connections as ylavic correctly notes, this may happen on Upgrades as well.","{""sha"": ""7c0aeef267d44b2cc8e7b3d374915ae88e3fafff"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T14:51:19Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T14:51:19Z""}}"
195,SubmitCommit,2021-06-04 15:08:23,Stefan Eissing,fork_close, * rename hook `ssl_outoing` to `ssl_bind_outgoing` as suggest by ylavic.,"{""sha"": ""54ae61bd037e451043e7ac672bb00a20634ef135"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T15:08:23Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-04T15:08:23Z""}}"
195,SubmitCommit,2021-06-09 08:42:57,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/ssl_proxy,"{""sha"": ""d28c8e7ceb5f610f90a366b17335a64e684d56fa"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-09T08:42:57Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-09T08:42:57Z""}}"
195,SubmitCommit,2021-06-10 14:43:21,Stefan Eissing,fork_close,"  *) mod_ssl: tighten the handling of ALPN for outgoing (proxy)
     connections. If ALPN protocols are provided and sent to the
     remote server, the received protocol selected is inspected
     and checked for a match. Without match, the peer handshake
     fails.
     An exception is the proposal of ""http/1.1"" where it is
     accepted if the remote server did not answer ALPN with
     a selected protocol. This accomodates for hosts that do
     not observe/support ALPN and speak http/1.x be default.","{""sha"": ""fea199e5f8aba405a75d6406da9c5b40a603108b"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-10T14:43:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-10T14:43:21Z""}}"
195,SubmitCommit,2021-06-10 14:45:31,Stefan Eissing,fork_close,fixed typo in comment. [skip ci],"{""sha"": ""85eb238b7f32f101928a84b62b58a15a0193faf5"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-10T14:45:31Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-10T14:45:31Z""}}"
195,OpenPR,2021-06-10 14:46:46,icing,fork_close,,
195,ReviewApproved,2021-06-11 08:51:46,bigio,fork_close,Minor spell fix,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/apache/httpd/pull/195#pullrequestreview-681600947""}"
195,Revise,2021-06-11 09:33:14,Stefan Eissing,fork_close, * fixed typo detected by @bigio.,"{""sha"": ""8291e82a2c15fa94f89bbf039e616148912e0907"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-11T09:33:14Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-11T09:33:14Z""}}"
195,IssueCommentSupplement,2021-06-11 10:45:49,icing,fork_close,Merged in r1890693. Thanks!,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/859492646"", ""author_association"": ""CONTRIBUTOR""}"
195,ClosePR,2021-06-11 10:45:49,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4877228427"", ""commit_url"": null}"
195,DeleteBranch,2021-06-11 10:49:29,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4877244681"", ""commit_url"": null}"
197,OpenPR,2021-06-25 14:05:32,notroj,fork_close,,
197,Revise,2021-06-29 07:39:29,notroj,fork_close,"* modules/ssl/ssl_engine_init.c (ssl_init_server_certs): Fix use of
  encrypted private keys with OpenSSL 3.0.

* test/travis_run_linux.sh: For TEST_SSL, test loading encrypted
  private keys.","{""sha"": ""ecdbaaf64de079f897863196b316d7fba8a6e236"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-06-25T14:04:13Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-06-29T07:39:29Z""}}"
197,IssueCommentSupplement,2021-06-29 11:26:03,notroj,fork_close,Fixed in 1fa837533c3850b19e4544b3eb931f37d64dcf85.  See also https://github.com/openssl/openssl/issues/15946,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/870511701"", ""author_association"": ""COLLABORATOR""}"
197,ClosePR,2021-06-29 11:26:03,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4952905104"", ""commit_url"": null}"
197,DeleteBranch,2021-06-29 11:26:07,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4952905470"", ""commit_url"": null}"
198,OpenPR,2021-06-28 14:41:35,ylavic,fork_close,,
198,RenameTitle,2021-07-22 16:34:06,ylavic,fork_close,,"{""rename"": {""from"": ""mpm_event: late(r) children stop on restart."", ""to"": ""mpm event/worker/prefork: late(r) children stop on restart.""}, ""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5056752955""}"
198,IssueComment,2021-07-22 16:47:26,ylavic,fork_close,"Extended to all unix MPMs (event, worker and prefork).","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/885060272"", ""author_association"": ""MEMBER""}"
198,Revise,2021-08-20 12:22:35,ylavic,fork_close,"mpm_{event,worker,prefork}: late(r) children stop on restart.","{""sha"": ""33fafd17276b9e6ff6bbaf01eb5c87b995acd69f"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-06-28T14:39:32Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-08-20T12:22:35Z""}}"
198,IssueCommentSupplement,2021-08-24 22:24:26,ylavic,fork_close,Committed to trunk (https://github.com/apache/httpd/commit/243c5fad0a8da9a1008681ac60f5b981de6c18d6),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/905017210"", ""author_association"": ""MEMBER""}"
198,ClosePR,2021-08-24 22:24:26,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5203308831"", ""commit_url"": null}"
199,SubmitCommit,2021-06-29 12:23:26,Stefan Eissing,fork_close,"Add child_stopping hook to core

  * core/mpm: add hook 'child_stopping` that gets called when the MPM is
    stopping a child process. The additional `graceful` parameter allows
    registered hooks to free resources early during a graceful shutdown.","{""sha"": ""2554a292e1f99856fe74b0d05f180d292c956a3e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-29T12:23:26Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-06-29T12:23:26Z""}}"
199,OpenPR,2021-06-29 12:24:30,icing,fork_close,,
199,IssueCommentSupplement,2021-08-10 09:18:04,icing,fork_close,has been merged into 2.4.x,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/895869173"", ""author_association"": ""CONTRIBUTOR""}"
199,ClosePR,2021-08-10 09:18:04,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5134351141"", ""commit_url"": null}"
199,DeleteBranch,2022-10-17 11:58:18,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601407509"", ""commit_url"": null}"
200,SubmitCommit,2021-06-29 14:37:44,ylavic,fork_close,Add Write Completion (WC) bucket to release retained/coalesced data without FLUSHing/blocking at the network level.,"{""sha"": ""a3ed3e03efdb43d32fe959157bc96533eaff730f"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-06-29T14:37:44Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-06-29T14:37:44Z""}}"
200,OpenPR,2021-06-29 14:39:32,ylavic,fork_close,,
200,ClosePR,2021-06-29 21:16:32,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4956110183"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/891c3237d4dff0b0ff7a7226d7a39bbeb59087c1""}"
200,DeleteBranch,2021-06-29 21:16:40,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/4956110653"", ""commit_url"": null}"
201,SubmitCommit,2021-07-02 14:12:28,notroj,fork_close,"Merge r1889957 from trunk: [excluding simple MPM changes]

* server/mpm/event/event.c,
  server/mpm/simple/simple_run.c,
  support/htcacheclean.c: Adjust use of APR_RING macros to
  ensure the APR_RING_HEAD is always embedded in a containing
  structure, to avoid warnings with GCC 11.  (apr_ring.h also
  suggests this is best practice)

See also: https://bugzilla.redhat.com/show_bug.cgi?id=1957353
          https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98503
          msgid <814cca2a-1992-3fae-bb0e-c84b3d09b73b@gmail.com>","{""sha"": ""9740cd60fa56246952854b0113b4978188d16531"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-05-17T11:56:32Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-02T14:12:28Z""}}"
201,OpenPR,2021-07-02 14:13:13,notroj,fork_close,,
201,IssueComment,2021-07-08 11:11:52,notroj,fork_close,Merged in 2cfafb4a3690ecd60c7d955e12429af0c9082af3,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/876350314"", ""author_association"": ""COLLABORATOR""}"
201,ClosePR,2021-07-12 14:37:57,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5007951989"", ""commit_url"": null}"
203,SubmitCommit,2021-07-06 12:08:32,Stefan Eissing,fork_close,"  *) core/mod_proxy/mod_ssl:
     Adding `outgoing` flag to conn_rec, indicating a connection is
     initiated by the server to somewhere, in contrast to incoming
     connections from clients.
     Adding 'ap_ssl_bind_outgoing()` function that marks a connection
     as outgoing and is used by mod_proxy instead of the previous
     optional function `ssl_engine_set`. This enables other SSL
     module to secure proxy connections.
     The optional functions `ssl_engine_set`, `ssl_engine_disable` and
     `ssl_proxy_enable` are now provided by the core to have backward
     compatibility with non-httpd modules that might use them. mod_ssl
     itself no longer registers these functions, but keeps them in its
     header for backward compatibility.
     The core provided optional function wrap any registered function
     like it was done for `ssl_is_ssl`.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1890605 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""365b4fcdc80d104608d1ce05d1944b26b89ffcf5"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-06-08T14:37:44Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-07-06T12:08:32Z""}}"
203,OpenPR,2021-07-06 12:10:39,icing,fork_close,,
203,ReviewRejected,2021-07-07 12:46:52,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/203#pullrequestreview-700947602""}"
203,Revise,2021-09-07 08:42:24,Stefan Eissing,fork_close,"Merge branch '2.4.x' into icing/ap_ssl_bind_outgoing
 * adjusted ap_mmn.h for changes in 2.4.x
 * clarified ssl_bind_outgoing hook documentation after review by rpluem","{""sha"": ""94e52c9def7d89ad91619b56fe1ef604900f8d93"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-07T08:42:24Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-07T08:42:24Z""}}"
203,Revise,2021-09-09 07:08:13,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/ap_ssl_bind_outgoing,"{""sha"": ""b9900edbd7d403a329abd1a1e0e873350dd4c8b7"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-09T07:08:13Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-09T07:08:13Z""}}"
203,Revise,2021-09-09 07:08:45,Stefan Eissing,fork_close,"  *core: clarify comments and use hook API better to check for presence of callbacks.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1893164 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3a817926084c1cc7d391238e4f20450e1c547d50"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-09T07:06:00Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-09T07:08:45Z""}}"
203,ReviewComment,2021-09-09 14:39:57,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/203#pullrequestreview-750444702""}"
203,Revise,2021-09-09 14:43:39,Stefan Eissing,fork_close," * optimizing hook check as suggested by Yann.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1893179 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a0d62644bff09189ae510a2c41643471577476a5"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-09T14:42:48Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-09T14:43:39Z""}}"
203,IssueCommentSupplement,2021-09-10 07:23:51,icing,fork_close,merged.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/916690968"", ""author_association"": ""CONTRIBUTOR""}"
203,ClosePR,2021-09-10 07:23:51,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5282815723"", ""commit_url"": null}"
203,DeleteBranch,2022-10-17 11:58:10,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601406569"", ""commit_url"": null}"
204,SubmitCommit,2021-07-06 12:18:54,Stefan Eissing,fork_close,"  *) mod_ssl: tighten the handling of ALPN for outgoing (proxy)
     connections. If ALPN protocols are provided and sent to the
     remote server, the received protocol selected is inspected
     and checked for a match. Without match, the peer handshake
     fails.
     An exception is the proposal of ""http/1.1"" where it is
     accepted if the remote server did not answer ALPN with
     a selected protocol. This accomodates for hosts that do
     not observe/support ALPN and speak http/1.x be default.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1890693 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4ab96425b5b45b5bbbc45692fabffe4499022b8d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-06-11T10:45:25Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-07-06T12:18:54Z""}}"
204,SubmitCommit,2021-07-06 12:20:21,Stefan Eissing,fork_close," * log-tags always win.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1890696 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3366d75c04d7ec0f793e098b42e3a2344acc8213"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-06-11T11:40:38Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-07-06T12:20:21Z""}}"
204,OpenPR,2021-07-06 12:28:51,icing,fork_close,,
204,ReviewComment,2021-07-07 13:00:49,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/204#pullrequestreview-700969555""}"
204,ClosePR,2022-10-17 11:59:17,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601415389"", ""commit_url"": null}"
204,DeleteBranch,2022-10-17 11:59:18,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601415453"", ""commit_url"": null}"
205,SubmitCommit,2021-07-08 11:14:46,notroj,fork_close,Try always building with -g in CFLAGS at minimum?,"{""sha"": ""6cf387cc0b1c1894ad9892ec4b510cc490de1b0c"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-08T11:14:46Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-08T11:14:46Z""}}"
205,OpenPR,2021-07-08 11:15:45,notroj,fork_close,,
205,IssueComment,2021-07-08 14:31:10,rpluem,fork_close,Why not doing this on trunk as well and only on 2.4.x?,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/876489490"", ""author_association"": ""CONTRIBUTOR""}"
205,IssueComment,2021-07-08 14:48:34,notroj,fork_close,"> Why not doing this on trunk as well and only on 2.4.x?

Only because the previous 2.4.x build failed so I got to test whether it still failed here.  (I'm sure we should get -g in CFLAGS automatically from autoconf, not sure why we are not)
","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/876503407"", ""author_association"": ""COLLABORATOR""}"
205,IssueComment,2021-07-09 19:55:03,rpluem,fork_close,"> 
> 
> > Why not doing this on trunk as well and only on 2.4.x?
> 
> Only because the previous 2.4.x build failed so I got to test whether it still failed here. (I'm sure we should get -g in CFLAGS automatically from autoconf, not sure why we are not)

Thanks for explaining. Makes sense. Hence you do not really want to merge this to 2.4.x yet, but only test how the tests go with `-g` set, correct?","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/877422172"", ""author_association"": ""CONTRIBUTOR""}"
205,ClosePR,2021-07-26 11:36:04,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5067839400"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/b805e7966d4fdf9c231fe8ef53271ae75a626109""}"
206,SubmitCommit,2021-07-09 11:32:50,tropikhajma,fork_close,"Fix http to https redirect

Fix http to https redirect when only TLSv1.2 is specified","{""sha"": ""46324ec6f981c5606097057237e513e9316958ab"", ""author"": {""name"": ""Pavel Heimlich"", ""email"": ""tropikhajma@gmail.com"", ""date"": ""2021-07-09T11:32:50Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2021-07-09T11:32:50Z""}}"
206,OpenPR,2021-07-09 12:41:51,tropikhajma,fork_close,,
206,IssueComment,2021-09-01 11:56:05,tropikhajma,fork_close,closing to reopen to trigger a new build and tests,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/910212101"", ""author_association"": ""NONE""}"
206,ClosePR,2021-09-01 11:56:05,tropikhajma,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5239037837"", ""commit_url"": null}"
206,IssueComment,2021-09-01 11:56:23,tropikhajma,fork_close,reopening to trigger rebuild and retest,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/910212337"", ""author_association"": ""NONE""}"
206,ReopenPR,2021-09-01 11:56:24,tropikhajma,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5239039391"", ""commit_url"": null}"
206,IssueCommentSupplement,2021-10-15 15:14:01,tropikhajma,fork_close,This would better be fixed in OpenSSL.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/944382396"", ""author_association"": ""NONE""}"
206,ClosePR,2021-10-15 15:14:02,tropikhajma,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5470462039"", ""commit_url"": null}"
208,SubmitCommit,2021-07-14 21:27:16,ylavic,fork_close,mpm_event: fix queues' maintenance and linger timeouts on graceful restart/stop.,"{""sha"": ""32cc611989313f0ea0d46a5e63b9cdf33b1f67e6"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:27:16Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:27:16Z""}}"
208,SubmitCommit,2021-07-14 21:44:41,ylavic,fork_close,mpm_event: handle lingering close fully in process_lingering_close().,"{""sha"": ""5b3fb40c849c443978cfcee10d43e36a3510bf89"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:39:14Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:44:41Z""}}"
208,SubmitCommit,2021-07-14 21:44:41,ylavic,fork_close,mpm_event: use apr_atomic_read32() to read queues' ->total instead of volatile access.,"{""sha"": ""1f81bc844dfdbdcbc26280ed13c2a7590a8ede88"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:41:10Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:44:41Z""}}"
208,SubmitCommit,2021-07-14 21:44:41,ylavic,fork_close,mpm_event: better comments and variables' names (no functional change).,"{""sha"": ""fc3b336551fa11579c0b8ea63d4e39076ad8c38c"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:43:33Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:44:41Z""}}"
208,SubmitCommit,2021-07-14 21:44:41,ylavic,fork_close,core: don't close the socket when failing in ap_start_lingering_close().,"{""sha"": ""bcb655e858f7e7b6c960fce83b34b855a4f911fc"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:31:36Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:44:41Z""}}"
208,SubmitCommit,2021-07-14 21:44:41,ylavic,fork_close,mpm_fdqueue: do nothing and return EOF for ap_queue_interrupt_*() while terminated already.,"{""sha"": ""00072cc442e56be9bca72e3923ec95d4acdd8a3d"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:30:05Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-14T21:44:41Z""}}"
208,OpenPR,2021-07-14 21:46:34,ylavic,fork_close,,
208,ReviewComment,2021-07-16 09:48:00,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/208#pullrequestreview-708108879""}"
208,ClosePR,2021-07-22 15:48:11,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5056521900"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/cb17448b566ce7b806ac65f3554d4ed4380ade69""}"
208,IssueCommentSupplement,2021-07-23 11:03:58,ylavic,fork_close,Backport proposal in #256,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/885563352"", ""author_association"": ""MEMBER""}"
208,DeleteBranch,2021-08-20 14:06:10,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5187030060"", ""commit_url"": null}"
256,SubmitCommit,2021-07-23 10:33:17,ylavic,fork_close,"mpm_event: Fix queues' maintenance and linger timeouts on graceful restart/stop

* server/mpm/event/event.c (abort_socket_nonblocking): Renamed to
  close_socket_nonblocking_() with close_socket_nonblocking() as a macro to
  APLOG_TRACE8 the caller __FUNCTION__ and __LINE__. Do nothing if the socket
  is closed already, e.g. from close_worker_sockets().

* server/mpm/event/event.c (close_worker_sockets): Let defer_linger_chain be
  cleaned by the terminating workers.

* server/mpm/event/event.c (wakeup_listener): Add a trace8 of the call.

* server/mpm/event/event.c (decrement_connection_count): Add a trace8 of the
  call, decrement lingering_count from CONN_STATE_LINGER too which may happen
  from start_lingering_close_blocking() on ap_start_lingering_close() failure,
  and when dying call ap_queue_interrupt_one() from there instead of
  close_connection() so that we don't miss a worker_thread_should_exit_early()
  case.

* server/mpm/event/event.c (start_lingering_close_blocking): Don't increment
  lingering_count when it's already done by defer_lingering_close() (i.e.
  cs->deferred_linger is set), set socket timeout to 2s (SECONDS_TO_LINGER)
  before pre_close hooks and then after let socket timeout handling to
  process_lingering_close().

* server/mpm/event/event.c (start_lingering_close_nonblocking): Rename to
  defer_lingering_close(), add trace6 of the call, set CONN_STATE_LINGER so
  that the connection is accounted for until handled by a worker, and let
  start_lingering_close_blocking() know by setting cs->deferred_linger.

* server/mpm/event/event.c (stop_lingering_close): Rename to close_connection()
  and log the call at trace6 level instead of trace4 (for consistency), and use
  it everywhere apr_socket_close()+ap_queue_info_push_pool() is open coded.

* server/mpm/event/event.c (shutdown_connection): This helper can be called
  anywhere where nonblocking is required to either initiate short lingering
  close or directly close if the connection is lingering already. It's used
  as a generic process_timeout_queue() callback to terminate expired entries
  in any state.

* server/mpm/event/event.c (update_reqevents_from_sense): Allow to specify the
  sense as argument where -1 means cs->pub.state as before, and call it from
  everywhere before adding to the pollset such that APR_POLL* events are set
  fully/appropritely regardless of the underlying pollset implementation.

* server/mpm/event/event.c (process_socket): Gracefuly stop the process on
  pollset errors, and don't forcibly close the connection if listener_may_exit
  when ap_run_input_pending() determines that the next request is already here.

* server/mpm/event/event.c (close_listeners): Add trace6 of the call, and
  return whether it's the first close or not.

* server/mpm/event/event.c (push2worker): Call shutdown_connection() on failure
  when cs is available so that pre_close hooks (h2 flush, ssl close notify) are
  still called.

* server/mpm/event/event.c (process_lingering_close): Add trace6 of the call,
  always set timeout to zero (hence nonblocking) before reading pending data,
  and terminate the process gracefuly on pollset errors.

* server/mpm/event/event.c (listener_thread): Add some trace7 messages around
  poll()ing for debug, round poll()ing timeout to the upper millisecond to work
  around the rounding down done by some pollset implementations, and on the
  first call to close_listeners() when listener_may_exit->dying let's force the
  maintenance of the queues to kill keep alive connections and apply shorter
  lingering close timeout to free worker threads faster for the next generation.

* server/mpm/event/event.c (join_workers): Rewrite the !dying loop to avoid
  ""listener has not stopped accepting yet"" if sleeping 500ms once did it.

Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891716 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit b22f02e388ebae6d129ff3e5af3fa4d4e7cb6fa1)","{""sha"": ""b2cd3df89afc2fbe7c946d8736f35beac36074bb"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T14:48:50Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:33:17Z""}}"
256,SubmitCommit,2021-07-23 10:35:36,ylavic,fork_close,"mpm_event: handle lingering close fully in process_lingering_close().

* server/mpm/event/event.c (start_lingering_close_blocking): Axe the function
  and put the code directly in process_lingering_close() on the first call when
  cs->pub.state == CONN_STATE_LINGER, this simplifies lingering close handling
  from process_socket() and event_resume_suspended().

No functional changes.

Follow up to r1891716.
Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891717 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 2b4d2daa8de64c328ab68bda5cd3f336eebb283e)","{""sha"": ""9c915086f9782e92b6c4d6406fdfc839b2c81b3a"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T14:59:57Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:35:36Z""}}"
256,SubmitCommit,2021-07-23 10:36:40,ylavic,fork_close,"mpm_event: use apr_atomic_read32() to read queues' ->total instead of volatile access.

* server/mpm/event/event.c (listener_thread): Use apr_atomic_read32() instead
  open coded *(volatile apr_uint32_t*)q->total.

No functional change.

Follow up to r1891716.
Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891718 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 4ca50b49355e5db5b121b7abb724158119ae9097)","{""sha"": ""81c1c1a3264233a4d0b8ff72af7828b5355c59fd"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T15:04:26Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:36:40Z""}}"
256,SubmitCommit,2021-07-23 10:38:57,ylavic,fork_close,"mpm_event: better comments and variables' names.

No functional change.

Follow up to r1891716.
Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891719 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit d6220affccac4554b6f890b86786884be9a59ce0)","{""sha"": ""a8f37ddd44fa8b6266088054aac101efb1995e77"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T15:14:42Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:38:57Z""}}"
256,SubmitCommit,2021-07-23 10:40:01,ylavic,fork_close,"core: don't close the socket when failing in ap_start_lingering_close().

* server/connection.c (ap_start_lingering_close): Don't apr_socket_close().

* server/connection.c (ap_lingering_close): Do apr_socket_close() on
  ap_start_lingering_close() failure.

On failure ap_start_lingering_close() did not consistently close the socket,
so the caller had to call apr_socket_close() too with possible/unreliable
EBADF.  The only upstream callers of ap_start_lingering_close() are MPM event
and ap_start_lingering_close(), but any third-party user has this issue so the
change should't break anyone.

Follow up to r1891716.
Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891721 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 70d7c7b009c1bbdcd046c1620118f580b6886c5c)","{""sha"": ""0cbd5549e3e9a5476df79c46c10629df8ba30456"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T15:33:19Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:40:01Z""}}"
256,SubmitCommit,2021-07-23 10:40:01,ylavic,fork_close,"mpm_fdqueue: return EOF for ap_queue_interrupt_*() when terminated.

* server/mpm_fdqueue.c (queue_interrupt): noop and return APR_EOF when queue is
  terminated already.

* server/mpm_fdqueue.h (struct fd_queue_t): make ""terminated"" volatile.

Follow up to r1891716.
Github: closes #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891724 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit cb17448b566ce7b806ac65f3554d4ed4380ade69)","{""sha"": ""0abd28e21f979494c44f2720af93e794aff4b417"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T15:48:03Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:40:01Z""}}"
256,SubmitCommit,2021-07-23 10:40:02,ylavic,fork_close,"mpm_event: clear APR_INCOMPLETE_READ on lingering close.

* server/mpm/event/event.c (process_lingering_close): APR_INCOMPLETE_READ may
  have been set anytime while processing the connection, clear it before
  nonblocking apr_socket_recv() to prevent internal apr_poll().

Follow up to r1891716.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891726 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 2515db492e98bca96b2510c1fb792ba47b65e1f0)","{""sha"": ""153b72ded68597b78e9ddd8ff7c7735225df926e"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T16:01:43Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:40:02Z""}}"
256,SubmitCommit,2021-07-23 10:40:03,ylavic,fork_close,"mpm_event: avoid possible timer off by 250 ms.

* server/mpm/event/event.c (listener_thread): EVENT_FUDGE_FACTOR is used to
  limit wakeups but still expiring timers should be compared with the real
  apr_time_now().

Similar to r1874277 for TIMEOUT_FUDGE_FACTOR.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891727 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 2a7de1e2a37464d166c1c8c5c41d7c4e49181c8c)","{""sha"": ""61a4189abd1bce6a1db4caa13189e4de89604e66"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T16:10:02Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:40:03Z""}}"
256,OpenPR,2021-07-23 10:51:33,ylavic,fork_close,,
256,CrossReferenced,2021-07-23 11:03:58,ylavic,fork_close,Event child graceful stop,"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/208"", ""is_pull_request"": true}}"
256,Revise,2021-07-23 22:10:55,ylavic,fork_close,"Follow up to r1891716: CHANGES entry.  [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891728 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 67c17882e17c0fb9fe333078a64ccd32a5b46b9d)","{""sha"": ""fde9e843d9ae1dda70075074e5316bf5332ff19f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T17:18:00Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T22:10:55Z""}}"
256,CrossReferenced,2021-07-23 22:15:58,ylavic,fork_close,mpm_event: r1891716 and co (graceful stop),"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/257"", ""is_pull_request"": true}}"
256,IssueCommentSupplement,2021-07-23 22:18:37,ylavic,fork_close,closed by #257 ,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/885941363"", ""author_association"": ""MEMBER""}"
256,ClosePR,2021-07-23 22:18:37,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5063317659"", ""commit_url"": null}"
256,DeleteBranch,2021-08-20 12:12:27,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5186484690"", ""commit_url"": null}"
257,SubmitCommit,2021-07-23 10:33:17,ylavic,fork_close,"mpm_event: Fix queues' maintenance and linger timeouts on graceful restart/stop

* server/mpm/event/event.c (abort_socket_nonblocking): Renamed to
  close_socket_nonblocking_() with close_socket_nonblocking() as a macro to
  APLOG_TRACE8 the caller __FUNCTION__ and __LINE__. Do nothing if the socket
  is closed already, e.g. from close_worker_sockets().

* server/mpm/event/event.c (close_worker_sockets): Let defer_linger_chain be
  cleaned by the terminating workers.

* server/mpm/event/event.c (wakeup_listener): Add a trace8 of the call.

* server/mpm/event/event.c (decrement_connection_count): Add a trace8 of the
  call, decrement lingering_count from CONN_STATE_LINGER too which may happen
  from start_lingering_close_blocking() on ap_start_lingering_close() failure,
  and when dying call ap_queue_interrupt_one() from there instead of
  close_connection() so that we don't miss a worker_thread_should_exit_early()
  case.

* server/mpm/event/event.c (start_lingering_close_blocking): Don't increment
  lingering_count when it's already done by defer_lingering_close() (i.e.
  cs->deferred_linger is set), set socket timeout to 2s (SECONDS_TO_LINGER)
  before pre_close hooks and then after let socket timeout handling to
  process_lingering_close().

* server/mpm/event/event.c (start_lingering_close_nonblocking): Rename to
  defer_lingering_close(), add trace6 of the call, set CONN_STATE_LINGER so
  that the connection is accounted for until handled by a worker, and let
  start_lingering_close_blocking() know by setting cs->deferred_linger.

* server/mpm/event/event.c (stop_lingering_close): Rename to close_connection()
  and log the call at trace6 level instead of trace4 (for consistency), and use
  it everywhere apr_socket_close()+ap_queue_info_push_pool() is open coded.

* server/mpm/event/event.c (shutdown_connection): This helper can be called
  anywhere where nonblocking is required to either initiate short lingering
  close or directly close if the connection is lingering already. It's used
  as a generic process_timeout_queue() callback to terminate expired entries
  in any state.

* server/mpm/event/event.c (update_reqevents_from_sense): Allow to specify the
  sense as argument where -1 means cs->pub.state as before, and call it from
  everywhere before adding to the pollset such that APR_POLL* events are set
  fully/appropritely regardless of the underlying pollset implementation.

* server/mpm/event/event.c (process_socket): Gracefuly stop the process on
  pollset errors, and don't forcibly close the connection if listener_may_exit
  when ap_run_input_pending() determines that the next request is already here.

* server/mpm/event/event.c (close_listeners): Add trace6 of the call, and
  return whether it's the first close or not.

* server/mpm/event/event.c (push2worker): Call shutdown_connection() on failure
  when cs is available so that pre_close hooks (h2 flush, ssl close notify) are
  still called.

* server/mpm/event/event.c (process_lingering_close): Add trace6 of the call,
  always set timeout to zero (hence nonblocking) before reading pending data,
  and terminate the process gracefuly on pollset errors.

* server/mpm/event/event.c (listener_thread): Add some trace7 messages around
  poll()ing for debug, round poll()ing timeout to the upper millisecond to work
  around the rounding down done by some pollset implementations, and on the
  first call to close_listeners() when listener_may_exit->dying let's force the
  maintenance of the queues to kill keep alive connections and apply shorter
  lingering close timeout to free worker threads faster for the next generation.

* server/mpm/event/event.c (join_workers): Rewrite the !dying loop to avoid
  ""listener has not stopped accepting yet"" if sleeping 500ms once did it.

Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891716 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit b22f02e388ebae6d129ff3e5af3fa4d4e7cb6fa1)","{""sha"": ""b2cd3df89afc2fbe7c946d8736f35beac36074bb"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T14:48:50Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:33:17Z""}}"
257,SubmitCommit,2021-07-23 10:35:36,ylavic,fork_close,"mpm_event: handle lingering close fully in process_lingering_close().

* server/mpm/event/event.c (start_lingering_close_blocking): Axe the function
  and put the code directly in process_lingering_close() on the first call when
  cs->pub.state == CONN_STATE_LINGER, this simplifies lingering close handling
  from process_socket() and event_resume_suspended().

No functional changes.

Follow up to r1891716.
Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891717 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 2b4d2daa8de64c328ab68bda5cd3f336eebb283e)","{""sha"": ""9c915086f9782e92b6c4d6406fdfc839b2c81b3a"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T14:59:57Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:35:36Z""}}"
257,SubmitCommit,2021-07-23 10:36:40,ylavic,fork_close,"mpm_event: use apr_atomic_read32() to read queues' ->total instead of volatile access.

* server/mpm/event/event.c (listener_thread): Use apr_atomic_read32() instead
  open coded *(volatile apr_uint32_t*)q->total.

No functional change.

Follow up to r1891716.
Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891718 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 4ca50b49355e5db5b121b7abb724158119ae9097)","{""sha"": ""81c1c1a3264233a4d0b8ff72af7828b5355c59fd"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T15:04:26Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:36:40Z""}}"
257,SubmitCommit,2021-07-23 10:38:57,ylavic,fork_close,"mpm_event: better comments and variables' names.

No functional change.

Follow up to r1891716.
Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891719 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit d6220affccac4554b6f890b86786884be9a59ce0)","{""sha"": ""a8f37ddd44fa8b6266088054aac101efb1995e77"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T15:14:42Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:38:57Z""}}"
257,SubmitCommit,2021-07-23 10:40:01,ylavic,fork_close,"core: don't close the socket when failing in ap_start_lingering_close().

* server/connection.c (ap_start_lingering_close): Don't apr_socket_close().

* server/connection.c (ap_lingering_close): Do apr_socket_close() on
  ap_start_lingering_close() failure.

On failure ap_start_lingering_close() did not consistently close the socket,
so the caller had to call apr_socket_close() too with possible/unreliable
EBADF.  The only upstream callers of ap_start_lingering_close() are MPM event
and ap_start_lingering_close(), but any third-party user has this issue so the
change should't break anyone.

Follow up to r1891716.
Github: #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891721 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 70d7c7b009c1bbdcd046c1620118f580b6886c5c)","{""sha"": ""0cbd5549e3e9a5476df79c46c10629df8ba30456"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T15:33:19Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:40:01Z""}}"
257,SubmitCommit,2021-07-23 10:40:01,ylavic,fork_close,"mpm_fdqueue: return EOF for ap_queue_interrupt_*() when terminated.

* server/mpm_fdqueue.c (queue_interrupt): noop and return APR_EOF when queue is
  terminated already.

* server/mpm_fdqueue.h (struct fd_queue_t): make ""terminated"" volatile.

Follow up to r1891716.
Github: closes #208

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891724 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit cb17448b566ce7b806ac65f3554d4ed4380ade69)","{""sha"": ""0abd28e21f979494c44f2720af93e794aff4b417"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T15:48:03Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:40:01Z""}}"
257,SubmitCommit,2021-07-23 10:40:02,ylavic,fork_close,"mpm_event: clear APR_INCOMPLETE_READ on lingering close.

* server/mpm/event/event.c (process_lingering_close): APR_INCOMPLETE_READ may
  have been set anytime while processing the connection, clear it before
  nonblocking apr_socket_recv() to prevent internal apr_poll().

Follow up to r1891716.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891726 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 2515db492e98bca96b2510c1fb792ba47b65e1f0)","{""sha"": ""153b72ded68597b78e9ddd8ff7c7735225df926e"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T16:01:43Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:40:02Z""}}"
257,SubmitCommit,2021-07-23 10:40:03,ylavic,fork_close,"mpm_event: avoid possible timer off by 250 ms.

* server/mpm/event/event.c (listener_thread): EVENT_FUDGE_FACTOR is used to
  limit wakeups but still expiring timers should be compared with the real
  apr_time_now().

Similar to r1874277 for TIMEOUT_FUDGE_FACTOR.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891727 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 2a7de1e2a37464d166c1c8c5c41d7c4e49181c8c)","{""sha"": ""61a4189abd1bce6a1db4caa13189e4de89604e66"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T16:10:02Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T10:40:03Z""}}"
257,SubmitCommit,2021-07-23 22:10:55,ylavic,fork_close,"Follow up to r1891716: CHANGES entry.  [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891728 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 67c17882e17c0fb9fe333078a64ccd32a5b46b9d)","{""sha"": ""fde9e843d9ae1dda70075074e5316bf5332ff19f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T17:18:00Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-07-23T22:10:55Z""}}"
257,OpenPR,2021-07-23 22:15:58,ylavic,fork_close,,
257,CrossReferenced,2021-07-23 22:18:37,ylavic,fork_close,"Merge r1891716, r1891717, r1891718, r1891719, r1891721, r1891724, r1891726, r1891727, r1891728 from trunk","{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/256"", ""is_pull_request"": true}}"
257,IssueComment,2021-08-10 09:17:36,icing,fork_close,has been merged into 2.4.x,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/895868823"", ""author_association"": ""CONTRIBUTOR""}"
257,IssueCommentSupplement,2021-08-20 10:27:11,ylavic,fork_close,https://github.com/apache/httpd/commit/424360b5dc9ec1c40c268208cdd8a2d83c7140bb,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/902596617"", ""author_association"": ""MEMBER""}"
257,ClosePR,2021-08-20 10:27:11,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5186062499"", ""commit_url"": null}"
257,DeleteBranch,2021-08-20 10:27:23,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5186063361"", ""commit_url"": null}"
258,OpenPR,2021-07-26 11:27:10,notroj,fork_close,,
258,IssueComment,2021-09-23 11:03:37,notroj,fork_close,"One behaviour change (regression?) has been reported from testing this in Fedora.

With r1890067 (9eb262fb1a1957433c4bc072c292a36e3e6fe683) enabling the OpenSSL auto-DH-parameter selection *overrides* user-supplied DH parameters which are now ignored.  This is not necessary for OpenSSL 1.1 (which that patch affects) and is only removing a ""deprecated"" function so not strictly necessary for 3.0 either.  Need to ponder this one.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/925710412"", ""author_association"": ""COLLABORATOR""}"
258,CrossReferenced,2021-09-29 16:39:25,Jon8RFC,fork_close,nono303 2.4.5-2.4.7 apache won't load,"{""reference"": {""url"": ""https://api.github.com/repos/nono303/mod_md/issues/6"", ""is_pull_request"": false}}"
258,IssueComment,2021-11-26 21:18:57,sergiodj,fork_close,"Hi @notroj,

We're starting our transition to OpenSSL 3 in Ubuntu and apache2 is one of the affected packages due to mod_ssl's incompatibility.  I've been monitoring the situation here to check what's going to happen with this PR, but decided to ping you directly and check if there are any news regarding it, specifically when considering the possible regression you mentioned above.

For what's worth, I backported this set of patches to our current apache2 package in Ubuntu and was able to verify that they build fine with OpenSSL 3.  We have some automated tests (autopkgtests) for the package, and they seem to succeed as well.

Thanks.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/980438771"", ""author_association"": ""NONE""}"
258,IssueComment,2021-12-08 14:01:39,rpluem,fork_close,"> One behaviour change (regression?) has been reported from testing this in Fedora.
> 
> With r1890067 ([9eb262f](https://github.com/apache/httpd/commit/9eb262fb1a1957433c4bc072c292a36e3e6fe683)) enabling the OpenSSL auto-DH-parameter selection _overrides_ user-supplied DH parameters which are now ignored. This is not necessary for OpenSSL 1.1 (which that patch affects) and is only removing a ""deprecated"" function so not strictly necessary for 3.0 either. Need to ponder this one.

Any update on this? Is this fixed by r1893876 (dd5f2cc3dfffafd8c26db4d7bb9571085aed050a) and r1893964 (e77dffef9aa80fa1a7f90b49214dccc3ce957c51) on trunk? Would you propose to merge this to 2.4.x if these two revisions are added?","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/988839413"", ""author_association"": ""CONTRIBUTOR""}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1894716 from trunk:

  * mod_ssl: fix in CHECK_PRIVKEY_ERROR for openssl 3.0

Submitted by: icing","{""sha"": ""24c3475cefd740368385f29afb9247e0d723e1fd"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:10:34Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1893964 from trunk:

* modules/ssl/ssl_engine_init.c (ssl_init_ctx_callbacks,
  ssl_init_server_certs): Flip logic for enabling/disabling DH auto
  parameter selection for OpenSSL 1.1+ to be simpler and consistent
  with auto ECDH curve selection.","{""sha"": ""9bcbc67a6f9832d66332da61733da0378fb191b3"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-10-12T12:48:55Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1893876 from trunk:

* modules/ssl/ssl_engine_init.c (ssl_init_server_certs): For OpenSSL
  1.1+, disable auto DH parameter selection if parameters have been
  manually configured.  This fixes a regression in r1890067 after
  which manually configured parameters are ignored.

Submitted by: jorton","{""sha"": ""2b89f72cd9ff7b1c113676f6e112f439916e2993"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-10-04T13:26:49Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1890076 from trunk:

fix build with LibreSSL [Yann Ylavic]
Github issue #188

Submitted by: gbechis","{""sha"": ""3d53c7216030ccace0211f647f15419dc1aebc0a"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-26T11:29:32Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1876936 from trunk:

mod_ssl: follow up to r1876934: fix !modssl_X509_STORE_load_locations() logic.

Submitted by: ylavic","{""sha"": ""4e8c252f999eb8d75d921dc4e2d0dd63cfdca54d"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-28T11:28:59Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1891138 from trunk:

* modules/ssl/ssl_engine_init.c (ssl_init_server_certs): Fix use of
  encrypted private keys with OpenSSL 3.0.

* test/travis_run_linux.sh: For TEST_SSL, test loading encrypted
  private keys.

Github: closes #{197}

Submitted by: jorton","{""sha"": ""a45ea8ea6eaa88620ee978ef6f4928c3266814a0"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-26T11:24:46Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1876938 from trunk:

mod_ssl: follow up to r1876934: wrap DH_bits()

DH_get0_p() seems to be undefined for some openssl versions, so it can't
be used to implement DH_bits() generically.

Add new a modssl_DH_bits() wrapper to call DH_bits() for openssl < 3,
and BN_num_bits(DH_get0_p(dh)) otherwise.

Submitted by: ylavic","{""sha"": ""2d03cad3a1f42e155b43d512372f209675f21540"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-26T11:24:27Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1876934 from trunk:

mod_ssl: add compatibility with OpenSSL 3.0.0

Wrappers around deprecated API:
* X509_STORE_load_locations() => modssl_X509_STORE_load_locations(),
* CTX_load_verify_locations() => modssl_CTX_load_verify_locations(),
* ERR_peek_error_line_data()  => modssl_ERR_peek_error_data(),
* DH_bits(dh)                 => BN_num_bits(DH_get0_p(dh)).

Provide a compatible version of ssl_callback_SessionTicket() which does not
use the deprecated HMAC_CTX and HMAC_Init_ex(), replaced by EVP_MAC_CTX and
EVP_MAC_CTX_set_params() respectively. This requires adapting struct
modssl_ticket_key_t to replace hmac_secret[] with OSSL_PARAM mac_params[],
created once at load time still.
The callback is registered by SSL_CTX_set_tlsext_ticket_key_evp_cb() instead
of SSL_CTX_set_tlsext_ticket_key_cb().

Since BIO_eof() may now be called openssl-3 state machine, the never-called
assertion in bio_filter_in_ctrl() does not hold anymore, and we have to
handle BIO_CTRL_EOF. For any other cmd, we continue to AP_DEBUG_ASSERT(0) and
log an error, yet the return value is changed from -1 to 0 which is the usual
unhandled value.

Note that OpenSSL 3.0.0 is still in alpha stage as of now, the API shouldn't
change though, neither breakage to 1.x.x API.

Submitted by: ylavic","{""sha"": ""3751831fc063faefcd0960d6588d0d3add3d9d4f"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-26T11:24:24Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1519264 from trunk:

add some log messages and AP_DEBUG_ASSERTs for functions that should never be
called

Submitted by: sf","{""sha"": ""c0f6ff402d244346e726952a1deff12df0f727e7"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-26T11:23:24Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1890067 from trunk:

mod_ssl: Switch to using OpenSSL's automatic internal DH parameter
generation from OpenSSL 1.1.0 and later.  The
SSL_set_tmp_dh_callback() API is deprecated from OpenSSL 3.0 onwards.
Should not be a user-visible change (except mod_ssl gets smaller).

* modules/ssl/ssl_private.h,
  modules/ssl/ssl_engine_kernel.c,
  modules/ssl/ssl_engine_init.c (ssl_init_ctx_callbacks):
  Drop internal DH parameter generation and callback for OpenSSL 1.1+,
  use SSL_CTX_set_dh_auto(, 1) instead.

Github: closes #188
Reviewed by: rpluem

Submitted by: jorton","{""sha"": ""f4f39a9d5f8a88aa3af256c99b38a9e19f3635b1"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-26T11:25:36Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,Revise,2021-12-10 14:32:16,notroj,fork_close,"Merge r1737657 from trunk:

Support for OpenSSL 1.1.0:
- BIO was made opaque after OpenSSL 1.1.0pre4.

Submitted by: rjung","{""sha"": ""57ac9ae89c79fb89a7182409921dada7f184fe7f"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-07-26T13:15:28Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:32:16Z""}}"
258,IssueComment,2021-12-10 14:44:37,notroj,fork_close,I found one more bug when testing a debug build.  I will fix that too and then propose the backport.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/991031191"", ""author_association"": ""COLLABORATOR""}"
258,Revise,2021-12-10 14:50:50,notroj,fork_close,"Merge r1895774 from trunk:

* modules/ssl/ssl_engine_io.c (bio_filter_in_ctrl): Remove debugging
  assert for unexpected control commands, matching bio_filter_out_ctrl
  which also ignores such invocations.  Fixes core dumps in debug
  builds with OpenSSL 3.0.0 which triggers this via the
  BIO_get_ktls_recv() call on the SSL bio, aka
    BIO_ctrl(b, BIO_CTRL_GET_KTLS_RECV, ...);

See: https://github.com/openssl/openssl/blob/105af0ad923a665ca5fee296b52dbf34b524a2aa/ssl/record/rec_layer_s3.c#L274

Submitted by: jorton","{""sha"": ""fd7b7c4ce42a59a6d17a4bb490492edf7f948318"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:50:50Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T14:50:50Z""}}"
258,IssueComment,2021-12-13 10:28:44,minfrin,fork_close,"Backported to v2.4.52 as follows:

```
  *) mod_ssl: Updates to support OpenSSL 3.x
     trunk patch: https://svn.apache.org/r1519264
                  https://svn.apache.org/r1737657
                  https://svn.apache.org/r1876934
                  https://svn.apache.org/r1876936
                  https://svn.apache.org/r1876938
                  https://svn.apache.org/r1890067
                  https://svn.apache.org/r1890076
                  https://svn.apache.org/r1891138
                  https://svn.apache.org/r1893876
                  https://svn.apache.org/r1893964
                  https://svn.apache.org/r1894716
                  https://svn.apache.org/r1895774
     backport PR: https://github.com/apache/httpd/pull/258
     2.4.x patch: https://patch-diff.githubusercontent.com/raw/apache/httpd/pull/258.patch
                  or https://people.apache.org/~jorton/mod_ssl-openssl3.patch
     +1: jorton, minfrin, ylavic
```","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/992321305"", ""author_association"": ""CONTRIBUTOR""}"
258,IssueCommentSupplement,2021-12-16 11:45:52,ylavic,fork_close,Merged in r1895868 (769bc2137ac4d146fd6e632688d4afec6658755c).,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/995717866"", ""author_association"": ""MEMBER""}"
258,ClosePR,2021-12-16 11:45:52,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5777776310"", ""commit_url"": null}"
258,DeleteBranch,2021-12-16 12:37:01,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5778057827"", ""commit_url"": null}"
259,SubmitCommit,2021-07-31 13:48:27,Stefan Eissing,fork_close,"  * core/mpm: add hook 'child_stopping` that gets called when the MPM is
    stopping a child process. The additional `graceful` parameter allows
    registered hooks to free resources early during a graceful shutdown.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891919 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6649804f42e9732b22db1b1bae29a27c304662cf"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-31T13:36:19Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-07-31T13:48:27Z""}}"
259,SubmitCommit,2021-07-31 13:51:15,Stefan Eissing,fork_close," core: child stopping hook, changed trunk merge location.","{""sha"": ""c3bc54f74039d7b8e33a23b4c4ae0704518ab747"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-07-31T13:51:15Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-07-31T13:51:15Z""}}"
259,OpenPR,2021-07-31 13:52:45,icing,fork_close,,
259,IssueCommentSupplement,2021-08-10 09:17:13,icing,fork_close,has been merged into 2.4.x,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/895868555"", ""author_association"": ""CONTRIBUTOR""}"
259,ClosePR,2021-08-10 09:17:13,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5134346740"", ""commit_url"": null}"
260,SubmitCommit,2021-08-20 09:23:01,Stefan Eissing,fork_close, * http2 test suite from mod_h2 github repository adated to run in a trunk build,"{""sha"": ""8a6df03b3f37962428d33d4a30d55c57f789a61d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-08-20T09:23:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-08-20T09:23:01Z""}}"
260,OpenPR,2021-08-20 09:31:11,icing,fork_close,,
260,Revise,2021-08-20 11:04:49,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/h2test,"{""sha"": ""b97affc7ef8a7d422edc94198c2ee280693ff290"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-08-20T11:04:49Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-08-20T11:04:49Z""}}"
260,IssueCommentSupplement,2021-08-20 16:08:34,icing,fork_close,Merged in r1892476 in svn trunk.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/902800324"", ""author_association"": ""CONTRIBUTOR""}"
260,ClosePR,2021-08-20 16:08:34,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5187640471"", ""commit_url"": null}"
260,DeleteBranch,2022-10-17 11:58:33,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601409661"", ""commit_url"": null}"
261,SubmitCommit,2021-08-20 12:37:08,ylavic,fork_close,"mpm_proxy: Fix possible reuse/merging of Proxy(Pass)Match workers.  PR 65419.

We can't truncate ProxyMatch's worker name/url to the first '$' substitution
without possibly colliding with other workers. This also makes the matching
done at runtime by ap_proxy_strcmp_ematch() completely pointless.

To fix this and still address r1878467 (i.e. make http://host:port$1 a ""valid""
URL), we need to remove '$' substitutions from the :port part of the URL only
since it's allowed anywhere else by apr_uri_parse().

So let's strip them before apr_uri_parse() and prepend them back in the path
before apr_uri_unparse() to restore the original URL. Non-matchable workers are
not concerned so ap_proxy_define_worker() is made a local helper (w/o the ap_
prefix) which takes ""matchable"" as argument and can then be called by both
ap_proxy_define_[match_]worker() functions.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891206 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 542efc0f007bc5b36486a929bc37a2d749f2a3d8)","{""sha"": ""e7d91aefb97d07370354302497c89a0eafe3593a"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-02T14:58:46Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-08-20T12:37:08Z""}}"
261,SubmitCommit,2021-08-20 12:37:09,ylavic,fork_close,"mod_proxy: Follow up to r1891206: fix UDS scheme.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891216 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit d6ec6315cc84c50149637e92aecbfc3a52c9b6bd)","{""sha"": ""f11ae1d25aedf0d87c2d318e27eaddf94c627fca"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-02T22:09:10Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-08-20T12:37:09Z""}}"
261,SubmitCommit,2021-08-20 12:43:00,ylavic,fork_close,"mod_proxy: Avoid confusion of prefix/regex matching workers at loading.  PR 65429.

ap_proxy_get_worker() needs to know whether it should lookup for prefix or
match or both matching workers, depending on the context.

For instance <Proxy[Match]> or ProxyPass[Match] directives need to lookup for
an existing worker with the same type as the directive (*Match or not), because
they will define one with that matching type if none exists.

On the contrary, ""ProxySet <url>"" at load time or ap_proxy_pre_request() at run
time need to find a worker matching an url whether it's by prefix or by regex.

So this commit adds ap_proxy_get_worker_ex() which takes a bitmask for the
matching type and calls it appropriately where needed.

For consistency, ap_proxy_define_worker_ex() is also added, using the same
bitmask flags, deprecating ap_proxy_define_match_worker().

Follow up to r1891206.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1891284 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 20dd120ce4c0ea1329f6faef0bd3b13536e3c34c)","{""sha"": ""b7c6867e812282f206290cc79fcae67072ce15bf"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-05T16:23:33Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-08-20T12:43:00Z""}}"
261,OpenPR,2021-08-20 12:50:27,ylavic,fork_close,,
261,IssueCommentSupplement,2021-08-24 12:47:33,ylavic,fork_close,Backported to 2.4.x in https://github.com/apache/httpd/commit/be99f85dba9a0b1993bec3f0dcf3b28732cea03c,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/904609557"", ""author_association"": ""MEMBER""}"
261,ClosePR,2021-08-24 12:47:33,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5200402978"", ""commit_url"": null}"
262,OpenPR,2021-08-23 12:37:42,notroj,fork_close,,
262,Revise,2021-08-26 12:07:05,notroj,fork_close,"Add job to run the HTTP/2 test suite.

Add custom package set for h2 testing.

Drop pool-debug/malloc testing.

Simplify.","{""sha"": ""d5013f58b363987bef71f51db1cd768c2b6046b8"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-08-23T12:37:00Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-08-26T12:07:05Z""}}"
262,ClosePR,2021-08-26 14:41:54,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5213423473"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/60a609e79a5821adba265ec93fc9cbff7bc925be""}"
263,SubmitCommit,2021-08-28 05:42:48,jenny-cheung,fork_close,"Fix a small error due to the unreleased lock before program exit.

Fix a small error due to the unreleased lock before program exit by adding accept_mutex_off().","{""sha"": ""014d6dadbcd9608cfbf46e9bdd297157085eba9a"", ""author"": {""name"": ""jenny"", ""email"": ""84835889+jenny-cheung@users.noreply.github.com"", ""date"": ""2021-08-28T05:42:48Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2021-08-28T05:42:48Z""}}"
263,OpenPR,2021-08-28 05:47:22,jenny-cheung,fork_close,,
263,IssueComment,2021-09-07 08:40:31,jenny-cheung,fork_close,@ylavic Can you take a look? Thank you very much!,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/914108961"", ""author_association"": ""NONE""}"
263,IssueComment,2021-09-07 08:53:39,ylavic,fork_close,"Thanks, fixed in 9e02e2000cc05754a9c1c9a9aead7ce2cc8ea6ee","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/914117736"", ""author_association"": ""MEMBER""}"
263,IssueCommentSupplement,2021-09-09 07:47:49,jenny-cheung,fork_close,@ylavic Thank you very much.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/915846839"", ""author_association"": ""NONE""}"
263,ClosePR,2021-09-09 07:47:49,jenny-cheung,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5276667999"", ""commit_url"": null}"
264,SubmitCommit,2021-09-06 19:19:57,notroj,fork_close,"mod_ssl: Log private key material to file set by $SSLKEYLOGFILE in the
environment, using the standard format which can be parsed by (e.g.)
wireshark for decoding SSL/TLS traffic; supported from OpenSSL 1.1.1.

* modules/ssl/ssl_private.h: Add keylog_file to SSLModConfigRec.

* modules/ssl/ssl_engine_init.c (ssl_init_Module): Open log file if
  SSLKEYLOGFILE is set in the environment.
  (ssl_init_ctx_protocol): Register the keylog callback with OpenSSL.

* modules/ssl/ssl_engine_kernel.c (modssl_callback_keylog):
  New function.

PR: 63391
Github: closes #74

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1869842 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit abe9502d3ba02e8e6815c0dfc9648582aa8d423d)","{""sha"": ""6b6f715ac1351987ddf122e18526ed60d4e749ea"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2019-11-15T09:46:30Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-06T19:19:57Z""}}"
264,OpenPR,2021-09-06 19:21:27,rpluem,fork_close,,
264,ClosePR,2021-09-08 09:22:44,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5270929747"", ""commit_url"": null}"
264,DeleteBranch,2021-09-08 09:22:49,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5270930247"", ""commit_url"": null}"
265,SubmitCommit,2021-09-06 19:30:43,ylavic,fork_close,"mod_proxy: Follow up to r1892814.

* modules/proxy/proxy_util.c(fix_uds_filename):
  Sanity checks on the configured UDS path, fail with 500 if invalid since
  continuing through proxy processing wouldn't work as expected.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1892986 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit fe32f679f4f9da07b04a3387a6623ac45fbc15a1)","{""sha"": ""bac6dd2692d7939166f055225a48b93ce186ecbc"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T11:06:53Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-06T19:30:43Z""}}"
265,SubmitCommit,2021-09-06 19:31:09,ylavic,fork_close,"mod_proxy: Follow up to r1892986: APLOGNO()

Stefan get out of this body! :)

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1892987 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 47e6ecef2083d7e864541dc7605dece7681c0114)","{""sha"": ""7f4295b499ef19198a77f80a03f566c6a751fcb6"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T11:21:49Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-06T19:31:09Z""}}"
265,OpenPR,2021-09-06 19:32:14,rpluem,fork_close,,
265,ClosePR,2021-09-08 09:22:18,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5270927081"", ""commit_url"": null}"
265,DeleteBranch,2021-09-08 09:22:22,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5270927384"", ""commit_url"": null}"
266,SubmitCommit,2021-09-13 15:47:44,kokke,fork_close,fix time-of-use vs time-of-check,"{""sha"": ""8f4d9b0a085052732b2ff103b5276090171e30bd"", ""author"": {""name"": ""kokke"", ""email"": ""spam@rowdy.dk"", ""date"": ""2021-09-13T15:47:44Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2021-09-13T15:47:44Z""}}"
266,SubmitCommit,2021-09-13 15:48:46,kokke,fork_close,fix time-of-use time-of-check bugs,"{""sha"": ""d92ea2dc8ea035645fa874cf7cf75ee68ea0b5aa"", ""author"": {""name"": ""kokke"", ""email"": ""spam@rowdy.dk"", ""date"": ""2021-09-13T15:48:46Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2021-09-13T15:48:46Z""}}"
266,OpenPR,2021-09-13 15:58:44,kokke,fork_close,,
266,ClosePR,2021-09-14 06:56:31,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5297453091"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/2de074063d2e027f3aa1e9ecf5ad303fe367385f""}"
267,OpenPR,2021-09-17 11:52:34,ylavic,fork_close,,
267,Revise,2021-09-24 11:34:24,ylavic,fork_close,"mod_proxy: Add tunnel_forward hook.

* modules/proxy/proxy_util.c(proxy_transfer):
  Run tunnel_forward hooks when called by the tunneling loop.
  Simpler input/output brigade cleanup on exit.","{""sha"": ""0e5fe911cd9d8b7752ad7132e3996d17e35c77fd"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-09-17T10:18:09Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-09-24T11:34:24Z""}}"
267,Revise,2021-09-24 11:34:24,ylavic,fork_close,mod_proxy: Update APLOGNO()s.,"{""sha"": ""676a207ccf6c47ba69977ccf9f71d347310d44bc"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-09-17T11:49:15Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-09-24T11:34:24Z""}}"
267,IssueCommentSupplement,2021-09-24 15:54:19,ylavic,fork_close,Merged in r1893603 (3d2842e915d26a226a1524db8a718c9c9e2a57bc).,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/926737186"", ""author_association"": ""MEMBER""}"
267,ClosePR,2021-09-24 15:54:19,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5356997187"", ""commit_url"": null}"
267,DeleteBranch,2021-09-24 15:54:24,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5356997620"", ""commit_url"": null}"
268,SubmitCommit,2021-04-28 20:33:52,Christophe Jaillet,fork_close,"Revert r1889272.

It will be updated by announce.sh

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889278 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c66b1501de258d557c932184c05e82c81b134931"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-04-28T20:33:52Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-04-28T20:33:52Z""}}"
268,SubmitCommit,2021-04-29 06:13:33,Christophe Jaillet,fork_close,"Add a note on the PCRE2 backport stalled patches about a potential solution

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889287 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f3bae84da0b91e95adb000b2ba508241cb2e3028"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-04-29T06:13:33Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-04-29T06:13:33Z""}}"
268,SubmitCommit,2021-04-30 15:23:32,Christophe Jaillet,fork_close,"Remove wrong idea (and trigger a travis run)

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889331 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""539c8d7df3c056722ecbe35fbb177688d1cd4a06"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-04-30T15:23:32Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-04-30T15:23:32Z""}}"
268,SubmitCommit,2021-05-03 19:12:56,Christophe Jaillet,fork_close,"Keep the date of distribution, but not announced, 2.4.47

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889462 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0ce3ea6c3662e3de5fd21c5104496f81f102a819"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-03T19:12:56Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-03T19:12:56Z""}}"
268,SubmitCommit,2021-05-04 09:04:51,rpluem,fork_close,"* Propose

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889479 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""dfaabe4abae42963ca53212c7afbab8c62eecb1c"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-04T09:04:51Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-04T09:04:51Z""}}"
268,SubmitCommit,2021-05-04 23:58:32,covener,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889507 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cfc981f7162d47584e1559435a43e09c4f944bda"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-05-04T23:58:32Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-05-04T23:58:32Z""}}"
268,SubmitCommit,2021-05-05 07:18:55,rpluem,fork_close,"* Vote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889511 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fe36439503600bc706b68ff117cabdfb787f9a02"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-05T07:18:55Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-05T07:18:55Z""}}"
268,SubmitCommit,2021-05-05 07:34:58,rpluem,fork_close,"* Vote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889512 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7e2d47e5652410f43bbf9a9539fa8dbd514fcb89"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-05T07:34:58Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-05T07:34:58Z""}}"
268,SubmitCommit,2021-05-05 07:36:37,rpluem,fork_close,"* Promote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889513 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""bf1e1aea9a6b1491b8cdd1a0675a61631db3af3a"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-05T07:36:37Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-05T07:36:37Z""}}"
268,SubmitCommit,2021-05-10 09:55:23,ylavic,fork_close,"Vote, promote [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889719 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0f9bff0030866e89e37192240c229dcdbfe09669"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-10T09:55:23Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-10T09:55:23Z""}}"
268,SubmitCommit,2021-05-11 08:42:09,Stefan Eissing,fork_close,"update proposal [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889750 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5b5c5b9f581966ed3ccced901981c9ad6b69e777"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-11T08:42:09Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-11T08:42:09Z""}}"
268,SubmitCommit,2021-05-11 09:50:49,rpluem,fork_close,"* Vote and promote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889751 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cca4b473c4c05dde3c4fa8e103e21c215fd5e7da"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-11T09:50:49Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-11T09:50:49Z""}}"
268,SubmitCommit,2021-05-11 13:36:45,Stefan Eissing,fork_close,"Merge r1889119 from trunk:

mod_http2: fix incomplete sync with github and its version number.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889759 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5bc61a05cf034980a85b81188032afca58b31468"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-11T13:36:45Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-11T13:36:45Z""}}"
268,SubmitCommit,2021-05-11 13:37:18,Stefan Eissing,fork_close,"Update after merge of backport. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889760 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""512847dcbb5e8e00b35297c5dc75d58a2758bf92"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-11T13:37:18Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-11T13:37:18Z""}}"
268,SubmitCommit,2021-05-11 15:21:43,rpluem,fork_close,"Merge r1889341 from trunk:

* Do not strip any headers from 304 responses.

PR: 61820

Reviewed by: rpluem, covener, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889764 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""bf463edd81af368b6e22d835ea7011825d03b98a"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-11T15:21:43Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-11T15:21:43Z""}}"
268,SubmitCommit,2021-05-11 19:21:34,Christophe Jaillet,fork_close,"Move a change entry to the right location

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889775 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""66863386a6e33838685370d73a24c3942074d13b"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-11T19:21:34Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-11T19:21:34Z""}}"
268,SubmitCommit,2021-05-12 10:14:42,Stefan Eissing,fork_close,"Merge of [r1886840, r1887085, r1887087, r1887134, r1887151, r1887152, 
       r1887337, r1887340, r1887342, r1887343, r1887360, r1887364, 
       r1887923, r1887965, r1887993, r1888006, r1888083, r1888084,
       r1888723, r1888724, r1888726, r1888729, r1889788] from trunk:

   *) core/mod_ssl/mod_md:
     - adding new ap_ssl_*() functions for a backward
       compatible replacement of the major optional mod_ssl functions. This
       allows other ssl modules to work without impersonating mod_ssl and
       also allows different ssl modules being active on separate ports.
     - latest mod_md with support for multiple certificates per domain
       and ECDSA certificates. Removed ACMEv1 support.
     - Interworking mod_md and ssl modules changed to exchange PEM strings
       instead of file paths for ACME challenges.
     - core/mod_ssl/mod_md: adding OCSP response provisioning as core feature.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889793 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c0cff48bccf6607333a6841f723660c0083929f4"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-12T10:14:42Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-12T10:14:42Z""}}"
268,SubmitCommit,2021-05-12 10:15:21,Stefan Eissing,fork_close,"update after backport. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889794 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e1014eb6a88e7c17f074309bb3eafbcc682c7e81"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-12T10:15:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-12T10:15:21Z""}}"
268,SubmitCommit,2021-05-12 10:38:01,ylavic,fork_close,"Propose fix for BZ 65294 and opt-out for wstunnel fallback.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889796 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""24ff94d31a41c9010015a18ba522414691f15ae4"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-12T10:38:01Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-12T10:38:01Z""}}"
268,SubmitCommit,2021-05-12 10:41:50,covener,fork_close,"vote, move to showstoppers [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889797 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7d6b15dddb51d4e6efe8512e4054e53b7664812c"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-05-12T10:41:50Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-05-12T10:41:50Z""}}"
268,SubmitCommit,2021-05-12 11:21:09,ylavic,fork_close,"Merge r1888266 from trunk:

mod_socache_shmcb: be safe from socache_shmcb_destroy() late call.  PR 59798.

ssl_init_Module() in post_config early registers ssl_init_ModuleKill(), which
will then run after all the next cleanups registered later in post_config, thus
any shm_cleanup() registered from ssl_scache_init::socache_shmcb_init().
This can cause a double SHM cleanup when apr_shm_destroy() is called from
ssl_init_ModuleKill::ssl_scache_kill() as pconf is cleared.

Fix this in mod_socache_shmcb by registering a socache_shmcb_cleanup() after
the SHM is created, and by letting socache_shmcb_destroy() run the cleanup,
such that shm_cleanup() is always and ever called only once.

Ideally apr_shm_create() would be consistent accross platforms to register its
shm_cleanup() on the pool but that's not the case for now (I'm on it), so httpd
has to call apr_shm_destroy() explicitely from several places (we'll be able to
remove ssl_scache_kill() and other similar cleanups once the minimal APR
version required by httpd is fixed..).

We could also fix this by registering ssl_init_ModuleKill() late(r) in
ssl_init_Module(), though the more robust mod_socache_shmcb the better for
all the modules..


Reviewed by: ylavic, icing, rpluem


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889798 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0e382d189d5136e95878ac7559f47b015708ecdb"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-12T11:21:09Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-12T11:21:09Z""}}"
268,SubmitCommit,2021-05-12 11:21:40,ylavic,fork_close,"Backported. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889799 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f74f366e935b7119cadd5fb10594574b074bdf7f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-12T11:21:40Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-12T11:21:40Z""}}"
268,SubmitCommit,2021-05-13 20:14:00,Gregg Lewis Smith,fork_close,"Update Win32 command line makefiles for r1889793



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889869 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7da5270ffe75101b19e1ca31b287c5afa2d44e8a"", ""author"": {""name"": ""Gregg Lewis Smith"", ""email"": ""gsmith@apache.org"", ""date"": ""2021-05-13T20:14:00Z""}, ""committer"": {""name"": ""Gregg Lewis Smith"", ""email"": ""gsmith@apache.org"", ""date"": ""2021-05-13T20:14:00Z""}}"
268,SubmitCommit,2021-05-14 19:06:38,rpluem,fork_close,"* Vote and promote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889900 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e21de1c861d33a74c89f8cb96ae7e4ec2bde9574"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-14T19:06:38Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-14T19:06:38Z""}}"
268,SubmitCommit,2021-05-14 19:15:11,ylavic,fork_close,"mod_proxy: Fix flushing of THRESHOLD_MIN_WRITE data while tunneling.  BZ 65294

Submitted by: ylavic
Reviewed by: ylavic, covener, rpluem


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889901 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""01a8f46983e4cac336fc5a5dea104ca144102eac"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-14T19:15:11Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-14T19:15:11Z""}}"
268,SubmitCommit,2021-05-14 19:18:52,ylavic,fork_close,"Merge r1889792, r1889795 from trunk:

mod_proxy_wstunnel: Add ProxyWebsocketFallbackToProxyHttp.

Allows to opt-out the fallback to mod_proxy_http to handle WebSocket upgrade,
and let mod_proxy_wstunnel handle the requests as in 2.4.46 and earlier.

Update docs.


Follow up to r1889792: CHANGES entry.


Submitted by: ylavic
Reviewed by: ylavic, covener, rpluem


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889902 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cb517a3b8a2fc1785c7afeff0f0dce69608833f5"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-14T19:18:52Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-14T19:18:52Z""}}"
268,SubmitCommit,2021-05-14 19:19:36,ylavic,fork_close,"Backported. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889903 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""963cfda0a22726936b70ac71ca0a94329997fe42"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-14T19:19:36Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-14T19:19:36Z""}}"
268,SubmitCommit,2021-05-16 10:53:17,ylavic,fork_close,"Propose. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889930 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""699d0f08523ba4487e09a2502d833ac8c6c06970"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-16T10:53:17Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-16T10:53:17Z""}}"
268,SubmitCommit,2021-05-16 11:22:54,ylavic,fork_close,"Add missing commit r1888871 to proposal. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889931 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8d6695ac9c85ba3cd769348ad3ba093eb0484bdb"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-16T11:22:54Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-16T11:22:54Z""}}"
268,SubmitCommit,2021-05-16 11:34:16,ylavic,fork_close,"Add other missing commits. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889932 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0021a1834cb52c8e3b9012fcaa90243c0e4ab7be"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-16T11:34:16Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-05-16T11:34:16Z""}}"
268,SubmitCommit,2021-05-17 08:44:01,Stefan Eissing,fork_close,"vote. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889948 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f44d4341eaaa0d0ad3e0c3f0973f0773bab65b8a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-17T08:44:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-17T08:44:01Z""}}"
268,SubmitCommit,2021-05-17 12:13:58,Stefan Eissing,fork_close,"Merge r1889958 from trunk:

mod_md: update documentation regarding private keys and message events.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889959 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2f4d7f82612957534c9b2f29b7d2dba118d5b9be"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-17T12:13:58Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-17T12:13:58Z""}}"
268,SubmitCommit,2021-05-17 14:41:07,rpluem,fork_close,"* Propose [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889963 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a965aa60bd032583b76fe5e0f63c83e319ddbf42"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-17T14:41:07Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-17T14:41:07Z""}}"
268,SubmitCommit,2021-05-17 19:28:30,rpluem,fork_close,"* Vote and promote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889968 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""55d8a9e7f22871bd49b8296898834ee0d3b8c970"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-17T19:28:30Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-05-17T19:28:30Z""}}"
268,SubmitCommit,2021-05-17 21:10:15,Christophe Jaillet,fork_close,"Get ready to tag httpd 2.4.48

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889974 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fd0eff7218edc90ee75f43c861f86f18665b8ff5"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-17T21:10:15Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-17T21:10:15Z""}}"
268,SubmitCommit,2021-05-17 21:10:19,Christophe Jaillet,fork_close,"Post 2.4.48 tag updates

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889976 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3db24ff775415d4abd66f1241f3337eab27bd96b"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-17T21:10:19Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-17T21:10:19Z""}}"
268,SubmitCommit,2021-05-17 21:39:50,Christophe Jaillet,fork_close,"Fix French vs English date format.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889978 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7d7117e4082e19f90c819654066ab1af147ac1bb"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-17T21:39:50Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-05-17T21:39:50Z""}}"
268,SubmitCommit,2021-05-18 12:11:32,Stefan Eissing,fork_close,"Merge: /httpd/httpd/trunk:r1889995


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1889997 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""69ef5ca58b7613c554e91254503ca7817631479e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-18T12:11:32Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-18T12:11:32Z""}}"
268,SubmitCommit,2021-05-18 13:42:15,Stefan Eissing,fork_close,"Merge  /httpd/httpd/trunk:r1890001

mod_md: the better libressl fix for unsupported EC key types.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890002 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""dfdf19738fbb14d747297c06cce9b5e600484368"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-18T13:42:15Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-18T13:42:15Z""}}"
268,SubmitCommit,2021-05-21 11:18:33,notroj,fork_close,"Vote*1, propose*1, TBD*1. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890068 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8e1bfacc3561b4cbc2eea591759a0eec69146dff"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-05-21T11:18:33Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-05-21T11:18:33Z""}}"
268,SubmitCommit,2021-05-22 16:19:54,Lucien Gentis,fork_close,"<contextlist> and <compatibility> bad ordering.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890113 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""201046ce391dec068f9d0121a82f343dd5f38452"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-22T16:19:54Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-22T16:19:54Z""}}"
268,SubmitCommit,2021-05-22 16:22:37,Lucien Gentis,fork_close,"fr doc XML files updates.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890114 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""05ca0605779ff0b5d7c317bc613d6bd89aca80e6"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-22T16:22:37Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-22T16:22:37Z""}}"
268,SubmitCommit,2021-05-22 16:24:10,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890115 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""02993573367564fc79c6c6faaf0b1dd6466cbe79"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-22T16:24:10Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-22T16:24:10Z""}}"
268,SubmitCommit,2021-05-27 13:08:21,Stefan Eissing,fork_close,"Merged r1734009,r1734231,r1734281,r1838055,r1838079,r1840229,r1876664,r1876674,r1876784,r1879078,r1881620,r1887311,r1888871 from trunk:

  *) core: Split ap_create_request() from ap_read_request(). [Graham Leggett]

  *) core, h2: common ap_parse_request_line() and ap_check_request_header()
     code. [Yann Ylavic]

  *) core: Add StrictHostCheck to allow unconfigured hostnames to be
     rejected. [Eric Covener]



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890245 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ecebcc035ccd8d0e2984fe41420d9e944f456b3c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-27T13:08:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-27T13:08:21Z""}}"
268,SubmitCommit,2021-05-27 13:08:50,Stefan Eissing,fork_close,"update after backport. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890246 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c87108a71827e23db9cbc2568f0e5ce26ba8580c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-27T13:08:50Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-27T13:08:50Z""}}"
268,SubmitCommit,2021-05-27 14:10:27,Stefan Eissing,fork_close,"Fixed version numbers after revew by cristiophe hawkeye.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890248 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c739eda1b7740fd6830cf2977cf5395dc8d06618"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-27T14:10:27Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-05-27T14:10:27Z""}}"
268,SubmitCommit,2021-05-29 13:53:34,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890308 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d678f0213c2bb88e174decdaae825f9581d48888"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-29T13:53:34Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-29T13:53:34Z""}}"
268,SubmitCommit,2021-05-29 13:57:46,Lucien Gentis,fork_close,"fr doc XML file update (version number update omitted)


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890309 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f8b10b6c4c664bdbc73606e5732d7ee704ce7fd5"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-29T13:57:46Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-29T13:57:46Z""}}"
268,SubmitCommit,2021-05-29 13:58:51,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890310 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5e2df5b60dafc8a063c005f1b8ad89128db67f36"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-29T13:58:51Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-05-29T13:58:51Z""}}"
268,SubmitCommit,2021-06-01 20:04:51,Christophe Jaillet,fork_close,"Updates for announcement of 

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890370 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6f08e089b8aea775a75cdaeb244b9e253ea5421a"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-06-01T20:04:51Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-06-01T20:04:51Z""}}"
268,SubmitCommit,2021-06-01 20:47:17,ylavic,fork_close,"Vote, promote. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890373 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0ea133774da7df5412070e28fde54ed74a184c54"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-06-01T20:47:17Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-06-01T20:47:17Z""}}"
268,SubmitCommit,2021-06-02 07:11:47,rpluem,fork_close,"Merge r1889806 from trunk:

* Correctly record changes for the latest release in case there have been no
  changes at all for this release so far.

Reviewed by: rpluem, jorton, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890381 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""86ee45ff08c708acb8c14516f892dbf8fce5548f"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-06-02T07:11:47Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-06-02T07:11:47Z""}}"
268,SubmitCommit,2021-06-03 12:28:47,covener,fork_close,"Merge r1890424 from trunk:

PR65073: updates to MergeSlashes related doc




git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890425 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e4bbe0e31a521eef92a1fe5f771ca79491334c48"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-06-03T12:28:47Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-06-03T12:28:47Z""}}"
268,SubmitCommit,2021-06-03 16:55:50,covener,fork_close,"correct CVE year


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890439 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""59393dd87f5ef32e72060a47895e4ac7567ea888"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-06-03T16:55:50Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-06-03T16:55:50Z""}}"
268,SubmitCommit,2021-06-05 15:07:15,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890507 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""44beea78255a5bf2ae256f4310b52527d5de8ad0"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-06-05T15:07:15Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-06-05T15:07:15Z""}}"
268,SubmitCommit,2021-06-05 15:08:06,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890508 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""80a8f3bdabb07f0e937958daf9ad3293d9157137"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-06-05T15:08:06Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-06-05T15:08:06Z""}}"
268,SubmitCommit,2021-06-07 08:55:33,jfclere,fork_close,"Vote*1. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890545 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""674503dc69aa8400d931eca490c14ae08cf30fa1"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-06-07T08:55:33Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-06-07T08:55:33Z""}}"
268,SubmitCommit,2021-06-07 12:59:02,jfclere,fork_close,"propose*1.  [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890558 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""da96543d953dd64e68c2d314ce5241ec21435892"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-06-07T12:59:02Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-06-07T12:59:02Z""}}"
268,SubmitCommit,2021-06-07 16:02:30,jfclere,fork_close,"propose*1.  [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890573 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""98536caa590932bb6c9a911d29c18f6fe59f1611"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-06-07T16:02:30Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-06-07T16:02:30Z""}}"
268,SubmitCommit,2021-06-09 15:04:59,jimjag,fork_close,"cast votes



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890639 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0a0a7b4e98a638ba2332b0462e811550db565646"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2021-06-09T15:04:59Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2021-06-09T15:04:59Z""}}"
268,SubmitCommit,2021-06-10 09:38:40,notroj,fork_close,"Merge r1864784 from trunk:

-l and -L are not exclusive.
Document the 'G' suffix.
Fix some minor style issues.

Submitted by: jailletc36
Reviewed by: jorton, ylavic, jfclere


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890671 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2c67d14299c098c804f97d768ea85e8c86a4320e"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-06-10T09:38:40Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-06-10T09:38:40Z""}}"
268,SubmitCommit,2021-06-10 09:38:59,notroj,fork_close,"Merged x1, [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890672 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6e993a41eed4ba233b9f8628761a75712ae294e8"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-06-10T09:38:59Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-06-10T09:38:59Z""}}"
268,SubmitCommit,2021-06-21 16:13:12,minfrin,fork_close,"(Re)propose (with a working link).


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890944 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""41e7a6dd4f3d4535213579e68cc23aa0c2fa0b66"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-21T16:13:12Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-21T16:13:12Z""}}"
268,SubmitCommit,2021-06-21 16:45:25,minfrin,fork_close,"Comment.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890945 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""651463e2d19ae29d60686ecaeee9e1ff3e2dd0e3"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-21T16:45:25Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-21T16:45:25Z""}}"
268,SubmitCommit,2021-06-21 17:02:13,minfrin,fork_close,"Vote and promote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890946 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8660651be530404f3776c10cc8fe4b25b323d253"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-21T17:02:13Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-21T17:02:13Z""}}"
268,SubmitCommit,2021-06-21 17:03:35,minfrin,fork_close,"*) back port: Add CPING to health check logic.
   Trunk version of patch:
        https://svn.apache.org/r1887415
   Backport version for 2.4.x of patch:
      Trunk version of patch works
      svn merge -c 1887415 ^/httpd/httpd/trunk .
   +1: jfclere, jim, minfrin



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890947 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""044b45e0da8db6332383aa1fc9301848d1c81ab8"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-21T17:03:35Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-21T17:03:35Z""}}"
268,SubmitCommit,2021-06-22 07:38:49,minfrin,fork_close,"Propose.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890960 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""26d9450782754272c1b10cbcf757e4450f949c18"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-22T07:38:49Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-22T07:38:49Z""}}"
268,SubmitCommit,2021-06-22 07:41:08,rpluem,fork_close,"* Vote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890962 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""bfdb076d99732f5a4b15c849dedfbb3bc3d75dd6"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-06-22T07:41:08Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-06-22T07:41:08Z""}}"
268,SubmitCommit,2021-06-22 11:10:08,minfrin,fork_close,"Bump the MMN in the patch.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1890968 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2f0f0d4e31bcf8b151ebc833ddd56c09dbff6462"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-22T11:10:08Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-06-22T11:10:08Z""}}"
268,SubmitCommit,2021-07-01 18:26:57,covener,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891185 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d7cf0428267f7f8dfe7819ab07496e3d21a0a3a4"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-07-01T18:26:57Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-07-01T18:26:57Z""}}"
268,SubmitCommit,2021-07-02 08:24:38,jfclere,fork_close,"move proposal to being work [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891193 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ee0a92c6c659a696cb75a90f29f29e4bac8d26e0"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-02T08:24:38Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-02T08:24:38Z""}}"
268,SubmitCommit,2021-07-02 14:53:13,notroj,fork_close,"Propose, maybe sometime during the weekend the Travis output will turn up.
[skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891205 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""638cf3b5d0837ca4cccdc6079a24130e7c806292"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-07-02T14:53:13Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-07-02T14:53:13Z""}}"
268,SubmitCommit,2021-07-05 09:01:27,minfrin,fork_close,"  *) back port: Add CPING to health check logic - remove hardcoded timeout.
     Trunk version of patch:
        https://svn.apache.org/r1887439
     Backport version for 2.4.x of patch:
      Trunk version of patch works
      svn merge -c 1887439 ^/httpd/httpd/trunk .
     +1: minfrin, rpluem, covener



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891276 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f4af9fc212f239b2d3b6af78183d435848b04203"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-07-05T09:01:27Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-07-05T09:01:27Z""}}"
268,SubmitCommit,2021-07-05 09:05:52,minfrin,fork_close,"Vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891278 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""af29a8583063420f37e8b14130f0cac474851055"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-07-05T09:05:52Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-07-05T09:05:52Z""}}"
268,SubmitCommit,2021-07-05 10:26:05,minfrin,fork_close,"Propose backports to support WebDAV extensions, like CalDAV and DavACL.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891281 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b242d9ff7886960215be67c25a71cde7144ece3b"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-07-05T10:26:05Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-07-05T10:26:05Z""}}"
268,SubmitCommit,2021-07-06 12:16:20,Stefan Eissing,fork_close,"backport proposal of r1890605 [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891309 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d34c8b97879e910a9c586fb246354b0c6c558699"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-06T12:16:20Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-06T12:16:20Z""}}"
268,SubmitCommit,2021-07-06 12:31:44,Stefan Eissing,fork_close,"backport proposal of r1890693+r1890696, improved alpn check [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891311 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8e7e30407c0ef6e1eaeea4912ff34c39108cba88"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-06T12:31:44Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-06T12:31:44Z""}}"
268,SubmitCommit,2021-07-06 14:02:14,ylavic,fork_close,"Trigger ci.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891314 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""500efb2aa83fe7ec9d4092a912dc4dd681814f30"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-06T14:02:14Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-06T14:02:14Z""}}"
268,SubmitCommit,2021-07-06 16:27:48,jfclere,fork_close,"new proposal put back Referer check. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891319 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""05162e718e3c6bf5a3bca327e5e07b31ef7bf2d9"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-06T16:27:48Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-06T16:27:48Z""}}"
268,SubmitCommit,2021-07-07 06:24:11,jfclere,fork_close,"backport for proxy mapping=servlet and balancer_manage [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891336 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""90e0c59a2ddaf59514da0db19bd348395015b587"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-07T06:24:11Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-07T06:24:11Z""}}"
268,SubmitCommit,2021-07-08 06:23:31,jfclere,fork_close,"vote. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891376 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1fc779e0be1e22cbb39f93d2dc9d6c1fe5b3ef42"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-08T06:23:31Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-08T06:23:31Z""}}"
268,SubmitCommit,2021-07-08 07:04:49,notroj,fork_close,"Merge r1889957 from trunk: [excluding server/mpm/simple changes]

* server/mpm/event/event.c, 
  server/mpm/simple/simple_run.c,
  support/htcacheclean.c: Adjust use of APR_RING macros to
  ensure the APR_RING_HEAD is always embedded in a containing
  structure, to avoid warnings with GCC 11.  (apr_ring.h also
  suggests this is best practice)

See also: https://bugzilla.redhat.com/show_bug.cgi?id=1957353
          https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98503
          msgid <814cca2a-1992-3fae-bb0e-c84b3d09b73b@gmail.com>
Github: closes #186
Reviewed by: jorton, minfrin, jfclere


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891377 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2cfafb4a3690ecd60c7d955e12429af0c9082af3"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-07-08T07:04:49Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-07-08T07:04:49Z""}}"
268,SubmitCommit,2021-07-08 07:05:04,notroj,fork_close,"Merged*1. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891378 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2f01cc29ccd9d0a22fd192d57d752c485ec89f8a"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-07-08T07:05:04Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-07-08T07:05:04Z""}}"
268,SubmitCommit,2021-07-09 12:26:10,rbowen,fork_close,"s/Freenode/Libera.chat/


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891401 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""98e9a781a1148ab16feb5efb3650eb922853d817"", ""author"": {""name"": ""Rich Bowen"", ""email"": ""rbowen@apache.org"", ""date"": ""2021-07-09T12:26:10Z""}, ""committer"": {""name"": ""Rich Bowen"", ""email"": ""rbowen@apache.org"", ""date"": ""2021-07-09T12:26:10Z""}}"
268,SubmitCommit,2021-07-09 12:37:26,rbowen,fork_close,"s/freenode/libera/

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891405 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e9433355e2794365210b5a8afa94b1b7c72064c1"", ""author"": {""name"": ""Rich Bowen"", ""email"": ""rbowen@apache.org"", ""date"": ""2021-07-09T12:37:26Z""}, ""committer"": {""name"": ""Rich Bowen"", ""email"": ""rbowen@apache.org"", ""date"": ""2021-07-09T12:37:26Z""}}"
268,SubmitCommit,2021-07-12 08:04:51,Stefan Eissing,fork_close,"Merge: /httpd/httpd/trunk:r1891470

  *) mod_md: fixed a potential null pointer dereference if ACME/OCSP
     server returned 2xx responses without content type. Reported by chuangwen.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891471 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c0e971242e9843608fab080d4668be5a770fb3af"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-12T08:04:51Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-12T08:04:51Z""}}"
268,SubmitCommit,2021-07-20 13:07:54,Stefan Eissing,fork_close,"Merged /httpd/httpd/trunk:r1891683

  *) mod_md:
     - Domain names in `<MDomain ...>` can now appear in quoted form.
     - Fixed a failure in ACME challenge selection that aborted further searches
       when the tls-alpn-01 method did not seem to be suitable.
     - Changed the tls-alpn-01 setup to only become unsuitable when none of the
       dns names showed support for a configured 'Protocols ... acme-tls/1'. This
       allows use of tls-alpn-01 for dns names that are not mapped to a VirtualHost.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891685 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0244d12ca3c9fe0f698ebeb6a1a9522a61f046d2"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-20T13:07:54Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-20T13:07:54Z""}}"
268,SubmitCommit,2021-07-20 15:04:30,rpluem,fork_close,"Merge r1891496 from trunk:

* Get a full backtrace
Submitted by: rpluem
Reviewed by: rpluem (CTR)


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891688 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""42b44ca56416d24b5730f501ce1fbcdd0d6b59af"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-07-20T15:04:30Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-07-20T15:04:30Z""}}"
268,SubmitCommit,2021-07-20 16:33:59,ylavic,fork_close,"Trigger ci.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891691 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""aaeb994a69146f0c2940303a6d5a85baf666a79f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-20T16:33:59Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-20T16:33:59Z""}}"
268,SubmitCommit,2021-07-22 17:35:21,ylavic,fork_close,"Propose [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891730 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""de1c04f590b9f61013efddc9a4d7edcff6a6fc9a"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T17:35:21Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T17:35:21Z""}}"
268,SubmitCommit,2021-07-22 17:38:27,ylavic,fork_close,"Update CHANGES [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891731 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""33846f8ca4f14b8243f70f86fe6a1d0ecbed7351"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T17:38:27Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T17:38:27Z""}}"
268,SubmitCommit,2021-07-22 18:16:52,ylavic,fork_close,"Propose fix for PRs 65419 and 65429.  [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891732 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""98f424565dd66d79d74ca8ac2cfb445f29d73ade"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T18:16:52Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T18:16:52Z""}}"
268,SubmitCommit,2021-07-22 18:25:17,ylavic,fork_close,"Vote [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891733 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f6b71691756612438fba1b2bb050825c7b5984d6"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T18:25:17Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T18:25:17Z""}}"
268,SubmitCommit,2021-07-22 18:40:46,ylavic,fork_close,"CHANGES entries now included in the patches [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891734 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2f1d2a8b38f04f10a82b088b796fec6db70f9307"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T18:40:46Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T18:40:46Z""}}"
268,SubmitCommit,2021-07-22 21:12:13,ylavic,fork_close,"Add missing commit into 2.4.x-bz_65419+65429-v2.patch [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891738 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1da084061590c0c7cdd7d3b142640354ac4c8df0"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T21:12:13Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T21:12:13Z""}}"
268,SubmitCommit,2021-07-22 21:23:00,ylavic,fork_close,"Update patch command too [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891739 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""370da143a988fe0e866c04391114f1055e79a79e"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T21:23:00Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-07-22T21:23:00Z""}}"
268,SubmitCommit,2021-07-26 11:57:10,notroj,fork_close,"Review note. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891807 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e3f82e6c32c15b1ab7a405377058893461e6ea5c"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-07-26T11:57:10Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-07-26T11:57:10Z""}}"
268,SubmitCommit,2021-07-26 13:58:44,jfclere,fork_close,"correct a proposal and vote another one [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891810 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4db416db14c203b49bdbc846fde3a6fce7a284f1"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-26T13:58:44Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-07-26T13:58:44Z""}}"
268,SubmitCommit,2021-07-28 15:31:35,Christophe Jaillet,fork_close,"Easy proposals

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891857 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f0da8dbc05720b97fba082b42a2fe30320fc407c"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-07-28T15:31:35Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-07-28T15:31:35Z""}}"
268,SubmitCommit,2021-07-31 13:56:49,Stefan Eissing,fork_close,"Backport proposal for core hook child_stopping. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891920 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""634d69f8c2773c551179c668ef0f32732900221a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-31T13:56:49Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-31T13:56:49Z""}}"
268,SubmitCommit,2021-07-31 14:15:21,Stefan Eissing,fork_close,"vote. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891921 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""96bcde6811af3bebfcc233035de1063eac49f058"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-31T14:15:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-31T14:15:21Z""}}"
268,SubmitCommit,2021-07-31 14:17:04,Stefan Eissing,fork_close,"vote and promote. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891922 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""28004788daf4ba708068f208e07c05908cd85577"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-31T14:17:04Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-31T14:17:04Z""}}"
268,SubmitCommit,2021-07-31 14:18:18,Stefan Eissing,fork_close,"feedback [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1891923 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e1f209f6f62b6c8ba6e8faa958021d499e1ec269"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-31T14:18:18Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-07-31T14:18:18Z""}}"
268,SubmitCommit,2021-08-04 11:50:08,covener,fork_close,"propose
[skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892013 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c20864c42a523fb68d4f702bfbce895882683849"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-04T11:50:08Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-04T11:50:08Z""}}"
268,SubmitCommit,2021-08-04 11:52:52,covener,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892014 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2981baafef219761fd880142ef3a95a8b7ae6596"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-04T11:52:52Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-04T11:52:52Z""}}"
268,SubmitCommit,2021-08-06 13:12:21,covener,fork_close,"propose [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892039 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""314a6bec0cb0883e254def8ba2d0b69816266823"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-06T13:12:21Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-06T13:12:21Z""}}"
268,SubmitCommit,2021-08-06 14:06:11,jimjag,fork_close,"votes



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892040 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7532e21f6227f46a75109a6b40c4b7e2a27c8633"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2021-08-06T14:06:11Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2021-08-06T14:06:11Z""}}"
268,SubmitCommit,2021-08-07 10:43:50,covener,fork_close,"add a revision from review [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892064 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7c81aba3aa5e2952f5cdcbbb6617fae1d383bcfb"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-07T10:43:50Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-07T10:43:50Z""}}"
268,SubmitCommit,2021-08-10 08:08:12,Stefan Eissing,fork_close,"Merge of 1891716-1891719,1891721,1891724,1891726-1891728 from trunk:

  *) mpm_event: Fix graceful stop/restart of children processes if connections
     are in lingering close for too long.  [Yann Ylavic]



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892159 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""424360b5dc9ec1c40c268208cdd8a2d83c7140bb"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:08:12Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:08:12Z""}}"
268,SubmitCommit,2021-08-10 08:08:54,Stefan Eissing,fork_close,"update after merge [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892160 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8dc8b50fe67111c2f18a3842fc25d0183061638c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:08:54Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:08:54Z""}}"
268,SubmitCommit,2021-08-10 08:27:18,Stefan Eissing,fork_close,"Merged /httpd/httpd/trunk:r1879074-1879080,1879094-1879095,1879110-1879112,1879114,1879116-1879117,1879137,1879144-1879145,1879147,1879149,1879235,1879360

back port the mapping=servlet proxy logic.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892161 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6a5d3e006b8dc8aca1a267a8607864e1c3607f61"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:27:18Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:27:18Z""}}"
268,SubmitCommit,2021-08-10 08:27:47,Stefan Eissing,fork_close,"update after backport [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892162 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cb966e27a434ccb993a5a3df3a98f351558faffa"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:27:47Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:27:47Z""}}"
268,SubmitCommit,2021-08-10 08:32:35,Stefan Eissing,fork_close,"  *) mod_proxy: Fix icomplete initialization of BalancerMember(s) from the
                balancer-manager, which can lead to a crash.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892165 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e04c7b15eecbc889a6a3c8060709ebd020d0a571"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:32:35Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:32:35Z""}}"
268,SubmitCommit,2021-08-10 08:32:57,Stefan Eissing,fork_close,"update after merge [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892166 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""9e4807464b8c28ddc4c6e0a9f7bc91ceb6875e7d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:32:57Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:32:57Z""}}"
268,SubmitCommit,2021-08-10 08:43:11,Stefan Eissing,fork_close,"Merged r1891919 from trunk:

  *) core: add hook child_stopping hook that gets called when the MPM is stopping a
     child process. The additional graceful parameter allows registered hooks
     to free resources early during a graceful shutdown.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892167 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cb5c366792b9effecbdee6da3a6de43948153d8e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:43:11Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:43:11Z""}}"
268,SubmitCommit,2021-08-10 08:43:32,Stefan Eissing,fork_close,"update after merge [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892168 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ae4ec3086b81fe2a90fda6e0bfd30085f00ec867"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:43:32Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:43:32Z""}}"
268,SubmitCommit,2021-08-10 08:51:33,Stefan Eissing,fork_close,"moving accepted patch into other section


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892169 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b2b6b898adeb4cd14b1051469f707585be22f1c2"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:51:33Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:51:33Z""}}"
268,SubmitCommit,2021-08-10 08:54:55,Stefan Eissing,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892170 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""89a1764b164b2d8075b148813fb9968856bc0e95"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:54:55Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:54:55Z""}}"
268,SubmitCommit,2021-08-10 08:55:54,Stefan Eissing,fork_close,"Merged r1892012 from trunk:

  *) core: fix ap_escape_quotes for pre-escaped quotes



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892171 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c69d4cc90c0e27703030b3ff09f91bf4dcbcfd51"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:55:54Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:55:54Z""}}"
268,SubmitCommit,2021-08-10 08:59:17,Stefan Eissing,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892172 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6772035da57ee6a4ed9e82d42ecbcd2a40d7c65a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:59:17Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:59:17Z""}}"
268,SubmitCommit,2021-08-10 08:59:48,Stefan Eissing,fork_close,"Merge of 1892038,1892063 from trunk:

  *) core: avoid signed integer overflow under fuzzing in
     ap_timeout_parameter_parse



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892173 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""79a84dcf65c45ef00c9d20bdb8b88809bbae1b85"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:59:48Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T08:59:48Z""}}"
268,SubmitCommit,2021-08-10 09:00:15,Stefan Eissing,fork_close,"update after merges. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892174 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""58f76e82381103db4ec249e3e5881c0fa63f04ba"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T09:00:15Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-10T09:00:15Z""}}"
268,SubmitCommit,2021-08-10 09:40:53,jfclere,fork_close,"update (fix) my back port proposal) [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892175 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fe3d4afca19e6cd265bd43e84e9887a6a2660213"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-08-10T09:40:53Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-08-10T09:40:53Z""}}"
268,SubmitCommit,2021-08-10 18:54:53,covener,fork_close,"propose [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892186 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""29a0ca28eecd6a52581628c186a3e9d606c7d97e"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-10T18:54:53Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-10T18:54:53Z""}}"
268,SubmitCommit,2021-08-10 20:38:37,Christophe Jaillet,fork_close,"Vote

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892194 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5c4b76e4a79838370b5adb1aab58bd83e998fc86"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-08-10T20:38:37Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-08-10T20:38:37Z""}}"
268,SubmitCommit,2021-08-11 10:50:43,covener,fork_close,"add apr15 compat [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892208 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7bf39ef5c616e88ac712533b6cb8a56a1f10e16e"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-11T10:50:43Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-11T10:50:43Z""}}"
268,SubmitCommit,2021-08-16 08:21:04,Stefan Eissing,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892357 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""de7104cff69afc20ce159f89bdb6aead595928ff"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-16T08:21:04Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-16T08:21:04Z""}}"
268,SubmitCommit,2021-08-16 11:57:35,minfrin,fork_close,"Update MMN.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892370 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""dfb06aa18366c4176796735a7288c4ab18e47b48"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-16T11:57:35Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-16T11:57:35Z""}}"
268,SubmitCommit,2021-08-16 13:15:28,notroj,fork_close,"Vote. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892375 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c38aad5351f0a113ac2ece015f276791832f8fe7"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-08-16T13:15:28Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-08-16T13:15:28Z""}}"
268,SubmitCommit,2021-08-16 14:03:04,jimjag,fork_close,"Cast some votes!



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892378 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""9be3b39a2f5560181c26ae0a175a5c97f3aa68f8"", ""author"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2021-08-16T14:03:04Z""}, ""committer"": {""name"": ""Jim Jagielski"", ""email"": ""jim@apache.org"", ""date"": ""2021-08-16T14:03:04Z""}}"
268,SubmitCommit,2021-08-16 14:30:06,Stefan Eissing,fork_close,"Merge 1892185,1892207 from trunk:

 *) core: ap_timeout_parameter_parse UBI fuzz fix followup



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892380 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""180ef6455b3bd9764b04109dba9bc8d7d69ddb59"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-16T14:30:06Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-16T14:30:06Z""}}"
268,SubmitCommit,2021-08-16 14:30:57,Stefan Eissing,fork_close,"update after merge. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892381 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""864a3dba54fc8f312c9900901d1cda101e5d913b"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-16T14:30:57Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-16T14:30:57Z""}}"
268,SubmitCommit,2021-08-18 14:52:08,covener,fork_close,"propose [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892421 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""79e2c4b31020829a9690fd7fe8d039d6fbff6072"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-18T14:52:08Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-08-18T14:52:08Z""}}"
268,SubmitCommit,2021-08-18 15:24:49,rpluem,fork_close,"* Vote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892424 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""16f9be4703d1e6b0771ab4b738d63ce65f09f7f7"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-08-18T15:24:49Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-08-18T15:24:49Z""}}"
268,SubmitCommit,2021-08-20 10:13:54,ylavic,fork_close,"Vote, promote [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892469 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""71b47d3b9a5f81658b33f509593c42f11c2f6b67"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-20T10:13:54Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-20T10:13:54Z""}}"
268,SubmitCommit,2021-08-21 14:18:25,Lucien Gentis,fork_close,"fr doc XML files updates.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892493 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4fa7501bc872bb89e4a4c8e7e67200ef564e4635"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-08-21T14:18:25Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-08-21T14:18:25Z""}}"
268,SubmitCommit,2021-08-21 14:19:31,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892494 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b7af2a9b6c6a06abbdf51f2558a21306b253bf63"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-08-21T14:19:31Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-08-21T14:19:31Z""}}"
268,SubmitCommit,2021-08-21 21:30:47,minfrin,fork_close,"Backport:

  *) Easy patches: synch 2.4.x and trunk
         - mod_auth_basic: Use ap_cstr_casecmp instead of strcasecmp.
         - mod_ldap: log and abort locking errors.
         - mod_ldap: style fix for r1831165
         - mod_ldap: build break fix for r1831165
      --> These 3 commits are preparation work for backporting r1856735
         - mod_deflate: Avoid hard-coded ""%ld"" format strings in mod_deflate's logging statements
         - mod_deflate: Use apr_uint64_t instead of uint64_t (follow up to r1849590)
         - mod_forensic: Follow up to r1856490: missing one mod_log_forensic test_char_table case.
                         (r1856490 has been backported in r1870261)
         - mod_rewrite: Save a few cycles.
         - mod_request: Fix a comment (missing '_' in 'keep_body') and some style issues
         - core: remove extra whitespace in HTTP_NOT_IMPLEMENTED
     trunk patch:
          https://svn.apache.org/r1817063
          https://svn.apache.org/r1831165
          https://svn.apache.org/r1831171
          https://svn.apache.org/r1831172
          https://svn.apache.org/r1849590
          https://svn.apache.org/r1849630
          https://svn.apache.org/r1856491
          https://svn.apache.org/r1883421
          https://svn.apache.org/r1889327
          https://svn.apache.org/r1891200
     2.4.x patch: svn merge -c 1817063,1831165,1831171,1831172,1849590,1849630,1856491,1883421,1889327,1891200 ^/httpd/httpd/trunk .
     +1: jailletc36, covener, jim
     icing: I have trouble running the svn merge due to conflicts in CHANGES and
            the infamous log tags. Do you have a patch or a PR to use for checking?
     covener: on faith



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892510 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c795f1c736e738281bd5e90503d5cc0b759d1c12"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T21:30:47Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T21:30:47Z""}}"
268,SubmitCommit,2021-08-21 21:35:04,minfrin,fork_close,"Backport:

   *) core: fix ap_escape_quotes substitution logic
      trunk patch: https://svn.apache.org/r1892418
      2.4.x patch: svn merge -c 1892418 ^/httpd/httpd/trunk .
      +1: covener, rpluem, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892511 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ac62c7e7436560cf4f7725ee586364ce95c07804"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T21:35:04Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T21:35:04Z""}}"
268,SubmitCommit,2021-08-21 22:47:34,minfrin,fork_close,"Backport:

  *) Add dav_get_provider(), dav_open_lockdb(), dav_close_lockdb() and
     dav_get_resource() to mod_dav.h.
     trunk patch: http://svn.apache.org/r1879305
                  http://svn.apache.org/r1879466
     2.4.x patch: https://svn.apache.org/repos/asf/httpd/httpd/patches/2.4.x/httpd-2.4-dav-functions6.patch
     +1: minfrin, jim, ylavic (by inspection)



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892512 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6f73993e1c560c6b83c06547030f103084cb97d8"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T22:47:34Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T22:47:34Z""}}"
268,SubmitCommit,2021-08-21 22:52:29,minfrin,fork_close,"Backport:

  *) Add hooks deliver_report and gather_reports to mod_dav.h. Allows other
     modules apart from versioning implementations to handle the REPORT method.
     trunk patch: http://svn.apache.org/r1879339
                  http://svn.apache.org/r1879307
     2.4.x patch: https://svn.apache.org/repos/asf/httpd/httpd/patches/2.4.x/httpd-2.4-dav-hooks1.patch
     +1: minfrin, jim, ylavic (by inspection)



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892513 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""532be2d24410796a2747a5f7b3784d9b72894f3d"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T22:52:29Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T22:52:29Z""}}"
268,SubmitCommit,2021-08-21 22:55:47,minfrin,fork_close,"Backport:

  *) mod_dav: Add method_precondition hook. WebDAV extensions define
     conditions that must exist before a WebDAV method can be executed.
     This hook allows a WebDAV extension to verify these preconditions.
     trunk patch: http://svn.apache.org/r1879339
                  http://svn.apache.org/r1879340
     2.4.x patch: https://svn.apache.org/repos/asf/httpd/httpd/patches/2.4.x/httpd-2.4-dav-preconditions1.patch
     +1: minfrin, jim, ylavic (by inspection)



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892514 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c7c1f3905cfb9b307fef1671eeeb144b3aecc345"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T22:55:47Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-21T22:55:47Z""}}"
268,SubmitCommit,2021-08-22 09:49:30,minfrin,fork_close,"Vote and promote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892521 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fbf6c7948a6cccb135fdc240ebb32c412eb3099f"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T09:49:30Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T09:49:30Z""}}"
268,SubmitCommit,2021-08-22 09:51:33,minfrin,fork_close,"Backport:

  *) back port the add of balancer_manage in mod_proxy_balancer.
     trunk patch: http://svn.apache.org/r1859235
                  http://svn.apache.org/r1887176
                  http://svn.apache.org/r1887359
                  http://svn.apache.org/r1887144
     Backport version for 2.4.x of patch:
          https://people.apache.org/~jfclere/patches/patch.210810.txt
     +1: jfclere, jim, minfrin



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892522 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""21ee1a7dbfc76b1bb8f6ce9dc4f8e49b2bea9a94"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T09:51:33Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T09:51:33Z""}}"
268,SubmitCommit,2021-08-22 10:00:00,minfrin,fork_close,"Vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892523 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a9c22fa03283e0da0ed8ea3c87f74fcbf8162ebe"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T10:00:00Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T10:00:00Z""}}"
268,SubmitCommit,2021-08-22 10:18:40,minfrin,fork_close,"Vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892524 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f41ac38fe3ac87d4facee6bc57add1ca3bf4d088"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T10:18:40Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T10:18:40Z""}}"
268,SubmitCommit,2021-08-22 10:30:48,minfrin,fork_close,"Vote.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892525 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""066b7cd5cdf8eedc084b939948f21bda512f7ccb"", ""author"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T10:30:48Z""}, ""committer"": {""name"": ""Graham Leggett"", ""email"": ""minfrin@apache.org"", ""date"": ""2021-08-22T10:30:48Z""}}"
268,SubmitCommit,2021-08-24 12:23:34,Stefan Eissing,fork_close,"vote and promote. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892568 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2d40f1203c06129e4e71a4c675cc1d5f87b1db42"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-24T12:23:34Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-24T12:23:34Z""}}"
268,SubmitCommit,2021-08-24 12:44:28,ylavic,fork_close,"Merge r1891206, r1891216, r1891284 from trunk:

mod_proxy: Fix possible reuse/merging of Proxy(Pass)Match workers.  PR 65419.

We can't truncate ProxyMatch's worker name/url to the first '$' substitution
without possibly colliding with other workers. This also makes the matching
done at runtime by ap_proxy_strcmp_ematch() completely pointless.

To fix this and still address r1878467 (i.e. make http://host:port$1 a ""valid""
URL), we need to remove '$' substitutions from the :port part of the URL only
since it's allowed anywhere else by apr_uri_parse().

So let's strip them before apr_uri_parse() and prepend them back in the path
before apr_uri_unparse() to restore the original URL. Non-matchable workers are
not concerned so ap_proxy_define_worker() is made a local helper (w/o the ap_
prefix) which takes ""matchable"" as argument and can then be called by both
ap_proxy_define_[match_]worker() functions.


mod_proxy: Follow up to r1891206: fix UDS scheme.


mod_proxy: Avoid confusion of prefix/regex matching workers at loading.  PR 65429.

ap_proxy_get_worker() needs to know whether it should lookup for prefix or
match or both matching workers, depending on the context.

For instance <Proxy[Match]> or ProxyPass[Match] directives need to lookup for
an existing worker with the same type as the directive (*Match or not), because
they will define one with that matching type if none exists.

On the contrary, ""ProxySet <url>"" at load time or ap_proxy_pre_request() at run
time need to find a worker matching an url whether it's by prefix or by regex.

So this commit adds ap_proxy_get_worker_ex() which takes a bitmask for the
matching type and calls it appropriately where needed.

For consistency, ap_proxy_define_worker_ex() is also added, using the same
bitmask flags, deprecating ap_proxy_define_match_worker().

Follow up to r1891206.


Github: closes #261

Submitted by: ylavic
Reviewed by: ylavic, minfrin, icing


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892569 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""be99f85dba9a0b1993bec3f0dcf3b28732cea03c"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-24T12:44:28Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-24T12:44:28Z""}}"
268,SubmitCommit,2021-08-24 12:45:12,ylavic,fork_close,"Backported [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892570 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c9037680a1d4f8116675355c3d12d53d40e57f33"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-24T12:45:12Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-24T12:45:12Z""}}"
268,SubmitCommit,2021-08-24 13:05:01,ylavic,fork_close,"Trigger ci.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892572 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ec6362a2ca5ddb9701bec3544b30170d25c6e04e"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-24T13:05:01Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-24T13:05:01Z""}}"
268,SubmitCommit,2021-08-30 10:21:55,Stefan Eissing,fork_close,"propose for backport. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892730 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e9e23fb6e67952dbe7c01c51e10864636d5a4d29"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-30T10:21:55Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-08-30T10:21:55Z""}}"
268,SubmitCommit,2021-08-30 16:47:22,ylavic,fork_close,"Vote [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892736 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2771e1d06342fd7cff2f93bcc74ca36e9bcf39ec"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-30T16:47:22Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-08-30T16:47:22Z""}}"
268,SubmitCommit,2021-09-01 13:22:19,Stefan Eissing,fork_close,"Merge r1892782 from trunk:

  * mod_md: Certificate/keys pairs are verified as matching before a renewal is accepted
    as successful or a staged renewal is replacing the existing certificates.
    This avoid potential mess ups in the md store file system to render the active
    certificates non-working. [@mkauf]



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892783 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""569bf29a287b60b978ff27702e1376d23fcaf1fc"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-01T13:22:19Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-01T13:22:19Z""}}"
268,SubmitCommit,2021-09-02 11:18:21,Stefan Eissing,fork_close,"adding `dist` to ignored directories


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892810 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""65fcb0194c86f34705bc11598bb6d8ede12cc0a2"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-02T11:18:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-02T11:18:21Z""}}"
268,SubmitCommit,2021-09-03 08:14:02,nilgun,fork_close,"update transformations. 

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892842 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b15b9a5902884a4eccf603b1a85c2c884bbc73e3"", ""author"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-09-03T08:14:02Z""}, ""committer"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-09-03T08:14:02Z""}}"
268,SubmitCommit,2021-09-03 08:33:22,notroj,fork_close,"Merge r1892841, r1892845 from trunk:

Adjust Travis conditions for candidate-2.4.x tags.

Second attempt at updating the Travis conditions to work properly
for candidate-2.4.x branches, and add a mini test script for the
conditions.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892846 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5f128f4becddaba748914ccd83da28745df20c82"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-03T08:33:22Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-03T08:33:22Z""}}"
268,SubmitCommit,2021-09-03 09:57:25,nilgun,fork_close,"update for sync with English docs.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892848 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f2716648d36061d1c83d73b7f941bdf735bae6d3"", ""author"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-09-03T09:57:25Z""}, ""committer"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-09-03T09:57:25Z""}}"
268,SubmitCommit,2021-09-03 09:57:42,nilgun,fork_close,"update transformations. 

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892849 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ee9766a49d567423caa712a839e77d4c56098059"", ""author"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-09-03T09:57:42Z""}, ""committer"": {""name"": ""Nilgun Belma Buguner"", ""email"": ""nilgun@apache.org"", ""date"": ""2021-09-03T09:57:42Z""}}"
268,SubmitCommit,2021-09-03 10:19:23,notroj,fork_close,"Two reviews. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892850 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ee0a3e6dc582c74767b5e9676fb3b5c7b1adeed7"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-03T10:19:23Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-03T10:19:23Z""}}"
268,SubmitCommit,2021-09-03 12:06:19,ylavic,fork_close,"Propose the fix for PRs 65521 and 65519, as showstopper.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892855 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2e30f1c8bce0f4a16cbd6f48695da33907fc0708"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T12:06:19Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T12:06:19Z""}}"
268,SubmitCommit,2021-09-03 12:08:09,ylavic,fork_close,"Those are ready to backport [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892856 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6b12505c31d476e69a9589022275d352762a7384"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T12:08:09Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T12:08:09Z""}}"
268,SubmitCommit,2021-09-03 12:17:20,ylavic,fork_close,"Propose [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892857 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""57d17e80546e9cc87ff1fea8f9a9dddbdd7ffb26"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T12:17:20Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T12:17:20Z""}}"
268,SubmitCommit,2021-09-03 12:18:15,ylavic,fork_close,"Fix backport command [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892858 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2d1ae4bab8d1cd9bbdb44f0a6b6ec5910bea6e42"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T12:18:15Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T12:18:15Z""}}"
268,SubmitCommit,2021-09-03 12:22:09,covener,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892859 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e8a2d51316b933231a93f674bfbe135d362a8476"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-03T12:22:09Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-03T12:22:09Z""}}"
268,SubmitCommit,2021-09-03 12:31:47,rpluem,fork_close,"* Vote and promote

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892860 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f259820efc1f12041f1cc2493f7da94f5dc5d517"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-03T12:31:47Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-03T12:31:47Z""}}"
268,SubmitCommit,2021-09-03 13:22:43,Stefan Eissing,fork_close,"proposing r1892599 for backport. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892868 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""08cb85cd0399abdff38a34c9f700158b7bb73691"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-03T13:22:43Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-03T13:22:43Z""}}"
268,SubmitCommit,2021-09-03 13:28:01,Stefan Eissing,fork_close,"Merge of r1890693,r1890696 from trunk:

mod_ssl: tighten the handling of ALPN for outgoing (proxy)
     connections. If ALPN protocols are provided and sent to the
     remote server, the received protocol selected is inspected
     and checked for a match. Without match, the peer handshake
     fails.
     An exception is the proposal of ""http/1.1"" where it is
     accepted if the remote server did not answer ALPN with
     a selected protocol. This accomodates for hosts that do
     not observe/support ALPN and speak http/1.x be default.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892869 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7e2e41a4215c9e2a0f20da8859c1e89af2e1c5d7"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-03T13:28:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-03T13:28:01Z""}}"
268,SubmitCommit,2021-09-03 13:28:26,Stefan Eissing,fork_close,"update after backport [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892870 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e44a42ebfcbf139a92e38962aded14758f39c00c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-03T13:28:26Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-03T13:28:26Z""}}"
268,SubmitCommit,2021-09-03 13:41:42,notroj,fork_close,"Vote, [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892871 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2d0518129697d2631e1126bfb0cb0189372ccf65"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-03T13:41:42Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-03T13:41:42Z""}}"
268,SubmitCommit,2021-09-03 16:49:01,ylavic,fork_close,"Vote, promote [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892872 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d925a629dc972578e0dec50a6cbdcf7875eb24ee"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T16:49:01Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T16:49:01Z""}}"
268,SubmitCommit,2021-09-03 16:50:33,ylavic,fork_close,"Merge r1892728 from trunk:

 * mod_deflate: refrain from reading buckets of known length, just
   to get their length. This may transform buckets unwanted (e.g. file
   to mmap) and prevent optimization down the filter chain.


Submitted by: icing
Reviewed by: icing, ylavic, jorton


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892873 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0ae75f345309a0d42cd906b5a69fefc47fbf5d7f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T16:50:33Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T16:50:33Z""}}"
268,SubmitCommit,2021-09-03 16:52:38,ylavic,fork_close,"Merge r1892814, r1892853 from trunk:

mod_proxy: Faster unix socket path parsing in the ""proxy:"" URL.

The actual r->filename format is ""[proxy:]unix:path|url"" for UDS, no need to
strstr(,""unix:"") since it's at the start of the string.


mod_proxy: Follow up to r1892814.

Save some few cycles in ap_proxy_de_socketfy() too.


Submitted by: ylavic
Reviewed by: ylavic, covener, rpluem


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892874 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""496c863776c68bd08cdbeb7d8fa5935ba63b76c2"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T16:52:38Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T16:52:38Z""}}"
268,SubmitCommit,2021-09-03 17:00:07,ylavic,fork_close,"Merge r1892805 from trunk:

mod_proxy_uwsgi: Fix PATH_INFO setting for generic worker.

When the generic ""proxy:reverse"" worker is selected for an uwsgi scheme, the
worker name is irrelevant so uwscgi_handler() should point to the PATH_INFO
directly from the given URL.


Submitted by: ylavic
Reviewed by: ylavic, covener, rpluem


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892875 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6d9672bf096592fe16c1840f73fa947fd458ee68"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T17:00:07Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T17:00:07Z""}}"
268,SubmitCommit,2021-09-03 17:01:29,ylavic,fork_close,"Merge r1892599 from trunk:

mod_http2: fixes a use-after-read of an integer value when
   passing a stream identifier for further IO checking. A
   non-issue since an int value matching no active stream
   will lead to no action.


Submitted by: icing
Reviewed by: icing, jorton, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892876 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2fa30bf37c0a82c508ad8a4505556f82be001101"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T17:01:29Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T17:01:29Z""}}"
268,SubmitCommit,2021-09-03 17:02:30,ylavic,fork_close,"All backported [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892877 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d12030026762fc5f5f2b1e2bf3fe3eef628fc3ae"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T17:02:30Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T17:02:30Z""}}"
268,SubmitCommit,2021-09-03 17:05:12,ylavic,fork_close,"Sync CHANGES [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892878 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ce0f4bcb8fae8966425723a1fa6fd291f36c9d42"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T17:05:12Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-03T17:05:12Z""}}"
268,SubmitCommit,2021-09-04 17:20:54,Christophe Jaillet,fork_close,"Add an alternate syntax for <!-- comment ... -->
PR 65546

r1892902 in trunk

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892903 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""aeed805f01564641ae670e3da79abd1137a2fde9"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-09-04T17:20:54Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-09-04T17:20:54Z""}}"
268,SubmitCommit,2021-09-05 06:03:22,Christophe Jaillet,fork_close,"propose

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892916 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""08ef9db4d9b4cdf633d518f36e31e57d928adffd"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-09-05T06:03:22Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-09-05T06:03:22Z""}}"
268,SubmitCommit,2021-09-05 11:13:29,Christophe Jaillet,fork_close,"Propose what looks like a good backport candidate.

[skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892930 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2fde0e49cd2cb909609b36299cd8aa13e635484a"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-09-05T11:13:29Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-09-05T11:13:29Z""}}"
268,SubmitCommit,2021-09-06 07:42:34,Stefan Eissing,fork_close,"assuming Christophe is for the backport he proposed. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892963 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""37cea45c5c3a8d3b1cfd5aabe9726c1ae6bd617f"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-06T07:42:34Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-06T07:42:34Z""}}"
268,SubmitCommit,2021-09-06 07:59:06,Stefan Eissing,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892964 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""51c62aa00dc8005af6ce86ca935168e416e623f6"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-06T07:59:06Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-06T07:59:06Z""}}"
268,SubmitCommit,2021-09-06 08:08:53,notroj,fork_close,"Votes. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892965 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""9fc5877390d0a9c0f9e552e08df0d165d73944af"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-06T08:08:53Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-06T08:08:53Z""}}"
268,SubmitCommit,2021-09-06 08:10:31,Stefan Eissing,fork_close,"vote and promote. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892966 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6019693dee4279792a47f6708670f5cf3200ba6b"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-06T08:10:31Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-06T08:10:31Z""}}"
268,SubmitCommit,2021-09-06 08:14:01,Stefan Eissing,fork_close,"vote and promote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892967 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""771bc81cd94d2c419d152779a0c76b3a5f2ecce6"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-06T08:14:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-06T08:14:01Z""}}"
268,SubmitCommit,2021-09-06 08:34:19,ylavic,fork_close,"Merge r1892740, r1892851 from trunk:

mod_proxy: Fix potential tunneling infinite loop and spurious timeout.
           PRs 65521 and 65519.

* modules/proxy/proxy_util.c(ap_proxy_tunnel_run):
  Avoid an infinite loop by shutting down the connection for write when poll()
  returns POLLHUP and read is already down.  PR 65521.

* modules/proxy/proxy_util.c(ap_proxy_tunnel_run):
  When write completion is finished don't check for ap_filter_input_pending()
  before proxy_tunnel_forward() to flush input data, this is a nonblocking read
  already which will do the same thing implicitely. ap_filter_input_pending()
  is broken in 2.4.x without the whole pending data mechanism (not backported
  yet), so let's align here.  PR 65519.


mod_proxy: Follow up to r1892740.

Really remove the old ap_filter_input_pending() handling forgotten by r1892740.


Submitted by: ylavic
Reviewed by: ylavic, covener, jorton


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892971 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4ef2a7fcff9258bce2eb21a1f5b9f7481286308c"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T08:34:19Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T08:34:19Z""}}"
268,SubmitCommit,2021-09-06 08:47:57,rpluem,fork_close,"* As stated on list, Christophe did not vote for it, but I do and hence we stay here [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892972 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8c970a7542679255949f4952355c68010ae1a812"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T08:47:57Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T08:47:57Z""}}"
268,SubmitCommit,2021-09-06 10:00:21,ylavic,fork_close,"Backported [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892976 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4c43d1cc83d7ea013c681081ebfb11107a0d5a34"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:00:21Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:00:21Z""}}"
268,SubmitCommit,2021-09-06 10:01:02,ylavic,fork_close,"Just in case :) [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892977 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8f4f6f624e906b76f2d9a8a579aac87fe5336b62"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:01:02Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:01:02Z""}}"
268,SubmitCommit,2021-09-06 10:03:06,ylavic,fork_close,"Merge r1890465 from trunk:

mpm_prefork: mask signals during ap_run_child_init().

This prevents threads potentially created from the child_init hooks (e.g.
mod_watchdog workers) to catch signals needed by the MPM, like here:
https://travis-ci.com/github/apache/httpd/jobs/510821148#L5356.

Submitted by: ylavic
Reviewed by: jorton, icing, rpluem, ylavic


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892978 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""619f6031f1140a5eb3211e76d9b300b204ee6810"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:03:06Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:03:06Z""}}"
268,SubmitCommit,2021-09-06 10:04:09,ylavic,fork_close,"Backported [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892979 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e900039c6aa73b4be58beb83be0f8cda2ad3fc1e"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:04:09Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:04:09Z""}}"
268,SubmitCommit,2021-09-06 10:17:04,ylavic,fork_close,"Merge r1892914 from trunk:

Revert r1887244 and r1887245 which causes issues on Windows

Submitted by: jailletc36
Reviewed by: jailletc36, icing, jorton


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892980 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""123e27c560044835c81873d86111ccdb7dde5407"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:17:04Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:17:04Z""}}"
268,SubmitCommit,2021-09-06 10:53:04,ylavic,fork_close,"Merge r1892915 from trunk:

Reduce the time window where duplicates may be generated by mod_uniqueid

Submitted by: jailletc36
Reviewed by: jailletc36, jorton, icing


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892982 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1e939238745cc5514dd235e9bcf552bf1bccfe0c"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:53:04Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:53:04Z""}}"
268,SubmitCommit,2021-09-06 10:53:37,ylavic,fork_close,"Sync CHANGES entries [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892983 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""47bb385fdf3d9a9fbf40b23f9f0c546af0eaa3d3"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:53:37Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:53:37Z""}}"
268,SubmitCommit,2021-09-06 10:54:58,ylavic,fork_close,"Backported [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892984 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""9ab418d3d829963b5ae184328a6761a9aab56f14"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:54:58Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-06T10:54:58Z""}}"
268,SubmitCommit,2021-09-06 19:23:46,rpluem,fork_close,"* New proposal [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892994 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""67d8fbce17b0c626bf199b42b5d7e8e06f676e0e"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T19:23:46Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T19:23:46Z""}}"
268,SubmitCommit,2021-09-06 19:33:29,rpluem,fork_close,"* Forgot my +1 [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892995 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2145e197ef5c15219e0192621cf0a3ddf164842d"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T19:33:29Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T19:33:29Z""}}"
268,SubmitCommit,2021-09-06 19:35:10,rpluem,fork_close,"* Propose [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892996 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5294afb047b6849cf6a97a2f97ce9c895ba58f28"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T19:35:10Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T19:35:10Z""}}"
268,SubmitCommit,2021-09-06 19:43:39,rpluem,fork_close,"* Comment [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1892997 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c3e07d87e1c750f5ab1cd21f77cbbc2f0d56f17c"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T19:43:39Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-06T19:43:39Z""}}"
268,SubmitCommit,2021-09-07 01:24:30,ylavic,fork_close,"Vote, propose [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893003 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2316c12d60e093ca69ca3e98d66be44c21e34e7d"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T01:24:30Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T01:24:30Z""}}"
268,SubmitCommit,2021-09-07 02:01:46,ylavic,fork_close,"Update mod_unique_id proposal [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893005 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8114beb395e54edadb9ac5b307ac7f57f5ba9797"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T02:01:46Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T02:01:46Z""}}"
268,SubmitCommit,2021-09-07 06:43:24,notroj,fork_close,"Vote, promote, [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893008 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""c26ab9477e2ec9979045048170cb5bd3a07c28bf"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-07T06:43:24Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2021-09-07T06:43:24Z""}}"
268,SubmitCommit,2021-09-07 09:01:25,ylavic,fork_close,"Axe unused ap_filter_input_pending in 2.4.x. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893012 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""269078a5150d2e835b3dbab673b6a9add063ebf2"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T09:01:25Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T09:01:25Z""}}"
268,SubmitCommit,2021-09-07 09:04:10,Stefan Eissing,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893013 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""addbe6078ca275982c7c0ffa8d4d774e64d368c1"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-07T09:04:10Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-07T09:04:10Z""}}"
268,SubmitCommit,2021-09-07 09:44:27,ylavic,fork_close,"Propose fix for PR 63169. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893015 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b4f46478ad4bf83a3e5a4811e616451e224aa4ca"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T09:44:27Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T09:44:27Z""}}"
268,SubmitCommit,2021-09-07 10:19:53,ylavic,fork_close,"Propose fix for PR 65549. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893017 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""94f298bc8548224ab88d9c567cab47d3762c48f9"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T10:19:53Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T10:19:53Z""}}"
268,SubmitCommit,2021-09-07 11:03:01,covener,fork_close,"propose [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893018 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""704ec8597c0b7a01c6247abb9746a0ae1fea46f9"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-07T11:03:01Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-07T11:03:01Z""}}"
268,SubmitCommit,2021-09-07 13:14:32,ylavic,fork_close,"Vote, propose [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893033 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""76546db9fabc68fedd9010c00c781c1c69e7f285"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T13:14:32Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T13:14:32Z""}}"
268,SubmitCommit,2021-09-07 14:08:24,jfclere,fork_close,"Vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893042 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""adab3528b1990a66c726fcc6802564f5f3e543cd"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-09-07T14:08:24Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@apache.org"", ""date"": ""2021-09-07T14:08:24Z""}}"
268,SubmitCommit,2021-09-07 14:46:21,ylavic,fork_close,"Update proposal (resetting jfclere's vote), promote r1878092. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893046 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""639dfe3ccad3d5af7ec3d2bf0ce29ddc0fca3418"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T14:46:21Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T14:46:21Z""}}"
268,SubmitCommit,2021-09-07 16:05:31,ylavic,fork_close,"Merge r1878092 from trunk:

Fix a NULL pointer dereference

* server/scoreboard.c (ap_increment_counts): In certain cases like certain
  invalid requests r->method might be NULL here. r->method_number defaults
  to M_GET and hence is M_GET in these cases.

Submitted by: rpluem
Reviewed by: covener, ylavic, jfclere


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893051 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""fa7b2a5250e54363b3a6c8ac3aaa7de4e8da9b2e"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T16:05:31Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T16:05:31Z""}}"
268,SubmitCommit,2021-09-07 17:13:11,covener,fork_close,"vote/promote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893062 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e0c7c8ce64460fd778b19e3ca47716412fad72c9"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-07T17:13:11Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-07T17:13:11Z""}}"
268,SubmitCommit,2021-09-07 20:17:36,ylavic,fork_close,"Add logging (r1893073) to the fix for PR 63169 (keeping Eric's vote). [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893074 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""db76b519c09cc691b3533f8de3e8f44c5504c044"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T20:17:36Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-07T20:17:36Z""}}"
268,SubmitCommit,2021-09-08 06:50:31,rpluem,fork_close,"* Vote and promote

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893098 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2eb09e65239060d561abb0b1d61c83e56e5f54aa"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T06:50:31Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T06:50:31Z""}}"
268,SubmitCommit,2021-09-08 06:55:40,rpluem,fork_close,"Merge r1869842 from trunk:

mod_ssl: Log private key material to file set by $SSLKEYLOGFILE in the
environment, using the standard format which can be parsed by (e.g.)
wireshark for decoding SSL/TLS traffic; supported from OpenSSL 1.1.1.

* modules/ssl/ssl_private.h: Add keylog_file to SSLModConfigRec.

* modules/ssl/ssl_engine_init.c (ssl_init_Module): Open log file if
  SSLKEYLOGFILE is set in the environment.
  (ssl_init_ctx_protocol): Register the keylog callback with OpenSSL.

* modules/ssl/ssl_engine_kernel.c (modssl_callback_keylog):
  New function.

PR: 63391
Github: closes #74


Submitted by: jorton
Reviewed by: rpluem, ylavic, jorton

Github: closes #264


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893099 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""092dfece31edf76a104e01050e05efd76819a2c5"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T06:55:40Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T06:55:40Z""}}"
268,SubmitCommit,2021-09-08 06:58:31,rpluem,fork_close,"* Add missing changes entry for r1893099 [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893100 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""84ed9268c3cd58b1ca3ad579820b24ab4a5ddc9d"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T06:58:31Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T06:58:31Z""}}"
268,SubmitCommit,2021-09-08 07:00:09,rpluem,fork_close,"Merge r1892986, r1892987 from trunk:

mod_proxy: Follow up to r1892814.

* modules/proxy/proxy_util.c(fix_uds_filename):
  Sanity checks on the configured UDS path, fail with 500 if invalid since
  continuing through proxy processing wouldn't work as expected.



mod_proxy: Follow up to r1892986: APLOGNO()

Stefan get out of this body! :)


Submitted by: ylavic
Reviewed by: rpluem, ylavic, covener

Github: closes #265


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893101 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d4901cb32133bc0e59ad193a29d1665597080d67"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T07:00:09Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T07:00:09Z""}}"
268,SubmitCommit,2021-09-08 07:23:05,Giovanni Bechis,fork_close,"vote [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893103 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2508b1efa6bb08f8e5f8ed5bcf282b68c1157bf5"", ""author"": {""name"": ""Giovanni Bechis"", ""email"": ""gbechis@apache.org"", ""date"": ""2021-09-08T07:23:05Z""}, ""committer"": {""name"": ""Giovanni Bechis"", ""email"": ""gbechis@apache.org"", ""date"": ""2021-09-08T07:23:05Z""}}"
268,SubmitCommit,2021-09-08 08:12:44,ylavic,fork_close,"Accepted [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893105 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""871fe8869b079602dee9385ba4f53b048a384f6d"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:12:44Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:12:44Z""}}"
268,SubmitCommit,2021-09-08 08:18:37,ylavic,fork_close,"Backported in r1893051 [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893106 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4bb1f0313eff738d0826d515fa726963424435a5"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:18:37Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:18:37Z""}}"
268,SubmitCommit,2021-09-08 08:21:22,ylavic,fork_close,"mod_proxy: Axe unused ap_filter_input_pending in 2.4.x (only) after r1892971.

Submitted by: ylavic
Reviewed by: ylavic, icing,  covener


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893107 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a67c610394964a29171b738beb394bb9e058ed18"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:21:22Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:21:22Z""}}"
268,SubmitCommit,2021-09-08 08:21:54,ylavic,fork_close,"Backported in r1893107. [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893108 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""059a80311121affb0c317c516a929baa8a62153d"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:21:54Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:21:54Z""}}"
268,SubmitCommit,2021-09-08 08:25:29,ylavic,fork_close,"Merge r1893014, r1893073 from trunk:


mpm_event: Fix children processes possibly not stopped on graceful restart.

The number of children spawned can go above active_daemons_limit due to
exponential idle_spawn_rate growth (x 2), enforce the upper limit in
perform_idle_server_maintenance().  PR 63169.

Submitted by: Joel Self <joelself gmail.com>


mpm_event: Follow up to r1893014: log when children are not spawned.

Log at trace1 level when active_daemons >= active_daemons_limit and we won't
spawn children. Reset free_length to avoid negative value in this case too.


Submitted by: ylavic
Reviewed by: ylavic, covener, rpluem


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893109 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f91beac1e15f10926bf851efccd2f588f28a3051"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:25:29Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:25:29Z""}}"
268,SubmitCommit,2021-09-08 08:26:03,ylavic,fork_close,"Backported in r1893109. [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893110 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""486d1bbd51680206adf8ca9b2ba925d58b005fc5"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:26:03Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:26:03Z""}}"
268,SubmitCommit,2021-09-08 08:27:47,ylavic,fork_close,"Merge r1893016 from trunk:


mod_proxy: Don't canonicalize with both nocanon and ProxyPassInterpolateEnv On.

If nocanon is set, we should match the unparsed_uri against the interpolated
alias (not the ProxyPass'ed one) when verifying the resulting length. Otherwise
we falsely restore the canonicalized URL in case of mismatch.  PR 65549.


Submitted by: Joel Self <joelself gmail.com>
Reviewed by: ylavic, covener, rpluem


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893111 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4c1ed8e820638411ad536d82e8ef4a23af09c510"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:27:47Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:27:47Z""}}"
268,SubmitCommit,2021-09-08 08:28:27,Stefan Eissing,fork_close,"comment [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893112 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""09cf8dc692a58351b35ac4e87e0ee9a7dbd89a34"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-08T08:28:27Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-08T08:28:27Z""}}"
268,SubmitCommit,2021-09-08 08:29:19,ylavic,fork_close,"Backported in r1893111. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893113 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3b97c80c6701097ec534e6a200b9baa49f0e8eb4"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:29:19Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:29:19Z""}}"
268,SubmitCommit,2021-09-08 08:31:38,ylavic,fork_close,"Merge r1893001, r1893002, r1893004 from trunk:


core: Set r->request_time before any logging, mod_unique_id needs it.

* server/protocol.c(read_request_line):
  Move r->request_time initialization before first APLOG_TRACE5,
  ap_log_rerror() may run the generate_log_id hooks and call mod_unique_id
  with no timestamp initialized (zero).
  


mod_unique_id: Follow up to r1892915: Shorter counter race condition yet.

* modules/metadata/mod_unique_id.c(gen_unique_id):
  Set the counter in network byte order for uuencoding only, allowing for
  simple cur_unique_id.counter++



mod_unique_id: Follow up to r1892915 and r1893002: Atomic counter.

* modules/metadata/mod_unique_id.c(gen_unique_id):
  Use an atomic 32bit counter to close the race condition with threaded MPMs,
  using the lower 16 bits for uuencoding still.


Submitted by: ylavic
Reviewed by: ylavic, rpluem, gbechis


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893116 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""17a14e5bdb6e293a453580d889e29b11ed025fe1"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:31:38Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:31:38Z""}}"
268,SubmitCommit,2021-09-08 08:32:13,ylavic,fork_close,"Backported in r1893116. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893117 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3014918a87f29d937fb7e49f5e7170a8ae350ff1"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:32:13Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:32:13Z""}}"
268,SubmitCommit,2021-09-08 08:42:05,ylavic,fork_close,"Sync CHANGES for r1893111. [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893118 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ee62004041b06486c140be65301d698ba82d5b14"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:42:05Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-08T08:42:05Z""}}"
268,SubmitCommit,2021-09-08 09:13:41,rpluem,fork_close,"* Clean up my mess that I created in r1893100 withe respect to change-entries vs. changes-entries [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893119 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6eb1f538037e1b8424309dd66a401a471f4b0b83"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T09:13:41Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-08T09:13:41Z""}}"
268,SubmitCommit,2021-09-09 14:33:22,ylavic,fork_close,"WIP [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893177 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""289a66cd41d8e81194d9f36ddb2410882c76ed2d"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-09T14:33:22Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-09T14:33:22Z""}}"
268,SubmitCommit,2021-09-09 14:34:07,ylavic,fork_close,"Sync CHANGES [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893178 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""1736a7f48e9528330ebe6a2ee1dbb4518d688943"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-09T14:34:07Z""}, ""committer"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-09-09T14:34:07Z""}}"
268,SubmitCommit,2021-09-09 14:57:48,rpluem,fork_close,"* Vote and promote [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893180 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b88fc883644254c747fb1cdf90775c881cebc969"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-09T14:57:48Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-09T14:57:48Z""}}"
268,SubmitCommit,2021-09-09 15:22:23,Stefan Eissing,fork_close,"Merge r1890605, r1893164, r1893179 from trunk:

  *) core/mod_proxy/mod_ssl:
     Adding `outgoing` flag to conn_rec, indicating a connection is
     initiated by the server to somewhere, in contrast to incoming
     connections from clients.
     Adding 'ap_ssl_bind_outgoing()` function that marks a connection
     as outgoing and is used by mod_proxy instead of the previous
     optional function `ssl_engine_set`. This enables other SSL
     module to secure proxy connections.
     The optional functions `ssl_engine_set`, `ssl_engine_disable` and
     `ssl_proxy_enable` are now provided by the core to have backward
     compatibility with non-httpd modules that might use them. mod_ssl
     itself no longer registers these functions, but keeps them in its
     header for backward compatibility.
     The core provided optional function wrap any registered function
     like it was done for `ssl_is_ssl`.


  *core: clarify comments and use hook API better to check for presence of callbacks.



 * optimizing hook check as suggested by Yann.



Submitted by: icing
Reviewed by: 

Github: closes #203


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893182 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f9c54948e4cb616d0a13fad0e288b907b419722f"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-09T15:22:23Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-09T15:22:23Z""}}"
268,SubmitCommit,2021-09-09 15:23:16,Stefan Eissing,fork_close,"update after back port [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893183 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""08544a1957f86b13c82e2dd97b80c90a3e49f344"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-09T15:23:16Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-09T15:23:16Z""}}"
268,SubmitCommit,2021-09-10 08:20:14,Stefan Eissing,fork_close,"backport proposal added. [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893216 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5a6f47ace9db816b82efbe466c82127285034af4"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-10T08:20:14Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-10T08:20:14Z""}}"
268,SubmitCommit,2021-09-10 09:47:41,Stefan Eissing,fork_close,"update back port proposal [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893221 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a32cefb0369f7084462e740b66d74a78539c32dc"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-10T09:47:41Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-10T09:47:41Z""}}"
268,SubmitCommit,2021-09-10 12:19:18,covener,fork_close,"propose a busy PR [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893223 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""92c824e8ce0e9384eb30a1e19fdc00b4baf7ce63"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-10T12:19:18Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-10T12:19:18Z""}}"
268,SubmitCommit,2021-09-10 12:23:09,covener,fork_close,"readability [skip ci]


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893225 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""71c0fb31e1355b42fac2f95aead1fe99b89cc4e8"", ""author"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-10T12:23:09Z""}, ""committer"": {""name"": ""Eric Covener"", ""email"": ""covener@apache.org"", ""date"": ""2021-09-10T12:23:09Z""}}"
268,SubmitCommit,2021-09-11 12:42:39,Lucien Gentis,fork_close,"fr doc XML file update.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893251 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d1f7168c5ba54f18f5309f8e34b24a85dbe1d683"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-09-11T12:42:39Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-09-11T12:42:39Z""}}"
268,SubmitCommit,2021-09-11 12:43:26,Lucien Gentis,fork_close,"fr doc rebuild.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893252 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b1b36ddc91239b44ef82aba55aad8c548fbffe06"", ""author"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-09-11T12:43:26Z""}, ""committer"": {""name"": ""Lucien Gentis"", ""email"": ""lgentis@apache.org"", ""date"": ""2021-09-11T12:43:26Z""}}"
268,SubmitCommit,2021-09-15 13:41:35,Stefan Eissing,fork_close,"Merge of /httpd/httpd/trunk:r1893359

  *) mod_md: fixed a bug in handling multiple parallel OCSP requests. These could
     run into an assertion which terminated (and restarted) the child process where
     the task was running. Eventually, all OCSP responses were collected, but not
     in the way that things are supposed to work.
     See also <https://bz.apache.org/bugzilla/show_bug.cgi?id=65567>.
     The bug was possibly triggered when more than one OCSP status needed updating
     at the same time. For example for several renewed certificates after a server
     reload.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893360 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""dedd251e93fce01b0f7dd9cf5c7d057f7af4e908"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-15T13:41:35Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-15T13:41:35Z""}}"
268,SubmitCommit,2021-09-16 07:58:22,Stefan Eissing,fork_close,"publishing release httpd-2.4.49

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893373 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""22382addd193f20cdd4fd86236773b47cef1f88d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-16T07:58:22Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-16T07:58:22Z""}}"
268,SubmitCommit,2021-09-17 12:41:45,Stefan Eissing,fork_close,"Merge of /httpd/httpd/trunk:r1893399

  *) mod_md: when MDMessageCmd for a 'challenge-setup:<type>:<dnsname>'
     fails (!= 0 exit), the renewal process is aborted and an error is
     reported for the MDomain. This provides scripts that distribute
     information in a cluster to abort early with bothering an ACME
     server to validate a dns name that will not work. The common
     retry logic will make another attempt in the future, as with
     other failures.
     Fixed a bug when adding private key specs to an already working
     MDomain, see <https://github.com/icing/mod_md/issues/260>.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893400 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2dcc0bb4fe429f086707378adaae2545101c80bc"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-17T12:41:45Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-09-17T12:41:45Z""}}"
268,SubmitCommit,2021-09-19 11:51:32,Christophe Jaillet,fork_close,"Remove useless CHANGES entry + trigger CI

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893439 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""49b7da3f5212077335c70d93ceda44b8bf4c91d3"", ""author"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-09-19T11:51:32Z""}, ""committer"": {""name"": ""Christophe Jaillet"", ""email"": ""jailletc36@apache.org"", ""date"": ""2021-09-19T11:51:32Z""}}"
268,SubmitCommit,2021-09-23 07:23:16,rpluem,fork_close,"* Propose [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893529 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""06a8ea96a5ed8827e14d44e4acbc5b6db96ee114"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-23T07:23:16Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-23T07:23:16Z""}}"
268,SubmitCommit,2021-09-23 07:25:24,rpluem,fork_close,"* Comment [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1893530 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3fa647908fa2a7a52a81533de05673808e0b3863"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-23T07:25:24Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-23T07:25:24Z""}}"
268,SubmitCommit,2021-09-23 07:37:41,rpluem,fork_close,"In case one of the pre_connection hooks causes the hook run to stop by an error
the pre_connection hook of the core module maybe did not run
(it is APR_HOOK_REALLY_LAST) and hence we missed to

- Put the socket in c->conn_config
- Setup core output and input filters
- Set socket options and timeouts

For calls of ap_run_pre_connection where this matters create a wrapper named
ap_pre_connection that ensures that this happens.

* include/ap_mmn.h: Bump minor version as we added new ap_pre_connection
  function.

* include/http_connection.h: Declare ap_pre_connection prototype.

* server/connection.c: Make use of ap_pre_connection in ap_process_connection.

* server/core.c: Implement ap_pre_connection.

* server/mpm/event/event.c: Make use of ap_pre_connection.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1893497 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 6d9a8cd1f243d9f6df4481f5ec19ec0d96109654)","{""sha"": ""7142527402b77781d2eb2de49ba7c6e64dcc8875"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-21T20:03:52Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-23T07:37:41Z""}}"
268,SubmitCommit,2021-09-23 07:38:52,rpluem,fork_close,"* Add change entry for r1893497 [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1893507 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 994787e1262a1cf2b064e141eb5a6d194d92c09b)","{""sha"": ""a294a1252bd8880010d89906d2357e6801fca9dc"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-22T07:02:28Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-23T07:38:52Z""}}"
268,OpenPR,2021-09-23 08:21:33,rpluem,fork_close,,
268,IssueCommentSupplement,2021-09-23 08:25:07,rpluem,fork_close,Bad PR against wrong branch.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/925602386"", ""author_association"": ""CONTRIBUTOR""}"
268,ClosePR,2021-09-23 08:25:07,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5348116464"", ""commit_url"": null}"
269,SubmitCommit,2021-09-23 07:37:41,rpluem,fork_close,"In case one of the pre_connection hooks causes the hook run to stop by an error
the pre_connection hook of the core module maybe did not run
(it is APR_HOOK_REALLY_LAST) and hence we missed to

- Put the socket in c->conn_config
- Setup core output and input filters
- Set socket options and timeouts

For calls of ap_run_pre_connection where this matters create a wrapper named
ap_pre_connection that ensures that this happens.

* include/ap_mmn.h: Bump minor version as we added new ap_pre_connection
  function.

* include/http_connection.h: Declare ap_pre_connection prototype.

* server/connection.c: Make use of ap_pre_connection in ap_process_connection.

* server/core.c: Implement ap_pre_connection.

* server/mpm/event/event.c: Make use of ap_pre_connection.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1893497 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 6d9a8cd1f243d9f6df4481f5ec19ec0d96109654)","{""sha"": ""7142527402b77781d2eb2de49ba7c6e64dcc8875"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-21T20:03:52Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-23T07:37:41Z""}}"
269,SubmitCommit,2021-09-23 07:38:52,rpluem,fork_close,"* Add change entry for r1893497 [skip ci]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1893507 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 994787e1262a1cf2b064e141eb5a6d194d92c09b)","{""sha"": ""a294a1252bd8880010d89906d2357e6801fca9dc"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-09-22T07:02:28Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-23T07:38:52Z""}}"
269,OpenPR,2021-09-23 08:38:35,rpluem,fork_close,,
269,Revise,2021-09-23 08:42:36,rpluem,fork_close,Trigger CI,"{""sha"": ""687470e5f73487222aa7d78bb8e27e619e5115bc"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-23T08:42:36Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-23T08:42:36Z""}}"
269,Revise,2021-09-23 08:42:57,rpluem,fork_close,"Revert ""Trigger CI""

This reverts commit 687470e5f73487222aa7d78bb8e27e619e5115bc.","{""sha"": ""1053a5837d6b89e4a9c5e19c1132a021ce19d104"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-23T08:42:57Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-23T08:42:57Z""}}"
269,Revise,2021-09-24 06:47:54,rpluem,fork_close,Note the person responsible for this stuff :-),"{""sha"": ""abbe528507f1c9b6e9581a71e616ab93bc90305f"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-24T06:47:54Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2021-09-24T06:47:54Z""}}"
269,IssueCommentSupplement,2021-12-16 11:41:54,ylavic,fork_close,Merged in r1893654 (324c4a2791dacf8ea2e587978328e5b6ee0dab7b).,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/995715246"", ""author_association"": ""MEMBER""}"
269,ClosePR,2021-12-16 11:41:54,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5777756132"", ""commit_url"": null}"
269,DeleteBranch,2022-04-15 11:05:28,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6439969589"", ""commit_url"": null}"
270,SubmitCommit,2021-09-23 09:07:55,Stefan Eissing,fork_close,  * mod_http2: synchronizes sources with trunk,"{""sha"": ""9eb848df77a13aa3129c599341c341f97144a7f1"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-23T09:07:55Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-23T09:07:55Z""}}"
270,OpenPR,2021-09-23 09:11:02,icing,fork_close,,
270,ReviewComment,2021-09-23 13:08:51,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/270#pullrequestreview-761982293""}"
270,Revise,2021-09-23 13:57:21,Stefan Eissing,fork_close,sync latest fixes from svn trunk after review by rpluem.,"{""sha"": ""46904c2a223ca5b28698051684b351c6d889dcc4"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-23T13:57:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-09-23T13:57:21Z""}}"
270,ClosePR,2022-10-17 11:58:49,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601411737"", ""commit_url"": null}"
270,DeleteBranch,2022-10-17 11:58:50,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601411772"", ""commit_url"": null}"
271,SubmitCommit,2021-10-05 06:16:16,ngrbalu,fork_close,Update README,"{""sha"": ""20b4a41ebc03fc92791fb4c8dab11fde0490b4e0"", ""author"": {""name"": ""Balu Nagar"", ""email"": ""54747556+ngrbalu@users.noreply.github.com"", ""date"": ""2021-10-05T06:16:16Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2021-10-05T06:16:16Z""}}"
271,OpenPR,2021-10-05 06:16:34,ngrbalu,fork_close,,
271,ClosePR,2021-10-07 05:10:21,ngrbalu,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5425981478"", ""commit_url"": null}"
273,OpenPR,2021-10-08 11:51:49,notroj,fork_close,,
273,Revise,2021-10-08 12:16:18,ylavic,fork_close,"util_filter: better ap_pass_brigade() vs empty brigades.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1782986 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 065e8248bdff70d2deb3b86ce8ec49c1408c5154)","{""sha"": ""85003a0ae000e9c19919d398a04c8fd8fff80ba9"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2017-02-14T16:43:25Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-10-08T12:16:18Z""}}"
273,IssueComment,2021-10-12 12:44:28,notroj,fork_close,Fixed in 857df905d21fbf7133c4192bc496a4fcb164d23a,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/940977996"", ""author_association"": ""COLLABORATOR""}"
273,ClosePR,2021-10-12 12:44:29,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5449367982"", ""commit_url"": null}"
274,SubmitCommit,2021-10-15 12:41:10,ylavic,fork_close,"mpm_event,worker}: Really perform_idle_server_maintenance() per bucket.","{""sha"": ""c678e9f36d1ffa7ada57a371272ea8352add3da4"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-10-15T12:41:10Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-10-15T12:41:10Z""}}"
274,SubmitCommit,2021-10-15 12:46:21,ylavic,fork_close,"mpm_{event,worker}: No need to pass num_buckets to perform_idle_server_maintenance() and server_main_loop().","{""sha"": ""3d74af2ca1de7c7b1274963f94201f4dde5d87a1"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-10-15T12:46:21Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-10-15T12:46:21Z""}}"
274,SubmitCommit,2021-10-15 12:48:54,ylavic,fork_close,mpm_worker: the last used scoreboard slot depends on pid != 0 only.,"{""sha"": ""d97a7912430b4dbb484d61226936cdb2181486dd"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-10-15T12:48:54Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-10-15T12:48:54Z""}}"
274,SubmitCommit,2021-10-15 12:57:04,ylavic,fork_close,"Align max_daemons_limit value on all MPMs.

That's the number of scoreboard slots in use, so it shouldn't be negative.
Fix off by one in OS/2 too.","{""sha"": ""0b396749ba0b820822baff7a005f69f133dd12df"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-10-15T12:57:04Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-10-15T12:57:04Z""}}"
274,OpenPR,2021-10-15 13:04:09,ylavic,fork_close,,
274,ClosePR,2021-10-15 13:22:17,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5469815317"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/a870a5413071cae9f49ddbd8eccda2c133fa49fd""}"
274,DeleteBranch,2021-11-22 14:03:13,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5654167768"", ""commit_url"": null}"
275,SubmitCommit,2021-11-17 11:35:24,Stefan Eissing,fork_close,"  *) mod_http2:
     - Fixed an issue since 1.15.24 that ""Server"" headers in proxied requests
       were overwritten instead of preserved. [PR by @daum3ns]
     - Added directove 'H2StreamTimeout' to configure a separate value for HTTP/2
       streams, overriding server's 'Timeout' configuration. [rpluem]
     - HTTP/2 connections now use pollsets to monitor the status of the
       ongoing streams and their main connection when host OS allows this.
     - Removed work-arounds for older versions of libnghttp2 and checking
       during configure that at least version 1.15.0 is present.
     - The HTTP/2 connection state handler, based on an experiment and draft
       at the IETF http working group (abandoned for some time), has been removed.
     - H2SerializeHeaders no longer has an effect. A warning is logged when it is
       set to ""on"". The switch enabled the internal writing of requests to be parsed
       by the internal HTTP/1.1 protocol handler and was introduced to avoid
       potential incompatibilities during the introduction of HTTP/2.
     - Removed the abort/redo of tasks when mood swings lower the active limit.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894163 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 6a355db082d07a2b71a372e328cfda8fc7d27907)","{""sha"": ""9fddd74bc025d002ea3c96bcb42981f59a7f30c3"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-12T13:34:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T11:35:24Z""}}"
275,SubmitCommit,2021-11-17 11:44:21,Stefan Eissing,fork_close,"updated log tag to resolve duplicate.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894169 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 17471dfb938c7e20681783939a147d433b468864)","{""sha"": ""0a3b8af34d4eeebe6ff6ba8ff35658acbdc5ca01"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-12T16:25:59Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T11:44:21Z""}}"
275,SubmitCommit,2021-11-17 11:53:32,Stefan Eissing,fork_close,"  * mod_http2: fixing some compiler warnings.
    length of output written now correctly calculated after buckets
    have been read.
    test cases updated.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894172 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit bf7b392b259f1d4c8cc761ee1a867efe855908fb)","{""sha"": ""927c80b1874a05f7a137350de9fe84cf9f83bbfb"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-12T19:58:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T11:53:32Z""}}"
275,SubmitCommit,2021-11-17 11:53:57,Stefan Eissing,fork_close,"  *) mod_http2: resurrecting the check for older nghttp2 versions.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894184 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 93d3eca86d0852fc3b8c002605e5789433d91852)","{""sha"": ""7b1bb94e5f67d13446d102043ca9398706033782"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-13T08:26:18Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T11:53:57Z""}}"
275,SubmitCommit,2021-11-17 11:54:27,Stefan Eissing,fork_close,"  * mod_http2: checking for nghttp2 function 'set_no_closed_streams' on configure.
    adapting test result expectations for new nghttp2 1.45 change in checking
    pseudo header fields for invalid characters.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894189 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 672e736a10709497bda78dde733d346733900921)","{""sha"": ""fc48a5306ccd75337efa47b44e66c076ebc08695"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-13T11:15:03Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T11:54:27Z""}}"
275,SubmitCommit,2021-11-17 11:55:27,Stefan Eissing,fork_close,"  * mod_http2: resurrecting check for nghttp function
    nghttp2_session_callbacks_set_on_invalid_header_callback
    adding test for proxy server header behaviour
    making test fixture package scoped for better performance

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894190 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 0935f7ec7753dc758de9d3251bba491658da6513)","{""sha"": ""e7628804527445450362fb6cebcb6b9f8d83b71e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-13T12:26:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T11:55:27Z""}}"
275,SubmitCommit,2021-11-17 11:56:09,Stefan Eissing,fork_close,"  * mod_http2: I regret my decision to have removed nghttp2 feature checks...

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894192 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 01650d5294473ae1129e67453c80da5989107af9)","{""sha"": ""580eced716a53fdeaea4af39b78042b7a2814a86"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-13T13:29:28Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T11:56:09Z""}}"
275,SubmitCommit,2021-11-17 11:59:35,Stefan Eissing,fork_close,"  *) mod_http2: no longer splitting buckets on adding them to a beam,
     accepting the whole bucket since no memory is saved by a split.
     Also, allowing meta buckets to be added to a ""full"" beam.
     Re-enabled test cases for travis verification.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894220 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 4fc7e978f0322ce90fafdad59bb275314b44a598)","{""sha"": ""339e90b89211396bdc10106478b35168d5d6475e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-14T08:59:12Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T11:59:35Z""}}"
275,SubmitCommit,2021-11-17 12:00:12,Stefan Eissing,fork_close,"  *) mod_http2: H2HEADER buckets have the correct lenght of zero and no
     longer smuggle the contained field lengths in this field. Instead
     the bytes reportded to mod_logio are counted specifically.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894226 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit f23144a627f4698e76b406ac28559fd20ba5e8a3)","{""sha"": ""319305571db930b58cbc9d61b37c3fc75f3974f8"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-14T09:58:37Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T12:00:12Z""}}"
275,SubmitCommit,2021-11-17 12:00:31,Stefan Eissing,fork_close,"  *) mod_http2: when pollset signals output, resume a streams data
     in nghttp2 every time without checks that response body bytes
     are available. This resolves the situation that a stream may stall
     when 2 consecutive H2HEADER buckets are sent (e.g. 103+200).

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894228 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 7891b6f69463cd04de5a1b6192cc58d80a690746)","{""sha"": ""710b07012845322e79a7770ce1a16f1b84b02fc8"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-14T10:18:17Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T12:00:31Z""}}"
275,SubmitCommit,2021-11-17 12:01:34,Stefan Eissing,fork_close,"  *) mod_http2: another travis test of the 400_20 and 401_31 tests that produce a timeout
     only on travis and never locally. sorry about the cycles.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894241 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit a32ff18e4e4cc6a8b6ffbd163bda85af1efdb14d)","{""sha"": ""3bb2c1343a0f5a72861e2f726a7732ef03b9db9b"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-14T12:37:25Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T12:01:34Z""}}"
275,SubmitCommit,2021-11-17 12:02:09,Stefan Eissing,fork_close,"  * mod_http2: hopeful (as always) fix for the stalling in 400_20.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894252 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 1a303fdb6f0d938eccfa7a6e7811d08bd2432d4a)","{""sha"": ""17a73c097d18ed80dbf0cd25024c961aca2ce0fe"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-10-14T15:26:59Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T12:02:09Z""}}"
275,SubmitCommit,2021-11-17 12:02:32,Stefan Eissing,fork_close,"  * mod_http2: a regression in v1.15.24 of the modules was fixed that
    could lead to httpd child processes not being terminated on a
    graceful reload or when reaching MaxConnectionsPerChild.
    When unprocessed h2 requests were queued at the time, these could stall.
    See <https://github.com/icing/mod_h2/issues/212>.
    [@hansborr, @famzah, Stefan Eissing]

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894728 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 81595a39487b843881445f0e74ba90f09179a2c3)","{""sha"": ""a19dba4f6307865ba1d3f11d797e23256e3e3dc8"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-11-04T09:42:45Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T12:02:32Z""}}"
275,SubmitCommit,2021-11-17 12:02:51,Stefan Eissing,fork_close,"  *) mod_http2: always return an EOS bucket for requests
     that have no body on c2 connection input filter.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894949 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit a452f3b42ea5bdc1bbd36701ad7028775e3df0bd)","{""sha"": ""5e6af7990fad33caa02d46a95f1051cfd1d86828"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-11-11T11:16:23Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T12:02:51Z""}}"
275,SubmitCommit,2021-11-17 12:07:15,rpluem,fork_close,"* Fix compiler warning about unused variable

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894181 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 174b3abcc39018e943e2f66a31047224a9331d0a)","{""sha"": ""b57145159ee608b54fef33c609bb05a3c16f5cf1"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2021-10-13T07:29:28Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-17T12:07:15Z""}}"
275,OpenPR,2021-11-17 12:23:28,icing,fork_close,,
275,ClosePR,2021-11-25 12:15:17,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672608723"", ""commit_url"": null}"
275,IssueComment,2021-11-25 12:15:17,ylavic,fork_close,Rebuild,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/979159254"", ""author_association"": ""MEMBER""}"
275,ReopenPR,2021-11-25 12:15:21,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672609019"", ""commit_url"": null}"
275,Revise,2021-11-25 16:08:03,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/http2-2.0,"{""sha"": ""e8987f092abecc2ee2dcff32a050ac3dd3accd1a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-25T16:08:03Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-25T16:08:03Z""}}"
275,Revise,2021-11-25 16:08:39,ylavic,fork_close,"mod_http2: fix logic for non-proxy Server and Date response headers.

First error was in r1890564 where the test for !PROXYREQ_NONE was replaced by
PROXYREQ_RESPONSE (which is never the case besides the fake proxy origin
request) so a mod_h2 PR tried to fix that but the logic is now incorrect.

Let's finally use the same logic as ap_basic_http_header().

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895336 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 772952aca2b66976299874f14c21b90508ed2b02)","{""sha"": ""f49db42df12a59c70c63ee2100c7e40e3c1d4d31"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-11-25T15:57:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-25T16:08:39Z""}}"
275,IssueComment,2021-11-25 16:10:12,ylavic,fork_close,"On Xenial:
```
Cannot load /home/travis/build/httpd-root/modules/mod_http2.so into server: /home/travis/build/httpd-root/modules/mod_http2.so: undefined symbol: apr_file_pipe_create_pools
```

You possibly want to disable `H2_POLL_STREAMS` for APR < 1.6 (Xenial ships 1.5)..","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/979331497"", ""author_association"": ""MEMBER""}"
275,IssueComment,2021-11-25 19:24:47,icing,fork_close,"The APR sales rep, who sold me this feature, never mentioned this!","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/979435461"", ""author_association"": ""CONTRIBUTOR""}"
275,IssueComment,2021-11-25 20:00:31,ylavic,fork_close,Never trust a sales ;),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/979446666"", ""author_association"": ""MEMBER""}"
275,Revise,2021-11-26 09:29:40,Stefan Eissing,fork_close,"  * mod_http2: the new pollset implementation is disabled when
    compiling with an APR version less than 1.6.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895349 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 9974b5a0e66b77020bbe2d6261073adf9d919680)","{""sha"": ""7ce2fbbc607193af3548e4162225fbd80484a671"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2021-11-26T09:29:07Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-11-26T09:29:40Z""}}"
275,Revise,2022-02-14 11:50:29,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/http2-2.0,"{""sha"": ""94126d8ae5c6e5abd7fcf9264270974d44afeb52"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T11:50:29Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T11:50:29Z""}}"
275,Revise,2022-02-14 12:05:36,Stefan Eissing,fork_close,  *) http2: module and test cases updated from trunk.,"{""sha"": ""d4eb86efb31c8f5fc15213457114a9fc8a58cd1c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T12:05:36Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T12:05:36Z""}}"
275,Revise,2022-02-14 13:56:52,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/http2-2.0,"{""sha"": ""cd06f17a3c3a231fd32c455ff3557dfd272b1361"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T13:56:52Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T13:56:52Z""}}"
275,Revise,2022-02-14 13:59:31,Stefan Eissing,fork_close, * adding description of test changes.,"{""sha"": ""b61790bdbb0e800e7496366793a734b1ce38c824"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T13:59:31Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T13:59:31Z""}}"
275,Revise,2022-02-14 16:53:05,Stefan Eissing,fork_close,Merge branch '2.4.x' into icing/http2-2.0,"{""sha"": ""9025dc2c459a48c3f1885782534ce823c039a179"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T16:53:05Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-14T16:53:05Z""}}"
275,ClosePR,2022-10-17 11:58:43,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601410998"", ""commit_url"": null}"
275,DeleteBranch,2022-10-17 11:58:44,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601411036"", ""commit_url"": null}"
276,OpenPR,2021-11-24 22:36:49,ylavic,fork_close,,
276,IssueComment,2021-11-25 12:09:27,ylavic,fork_close,Rebuild,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/979151840"", ""author_association"": ""MEMBER""}"
276,ClosePR,2021-11-25 12:09:27,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672578423"", ""commit_url"": null}"
276,ReopenPR,2021-11-25 12:09:31,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672578743"", ""commit_url"": null}"
276,ClosePR,2021-11-25 12:12:33,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672594396"", ""commit_url"": null}"
276,ReopenPR,2021-11-25 12:12:36,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672594739"", ""commit_url"": null}"
276,RenameTitle,2021-12-03 15:25:42,ylavic,fork_close,,"{""rename"": {""from"": ""Merge r1894285 and r1894286"", ""to"": ""Merge r1894285, r1894286, r1894291, r1895550, r1895551 and r1895553""}, ""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5712805573""}"
276,Revise,2021-12-06 17:27:25,ylavic,fork_close,"mpm_event: Restart stopping of idle children after a load peak. PR 65626.

r1770752 added an heuristic to avoid stopping children when the load triggers
MaxSpareThreads but children take some time to shut down until the point where
active_daemons_limit/ServerLimit is reached (scoreboard full) and no child gets
created to handle incoming connections.

However when this happens there is nothing to stop children again when the load
settles down (besides MaxRequestsPerChild, which may be 0) so let's restart to
stop children again if/when idle_thread_count reaches max_workers / 4.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894285 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 4f9e7cf5d7dda9011afee1b886f5c27eec77d148)","{""sha"": ""aed896d44f9cf5248a0077c8c2c31b2c72f1b68f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-10-15T10:29:00Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-06T17:27:25Z""}}"
276,Revise,2021-12-06 17:27:25,ylavic,fork_close,"Follow up to r1894285: add idle_threads and max_workers to trace5.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894286 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 04dac4fb10e51cd62a80a3e5352055536f1e255f)","{""sha"": ""e51d198a89ef73f8ef5ada315df5eccaaa1bcf50"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-10-15T10:49:32Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-06T17:27:25Z""}}"
276,Revise,2021-12-06 17:27:26,ylavic,fork_close,"mpm_event: Retain active_daemons instead of resetting it on restart.

Since active_daemons is tracked by perform_idle_server_maintenance() and
decremented when a child gets quiescing or exits, clearing it on restart
is actually an off by -total_daemons (of the old gen) after the first calls
to perform_idle_server_maintenance().

Let perform_idle_server_maintenance() be the only one to update active_daemons
by putting it in the retained struct to keep track accross restarts.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895550 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit fcae3fd2aac563c056ca3ae8869ebdcc3bca2e4b)","{""sha"": ""fbbbd5ba04a226bdb87e68698428438925f03bdb"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-12-03T12:59:02Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-06T17:27:26Z""}}"
276,Revise,2021-12-06 17:27:26,ylavic,fork_close,"mpm_event: Follow up to r1894285: new MaxSpareThreads heuristics.

When at MaxSpareThreads, instead of deferring the stop if we are close to
active/server limit let's wait for the pending exits to complete.

This way we always and accurately account for slow-to-exit processes to
avoid filling up the scoreboard, whether at the limits or not.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895553 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""caf4df457fa1d48185b80dd83707c5830214e9dc"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-12-03T13:25:51Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-06T17:27:26Z""}}"
276,Revise,2021-12-06 17:27:26,ylavic,fork_close,"mpm_event: Follow up to r1895553.

We can still kill processes above MaxSpareThreads at every maintenance cycle
unless there is not enough headromm in the scoreboard for a graceful restart.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895630 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f72f1b0817f41963f5d30d119016b38724862356"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-12-06T17:12:28Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-06T17:27:26Z""}}"
276,Revise,2021-12-06 17:27:26,ylavic,fork_close,"mpm_{event,worker}: Really perform_idle_server_maintenance() per bucket.

mpm_{event,worker}: No need to pass num_buckets to perform_idle_server_maintenance() and server_main_loop().

mpm_worker: the last used scoreboard slot depends on pid != 0 only.

Align max_daemons_limit value on all MPMs.

That's the number of scoreboard slots in use, so it shouldn't be negative.
Fix off by one in OS/2 too.

Submitted by: ylavic <ylavic.dev@gmail.com>

Github: closes #274

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894291 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit a870a5413071cae9f49ddbd8eccda2c133fa49fd)","{""sha"": ""572ddb59a69021669915680fd44b4b66f9f66664"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-10-15T13:22:11Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-06T17:27:26Z""}}"
276,RenameTitle,2021-12-06 17:29:23,ylavic,fork_close,,"{""rename"": {""from"": ""Merge r1894285, r1894286, r1894291, r1895550, r1895551 and r1895553"", ""to"": ""Merge r1894285, r1894286, r1894291, r1895550 and r1895553""}, ""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5722191603""}"
276,RenameTitle,2021-12-06 17:30:38,ylavic,fork_close,,"{""rename"": {""from"": ""Merge r1894285, r1894286, r1894291, r1895550 and r1895553"", ""to"": ""Merge r1894285, r1894286, r1894291, r1895550, r1895553 and r1895630""}, ""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5722198896""}"
276,IssueCommentSupplement,2021-12-13 11:09:28,ylavic,fork_close,Backported in r1895871 (4819c58566d2274b95d56b16fe51aa80461633da),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/992353259"", ""author_association"": ""MEMBER""}"
276,ClosePR,2021-12-13 11:09:28,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5755979906"", ""commit_url"": null}"
276,DeleteBranch,2021-12-13 11:09:35,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5755980619"", ""commit_url"": null}"
277,SubmitCommit,2021-11-24 22:37:13,ylavic,fork_close,"*) core: Be safe with ap_lingering_close() called with a socket NULL-ed.

PR 65627.

mod_itk seems to:
  ap_set_core_module_config(c->conn_config, NULL)
before calling ap_lingering_close(), causing a crash after r1891721.
Until we have an API to no-op ap_lingering_close(), let's be safe.

* server/connection.c(ap_start_lingering_close):
  The socket should not be NULL here, add an assertion.

* server/connection.c(ap_lingering_close):
  Set c->aborted if the socket is NULL, and give up.

Submitted by: acmondor <bz.apache.org acmondor.ca>, ylavic

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894171 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 59b7c104ce06c90be20ff50435d912a444341245)","{""sha"": ""bd235a2c7d94251090bedb3b19eaa21262dc3c86"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-10-12T16:48:18Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-11-24T22:37:13Z""}}"
277,OpenPR,2021-11-24 22:38:38,ylavic,fork_close,,
277,IssueComment,2021-11-25 12:09:48,ylavic,fork_close,Rebuild,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/979152307"", ""author_association"": ""MEMBER""}"
277,ClosePR,2021-11-25 12:09:49,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672580261"", ""commit_url"": null}"
277,ReopenPR,2021-11-25 12:09:52,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672580496"", ""commit_url"": null}"
277,IssueComment,2021-12-03 15:35:47,ylavic,fork_close,Merged in 41f5c02eaf1b52d8c9b13043934e31195e4532bf,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/985617053"", ""author_association"": ""MEMBER""}"
277,ClosePR,2021-12-03 15:35:48,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5712863931"", ""commit_url"": null}"
277,DeleteBranch,2021-12-03 15:36:00,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5712865246"", ""commit_url"": null}"
278,SubmitCommit,2021-11-24 23:02:41,ylavic,fork_close,"mod_proxy_connect: Honor the smallest of the backend or client timeout.

It seems that mod_proxy_connect has never applied any timeout in its tunneling
loop. Address this by setting a default timeout in ap_proxy_tunnel_create()
since mod_proxy_connect does not overwrite tunnel->timeout (while proxy_http
and proxy_wstunnel do).

This default timeout is set to the smallest of the backend side or the client
side timeout.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1894290 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit dcbf44fb14497add211020ef3629f1f12daac6e1)","{""sha"": ""2aea38d158067d555928ab889f2fad77d845f1bf"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-10-15T11:09:32Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-11-24T23:02:41Z""}}"
278,SubmitCommit,2021-11-24 23:06:27,ylavic,fork_close,"mod_proxy: SetEnv proxy-nohalfclose to disable half-close tunneling. PR 65662.

Some connect/wstunnel protocols might want half-close forwarding while some
might not, let's provide an r->subprocess_env opt-out.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895304 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 5338e45798e2be5296b57c5b31c0de763f2d8962)","{""sha"": ""ff0c3b5ad2d7a1f527785398c094b82e3e29baf6"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-11-24T17:49:47Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-11-24T23:06:27Z""}}"
278,OpenPR,2021-11-24 23:07:37,ylavic,fork_close,,
278,IssueComment,2021-11-25 12:10:06,ylavic,fork_close,Rebuild,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/979152639"", ""author_association"": ""MEMBER""}"
278,ClosePR,2021-11-25 12:10:06,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672581567"", ""commit_url"": null}"
278,ReopenPR,2021-11-25 12:10:09,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5672581828"", ""commit_url"": null}"
278,IssueCommentSupplement,2021-12-13 11:11:42,ylavic,fork_close,Backported in r1895762 (c28fdf37f872fe1a0c1fb9d782842f8416f39846),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/992355338"", ""author_association"": ""MEMBER""}"
278,ClosePR,2021-12-13 11:11:42,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5755993722"", ""commit_url"": null}"
278,DeleteBranch,2021-12-13 11:11:45,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5755994001"", ""commit_url"": null}"
280,OpenPR,2021-12-03 10:25:39,notroj,fork_close,,
280,ReviewComment,2021-12-03 12:43:58,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/280#pullrequestreview-822603200""}"
280,Revise,2021-12-03 13:03:55,notroj,fork_close,"* modules/filters/mod_deflate.c (deflate_in_filter): Handle FLUSH in
  the input brigade even if done inflating (ctx->done is true), but
  don't try to flush the inflate stream in that case.  (Caught by
  Coverity)","{""sha"": ""99c468e2a9145b71e81042c304e8ef2b317b80b3"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-03T10:24:57Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-03T13:03:55Z""}}"
280,ClosePR,2021-12-03 13:07:48,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5712021865"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/6aef687d933fc285192dcf819bc64d0019cead53""}"
280,DeleteBranch,2021-12-03 15:06:26,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5712692150"", ""commit_url"": null}"
281,SubmitCommit,2021-12-09 13:32:22,Stefan Eissing,fork_close,"  *) mod_http2: fixes 2 regressions in server limit handling.
     1. When reaching server limits, such as MaxRequestsPerChild, the
        HTTP/2 connection send a GOAWAY frame much too early on new
        connections, leading to invalid protocol state and a client
        failing the request. See PR65731.
        The module now initializes the HTTP/2 protocol correctly and
        allows the client to submit one request before the shutdown
        via a GOAWAY frame is being announced.
     2. A regression in v1.15.24 was fixed that could lead to httpd
        child processes not being terminated on a graceful reload or
        when reaching MaxConnectionsPerChild. When unprocessed h2
        requests were queued at the time, these could stall.
        See <https://github.com/icing/mod_h2/issues/212>.","{""sha"": ""befd50a7e1901b9a5ab918d8d274a0cc6932e94e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-12-09T13:32:22Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2021-12-09T13:32:22Z""}}"
281,OpenPR,2021-12-09 13:33:33,icing,fork_close,,
281,IssueComment,2021-12-13 10:34:39,minfrin,fork_close,"Backported to v2.4.52:

  *) mod_http2: fixes PR65731 and https://github.com/icing/mod_h2/issues/212
     trunk patch: na, fixed on 2.4.x source base
     backport PR: https://github.com/apache/httpd/pull/281
     +1: icing, minfrin, ylavic
","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/992326016"", ""author_association"": ""CONTRIBUTOR""}"
281,ClosePR,2022-02-14 12:14:13,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6066527161"", ""commit_url"": null}"
281,DeleteBranch,2022-10-17 11:59:04,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601413655"", ""commit_url"": null}"
282,OpenPR,2021-12-10 15:53:54,notroj,fork_close,,
282,Revise,2021-12-10 16:57:20,notroj,fork_close,First try at building against OpenSSL 3.x in Travis.,"{""sha"": ""d42a68dfa385eae057a10f1aa8971003833b3b91"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T15:53:06Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-10T16:57:20Z""}}"
282,ClosePR,2021-12-10 17:17:44,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5749108682"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/e2d995aa7220d4ec0b416d9fb63500253e2305c8""}"
283,OpenPR,2021-12-13 13:07:11,rpluem,fork_close,,
283,IssueComment,2021-12-13 15:52:34,notroj,fork_close,"Sorry, the test failure is because I broke the Travis scripts, rebase to latest 2.4.x for more success?","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/992615142"", ""author_association"": ""COLLABORATOR""}"
283,ClosePR,2021-12-13 20:03:19,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5759414708"", ""commit_url"": null}"
283,DeleteBranch,2021-12-13 20:12:33,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5759471021"", ""commit_url"": null}"
284,SubmitCommit,2021-12-13 15:07:57,notroj,fork_close,"Merge r1895787 from trunk:

Add Travis build job building/testing mod_ssl against OpenSSL 3.

Github: closes #282

Submitted by: jorton","{""sha"": ""df88944713688840aff69ad7ed09d05ae6d0672d"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:07:57Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:07:57Z""}}"
284,SubmitCommit,2021-12-13 15:12:21,notroj,fork_close,Test 2.4.x build against released APR/apr-util with OpenSSL 3.,"{""sha"": ""2f14e9f9d3f82b1bfde740872dae14c6d935f743"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:12:21Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:12:21Z""}}"
284,OpenPR,2021-12-13 15:13:05,notroj,fork_close,,
284,BaseRefChanged,2021-12-13 15:13:19,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5757603024"", ""commit_url"": null}"
284,ClosePR,2021-12-13 15:14:45,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5757613505"", ""commit_url"": null}"
284,DeleteBranch,2021-12-13 15:14:48,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5757613926"", ""commit_url"": null}"
285,OpenPR,2021-12-13 15:15:26,notroj,fork_close,,
285,Revise,2021-12-13 15:59:53,notroj,fork_close,"Merge r1895787 from trunk:

Add Travis build job building/testing mod_ssl against OpenSSL 3.

Github: closes #282

Submitted by: jorton","{""sha"": ""7aff1c43f8ba47e471a810ae06a67d5e7feac58a"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:07:57Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:59:53Z""}}"
285,Revise,2021-12-13 15:59:53,notroj,fork_close,Test 2.4.x build against released APR/apr-util with OpenSSL 3.,"{""sha"": ""eaee9fd23c16f508532f5275f3ae73ec6fa654d5"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:12:21Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:59:53Z""}}"
285,Revise,2021-12-13 15:59:53,notroj,fork_close,"Merge r1834497 from trunk:

Allow openssl.pc to be in lib64 (like other components).

Submitted by: jfclere","{""sha"": ""49ebb691cca22dc21c3671fd579b37201b25a726"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:46:15Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2021-12-13T15:59:53Z""}}"
285,ClosePR,2021-12-13 16:47:31,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5758269491"", ""commit_url"": null}"
285,DeleteBranch,2021-12-13 16:47:34,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5758269781"", ""commit_url"": null}"
286,OpenPR,2021-12-13 19:17:18,ylavic,fork_close,,
286,Revise,2021-12-13 23:30:39,ylavic,fork_close,"mod_proxy: Detect unix: scheme syntax errors at load time.

* modules/proxy/mod_proxy.c(add_pass, add_member, set_proxy_param,
                            proxysection):
  Check return value of ap_proxy_de_socketfy().

* modules/proxy/proxy_util.c(ap_proxy_get_worker_ex):
  Check return value of ap_proxy_de_socketfy().

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895914 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 5c49a85c126d23f89fe02531d12da74ce33a0d92)","{""sha"": ""58cedec02cb60fdcb6d47a59965e788c705ce951"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-12-13T18:07:22Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-13T23:30:39Z""}}"
286,Revise,2021-12-13 23:30:39,ylavic,fork_close,"http: Enforce that fully qualified uri-paths not to be forward-proxied
      have an http(s) scheme, and that the ones to be forward proxied have a
      hostname, per HTTP specifications.

The early checks avoid failing the request later on and thus save cycles
for those invalid cases.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895921 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 3ec0ffb9e1ac05622b97a7afd6992dd2bd41ce38)","{""sha"": ""567a1829bf0859c09c088850069094bf0ccff957"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-12-13T18:55:18Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-13T23:30:39Z""}}"
286,IssueCommentSupplement,2021-12-14 15:37:10,ylavic,fork_close,Merged in r1895955 (a962ba73047b5478d702c8ad09fd1a167e1d3736),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/993666784"", ""author_association"": ""MEMBER""}"
286,ClosePR,2021-12-14 15:37:10,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5765090845"", ""commit_url"": null}"
286,DeleteBranch,2021-12-16 11:32:20,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5777705392"", ""commit_url"": null}"
287,SubmitCommit,2021-12-15 13:50:39,ylavic,fork_close,"mod_proxy: follow up to r1895921: Don't prevent forwarding URIs w/ no hostname.

r1895921 changed proxy_detect() to disable forward proxying for URIs with no
hostname which is wrong, there might exist a third-party proxy module handling
the ""urn:"" scheme for instance (thanks Roy for the catch!).

For this to work, we also need to leave the forward proxied URI alone in
ap_proxy_pre_request() with no UDS special case or alike, a proxy module can
then catch (or not) the original URI as expected.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895981 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 15a5cde91626a68425f7f5e215f5a816dbb956f7)","{""sha"": ""6bc596d61186e2899e10944f64dbb98d714bf647"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-12-15T11:35:36Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-15T13:50:39Z""}}"
287,SubmitCommit,2021-12-15 13:50:39,ylavic,fork_close,"mod_proxy: Axe useless setting of *balancer to NULL in ap_proxy_pre_request()

It's already NULL per the enclosing ""if"" test.

Also, while at a non-functional change, break a close long log line to <80 col.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1895986 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit cb7f57ee7d8f50c4e9b8eaa7fc31e4d4d6ea8480)","{""sha"": ""d9aba370fae174a6f06b13dac8126569c7bccbeb"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2021-12-15T12:47:05Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-15T13:50:39Z""}}"
287,OpenPR,2021-12-15 13:52:21,ylavic,fork_close,,
287,IssueCommentSupplement,2021-12-16 11:31:57,ylavic,fork_close,Merged in r1896044 (a0521d289ae14e4ac004811dc1ef91b3e118a2f6).,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/995708023"", ""author_association"": ""MEMBER""}"
287,ClosePR,2021-12-16 11:31:57,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5777703266"", ""commit_url"": null}"
287,DeleteBranch,2021-12-16 11:32:01,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5777703688"", ""commit_url"": null}"
288,OpenPR,2021-12-21 18:58:21,ylavic,fork_close,,
288,ReviewApproved,2021-12-28 02:14:17,All112233,fork_close,,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/apache/httpd/pull/288#pullrequestreview-840615307""}"
288,ReviewApproved,2021-12-30 13:00:01,MarcusSaviour,fork_close,True,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/apache/httpd/pull/288#pullrequestreview-841891472""}"
288,ReviewApproved,2021-12-30 13:00:59,MarcusSaviour,fork_close,True,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/apache/httpd/pull/288#pullrequestreview-841892753""}"
288,Revise,2022-01-31 12:12:00,ylavic,fork_close,"mod_proxy: Bump shared worker name to 384 chars.  PR 53218.

This is a backport of r1896253 compatible with 2.4.x, where we can't change the
layout/size of the existing proxy_worker_shared fields, to allow for larger
worker name in <Proxy> and ProxyPass.

This backport adds a ""name_ex"" field of 384 chars at the end of the struct, the
existing ""name"" field is still initialized as before for third-parties that
might use it but every internal use is replaced by ""name_ex"".","{""sha"": ""a8e13e69373ada0a65960856424233d951bc7bcf"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2021-12-21T18:43:39Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-01-31T12:12:00Z""}}"
288,IssueCommentSupplement,2022-03-07 15:20:46,ylavic,fork_close,Merged in d05b8b921997930f1f75b42be4cb27f94859e3a0 (r1898588).,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1060803137"", ""author_association"": ""MEMBER""}"
288,ClosePR,2022-03-07 15:20:46,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6195765410"", ""commit_url"": null}"
289,OpenPR,2022-01-31 23:15:27,ylavic,fork_close,,
289,ReviewComment,2022-02-01 20:33:49,rpluem,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/289#pullrequestreview-869265034""}"
289,ClosePR,2022-02-02 16:24:19,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5997064402"", ""commit_url"": null}"
289,IssueComment,2022-02-02 16:24:19,ylavic,fork_close,close/reopen to restart ci,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1028115906"", ""author_association"": ""MEMBER""}"
289,ReopenPR,2022-02-02 16:24:23,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5997064951"", ""commit_url"": null}"
289,HeadRefForcePushed,2022-02-18 13:51:36,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6099289570"", ""commit_url"": null}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"ap_regex: Follow up to r1897240: #if APR_HAS_THREAD_LOCAL, not #ifdef.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897459 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""31fde459ac420acb7309079fad6ba7e0eb41a089"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-25T16:41:48Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"ap_regex: Follow up to r1897240: cleanup PCRE2 match data on exit.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897386 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""893a03d7b6f6d9de7e123810b7d61f7ef130c910"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-23T20:48:29Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"ap_regex: Follow up to r1897240: cleanups.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897263 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0059331cfd201253f352fb48269aab1062234748"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-20T18:20:40Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"ap_regex: Follow up to r1897240: runtime fallback to alloc/free.

Even though APR_HAS_THREAD_LOCAL is compiled in, ap_regexec() might still be
called by non a apr_thread_t thread, let's fall back to alloc/free in this
case too.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897260 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7185afc84a7cb4b210f194f3d5b2a57a402fe7a0"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-20T17:01:40Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"ap_regex: Follow up to r1897240: no ap_thread_current() yet.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897261 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""55e7aab9b87b04215c51b33b6e0ad35c441375f0"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-20T17:08:02Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"ap_regex: Follow up to r1897244: Fix pmatch overflow and returned value at limits.

Don't write to pmatch[nlimit:] when ncaps > nlimit, rc should not exceed nmatch
either as before r1897244.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897248 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""19490a019ca35c706c215e04ce55f9c12a0c74b6"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-20T12:47:02Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"ap_regex: PCRE needs buffers sized against the number of captures only.

No more (useless), no less (or PCRE will allocate a new buffer by itself to
satisfy the needs), so we should base our buffer size solely on the number
of captures in the regex (determined at compile time from the pattern).

The nmatch provided by the user is used to fill in pmatch only (up to that),
but ""our"" buffers are sized exactly as needed to avoid oversized allocations
or PCRE allocating by itself.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897244 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2d9a9d3a6ceb1d7bd0f9960fe7aa1fb4bdec7bd1"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-20T12:16:58Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"Follow up to r1897240: CHANGES entry.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897242 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0cdc50e24af7cfe3bb215306debfde8eea24fa62"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-20T11:37:16Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"Follow up to r1897240: APR_HAS_THREAD_LOCAL wants #ifdef instead of #if.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897241 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4eafdc1f90acc7f8cff785a18947a908471ac713"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-20T11:24:59Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"ap_regex: Use Thread Local Storage (if efficient) to avoid allocations.

PCRE2 wants an opaque context by providing the API to allocate and free it, so
to minimize these calls we maintain one opaque context per thread (in Thread
Local Storage, TLS) grown as needed, and while at it we do the same for PCRE1
ints vectors. Note that this requires a fast TLS mechanism to be worth it,
which is the case of apr_thread_data_get/set() from/to apr_thread_current()
when APR_HAS_THREAD_LOCAL; otherwise we'll do the allocation and freeing for
each ap_regexec().

The small stack vector is used for PCRE1 && !APR_HAS_THREAD_LOCAL only now.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897240 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""7c2b22ea913c09075927e6cae29f271cc8adbebd"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-20T11:09:34Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:52:59,ylavic,fork_close,"ap_regex: Follow up to r1897240: Fix issues spotted by Rüdiger (thanks!).

#include ""apr_thread_proc.h"" is enough/needed by util_pcre.c and main.c.
Fix compilation (vector => ovector) for !HAVE_PCRE2 && APR_HAS_THREAD_LOCAL.
Check pcre2_match_data_create() return value for HAVE_PCRE2 && !APR_HAS_THREAD_LOCAL.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897250 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""6525240b7630332486f46514320123a929b43374"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-20T13:15:36Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:52:59Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"ap_regex: Follow up to r1897240: Fetch the ovector _after_ the match.

Possibly(?) pcre2_match() can modifiy the given pcre2_match_data and invalidate
the old ovector, be safe and fetch it after.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897651 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""64e46521ea8a359054af567d234824dcd15ddbe0"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-02-01T10:51:30Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"core: Follow up to r1897240 & r1897691: Syntax.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897692 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""3503453a7d10804043a09f29f67fe6ad12646d07"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-02-02T10:21:03Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"core: Follow up to r1897240: Provide/export ap_thread_current_create()

For completness, and possibly to ease backport to 2.4.x for MPM winnt.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897691 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""cc6aaa1fbec7b21a761b818d5c5369035e3d4d71"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-02-02T10:18:41Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"core: Follow up to r1897240: Opt-out for AP_HAS_THREAD_LOCAL and/or pcre's usage.

If the compiler's thread_local is not efficient enough on some platforms, or
not desired, have a way to disable its usage in httpd (at compile time).

Handle -DAP_NO_THREAD_LOCAL and/or -DAPREG_NO_THREAD_LOCAL as build opt-out for
thread_local usage in httpd gobally and/or in ap_regex only (respectively).



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897689 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8a21eed359590d4c1a287ad4527be770c9bce8a9"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-02-02T10:02:26Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"main: Follow up to r1897240: Fix bad log copypasta.

Don't stderr printf the ""stat"" and ""failed"" results from the previous
apr_app_initialize() call for an error in ap_thread_main_create().



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897680 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""478c97c6305c25d1e633033927936f5f827d639f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-02-02T02:06:42Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,Rainer Jung,fork_close,"Minor mmn bump due to r1612940.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1613189 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""f8458f4aee9da0fffa4826df824951d90fe410aa"", ""author"": {""name"": ""Rainer Jung"", ""email"": ""rjung@apache.org"", ""date"": ""2014-07-24T17:02:03Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"Follow up to r1897460: !APR_HAS_THREAD implies no ap_thread_* either.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897462 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""b41ee600e15ce6f66b8ca3aabc086557f1890bd1"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-25T17:55:16Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,Rainer Jung,fork_close,"Add compiled and loaded PCRE version numbers
to ""httpd -V"" output and to mod_info page.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1612934 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ce8cb58d1b15c8f6787dec3261d4ea0618aea01a"", ""author"": {""name"": ""Rainer Jung"", ""email"": ""rjung@apache.org"", ""date"": ""2014-07-23T19:53:22Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"core: Follow up to r1897460: Provide ap_thread_main_create().

Replace ap_thread_current_create() by ap_thread_main_create() which is how
it's used by httpd. The former is now a local helper only to implement the
latter.

This allows to consolidate/factorize common code in the main() of httpd and
the unix MPMs.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897543 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""0d9499abaa48e2735b706c3d7229d92bd6c73d5f"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-27T12:34:53Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"core: Follow up to r1897460: Implement and use ap_thread_current_after_fork().

thread_local variables are not (always?) reset on fork(), so we need a way
to set the current_thread to NULL in the child process.

Implement and use ap_thread_current_after_fork() for that.

* include/httpd.h:
  Define ap_thread_current_after_fork().

* server/util.c:
  Implement ap_thread_current_after_fork().

* server/mpm/event/event.c, server/mpm/prefork/prefork.c,
    server/mpm/worker/worker.c:
  Use ap_thread_current_after_fork().

* server/mpm/winnt/child.c:
  Windows processes are not fork()ed and each child runs the main(), so
  ap_thread_current_create() was already called there.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897472 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""791755f4f23c87a868e1a45e39d905f6a72963c1"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-25T20:28:28Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"core: Efficient ap_thread_current() when apr_thread_local() is missing.

their apr-1.8+ equivalent if available, or implement them using the compiler's
thread_local mechanism if available, or finally provide stubs otherwise.

AP_THREAD_LOCAL is defined to the compiler's keyword iff AP_HAS_THREAD_LOCAL.

Replace all apr_thread_create() calls with ap_thread_create() so that httpd
threads can use ap_thread_current()'s pool data as Thread Local Storage.

Bump MMN minor.

* include/httpd.h():
  Define AP_HAS_THREAD_LOCAL, AP_THREAD_LOCAL (eventually), ap_thread_create(),
  ap_thread_current_create() and ap_thread_current().

* server/util.c:
  Implement ap_thread_create(), ap_thread_current_create() and
  ap_thread_current() when APR < 1.8.

* modules/core/mod_watchdog.c, modules/http2/h2_workers.c,
    modules/ssl/mod_ssl_ct.c:
  Use ap_thread_create() instead of apr_thread_create.

* server/main.c:
  Use AP_HAS_THREAD_LOCAL and ap_thread_current_create instead of APR's.

* server/util_pcre.c:
  Use AP_HAS_THREAD_LOCAL and ap_thread_current instead of APR's.

* server/mpm/event/event.c, server/mpm/worker/worker.c,
    server/mpm/prefork/prefork.c:
  Use ap_thread_create() instead of apr_thread_create.
  Create an apr_thread_t/ap_thread_current() for the main chaild thread usable
  at child_init().

* server/mpm/winnt/child.c:
  Use ap_thread_create() instead of CreateThread().
  Create an apr_thread_t/ap_thread_current() for the main chaild thread usable

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897460 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""5713d59727343100fa8acd2824aa3cb764bd4960"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-25T17:34:57Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,Rainer Jung,fork_close,"Forgotten file needed for r1612934.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1612940 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""e6fc7d46fcc78977d368811530d65aa57f03fe34"", ""author"": {""name"": ""Rainer Jung"", ""email"": ""rjung@apache.org"", ""date"": ""2014-07-23T20:27:32Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,Revise,2022-02-28 09:53:00,ylavic,fork_close,"Follow up to r1897460: APLOGNOs.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1897461 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""a040616cf6c5ac2834c71e0972410853e1e20453"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-01-25T17:41:42Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-28T09:53:00Z""}}"
289,HeadRefForcePushed,2022-02-28 09:56:30,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6153433037"", ""commit_url"": null}"
289,Referenced,2022-02-28 11:57:08,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6154161107"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/285b6285e799d3480150375cb853d40973d3ab4c""}"
289,IssueCommentSupplement,2022-02-28 11:58:36,ylavic,fork_close,Merged in r1898467 / 285b6285e799d3480150375cb853d40973d3ab4c,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1054183315"", ""author_association"": ""MEMBER""}"
289,ClosePR,2022-02-28 11:58:36,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6154169045"", ""commit_url"": null}"
289,DeleteBranch,2022-02-28 11:58:42,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6154169625"", ""commit_url"": null}"
290,OpenPR,2022-02-02 10:58:54,ylavic,fork_close,,
290,HeadRefForcePushed,2022-02-02 13:44:59,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5995871160"", ""commit_url"": null}"
290,HeadRefForcePushed,2022-02-02 16:19:45,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5997031315"", ""commit_url"": null}"
290,HeadRefForcePushed,2022-02-02 16:38:57,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/5997167173"", ""commit_url"": null}"
290,HeadRefForcePushed,2022-02-03 14:44:22,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003294878"", ""commit_url"": null}"
290,IssueComment,2022-02-03 14:46:23,ylavic,fork_close,close/reopen to restart ci,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1029063047"", ""author_association"": ""MEMBER""}"
290,ClosePR,2022-02-03 14:46:23,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003310128"", ""commit_url"": null}"
290,ReopenPR,2022-02-03 14:46:29,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003310663"", ""commit_url"": null}"
290,HeadRefForcePushed,2022-02-03 14:48:50,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003328624"", ""commit_url"": null}"
290,HeadRefForcePushed,2022-02-03 14:50:30,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003341822"", ""commit_url"": null}"
290,ClosePR,2022-02-03 14:56:50,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003388559"", ""commit_url"": null}"
290,ReopenPR,2022-02-03 14:56:56,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003389286"", ""commit_url"": null}"
290,CrossReferenced,2022-02-03 15:01:46,ylavic,fork_close,Event wip,"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/292"", ""is_pull_request"": true}}"
290,HeadRefForcePushed,2022-02-03 16:10:18,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003938530"", ""commit_url"": null}"
290,Revise,2022-02-03 21:49:49,ylavic,fork_close,mpm_event: Improve logging.,"{""sha"": ""fddc3a8e245ee18a2247af94f9ae907424885aaf"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T15:25:43Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T21:49:49Z""}}"
290,Revise,2022-02-03 21:49:51,ylavic,fork_close,"core, mod_reqtimeout: Add ap_get_connection_timeout().

Provide a new min_connection_timeout hook that modules enforcing a
dynamic connection timeout (e.g. mod_reqtimeout) should use to inform
ap_get_connection_timeout() users about the current timeout being
applied.

Track the current timeout enforced by mod_reqtimeout in its context and
implement the min_connection_timeout to return it.

* include/ap_mmn.h():
  Minor bump for min_connection_timeout and ap_get_connection_timeout().

* include/http_connection.h():
  Declare min_connection_timeout and ap_get_connection_timeout().

* server/connection.c():
  Implement min_connection_timeout and ap_get_connection_timeout().

* modules/filters/mod_reqtimeout.c(struct reqtimeout_stage_t):
  Add server_timeout as the timeout defined for the server at the current
  stage.

* modules/filters/mod_reqtimeout.c(struct reqtimeout_con_cfg):
  Add time_left as the dynamic timeout enforced by mod_reqtimeout at the
  current stage.

* modules/filters/mod_reqtimeout.c(check_time_left):
  Store the computed time_left in the reqtimeout_con_cfg, and set the
  socket timeout there (returning an error which will be caught if that
  fails).

* modules/filters/mod_reqtimeout.c(extend_timeout):
  Update time_left in the reqtimeout_con_cfg per the time taken by the last
  read.

* modules/filters/mod_reqtimeout.c(reqtimeout_filter):
  Remove the special path for APR_NONBLOCK_READ or AP_MODE_EATCRLF, it
  does the exact same thing than the !(AP_MODE_GETLINE && APR_BLOCK_READ)
  one.

* modules/filters/mod_reqtimeout.c(reqtimeout_init, reqtimeout_before_header,
                                   reqtimeout_before_body, INIT_STAGE):
  Set the server_timeout in the current stage.

* modules/filters/mod_reqtimeout.c(reqtimeout_min_timeout):
  The new hook implementation.","{""sha"": ""4f1e335005e055c8d45e344673b8ea9d9caa699f"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T16:17:11Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T21:49:51Z""}}"
290,Revise,2022-02-03 21:56:05,ylavic,fork_close,"mpm_event: Use ap_get_connection_timeout() for AGAIN connections.

If ap_run_process_connection() returns AGAIN and the connection timeout
as returned by ap_get_connection_timeout() is different than the rl_q
timeout, use a timer event rather than the rl_q to keep track of the
idle connection.

* server/mpm_fdqueue.h(truct timer_event_t):
  Add the ""timeout"" field to store the timeout of the timer, recomputing
  it from ""when"" would require to call apr_time_now() otherwise.

* server/mpm/event/event.c():
  #define TIMER_MIN_TIMEOUT as the minimal timer event's timeout, to
  prevent the events from firing before the sockets are added to the
  pollset. Currently set to 50ms (an arbitrary value..).

* server/mpm/event/event.c(struct event_conn_state_t):
  Add the timer_event_t *te field as an alternative to the q.

* server/mpm/event/event.c(struct event_srv_cfg_s):
  Add the server_rec *s field to backref the server_rec and easily pass
  cs->sc->s to ap_get_connection_timeout().

* server/mpm/event/event.c(pollset_add_at, pollset_del_at):
  If the connection is attached to a timer event, log a ""t"" instead of
  a ""q"" and the timer's timeout instead of the q's.

* server/mpm/event/event.c(process_socket):
  If ap_get_connection_timeout() is different than the rl_q timeout,
  acquire a timer event and associate it with the conn_state. A timer
  event associated with a conn_state has a NULL callback (cbfn).

* server/mpm/event/event.c(event_get_timer_event):
  Set the given timeout to the ->timeout field.

* server/mpm/event/event.c(event_register_timed_callback_ex,
                           event_register_poll_callback_ex):
  Return APR_EINVAL if the given callbacks are NULL, this is reserved
  for conn_state timers now. Since it would have crashed at some point
  to pass NULL callbacks before, it's not really an API change.

* server/mpm/event/event.c(listener_thread):
  Fix the poll() timeout set from timers_next_expiry which should be
  taken into account whether it expired or not.
  When a conn_state timer fires/expires, remove it from the pollset and
  abort the connection (with APLOG_INFO).
  When a conn_state timer is polled, cancel the timer.","{""sha"": ""dec78ee5ace60456e5722d01afaf3ef55e871728"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T16:25:48Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T21:56:05Z""}}"
290,Revise,2022-02-03 21:56:07,ylavic,fork_close,"mpm_event: Pending queue for when active connections have no worker available.

Connections that need processing while no worker thread is idle are put
in a pending_q, the next finishing workers will process them. Listening
sockets are disabled in the meantime, when some workers become idle again
they will test for should_enable_listensocks() and re-enable them.

* server/mpm/event/event.c():
  Define MAX_SECS_PENDING as the pending_q timeout. Currently set to
  30s (arbitrary value..).

* server/mpm/event/event.c(struct timeout_queue):
  Add the pending_q head pointer.

* server/mpm/event/event.c(disable_listensocks, enable_listensocks):
  Return whether the listening sockets were or not already dis/enabled.

* server/mpm/event/event.c(make_conn_state):
  New helper to allocate and minimally initialize a conn_state since it
  can now happen from multiple places. The connection_count is incremented
  there.

* server/mpm/event/event.c(process_socket):
  A new connection is now !cs or !cs->c, since a conn_state can be created
  earlier. If !cs still, use make_conn_state() to allocate it (this should
  not happen anymore though).

* server/mpm/event/event.c(push2worker):
  The cs (if any) is now created by the caller, remove the csd and
  ptrans arguments.

* server/mpm/event/event.c(push2pending):
  New helper to push a cs to the pending_q after disabling the listening
  sockets.

* server/mpm/event/event.c(get_worker):
  No need to block anymore thanks to the pending_q, so remove the ""blocking""
  argument and ap_queue_info_wait_for_idler() call.

* server/mpm/event/event.c(listener_thread):
  If get_worker() returns no idle worker, push the PT_CSD and PT_ACCEPT
  connections to the pending queue (using the push2pending() helper).
  For the PT_CSD case there is no need for the ""blocking"" variable
  anymore since get_worker() is always non-blocking.
  For the PT_ACCEPT case the cs is now created before push2worker() or
  push2pending() to account for the connection ASAP, otherwise a
  graceful restart happening before it's processed would consider it
  does not exist and could exit the child too early (e.g. test_h2_004_22
  from the pytest suites exercises this).
  The pending_q is processed for timeouts with the others (step 6).

* server/mpm/event/event.c(worker_thread):
  Process the entries in the pending_q before returning to idle state.

* server/mpm/event/event.c(event_post_config):
  Create the pending_q.","{""sha"": ""f196f0c17d8f7d74f856c1608587d3b06a9a5ebe"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T19:51:53Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T21:56:07Z""}}"
290,Revise,2022-02-03 22:04:27,ylavic,fork_close,"mpm_event: Take advantage of the now fully non-blocking listener loop.

Now that the listener loop is fully non-blocking, we can ask for and use
only two timestamps accross loop: one for before poll()ing and the other
one for after poll()ing. After poll()ing the timestamp might drift a bit
while processing all the events, but if the queues maintenance is skipped
because of that it will happen in the next loop with timeout = 0.

Also process_timeout_queue() can be quite simplified if it does not need
to release the lock (all the callbacks are non-blocking too).

* server/mpm/event/event.c(TIMEOUT_EXPIRED):
  New helper to determine whether a timestamp + timeout expired, also
  expiring entries if the clock went backwart too much.

* server/mpm/event/event.c(listener_thread):
  Use two time1 and time2 variables for the time(stamp)s before and
  after poll()ing. time2 is fetched just after poll() and reused for all
  the below processing (i.e. not recomputed for queues maintenance).

* server/mpm/event/event.c(process_timeout_queue):
  Simplify the code by calling the callback in a single (double-)loop.
  The timeout_mutex mutex is not released/re-acquired anymore.
  Use TIMEOUT_EXPIRED() to check for expiry.","{""sha"": ""2aca5a2dfad38c52439b8d4b79e89ea49093f2b7"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T20:55:51Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T22:04:27Z""}}"
290,Revise,2022-02-03 22:06:15,ylavic,fork_close,"mpm_event: Use r->server's Timeout after the post_read_request hook.

Regardless of keep_alive_timeout_set which anyway is only about the
KeepAliveTimeout to apply _after_ the current request, always use the
request's server Timeout during its processing (i.e. READ_REQUEST_LINE
and WRITE_COMPLETION).

To save the next KeepAliveTimeout to use later, add a new event_srv_cfg
to the conn_state which points to the appropriate server (either r->server
or c->base_server depending on keep_alive_timeout_set as before).

* server/mpm/event/event.c(struct event_conn_state_t):
  Add event_srv_cfg *ka_sc as the server config to apply for kept alive
  connections.

* server/mpm/event/event.c(event_post_read_request):
  Always set cs->sc to the event_srv_cfg or the request's server, and
  point cs->ka_sc to the appropriate one according to keep_alive_timeout_set.

* server/mpm/event/event.c(make_conn_state):
  Initialize cs->ka_sc to the ap_server_conf's event_srv_cfg, like cs->sc.

* server/mpm/event/event.c(process_socket):
  Use cs->ka_sc->ka_q for CONN_STATE_CHECK_REQUEST_LINE_READABLE.","{""sha"": ""b4aa21cdff83975d8ac4d9b12b657d04ad30e585"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T21:24:15Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T22:06:15Z""}}"
290,Revise,2022-02-03 22:06:17,ylavic,fork_close,"mpm_event: Use monotonic timestamps if available.

If clock_gettime() and CLOCK_MONOTONIC are defined (i.e. most/all?  unixes),
use them to provide a timestamp that never goes past (even if the admin
changes the system time). This avoids entries potentially suddenly expiring
in centuries on a bad clock skew.

* configure.in():
  Provide HAVE_TIME_H and HAVE_CLOCK_GETTIME.

* server/mpm/event/event.c(event_time_now):
  New helper to get a monotonic timestamp from clock_gettime() if it's
  available, or apr_time_now() (i.e. gettimeofday()) otherwise.

* server/mpm/event/event.c(TIMEOUT_EXPIRED):
  No need to check for a backward clock if it's monotonic.

* server/mpm/event/event.c(process_socket, event_resume_suspended,
                           event_get_timer_event, process_lingering_close,
                           listener_thread, event_run):
  Use event_time_now().","{""sha"": ""50e04c1caa90ef7de29e31499d583c0b9b8a0233"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T21:47:38Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T22:06:17Z""}}"
290,Revise,2022-02-03 22:06:17,ylavic,fork_close,"mpm_event: Simplify/factorize timeout queues chaining at post_config.

* server/mpm/event/event.c(TO_QUEUE_CHAIN):
  New helper to do the chaining.

* server/mpm/event/event.c(event_post_config):
  Use TO_QUEUE_CHAIN() to create the {rl,wc,ka}_q per server and axe a
  lot of duplicated code.","{""sha"": ""aabb1b70b2124f2cb8b6cef34f56d23698a3c5d6"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T22:00:22Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T22:06:17Z""}}"
290,Revise,2022-02-03 22:06:17,ylavic,fork_close,"mpm_event: Simpler timer_comp() comment and code.

I must have been high when I wrote this comment..

* server/mpm/event/event.c(timer_comp):
  Simpler comment, code with no casts.","{""sha"": ""d1a8c2071f3910980ab7189744ae7a5ccdb7b4c5"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T22:05:48Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T22:06:17Z""}}"
290,Revise,2022-02-03 22:06:17,ylavic,fork_close,Re-enable pytest test_h2_105_02.,"{""sha"": ""77e337c6a31f16e12f970ebc538d00b4357aebb2"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-02T10:53:48Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T22:06:17Z""}}"
290,Revise,2022-02-03 22:06:17,ylavic,fork_close,Try to see what's happening in test_712_buffering.,"{""sha"": ""8217f344e1d2315df77711495948b882222a295f"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-02T16:18:25Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T22:06:17Z""}}"
290,Revise,2022-02-03 22:06:17,ylavic,fork_close,travis: generate/show coredumps from pytests.,"{""sha"": ""8ceae38f274aff575ef7d760836326bb39cf7220"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:37:35Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T22:06:17Z""}}"
290,Revise,2022-02-03 22:06:17,ylavic,fork_close,Show where the csd/ptrans get cleared..,"{""sha"": ""c665aa1a31f4251186ca25a8d20ccde133573fd5"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:40:36Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T22:06:17Z""}}"
290,HeadRefForcePushed,2022-02-03 22:11:30,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6005989253"", ""commit_url"": null}"
290,IssueCommentSupplement,2022-02-04 16:03:46,ylavic,fork_close,Now in #294,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1030124705"", ""author_association"": ""MEMBER""}"
290,ClosePR,2022-02-04 16:03:46,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6010480919"", ""commit_url"": null}"
291,SubmitCommit,2022-01-28 14:20:02,Stefan Eissing,fork_close,"http vs http/1.x separation. filters are split and new mod_http1 has
been added to keep the version 1.x relevant filters.

base tests run, but proxy handling still needs work.","{""sha"": ""7f8ff953028bd176553063aaa5fcaef8a46291c1"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-28T14:20:02Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-28T14:20:02Z""}}"
291,SubmitCommit,2022-01-31 09:53:23,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""63c9a473980e98a20fb925debea5e02ee1bff317"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-31T09:53:23Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-31T09:53:23Z""}}"
291,SubmitCommit,2022-01-31 12:15:31,Stefan Eissing,fork_close," * perl framework tests pass
 * pytest tests pass","{""sha"": ""81db58747c6057ea56897e86b15688b636518e41"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-31T12:15:31Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-31T12:15:31Z""}}"
291,SubmitCommit,2022-01-31 13:28:12,Stefan Eissing,fork_close," * moved more http1 stuff into mod_http1
 * Connection header handling in mod_http1
 * connection keepalive handling in mod_http1","{""sha"": ""7a4a2c4383c80ff6c915aaf7016b68bae3c68ea2"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-31T13:28:12Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-31T13:28:12Z""}}"
291,SubmitCommit,2022-01-31 14:51:21,Stefan Eissing,fork_close," * using AP_NOTE_REQUEST_BODY_INDETERMINATE in mod_http1 and mod_http2
   to signal into generic HTTP processing that a request has a body
   of indeterminate length.","{""sha"": ""e74b36abd67037d29dc6c847ba3ba1cab90b56b0"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-31T14:51:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-01-31T14:51:21Z""}}"
291,SubmitCommit,2022-02-01 10:52:21,Stefan Eissing,fork_close,Removing some nop code in mod_http. Removing LogLevel in http2 test env.,"{""sha"": ""33d05f0e08de3c8b5cbe51024235a27496dcb779"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-01T10:52:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-01T10:52:21Z""}}"
291,SubmitCommit,2022-02-01 10:54:42,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""e588b29adb4ffbc2bba3e5cc83e7444fe5af4aa5"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-01T10:54:42Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-01T10:54:42Z""}}"
291,SubmitCommit,2022-02-01 13:51:06,Stefan Eissing,fork_close,"  *) mod_http/mod_http1: moved more Transfer-Encoding handling into mod_http1
     mod_http2: fixed handling of trailers, adding test cases","{""sha"": ""281e5ce3b118f8c5537557665511fa765966e4d2"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-01T13:51:06Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-01T13:51:06Z""}}"
291,SubmitCommit,2022-02-02 13:05:56,Stefan Eissing,fork_close,"  * mod_http1: adding trailer support in chunked output encoding
  * test: add trailer test cases for http/1 and http/2","{""sha"": ""dd8e8bb588abcf7eab5c3945c017beafe2cb3723"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-02T13:05:56Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-02T13:05:56Z""}}"
291,SubmitCommit,2022-02-02 13:07:07,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""9f95131eac9e6d88fb3b674a92aab017325be476"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-02T13:07:07Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-02T13:07:07Z""}}"
291,SubmitCommit,2022-02-02 13:22:09,Stefan Eissing,fork_close,  *) test/modules/http1: adding out trailer test through proxy,"{""sha"": ""72191bad87e01b4ff7393fc97b1b0aaf17a74225"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-02T13:22:09Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-02T13:22:09Z""}}"
291,SubmitCommit,2022-02-02 15:19:48,Stefan Eissing,fork_close,"  *) mod_proxy: allow forwarding of incoming trailers to backends
     Adding test cases. Adding common function to add the last
     chunk in chunked http/1.1 encoding.","{""sha"": ""a0922f5fa71bf4444690c1bafa9ad326a376d291"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-02T15:19:48Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-02T15:19:48Z""}}"
291,SubmitCommit,2022-02-03 13:03:25,Stefan Eissing,fork_close,"  *) mod_http1/mod_proxy:
     - exposing functions to serialize HTTP/1.1 headers values onto
       a bucket brigade and terminating headers.
     - using new functions in mod_proxy ap_proxy_create_hdrbrgd()
     - changing removal of unwanted client headers in proxy requests
       from an O(n*m) operation to O(log(n)*m).","{""sha"": ""171bae5098a4b5d904e8a23a6454d31f6d181a1c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-03T13:03:25Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-03T13:03:25Z""}}"
291,SubmitCommit,2022-02-03 13:36:46,Stefan Eissing,fork_close,  *) mod_http1: rename of transcode filters to response_out/request_in.,"{""sha"": ""942e116f8693ebd19ea254bbd074c0a3be503d82"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-03T13:36:46Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-03T13:36:46Z""}}"
291,OpenPR,2022-02-03 14:41:05,icing,fork_close,,
291,Revise,2022-02-10 11:26:58,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""b874fcb98078af063c40e986f7453d6d4a1484c5"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-10T11:26:58Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-10T11:26:58Z""}}"
291,Revise,2022-02-28 08:52:51,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""d56a69722cf0600d54c1bff7a27baf4a25e3c0fe"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-28T08:52:51Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-28T08:52:51Z""}}"
291,Revise,2022-02-28 11:19:06,Stefan Eissing,fork_close,"  *) core/mod_http1: remove some http1 filters from mod_core.h again,
     making them non-public. Do some renames for clarity of purpose
     what a filter does.
     Use post_read_request hook to install http1 specific filters
     when needed, removing knowledge from generic server/protocol.c
     handling.","{""sha"": ""58549fad20a6ec9d464ff31f790114c6b60e76f6"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-28T11:19:06Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-02-28T11:19:06Z""}}"
291,Revise,2022-03-01 08:58:12,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""f63d499f19ee921deaedb399d93aec228457a276"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-01T08:58:12Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-01T08:58:12Z""}}"
291,Revise,2022-03-01 12:21:14,Stefan Eissing,fork_close,"  *) core/mod_http*: adding meta bucket type RESPONSE and removing
     status+reason+notes from HEADERS bucket. HEADERS is now only
     used for trailers.
     Preparing HTTP/1.x request parsing input filter, so that
     ap_read_request() gets rid of HTTP/1.1 parsing and instead
     adds on meta bucket provided by protocol specific filters.","{""sha"": ""9dd27edbcab6460f376f474db834e74653e5f3a2"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-01T12:21:14Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-01T12:21:14Z""}}"
291,Revise,2022-03-01 12:30:08,Stefan Eissing,fork_close,  *) mod_http1: init potentially uninitialized local var.,"{""sha"": ""c0c24e0f6c7bb92a3a7a58923d1623aaceb60dbc"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-01T12:30:08Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-01T12:30:08Z""}}"
291,Revise,2022-03-01 15:34:18,Stefan Eissing,fork_close,"  *) mod_http1: remove output filters after a 101 protocol
     switch response has been sent.","{""sha"": ""3917b521b810bb4e852ca43589e045bb40eca17d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-01T15:34:18Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-01T15:34:18Z""}}"
291,Revise,2022-03-02 14:24:13,Stefan Eissing,fork_close,"  *) core/mod_http1: fixed the ap_http_header_filter to also trigger
     response creation when only a FLUSH was sent (this caused CI
     failures in lua's websocket test).
     test: added websocket test in the modules/proxy suite that
     checks if the python `websocket` module is installed.","{""sha"": ""93a63a38c49c71b110a79a5ed9889f7e28ece76a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-02T14:24:13Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-02T14:24:13Z""}}"
291,Revise,2022-03-03 09:50:45,Stefan Eissing,fork_close,allocating APLOGNO numbers from trunk.,"{""sha"": ""3354e6af04b636b8abf46296844a49b831369df6"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-03T09:50:45Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-03T09:50:45Z""}}"
291,Revise,2022-03-05 13:40:47,Stefan Eissing,fork_close,"  *) core/mod_http/mod_http1:
     - new bucket types are now REQUEST/RESPONSE/HEADERS and carry
       the meta data for the HTTP semantics.
       (rename of HEADERS to TRAILERS pending)
     - mod_http1 has a TRANSCODE input filter that reads a HTTP/1.x
       request and returns a REQUEST bucket or ERROR bucket to
       the caller.
     - ap_read_request(), the core workhorse for request handling
       is stripped of HTTP/1.x parsing and expects REQUEST/ERROR
       buckets from the protocol filters when reading a request.
     - use of REQUEST buckets in mod_http2 to be done.","{""sha"": ""fe8fdfa71836dc297ccf6df4a3de008279ab0964"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-05T13:40:47Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-05T13:40:47Z""}}"
291,Revise,2022-03-05 13:52:10,Stefan Eissing,fork_close,"  * adding APLOGNO numbers, allocated from trunk.","{""sha"": ""81d8fce710c33c0a7289343098406fef4e73a497"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-05T13:52:10Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-05T13:52:10Z""}}"
291,Revise,2022-03-07 09:42:42,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""8e82e3191d006b7014748c064ce70d191caf1ee3"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-07T09:42:42Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-07T09:42:42Z""}}"
291,Revise,2022-03-07 14:53:26,Stefan Eissing,fork_close,"  *) mod_http2: using new REQUST buckets to forward requests
     on c2 connection to standard connection processing of the
     server.","{""sha"": ""93fcc764bc7f8098d321409d409d4b4d2458246c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-07T14:53:26Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-07T14:53:26Z""}}"
291,Revise,2022-03-08 09:21:08,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""0b32af7226ef8c073770d0e2a609dee05747db55"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-08T09:21:08Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-08T09:21:08Z""}}"
291,Revise,2022-03-08 12:24:49,Stefan Eissing,fork_close,  *) mod_http2: some small cleanups on stream input handling.,"{""sha"": ""935a11ed46ac82671579bc81eafffa02732ef614"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-08T12:24:49Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-08T12:24:49Z""}}"
291,Revise,2022-03-21 08:40:35,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""661788ffcb01aa0ec365b43754b080666748b2b5"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-21T08:40:35Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-21T08:40:35Z""}}"
291,Revise,2022-03-21 09:17:38,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""e0023450f17b247fd03478abe109bc69120d60ab"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-21T09:17:38Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-21T09:17:38Z""}}"
291,Revise,2022-03-21 09:58:53,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""2a67623b7ebc066fe83a21315f49b103a7308fcb"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-21T09:58:53Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-21T09:58:53Z""}}"
291,Revise,2022-03-23 09:39:42,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""4c3e026e08f294f5c82b24e331115eb0cb8993ae"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-23T09:39:42Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-23T09:39:42Z""}}"
291,Revise,2022-03-24 09:07:11,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""0a7114c6491d8bc6ca1a891a0e20d9a6b5f7664c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-24T09:07:11Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-24T09:07:11Z""}}"
291,Revise,2022-03-24 10:04:40,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""46cf979e52ce9066c85c4db84d1618af83b0e6a1"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-24T10:04:40Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-24T10:04:40Z""}}"
291,Revise,2022-03-24 11:37:40,Stefan Eissing,fork_close,"  *) core: adding a 'pool' member to new meta bucket structures
     so that receiving handlers have an idea about the lifetime
     of included values.","{""sha"": ""17663bb5d9fe60e5b0418a7cb57ac4322968c052"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-24T11:37:40Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-24T11:37:40Z""}}"
291,ReviewRequested,2022-03-24 12:21:33,icing,fork_close,,"{""requested_reviewer"": {""login"": ""royfielding"", ""id"": 1724757, ""node_id"": ""MDQ6VXNlcjE3MjQ3NTc="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/1724757?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/royfielding"", ""html_url"": ""https://github.com/royfielding"", ""followers_url"": ""https://api.github.com/users/royfielding/followers"", ""following_url"": ""https://api.github.com/users/royfielding/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/royfielding/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/royfielding/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/royfielding/subscriptions"", ""organizations_url"": ""https://api.github.com/users/royfielding/orgs"", ""repos_url"": ""https://api.github.com/users/royfielding/repos"", ""events_url"": ""https://api.github.com/users/royfielding/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/royfielding/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
291,ReviewRequested,2022-03-24 12:21:34,icing,fork_close,,"{""requested_reviewer"": {""login"": ""ylavic"", ""id"": 15033035, ""node_id"": ""MDQ6VXNlcjE1MDMzMDM1"", ""avatar_url"": ""https://avatars.githubusercontent.com/u/15033035?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/ylavic"", ""html_url"": ""https://github.com/ylavic"", ""followers_url"": ""https://api.github.com/users/ylavic/followers"", ""following_url"": ""https://api.github.com/users/ylavic/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/ylavic/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/ylavic/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/ylavic/subscriptions"", ""organizations_url"": ""https://api.github.com/users/ylavic/orgs"", ""repos_url"": ""https://api.github.com/users/ylavic/repos"", ""events_url"": ""https://api.github.com/users/ylavic/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/ylavic/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
291,ReviewRequested,2022-03-24 12:21:51,icing,fork_close,,"{""requested_reviewer"": {""login"": ""covener"", ""id"": 908093, ""node_id"": ""MDQ6VXNlcjkwODA5Mw=="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/908093?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/covener"", ""html_url"": ""https://github.com/covener"", ""followers_url"": ""https://api.github.com/users/covener/followers"", ""following_url"": ""https://api.github.com/users/covener/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/covener/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/covener/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/covener/subscriptions"", ""organizations_url"": ""https://api.github.com/users/covener/orgs"", ""repos_url"": ""https://api.github.com/users/covener/repos"", ""events_url"": ""https://api.github.com/users/covener/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/covener/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
291,ReviewRequested,2022-03-24 12:21:51,icing,fork_close,,"{""requested_reviewer"": {""login"": ""notroj"", ""id"": 9193075, ""node_id"": ""MDQ6VXNlcjkxOTMwNzU="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/9193075?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/notroj"", ""html_url"": ""https://github.com/notroj"", ""followers_url"": ""https://api.github.com/users/notroj/followers"", ""following_url"": ""https://api.github.com/users/notroj/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/notroj/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/notroj/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/notroj/subscriptions"", ""organizations_url"": ""https://api.github.com/users/notroj/orgs"", ""repos_url"": ""https://api.github.com/users/notroj/repos"", ""events_url"": ""https://api.github.com/users/notroj/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/notroj/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
291,ReviewRequested,2022-03-24 12:22:08,icing,fork_close,,"{""requested_reviewer"": {""login"": ""jfclere"", ""id"": 316679, ""node_id"": ""MDQ6VXNlcjMxNjY3OQ=="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/316679?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/jfclere"", ""html_url"": ""https://github.com/jfclere"", ""followers_url"": ""https://api.github.com/users/jfclere/followers"", ""following_url"": ""https://api.github.com/users/jfclere/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/jfclere/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/jfclere/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/jfclere/subscriptions"", ""organizations_url"": ""https://api.github.com/users/jfclere/orgs"", ""repos_url"": ""https://api.github.com/users/jfclere/repos"", ""events_url"": ""https://api.github.com/users/jfclere/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/jfclere/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
291,Revise,2022-03-25 13:26:47,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""f20ce931db50fde97c5b4681fb8c3c961f59b1a8"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-25T13:26:47Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-25T13:26:47Z""}}"
291,Revise,2022-03-25 13:38:41,Stefan Eissing,fork_close,"  *) mod_http2: force AP_CONN_CLOSE on secondary connections to prevent
     anyone to care about cleanup or monitoring idle timeouts (mod_reqtimeout)
     on these.","{""sha"": ""003c0faec22f24522c462b8081e99cfd893f7cc3"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-25T13:38:41Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-25T13:38:41Z""}}"
291,Revise,2022-03-25 13:45:23,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""68a19bd5d84a703d51978ef4e3aa00d1e67def5b"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-25T13:45:23Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-25T13:45:23Z""}}"
291,IssueComment,2022-03-25 14:16:27,jfclere,fork_close,Would it be possible to group the commits in less commits? It is huge to review ;-),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1079071442"", ""author_association"": ""CONTRIBUTOR""}"
291,IssueComment,2022-03-25 16:55:52,icing,fork_close,"I could make a PR with just the core changes, but that one would not pass our CI. If anyone thinks it'd help, let me know.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1079217457"", ""author_association"": ""CONTRIBUTOR""}"
291,ReviewComment,2022-03-28 11:35:06,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923005965""}"
291,ReviewComment,2022-03-28 11:40:14,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923011373""}"
291,ReviewComment,2022-03-28 11:45:32,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923017244""}"
291,ReviewComment,2022-03-28 11:47:25,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923019336""}"
291,ReviewComment,2022-03-28 11:48:05,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923020067""}"
291,ReviewComment,2022-03-28 11:49:42,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923021841""}"
291,ReviewComment,2022-03-28 11:52:03,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923024339""}"
291,ReviewComment,2022-03-28 11:53:33,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923025992""}"
291,ReviewComment,2022-03-28 11:54:16,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923026767""}"
291,ReviewComment,2022-03-28 11:55:16,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923027941""}"
291,ReviewComment,2022-03-28 11:56:04,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/291#pullrequestreview-923028809""}"
291,IssueComment,2022-03-28 12:01:37,ylavic,fork_close,"First pass, I will come back later to it (no more free time for now, and a need to digest all the changes a bit ;)","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1080563067"", ""author_association"": ""MEMBER""}"
291,Revise,2022-03-28 16:17:37,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""82b96178ca4f468e2f8c6c3ae2af0da62bb39dae"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-28T16:17:37Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-28T16:17:37Z""}}"
291,Revise,2022-03-28 17:07:40,Stefan Eissing,fork_close,"Updates after review by ylavic:
- removed ap_tokenize_request_line() from the API again,
  only used internal in mod_http1.
- made ap_tokenize_request_line, which is used via the public
  ap_parse_request_line() work on a copy and not modify
  r->the_request any longer.
- ap_http_filter: fixed the check for data before headers.
- renamed all occurences of 'ap_http1_transcode_in_filter' to
  'http1_body_in_filter', leftovers from an earlier rename.","{""sha"": ""beac31678bb7603eaed14875970f4cc775f3ce0a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-28T17:07:40Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-28T17:07:40Z""}}"
291,Revise,2022-03-30 07:51:37,Stefan Eissing,fork_close,"  *) core, mod_http1, mod_http2: adding field `body_indeterminate`
     to `request_rec` and using it in protocol handlers when length
     of a request body and only be determined by reading it.
     (replaces former note `AP_NOTE_REQUEST_BODY_INDETERMINATE`)","{""sha"": ""5ac480ddb67aa9b1fd05caf0c2d35508b27467f4"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-30T07:51:37Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-30T07:51:37Z""}}"
291,Revise,2022-03-30 07:57:32,Stefan Eissing,fork_close,"  *) mod_http1: in post_read_req hooks, check the protocol version
     of the request instead of connection.","{""sha"": ""fc2d1c65229485aed5815f1f2af751c5b7ff8740"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-30T07:57:32Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-30T07:57:32Z""}}"
291,Revise,2022-03-30 08:07:45,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""d936fc5cad67d287ce3539595bd219606a205401"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-30T08:07:45Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-30T08:07:45Z""}}"
291,Revise,2022-03-30 09:06:59,Stefan Eissing,fork_close,"  *) core, mod_http1, mod_http: moved the handling of the standard
     response headers `Date` and `Server` from mod_http1 into the
     generic HTTP protocol handling.
     Response buckets not always carry those headers (values preserved
     from proxied responses), irregardless of the HTTP protocol
     versions involved.
     mod_http1: the serialization of response header into HTTP/1.x
     format always writes `Date` and `Server` first if present. This
     assured backward compatibility with clients who are accustomed
     to this order.","{""sha"": ""74b7b7669b8d65b56af0631e08d67825efe04caa"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-30T09:06:59Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-30T09:06:59Z""}}"
291,CrossReferenced,2022-03-30 14:20:47,icing,fork_close,HTTP/1.1 Separation - API Changes,"{""reference"": {""url"": ""https://api.github.com/repos/icing/httpd/issues/1"", ""is_pull_request"": true}}"
291,IssueComment,2022-03-30 14:23:39,icing,fork_close,"I just made a PR with only the API changes from #291.

https://github.com/icing/httpd/pull/1

Since this will never be merged to apache/httpd, I made
it against my own fork.

I started a review and commented on the new things added.
Should you find this useful, I'll make other partial PRs
for core/http1/http2/proxy changes.

Kind Regards,
Stefan

> Am 28.03.2022 um 14:16 schrieb ylavic ***@***.***>:
> 
> 
> @ylavic commented on this pull request.
> 
> In modules/http1/chunk_filter.c:
> 
> > @@ -0,0 +1,762 @@
> +/* Licensed to the Apache Software Foundation (ASF) under one or more
> 
> Likewise for http1/http_filters.c, it seems that all the code could be moved from http/http_filters.c or the few things remaining there don't belng in http1/ ?
> 
> —
> Reply to this email directly, view it on GitHub, or unsubscribe.
> You are receiving this because you authored the thread.
> 

","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1083205179"", ""author_association"": ""CONTRIBUTOR""}"
291,Revise,2022-03-31 08:05:10,Stefan Eissing,fork_close,Merge branch 'trunk' into icing/http1-separation,"{""sha"": ""f1db2b4a6a8bd66f69fb4d5ad52ce8ef8a657c96"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T08:05:10Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T08:05:10Z""}}"
291,Revise,2022-03-31 10:00:58,Stefan Eissing,fork_close,"PR readability:
 - splitting parts of server/protocol.c into another file, to be
   joined later. Just so diff is less confusing.
 - hopedfully correctly restoring, moving and modifying
   modules/http/chunk_filter.c in order to keep the
   history and show only the real changes done.","{""sha"": ""e5e8b6659c44a6e24a3630ed8852867b3d55d50d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T09:40:01Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:00:58Z""}}"
291,Revise,2022-03-31 10:05:22,Stefan Eissing,fork_close,"PR readability: trying the get chunk_filter.c to be recognized
as moved.","{""sha"": ""9ae2b2cfe756734bfc9df8c9f3e1f7922d106f9e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:05:22Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:05:22Z""}}"
291,Revise,2022-03-31 10:08:48,Stefan Eissing,fork_close,moving the file,"{""sha"": ""1b3a8e8d7ff8fd499cb9eaee76ce335b2b5987ed"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:08:48Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:08:48Z""}}"
291,Revise,2022-03-31 10:14:39,Stefan Eissing,fork_close,reapplying changes to moved chunk_filter.c,"{""sha"": ""dfbda1d0c5a4fd88d0a98266c699a78b7dc2b6ce"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:14:39Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:14:39Z""}}"
291,Revise,2022-03-31 10:31:47,Stefan Eissing,fork_close,"  *) mod_http1: make http1_request_in_filter a PROTOCOL filter, added last
     to the input, as suggested by ylavic on review.","{""sha"": ""143fd0d16652e1423108d40d891c5d5eb6d50935"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:31:47Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:31:47Z""}}"
291,Revise,2022-03-31 10:37:52,Stefan Eissing,fork_close,"  *) mod_http1: replaced occurences of previous name with
     ap_http1_response_out_filter.","{""sha"": ""2b15ce35f278c59927ed14bd5283853a60714c97"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:37:52Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-31T10:37:52Z""}}"
291,CrossReferenced,2022-04-01 11:13:54,icing,fork_close,H1 chunked input,"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/306"", ""is_pull_request"": true}}"
291,ClosePR,2022-04-13 08:40:55,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6425431390"", ""commit_url"": null}"
291,IssueCommentSupplement,2022-04-13 08:40:55,icing,fork_close,"Replaced by staged PRs #306, #307 and #311.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1097718787"", ""author_association"": ""CONTRIBUTOR""}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,mpm_event: Improve logging.,"{""sha"": ""d9ff22581c157110ace697fa8ee434b539673120"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T15:25:43Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,Re-enable pytest test_h2_105_02.,"{""sha"": ""8a5741594abeb37c363423ef59a15b87b4e84ac1"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-02T10:53:48Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,"mpm_event: Simplify/factorize timeout queues chaining at post_config.

* server/mpm/event/event.c(TO_QUEUE_CHAIN):
  New helper to do the chaining.

* server/mpm/event/event.c(event_post_config):
  Use TO_QUEUE_CHAIN() to create the {rl,wc,ka}_q per server and axe a
  lot of duplicated code.","{""sha"": ""29fd88f822875f4aa1a6019782fa5aa29543411f"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T22:00:22Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,"mpm_event: Use monotonic timestamps if available.

If clock_gettime() and CLOCK_MONOTONIC are defined (i.e. most/all?  unixes),
use them to provide a timestamp that never goes past (even if the admin
changes the system time). This avoids entries potentially suddenly expiring
in centuries on a bad clock skew.

* configure.in():
  Provide HAVE_TIME_H and HAVE_CLOCK_GETTIME.

* server/mpm/event/event.c(event_time_now):
  New helper to get a monotonic timestamp from clock_gettime() if it's
  available, or apr_time_now() (i.e. gettimeofday()) otherwise.

* server/mpm/event/event.c(TIMEOUT_EXPIRED):
  No need to check for a backward clock if it's monotonic.

* server/mpm/event/event.c(process_socket, event_resume_suspended,
                           event_get_timer_event, process_lingering_close,
                           listener_thread, event_run):
  Use event_time_now().","{""sha"": ""17349ca329543ddc2c4ee80f0fa43a171802c4b1"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T21:47:38Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,"mpm_event: Use r->server's Timeout after the post_read_request hook.

Regardless of keep_alive_timeout_set which anyway is only about the
KeepAliveTimeout to apply _after_ the current request, always use the
request's server Timeout during its processing (i.e. READ_REQUEST_LINE
and WRITE_COMPLETION).

To save the next KeepAliveTimeout to use later, add a new event_srv_cfg
to the conn_state which points to the appropriate server (either r->server
or c->base_server depending on keep_alive_timeout_set as before).

* server/mpm/event/event.c(struct event_conn_state_t):
  Add event_srv_cfg *ka_sc as the server config to apply for kept alive
  connections.

* server/mpm/event/event.c(event_post_read_request):
  Always set cs->sc to the event_srv_cfg or the request's server, and
  point cs->ka_sc to the appropriate one according to keep_alive_timeout_set.

* server/mpm/event/event.c(make_conn_state):
  Initialize cs->ka_sc to the ap_server_conf's event_srv_cfg, like cs->sc.

* server/mpm/event/event.c(process_socket):
  Use cs->ka_sc->ka_q for CONN_STATE_CHECK_REQUEST_LINE_READABLE.","{""sha"": ""ec6477009ad0fdfebb113fdc1948affb38dc06b7"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T21:24:15Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,"mpm_event: Simpler timer_comp() comment and code.

I must have been high when I wrote this comment..

* server/mpm/event/event.c(timer_comp):
  Simpler comment, code with no casts.","{""sha"": ""6dbba319813c028968ca560ef9fcf059f3f751be"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T22:05:48Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,"mpm_event: Pending queue for when active connections have no worker available.

Connections that need processing while no worker thread is idle are put
in a pending_q, the next finishing workers will process them. Listening
sockets are disabled in the meantime, when some workers become idle again
they will test for should_enable_listensocks() and re-enable them.

* server/mpm/event/event.c():
  Define MAX_SECS_PENDING as the pending_q timeout. Currently set to
  30s (arbitrary value..).

* server/mpm/event/event.c(struct timeout_queue):
  Add the pending_q head pointer.

* server/mpm/event/event.c(disable_listensocks, enable_listensocks):
  Return whether the listening sockets were or not already dis/enabled.

* server/mpm/event/event.c(make_conn_state):
  New helper to allocate and minimally initialize a conn_state since it
  can now happen from multiple places. The connection_count is incremented
  there.

* server/mpm/event/event.c(process_socket):
  A new connection is now !cs or !cs->c, since a conn_state can be created
  earlier. If !cs still, use make_conn_state() to allocate it (this should
  not happen anymore though).

* server/mpm/event/event.c(push2worker):
  The cs (if any) is now created by the caller, remove the csd and
  ptrans arguments.

* server/mpm/event/event.c(push2pending):
  New helper to push a cs to the pending_q after disabling the listening
  sockets.

* server/mpm/event/event.c(get_worker):
  No need to block anymore thanks to the pending_q, so remove the ""blocking""
  argument and ap_queue_info_wait_for_idler() call.

* server/mpm/event/event.c(listener_thread):
  If get_worker() returns no idle worker, push the PT_CSD and PT_ACCEPT
  connections to the pending queue (using the push2pending() helper).
  For the PT_CSD case there is no need for the ""blocking"" variable
  anymore since get_worker() is always non-blocking.
  For the PT_ACCEPT case the cs is now created before push2worker() or
  push2pending() to account for the connection ASAP, otherwise a
  graceful restart happening before it's processed would consider it
  does not exist and could exit the child too early (e.g. test_h2_004_22
  from the pytest suites exercises this).
  The pending_q is processed for timeouts with the others (step 6).

* server/mpm/event/event.c(worker_thread):
  Process the entries in the pending_q before returning to idle state.

* server/mpm/event/event.c(event_post_config):
  Create the pending_q.","{""sha"": ""f41ff3feb98932640961a938481da6ed43403ecb"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T19:51:53Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,"mpm_event: Use ap_get_connection_timeout() for AGAIN connections.

If ap_run_process_connection() returns AGAIN and the connection timeout
as returned by ap_get_connection_timeout() is different than the rl_q
timeout, use a timer event rather than the rl_q to keep track of the
idle connection.

* server/mpm_fdqueue.h(truct timer_event_t):
  Add the ""timeout"" field to store the timeout of the timer, recomputing
  it from ""when"" would require to call apr_time_now() otherwise.

* server/mpm/event/event.c():
  #define TIMER_MIN_TIMEOUT as the minimal timer event's timeout, to
  prevent the events from firing before the sockets are added to the
  pollset. Currently set to 50ms (an arbitrary value..).

* server/mpm/event/event.c(struct event_conn_state_t):
  Add the timer_event_t *te field as an alternative to the q.

* server/mpm/event/event.c(struct event_srv_cfg_s):
  Add the server_rec *s field to backref the server_rec and easily pass
  cs->sc->s to ap_get_connection_timeout().

* server/mpm/event/event.c(pollset_add_at, pollset_del_at):
  If the connection is attached to a timer event, log a ""t"" instead of
  a ""q"" and the timer's timeout instead of the q's.

* server/mpm/event/event.c(process_socket):
  If ap_get_connection_timeout() is different than the rl_q timeout,
  acquire a timer event and associate it with the conn_state. A timer
  event associated with a conn_state has a NULL callback (cbfn).

* server/mpm/event/event.c(event_get_timer_event):
  Set the given timeout to the ->timeout field.

* server/mpm/event/event.c(event_register_timed_callback_ex,
                           event_register_poll_callback_ex):
  Return APR_EINVAL if the given callbacks are NULL, this is reserved
  for conn_state timers now. Since it would have crashed at some point
  to pass NULL callbacks before, it's not really an API change.

* server/mpm/event/event.c(listener_thread):
  Fix the poll() timeout set from timers_next_expiry which should be
  taken into account whether it expired or not.
  When a conn_state timer fires/expires, remove it from the pollset and
  abort the connection (with APLOG_INFO).
  When a conn_state timer is polled, cancel the timer.","{""sha"": ""d3d4d66257a735d56acc24e73437e308f523e3ad"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T16:25:48Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,"core, mod_reqtimeout: Add ap_get_connection_timeout().

Provide a new min_connection_timeout hook that modules enforcing a
dynamic connection timeout (e.g. mod_reqtimeout) should use to inform
ap_get_connection_timeout() users about the current timeout being
applied.

Track the current timeout enforced by mod_reqtimeout in its context and
implement the min_connection_timeout to return it.

* include/ap_mmn.h():
  Minor bump for min_connection_timeout and ap_get_connection_timeout().

* include/http_connection.h():
  Declare min_connection_timeout and ap_get_connection_timeout().

* server/connection.c():
  Implement min_connection_timeout and ap_get_connection_timeout().

* modules/filters/mod_reqtimeout.c(struct reqtimeout_stage_t):
  Add server_timeout as the timeout defined for the server at the current
  stage.

* modules/filters/mod_reqtimeout.c(struct reqtimeout_con_cfg):
  Add time_left as the dynamic timeout enforced by mod_reqtimeout at the
  current stage.

* modules/filters/mod_reqtimeout.c(check_time_left):
  Store the computed time_left in the reqtimeout_con_cfg, and set the
  socket timeout there (returning an error which will be caught if that
  fails).

* modules/filters/mod_reqtimeout.c(extend_timeout):
  Update time_left in the reqtimeout_con_cfg per the time taken by the last
  read.

* modules/filters/mod_reqtimeout.c(reqtimeout_filter):
  Remove the special path for APR_NONBLOCK_READ or AP_MODE_EATCRLF, it
  does the exact same thing than the !(AP_MODE_GETLINE && APR_BLOCK_READ)
  one.

* modules/filters/mod_reqtimeout.c(reqtimeout_init, reqtimeout_before_header,
                                   reqtimeout_before_body, INIT_STAGE):
  Set the server_timeout in the current stage.

* modules/filters/mod_reqtimeout.c(reqtimeout_min_timeout):
  The new hook implementation.","{""sha"": ""64e9c4eb0aff5a5655cabff7f281d36a50f15fa3"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T16:17:11Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:47,ylavic,fork_close,"mpm_event: Take advantage of the now fully non-blocking listener loop.

Now that the listener loop is fully non-blocking, we can ask for and use
only two timestamps accross loop: one for before poll()ing and the other
one for after poll()ing. After poll()ing the timestamp might drift a bit
while processing all the events, but if the queues maintenance is skipped
because of that it will happen in the next loop with timeout = 0.

Also process_timeout_queue() can be quite simplified if it does not need
to release the lock (all the callbacks are non-blocking too).

* server/mpm/event/event.c(TIMEOUT_EXPIRED):
  New helper to determine whether a timestamp + timeout expired, also
  expiring entries if the clock went backwart too much.

* server/mpm/event/event.c(listener_thread):
  Use two time1 and time2 variables for the time(stamp)s before and
  after poll()ing. time2 is fetched just after poll() and reused for all
  the below processing (i.e. not recomputed for queues maintenance).

* server/mpm/event/event.c(process_timeout_queue):
  Simplify the code by calling the callback in a single (double-)loop.
  The timeout_mutex mutex is not released/re-acquired anymore.
  Use TIMEOUT_EXPIRED() to check for expiry.","{""sha"": ""5645c2b5e13045d96f6cb77782a281f348bcb442"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-01T20:55:51Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:47Z""}}"
292,SubmitCommit,2022-02-03 14:41:48,ylavic,fork_close,Try to see what's happening in test_712_buffering.,"{""sha"": ""a03cf1faa99e4da2300ad1901eb17a66100072ce"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-02T16:18:25Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:41:48Z""}}"
292,SubmitCommit,2022-02-03 14:47:15,ylavic,fork_close,travis: generate/show coredumps from pytests.,"{""sha"": ""f84a9bb7bf7b15f4763d483c4259bfcaedbe3a46"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:37:35Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:47:15Z""}}"
292,SubmitCommit,2022-02-03 14:48:55,ylavic,fork_close,Show where the csd/ptrans get cleared..,"{""sha"": ""46b24b4916b8ff7e14b4b967c339a34f00ca08e2"", ""author"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:40:36Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-02-03T14:48:55Z""}}"
292,OpenPR,2022-02-03 14:59:10,ylavic,fork_close,,
292,IssueCommentSupplement,2022-02-03 15:01:24,ylavic,fork_close,"Duplicate of #290, sorry for the mess (fighting with ci)..","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1029078491"", ""author_association"": ""MEMBER""}"
292,ClosePR,2022-02-03 15:01:25,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003423919"", ""commit_url"": null}"
292,DeleteBranch,2022-02-03 15:01:52,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6003427291"", ""commit_url"": null}"
293,SubmitCommit,2022-02-04 10:03:21,Stefan Eissing,unfork_close,"Copy of current trunk with current ssl nonblocking handshake changes.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/trunk-ssl-handshake-nonblocking@1897758 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""db520660a81ea34d4eed8a9069389ce566345aa2"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2022-02-04T10:03:21Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2022-02-04T10:03:21Z""}}"
293,SubmitCommit,2022-02-04 12:27:17,Stefan Eissing,unfork_close,"Merge of trunk.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/trunk-ssl-handshake-nonblocking@1897761 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""662495f8dbabe17a6e2e2b7ae63b45c37c886268"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2022-02-04T12:27:17Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2022-02-04T12:27:17Z""}}"
293,SubmitCommit,2022-02-04 12:33:37,Stefan Eissing,unfork_close,"  *) core/mpm_event/mod_ssl: make SSL handshakes non-blocking.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/branches/trunk-ssl-handshake-nonblocking@1897762 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4d98c77947f42288e61c826100a1da4c3f787a2a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2022-02-04T12:33:37Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""icing@apache.org"", ""date"": ""2022-02-04T12:33:37Z""}}"
293,OpenPR,2022-02-04 12:35:20,icing,unfork_close,,
293,IssueCommentSupplement,2022-03-07 15:22:35,ylavic,unfork_close,Now in #294,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1060805132"", ""author_association"": ""MEMBER""}"
293,ClosePR,2022-03-07 15:22:35,ylavic,unfork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6195780468"", ""commit_url"": null}"
295,SubmitCommit,2022-02-23 07:53:28,rpluem,fork_close,"* Change the logic to choose the maximum of both timeouts (front end socket,
  backend socket) instead of the minimum as backend timeouts can be
  configured more selectively (per worker if needed) as front end timeouts
  and typically the backend timeouts reflect the application requirements
  better.

PR: 65886

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1898127 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit d27a32da693bc1f48dd87073e18d43af14843b59)","{""sha"": ""c36a4c04de11234aa81eb0f7ef17156483e0e11d"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2022-02-16T12:35:36Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2022-02-23T07:53:28Z""}}"
295,OpenPR,2022-02-23 07:53:31,rpluem,fork_close,,
295,Revise,2022-02-23 07:58:31,rpluem,fork_close,Additional fix for 2.4.x in mod_proxy_http.c for PR: 65886,"{""sha"": ""d1f65720ef07fed451452b64684f4f3acebc2eee"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2022-02-23T07:58:31Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2022-02-23T07:58:31Z""}}"
295,IssueCommentSupplement,2022-03-03 11:00:04,rpluem,fork_close,Backported as 06daa68add52385e3e6d96431a12617a01a5883b (r1898561),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1057927132"", ""author_association"": ""CONTRIBUTOR""}"
295,ClosePR,2022-03-03 11:00:04,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6177259615"", ""commit_url"": null}"
295,DeleteBranch,2022-03-03 11:00:16,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6177260781"", ""commit_url"": null}"
297,SubmitCommit,2022-03-15 11:52:12,Stefan Eissing,fork_close,"  *) mod_http2: removing the in_drain pipe and always doing the
     handling of stream input consumed as in the non-pollset version.
     Eliminating the special mplx_pool, basing pipes solely on the
     c2->pool which seems to work fine.","{""sha"": ""c866ef2709bd85f0033265ea02cf994a84cdcaa8"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-15T11:52:12Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-15T11:52:12Z""}}"
297,SubmitCommit,2022-03-15 13:15:17,Stefan Eissing,fork_close,"  *) mod_http2: unified c2 connection abort. making all
     volatiles into atomic operations instead.","{""sha"": ""64c7428d907c629fb494a88b7dd37af746bf4c5b"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-15T13:15:17Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-15T13:15:17Z""}}"
297,SubmitCommit,2022-03-16 12:43:32,Stefan Eissing,fork_close,"  *) core: add new hook 'create_secondary_connection` and method
     `ap_create_secondary_connection()` to the core for setting
     up http2-like connections based on a master one. This brings
     implementation details to where they should be.
     mod_http2: use new ap_create_secondary_connection() from core
     and also recycle the transit pools/bucket_alloc used for those.","{""sha"": ""2a5daa6dd302a7c4b000f134171b0ba1bdcb1e60"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-16T12:43:32Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-16T12:43:32Z""}}"
297,OpenPR,2022-03-16 12:48:49,icing,fork_close,,
297,ReviewRequested,2022-03-17 09:13:43,icing,fork_close,,"{""requested_reviewer"": {""login"": ""ylavic"", ""id"": 15033035, ""node_id"": ""MDQ6VXNlcjE1MDMzMDM1"", ""avatar_url"": ""https://avatars.githubusercontent.com/u/15033035?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/ylavic"", ""html_url"": ""https://github.com/ylavic"", ""followers_url"": ""https://api.github.com/users/ylavic/followers"", ""following_url"": ""https://api.github.com/users/ylavic/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/ylavic/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/ylavic/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/ylavic/subscriptions"", ""organizations_url"": ""https://api.github.com/users/ylavic/orgs"", ""repos_url"": ""https://api.github.com/users/ylavic/repos"", ""events_url"": ""https://api.github.com/users/ylavic/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/ylavic/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
297,ReviewRequested,2022-03-17 09:13:46,icing,fork_close,,"{""requested_reviewer"": {""login"": ""rpluem"", ""id"": 18258806, ""node_id"": ""MDQ6VXNlcjE4MjU4ODA2"", ""avatar_url"": ""https://avatars.githubusercontent.com/u/18258806?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/rpluem"", ""html_url"": ""https://github.com/rpluem"", ""followers_url"": ""https://api.github.com/users/rpluem/followers"", ""following_url"": ""https://api.github.com/users/rpluem/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/rpluem/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/rpluem/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/rpluem/subscriptions"", ""organizations_url"": ""https://api.github.com/users/rpluem/orgs"", ""repos_url"": ""https://api.github.com/users/rpluem/repos"", ""events_url"": ""https://api.github.com/users/rpluem/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/rpluem/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
297,ReviewComment,2022-03-17 11:47:31,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913018277""}"
297,ReviewComment,2022-03-17 11:47:44,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913018508""}"
297,ReviewComment,2022-03-17 11:47:51,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913018618""}"
297,ReviewComment,2022-03-17 11:47:58,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913018731""}"
297,ReviewComment,2022-03-17 11:48:08,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913018916""}"
297,ReviewComment,2022-03-17 11:48:45,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913019527""}"
297,ReviewComment,2022-03-17 11:48:51,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913019641""}"
297,ReviewComment,2022-03-17 11:49:01,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913019808""}"
297,ReviewComment,2022-03-17 11:49:08,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913019965""}"
297,ReviewComment,2022-03-17 11:49:14,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913020076""}"
297,Revise,2022-03-17 12:28:19,Stefan Eissing,fork_close,Merge branch 'trunk' into h2-pollset-impr,"{""sha"": ""aab9bd9b002b666d5093ebe6096270839e6cdc73"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-17T12:28:19Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-17T12:28:19Z""}}"
297,Revise,2022-03-17 12:47:58,Stefan Eissing,fork_close,"Added improvements to atomic use of strcut members and made
use of apr_pmemdup on creating secondary connections.

Improved h2_workers.c wake_idle_worker() as suggested.","{""sha"": ""7f4f218990f9327cc2e72d8e2bb64454015e4a99"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-17T12:47:58Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-17T12:47:58Z""}}"
297,Revise,2022-03-17 13:40:46,Stefan Eissing,fork_close," * check allocator creating for OOM and abort when this happens
 * check that c2 creation actually returned a connection
 * make sure out parameter of h2_mplx_worker_c2_done() always
   has a defined value.","{""sha"": ""7f3924d4f490acf8dd5febe17722433d8e253038"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-17T13:40:46Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-17T13:40:46Z""}}"
297,ReviewApproved,2022-03-17 23:25:08,ylavic,fork_close,+1,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/297#pullrequestreview-913807705""}"
297,IssueCommentSupplement,2022-03-18 09:53:21,icing,fork_close,Merged as r1899032 in trunk. Thanks for reviewing!,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1072249969"", ""author_association"": ""CONTRIBUTOR""}"
297,ClosePR,2022-03-18 09:53:21,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6265054241"", ""commit_url"": null}"
297,CrossReferenced,2022-03-18 11:59:10,icing,fork_close,  *) mod_http2: use pollset only for main connection and wakeups,"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/299"", ""is_pull_request"": true}}"
297,DeleteBranch,2022-04-01 07:59:30,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6350251441"", ""commit_url"": null}"
298,SubmitCommit,2022-03-17 11:04:19,Stefan Eissing,fork_close,"  *) core: make ap_escape_quotes() work correctly on strings
     with more than MAX_INT/2 characters, counting quotes double.
     Credit to <generalbugs@zippenhop.com> for finding this.","{""sha"": ""4e0354117199f5939173a68617418d59c41ae1a6"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-17T11:04:19Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-17T11:04:19Z""}}"
298,OpenPR,2022-03-17 11:05:31,icing,fork_close,,
298,ReviewRequested,2022-03-17 11:05:36,icing,fork_close,,"{""requested_reviewer"": {""login"": ""covener"", ""id"": 908093, ""node_id"": ""MDQ6VXNlcjkwODA5Mw=="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/908093?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/covener"", ""html_url"": ""https://github.com/covener"", ""followers_url"": ""https://api.github.com/users/covener/followers"", ""following_url"": ""https://api.github.com/users/covener/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/covener/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/covener/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/covener/subscriptions"", ""organizations_url"": ""https://api.github.com/users/covener/orgs"", ""repos_url"": ""https://api.github.com/users/covener/repos"", ""events_url"": ""https://api.github.com/users/covener/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/covener/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
298,ReviewRequested,2022-03-17 11:05:50,icing,fork_close,,"{""requested_reviewer"": {""login"": ""rpluem"", ""id"": 18258806, ""node_id"": ""MDQ6VXNlcjE4MjU4ODA2"", ""avatar_url"": ""https://avatars.githubusercontent.com/u/18258806?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/rpluem"", ""html_url"": ""https://github.com/rpluem"", ""followers_url"": ""https://api.github.com/users/rpluem/followers"", ""following_url"": ""https://api.github.com/users/rpluem/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/rpluem/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/rpluem/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/rpluem/subscriptions"", ""organizations_url"": ""https://api.github.com/users/rpluem/orgs"", ""repos_url"": ""https://api.github.com/users/rpluem/repos"", ""events_url"": ""https://api.github.com/users/rpluem/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/rpluem/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
298,Revise,2022-04-05 08:07:59,Stefan Eissing,fork_close,Merge branch 'trunk' into ap_escape_quotes,"{""sha"": ""48a4227e5a8d7dcf6a35885b78f834aec281f0f0"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-05T08:07:59Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-05T08:07:59Z""}}"
298,IssueCommentSupplement,2022-04-06 09:21:42,icing,fork_close,Added in trunk as r1899609.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1090049205"", ""author_association"": ""CONTRIBUTOR""}"
298,ClosePR,2022-04-06 09:21:42,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6378473911"", ""commit_url"": null}"
298,ReviewCommentSupplement,2022-04-06 18:43:14,tititiou36,fork_close,,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/apache/httpd/pull/298#pullrequestreview-933953848""}"
298,ReviewCommentSupplement,2022-04-06 18:45:15,tititiou36,fork_close,,"{""author_association"": ""NONE"", ""html_url"": ""https://github.com/apache/httpd/pull/298#pullrequestreview-933956641""}"
299,SubmitCommit,2022-03-18 11:56:17,Stefan Eissing,fork_close,"  *) mod_http2: use pollset only for main connection and wakeups
     for events on streams. Provide streams in INPUT pipe when
     needed and supported on the platform.","{""sha"": ""5631905d06ddd6349375952749857fc0abd5a20c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-18T11:56:17Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-03-18T11:56:17Z""}}"
299,OpenPR,2022-03-18 11:59:10,icing,fork_close,,
299,ReviewRequested,2022-03-18 11:59:23,icing,fork_close,,"{""requested_reviewer"": {""login"": ""ylavic"", ""id"": 15033035, ""node_id"": ""MDQ6VXNlcjE1MDMzMDM1"", ""avatar_url"": ""https://avatars.githubusercontent.com/u/15033035?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/ylavic"", ""html_url"": ""https://github.com/ylavic"", ""followers_url"": ""https://api.github.com/users/ylavic/followers"", ""following_url"": ""https://api.github.com/users/ylavic/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/ylavic/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/ylavic/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/ylavic/subscriptions"", ""organizations_url"": ""https://api.github.com/users/ylavic/orgs"", ""repos_url"": ""https://api.github.com/users/ylavic/repos"", ""events_url"": ""https://api.github.com/users/ylavic/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/ylavic/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
299,IssueCommentSupplement,2022-03-21 08:19:46,icing,fork_close,Merged to trunk in r1899102.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1073602221"", ""author_association"": ""CONTRIBUTOR""}"
299,ClosePR,2022-03-21 08:19:46,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6273497484"", ""commit_url"": null}"
299,DeleteBranch,2022-04-01 07:59:28,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6350251225"", ""commit_url"": null}"
300,SubmitCommit,2022-03-21 13:55:23,charanreddybr05,fork_close,Update README,"{""sha"": ""2b722e3fc63a42e77f9cb71101905fdb6c6c5472"", ""author"": {""name"": ""charanreddybr05"", ""email"": ""charanreddy.br.05@gmail.com"", ""date"": ""2022-03-21T13:55:23Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2022-03-21T13:55:23Z""}}"
300,OpenPR,2022-03-21 13:55:41,charanreddybr05,fork_close,,
300,ClosePR,2022-03-21 13:56:12,charanreddybr05,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6275756150"", ""commit_url"": null}"
301,SubmitCommit,2022-03-25 07:54:05,Christoph Zysik,fork_close,fix typo,"{""sha"": ""d656fb2d03878a410cfca521ebfa85665fc385c8"", ""author"": {""name"": ""Christoph Zysik"", ""email"": ""support"", ""date"": ""2022-03-25T07:54:05Z""}, ""committer"": {""name"": ""Christoph Zysik"", ""email"": ""support"", ""date"": ""2022-03-25T07:54:05Z""}}"
301,SubmitCommit,2022-03-25 14:54:08,Christoph Zysik,fork_close,log data to UDS if available,"{""sha"": ""17b717cdf4190e5a990a4ccdb7666f5669131280"", ""author"": {""name"": ""Christoph Zysik"", ""email"": ""support"", ""date"": ""2022-03-25T14:54:08Z""}, ""committer"": {""name"": ""Christoph Zysik"", ""email"": ""support"", ""date"": ""2022-03-25T14:54:08Z""}}"
301,SubmitCommit,2022-03-25 14:54:59,cztk,fork_close,Merge branch 'apache:trunk' into trunk,"{""sha"": ""836e3f7ebe1b793803b0410d8b01a99896abcd5a"", ""author"": {""name"": ""cztk"", ""email"": ""12774393+cztk@users.noreply.github.com"", ""date"": ""2022-03-25T14:54:59Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2022-03-25T14:54:59Z""}}"
301,SubmitCommit,2022-03-25 15:05:43,Christoph Zysik,fork_close,destroy pools and terminate,"{""sha"": ""9ce8a2721577392a7354bb7cd076f3c9d62f5c0e"", ""author"": {""name"": ""Christoph Zysik"", ""email"": ""support"", ""date"": ""2022-03-25T15:05:43Z""}, ""committer"": {""name"": ""Christoph Zysik"", ""email"": ""support"", ""date"": ""2022-03-25T15:05:43Z""}}"
301,SubmitCommit,2022-03-25 15:06:03,Christoph Zysik,fork_close,Merge remote-tracking branch 'origin/trunk' into trunk,"{""sha"": ""9870b22e0b0a64981ab5504e51eccd3cc79b34ce"", ""author"": {""name"": ""Christoph Zysik"", ""email"": ""support"", ""date"": ""2022-03-25T15:06:03Z""}, ""committer"": {""name"": ""Christoph Zysik"", ""email"": ""support"", ""date"": ""2022-03-25T15:06:03Z""}}"
301,OpenPR,2022-03-25 17:27:43,cztk,fork_close,,
301,Revise,2022-03-28 23:27:21,cztk,fork_close,Merge branch 'apache:trunk' into trunk,"{""sha"": ""36e40f4f2628fb6c3186fdd4b09312469a4d82d0"", ""author"": {""name"": ""cztk"", ""email"": ""12774393+cztk@users.noreply.github.com"", ""date"": ""2022-03-28T23:27:21Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2022-03-28T23:27:21Z""}}"
301,Revise,2022-04-04 20:33:49,cztk,fork_close,Merge branch 'apache:trunk' into trunk,"{""sha"": ""513be86c2682c59f19f786b7d36cc9e775eaa0b4"", ""author"": {""name"": ""cztk"", ""email"": ""12774393+cztk@users.noreply.github.com"", ""date"": ""2022-04-04T20:33:49Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2022-04-04T20:33:49Z""}}"
301,IssueComment,2022-06-10 12:10:43,notroj,fork_close,"Writing logs to a Unix domain socket seems like a useful feature but this seems quite orthogonal to the purpose of rotatelogs, since if you are using a socket then you don't the file rotation management which is the purpose of that tool - or am I missing something?  If not, I'd suggest it would make sense as a RFE to add a self-contained piped logger tool for it.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1152292475"", ""author_association"": ""COLLABORATOR""}"
301,IssueComment,2022-07-09 23:59:15,cztk,fork_close,"First, I am fully aware services exists which can forward log to network or other services but I don't want to depend on them plus the increased maintenance needed.
Also I don't want to miss out log entries if the UDS fails ( upgrade of filebeat for example ) in this case I want file logging taking place as usual.
As filebeat can read logfiles and save its state aswell, I did not want to reinvent the wheel as rotatelogs does the job perfectly well.
So basically: As long the UDS is working, stuff entries there, if it fails write logs as usual and check if UDS is working again.

I am very happy the way it works, using it in production for the time beeing and it just works the way we need.
Having a piped log to UDS only logger would not allow me to catch data when the socket is down unless I implement some sort of cache which brings up the problem: how much data should it be able to cache and where ( disk/memory ) ... so relying on well known implemented logic like rotatelogs is just perfect.

Or did I miss a point?","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1179623523"", ""author_association"": ""NONE""}"
301,Revise,2022-07-09 23:59:34,cztk,fork_close,Merge branch 'apache:trunk' into trunk,"{""sha"": ""9f4984b8162601c493fcbe5c851bc0caa1dec206"", ""author"": {""name"": ""cztk"", ""email"": ""12774393+cztk@users.noreply.github.com"", ""date"": ""2022-07-09T23:59:34Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2022-07-09T23:59:34Z""}}"
301,IssueCommentSupplement,2022-10-06 01:00:31,cztk,fork_close,"I think I learned my lesson.
Filebeat stopped accepting data and for some reason the socket wasn't handled as expected leading to filling up apaches scoreboard with reading request requests.
Situation resolved after filebeat accepted data again.

I though I did test that, and indeed it did start to write data to files, though the logic of retrying to use the socket should be handled in a thread or something like that.

Even though I dislike beeing dependent and it's pretty dumb I send data to rsyslog via logger now which itself spams data to filebeat using udp.
System resource usage and loopback traffic increased by a lot though, however it works.

Therefore and I don't have enough resources to investigate this further, going to close this.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1269166031"", ""author_association"": ""NONE""}"
301,ClosePR,2022-10-06 01:00:32,cztk,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7529485968"", ""commit_url"": null}"
305,SubmitCommit,2022-04-01 07:11:21,jfclere,fork_close,"Revert ""Add WorkerBalancerGrowth. To allow creation of workers""

This reverts commit 2bcf00780e1875dd522031846fc9561f16bf5757.","{""sha"": ""efbcebd99bd1dc5f022043bb604be4b6b5a83769"", ""author"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2022-04-01T07:11:21Z""}, ""committer"": {""name"": ""Jean-Frederic Clere"", ""email"": ""jfclere@gmail.com"", ""date"": ""2022-04-01T07:11:21Z""}}"
305,OpenPR,2022-04-01 07:44:42,jfclere,fork_close,,
305,IssueCommentSupplement,2022-04-01 10:31:28,jfclere,fork_close,merged revision 1899479,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1085731299"", ""author_association"": ""CONTRIBUTOR""}"
305,ClosePR,2022-04-01 10:31:28,jfclere,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6351296396"", ""commit_url"": null}"
306,SubmitCommit,2022-04-01 10:41:55,Stefan Eissing,fork_close,"  *) core/mod_http: adding new meta buckets for use in
     connection processing. Separating http input
     filter from http/1.1 chunked input handling into
     a separate filter. Only installing that one on
     HTTP/1.x requests.
     mod_http2: removing need to generate chunked
     input encodings when requests do not carry a
     Content-Length.","{""sha"": ""3b52b6555cc8caa5b98870eb1169e49ca71f4d81"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-01T10:41:55Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-01T10:41:55Z""}}"
306,SubmitCommit,2022-04-01 10:44:54,Stefan Eissing,fork_close,Merge branch 'trunk' into h1-chunked-input,"{""sha"": ""1344d02393659b9a552873741cc58446fd25331e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-01T10:44:54Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-01T10:44:54Z""}}"
306,SubmitCommit,2022-04-01 11:02:35,Stefan Eissing,fork_close,  *) mod_proxy: also add the new HTTP1_BODY_IN filter to its requests.,"{""sha"": ""ba5b2281547ad5dde9f56bff89a6e4e38748447b"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-01T11:02:35Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-01T11:02:35Z""}}"
306,OpenPR,2022-04-01 11:13:54,icing,fork_close,,
306,ReviewComment,2022-04-01 11:44:23,icing,fork_close,I added some explanations and motivations to the individual changes. Hope they make the reading easier.,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/306#pullrequestreview-928777861""}"
306,IssueCommentSupplement,2022-04-04 08:29:29,icing,fork_close,merged as r1899547 in trunk.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1087267151"", ""author_association"": ""CONTRIBUTOR""}"
306,ClosePR,2022-04-04 08:29:29,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6360941471"", ""commit_url"": null}"
306,CrossReferenced,2022-04-13 08:40:55,icing,fork_close,Icing/http1 separation,"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/291"", ""is_pull_request"": true}}"
306,DeleteBranch,2022-10-17 11:57:09,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601399094"", ""commit_url"": null}"
307,SubmitCommit,2022-04-04 14:06:42,Stefan Eissing,fork_close,"  *) core: use the new RESPONSE buckets to send out response
     status, reason, headers and notes through the output filters
     from general HTTP protocol handling.
     mod_http: install a new HTTP1_RESPONSE_OUT output filter
     that transforms RESPONSE buckets to HTTP/1.1 format.","{""sha"": ""5791ef12cc44f7d8cc50dd15b9a2e30fb85b5d28"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-04T14:06:42Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-04T14:06:42Z""}}"
307,SubmitCommit,2022-04-04 14:12:28,Stefan Eissing,fork_close,Avoiding empty APLOGNO desasters,"{""sha"": ""d5176e47ab5e24f78bcbf4df5b900c13de378201"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-04T14:12:28Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-04T14:12:28Z""}}"
307,OpenPR,2022-04-04 14:13:40,icing,fork_close,,
307,ReviewRequested,2022-04-04 14:36:51,icing,fork_close,,"{""requested_reviewer"": {""login"": ""ylavic"", ""id"": 15033035, ""node_id"": ""MDQ6VXNlcjE1MDMzMDM1"", ""avatar_url"": ""https://avatars.githubusercontent.com/u/15033035?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/ylavic"", ""html_url"": ""https://github.com/ylavic"", ""followers_url"": ""https://api.github.com/users/ylavic/followers"", ""following_url"": ""https://api.github.com/users/ylavic/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/ylavic/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/ylavic/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/ylavic/subscriptions"", ""organizations_url"": ""https://api.github.com/users/ylavic/orgs"", ""repos_url"": ""https://api.github.com/users/ylavic/repos"", ""events_url"": ""https://api.github.com/users/ylavic/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/ylavic/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
307,ReviewRequested,2022-04-04 14:36:53,icing,fork_close,,"{""requested_reviewer"": {""login"": ""covener"", ""id"": 908093, ""node_id"": ""MDQ6VXNlcjkwODA5Mw=="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/908093?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/covener"", ""html_url"": ""https://github.com/covener"", ""followers_url"": ""https://api.github.com/users/covener/followers"", ""following_url"": ""https://api.github.com/users/covener/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/covener/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/covener/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/covener/subscriptions"", ""organizations_url"": ""https://api.github.com/users/covener/orgs"", ""repos_url"": ""https://api.github.com/users/covener/repos"", ""events_url"": ""https://api.github.com/users/covener/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/covener/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
307,ReviewRequested,2022-04-04 14:37:08,icing,fork_close,,"{""requested_reviewer"": {""login"": ""jfclere"", ""id"": 316679, ""node_id"": ""MDQ6VXNlcjMxNjY3OQ=="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/316679?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/jfclere"", ""html_url"": ""https://github.com/jfclere"", ""followers_url"": ""https://api.github.com/users/jfclere/followers"", ""following_url"": ""https://api.github.com/users/jfclere/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/jfclere/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/jfclere/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/jfclere/subscriptions"", ""organizations_url"": ""https://api.github.com/users/jfclere/orgs"", ""repos_url"": ""https://api.github.com/users/jfclere/repos"", ""events_url"": ""https://api.github.com/users/jfclere/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/jfclere/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
307,ReviewRequested,2022-04-04 14:37:08,icing,fork_close,,"{""requested_reviewer"": {""login"": ""rpluem"", ""id"": 18258806, ""node_id"": ""MDQ6VXNlcjE4MjU4ODA2"", ""avatar_url"": ""https://avatars.githubusercontent.com/u/18258806?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/rpluem"", ""html_url"": ""https://github.com/rpluem"", ""followers_url"": ""https://api.github.com/users/rpluem/followers"", ""following_url"": ""https://api.github.com/users/rpluem/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/rpluem/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/rpluem/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/rpluem/subscriptions"", ""organizations_url"": ""https://api.github.com/users/rpluem/orgs"", ""repos_url"": ""https://api.github.com/users/rpluem/repos"", ""events_url"": ""https://api.github.com/users/rpluem/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/rpluem/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
307,ReviewApproved,2022-04-05 11:22:02,covener,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/307#pullrequestreview-931695694""}"
307,ReviewApproved,2022-04-07 07:47:18,jfclere,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/307#pullrequestreview-934621756""}"
307,IssueCommentSupplement,2022-04-07 10:53:48,icing,fork_close,Thanks for the reviews! Add to trunk in r1899648.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1091581210"", ""author_association"": ""CONTRIBUTOR""}"
307,ClosePR,2022-04-07 10:53:48,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6387297862"", ""commit_url"": null}"
307,CrossReferenced,2022-04-13 08:40:55,icing,fork_close,Icing/http1 separation,"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/291"", ""is_pull_request"": true}}"
311,SubmitCommit,2022-04-08 09:48:24,Stefan Eissing,fork_close,"  *) core/mod_http: use REQUEST meta buckets and a new HTTP/1.x specific
     input filter to separate the handling for HTTP requests from the
     handling of HTTP/1.x request parsing and checks.
     A new HTTP1_REQUEST_IN filter installs itself on http/1.1 connections
     before a request is being read. It generates either a REQUEST meta
     bucket on success or an ERROR bucket with the proposed response status.
     The core connection processing, relying on ap_read_request(), now expects
     a REQUEST or ERROR bucket from the input filters and is agnostic to
     specific HTTP versions and how they bring requests into the server.","{""sha"": ""23b69fb5d8234badb9d50990b26ab52071f9215d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-08T09:48:24Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-08T09:48:24Z""}}"
311,OpenPR,2022-04-08 10:16:12,icing,fork_close,,
311,ReviewRequested,2022-04-08 10:20:06,icing,fork_close,,"{""requested_reviewer"": {""login"": ""jfclere"", ""id"": 316679, ""node_id"": ""MDQ6VXNlcjMxNjY3OQ=="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/316679?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/jfclere"", ""html_url"": ""https://github.com/jfclere"", ""followers_url"": ""https://api.github.com/users/jfclere/followers"", ""following_url"": ""https://api.github.com/users/jfclere/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/jfclere/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/jfclere/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/jfclere/subscriptions"", ""organizations_url"": ""https://api.github.com/users/jfclere/orgs"", ""repos_url"": ""https://api.github.com/users/jfclere/repos"", ""events_url"": ""https://api.github.com/users/jfclere/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/jfclere/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
311,ReviewRequested,2022-04-08 10:20:06,icing,fork_close,,"{""requested_reviewer"": {""login"": ""rpluem"", ""id"": 18258806, ""node_id"": ""MDQ6VXNlcjE4MjU4ODA2"", ""avatar_url"": ""https://avatars.githubusercontent.com/u/18258806?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/rpluem"", ""html_url"": ""https://github.com/rpluem"", ""followers_url"": ""https://api.github.com/users/rpluem/followers"", ""following_url"": ""https://api.github.com/users/rpluem/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/rpluem/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/rpluem/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/rpluem/subscriptions"", ""organizations_url"": ""https://api.github.com/users/rpluem/orgs"", ""repos_url"": ""https://api.github.com/users/rpluem/repos"", ""events_url"": ""https://api.github.com/users/rpluem/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/rpluem/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
311,ReviewRequested,2022-04-08 10:20:06,icing,fork_close,,"{""requested_reviewer"": {""login"": ""ylavic"", ""id"": 15033035, ""node_id"": ""MDQ6VXNlcjE1MDMzMDM1"", ""avatar_url"": ""https://avatars.githubusercontent.com/u/15033035?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/ylavic"", ""html_url"": ""https://github.com/ylavic"", ""followers_url"": ""https://api.github.com/users/ylavic/followers"", ""following_url"": ""https://api.github.com/users/ylavic/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/ylavic/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/ylavic/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/ylavic/subscriptions"", ""organizations_url"": ""https://api.github.com/users/ylavic/orgs"", ""repos_url"": ""https://api.github.com/users/ylavic/repos"", ""events_url"": ""https://api.github.com/users/ylavic/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/ylavic/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
311,ReviewRequested,2022-04-08 10:20:06,icing,fork_close,,"{""requested_reviewer"": {""login"": ""covener"", ""id"": 908093, ""node_id"": ""MDQ6VXNlcjkwODA5Mw=="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/908093?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/covener"", ""html_url"": ""https://github.com/covener"", ""followers_url"": ""https://api.github.com/users/covener/followers"", ""following_url"": ""https://api.github.com/users/covener/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/covener/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/covener/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/covener/subscriptions"", ""organizations_url"": ""https://api.github.com/users/covener/orgs"", ""repos_url"": ""https://api.github.com/users/covener/repos"", ""events_url"": ""https://api.github.com/users/covener/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/covener/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
311,ReviewRequested,2022-04-08 10:20:18,icing,fork_close,,"{""requested_reviewer"": {""login"": ""notroj"", ""id"": 9193075, ""node_id"": ""MDQ6VXNlcjkxOTMwNzU="", ""avatar_url"": ""https://avatars.githubusercontent.com/u/9193075?v=4"", ""gravatar_id"": """", ""url"": ""https://api.github.com/users/notroj"", ""html_url"": ""https://github.com/notroj"", ""followers_url"": ""https://api.github.com/users/notroj/followers"", ""following_url"": ""https://api.github.com/users/notroj/following{/other_user}"", ""gists_url"": ""https://api.github.com/users/notroj/gists{/gist_id}"", ""starred_url"": ""https://api.github.com/users/notroj/starred{/owner}{/repo}"", ""subscriptions_url"": ""https://api.github.com/users/notroj/subscriptions"", ""organizations_url"": ""https://api.github.com/users/notroj/orgs"", ""repos_url"": ""https://api.github.com/users/notroj/repos"", ""events_url"": ""https://api.github.com/users/notroj/events{/privacy}"", ""received_events_url"": ""https://api.github.com/users/notroj/received_events"", ""type"": ""User"", ""site_admin"": false}, ""requested_team"": null}"
311,ReviewComment,2022-04-08 10:41:21,icing,fork_close,,"{""author_association"": ""CONTRIBUTOR"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-936240264""}"
311,ReviewComment,2022-04-09 14:07:09,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-937133496""}"
311,ReviewComment,2022-04-09 14:07:43,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-937133539""}"
311,ReviewComment,2022-04-09 14:08:44,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-937133635""}"
311,ReviewComment,2022-04-09 14:09:09,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-937133685""}"
311,ReviewComment,2022-04-09 14:09:23,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-937133710""}"
311,ReviewComment,2022-04-09 14:09:33,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-937133733""}"
311,ReviewComment,2022-04-09 14:09:55,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-937133769""}"
311,ReviewComment,2022-04-09 14:11:34,ylavic,fork_close,,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-937133912""}"
311,Revise,2022-04-11 08:30:35,Stefan Eissing,fork_close,"Updates after first review by ylavic:
- rename ap_assign_request to ap_assign_request_line
- added some const goodness to params for tokenizing request line
- checking for non-0 data buckets in ap_read_request() and failing
  if detected.","{""sha"": ""73df763e0734c6217d6ccc57f2613447dda0d0a2"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-11T08:30:35Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-11T08:30:35Z""}}"
311,Revise,2022-04-11 08:42:53,Stefan Eissing,fork_close,"update after first review by ylavic:
- have a single post_read_request hook for http/1.x that runs
  early and sets body_indeterminate + installs the body filter.","{""sha"": ""6efdc7b5a53c146d43c6ea0f88494379e0c6e21a"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-11T08:42:53Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-04-11T08:42:53Z""}}"
311,ReviewApproved,2022-04-12 14:02:54,ylavic,fork_close,+1,"{""author_association"": ""MEMBER"", ""html_url"": ""https://github.com/apache/httpd/pull/311#pullrequestreview-939605609""}"
311,IssueCommentSupplement,2022-04-13 07:42:12,icing,fork_close,Thanks for reviewing! Merged as r1899799 into trunk.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1097664126"", ""author_association"": ""CONTRIBUTOR""}"
311,ClosePR,2022-04-13 07:42:12,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6425015740"", ""commit_url"": null}"
311,CrossReferenced,2022-04-13 08:40:55,icing,fork_close,Icing/http1 separation,"{""reference"": {""url"": ""https://api.github.com/repos/apache/httpd/issues/291"", ""is_pull_request"": true}}"
312,SubmitCommit,2022-04-10 18:50:47,uhliarik,fork_close,"Remove libsystemd dependency from main httpd binary

Until this change httpd was linking libsystemd to the main httpd binary. If you want to run lightweight version of httpd in container, sometimes you just want to install
httpd binary with as little dependencies as possible to make container small in size and do not pull uncencessary dependencies and libraries.

This change will move all systemd library calls from listen.c to mod_systemd module and remove systemd linking from the main httpd bin.","{""sha"": ""5691dc3c0d8fb4fafe5c981a35151547b7baabf3"", ""author"": {""name"": ""Lubo\u0161 Uhliarik"", ""email"": ""luhliari@redhat.com"", ""date"": ""2022-04-10T18:50:47Z""}, ""committer"": {""name"": ""Lubo\u0161 Uhliarik"", ""email"": ""luhliari@redhat.com"", ""date"": ""2022-04-10T18:50:47Z""}}"
312,OpenPR,2022-04-10 19:03:33,uhliarik,fork_close,,
312,Revise,2022-04-10 19:33:05,uhliarik,fork_close,Fixed mixed declaration and wrongly declared variable.,"{""sha"": ""d14291cdd10e14c2dc326bc5850b7ebaea568d6f"", ""author"": {""name"": ""Lubo\u0161 Uhliarik"", ""email"": ""luhliari@redhat.com"", ""date"": ""2022-04-10T19:33:05Z""}, ""committer"": {""name"": ""Lubo\u0161 Uhliarik"", ""email"": ""luhliari@redhat.com"", ""date"": ""2022-04-10T19:33:05Z""}}"
312,ClosePR,2022-04-12 15:43:15,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6420293282"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/db0631ed09566c81d651b4a51401ea0d61b1e986""}"
313,OpenPR,2022-04-12 13:48:21,ylavic,fork_close,,
313,Revise,2022-04-13 13:57:32,ylavic,fork_close,"mpm_event: Fix accounting of active/total processes on ungraceful restart.

Children processes terminated by ap_{reclaim,relieve}_child_processes() were
were not un-accounted for total_daemons and active_daemons, which was done in
server_main_loop() only. This led to perform_idle_server_maintenance() thinking
it was over the limit of children processes and never create new ones.

Have this accounting right in event_note_child_{started,stopped}() which is
called both at runtime and reload time.

* server/mpm/event/event.c(struct event_retained_data):
  Rename field max_daemons_limit to max_daemon_used to better describe what
  it's about and to align with AP_MPMQ_MAX_DAEMON_USED.

* server/mpm/event/event.c(event_note_child_stopped):
  Renamed from event_note_child_killed() to clarify that it's not only called
  when a child is killed (i.e. on restart) but whenever a child has stopped.

* server/mpm/event/event.c(event_note_child_stopped):
  Move decrementing {active,total}_daemons and marking child's threads as
  SERVER_DEAD from server_main_loop() so that it's done both at runtime and
  reload time. Log the current number/state of daemons at APLOG_DEBUG level
  for each child stopped.

* server/mpm/event/event.c(event_note_child_started):
  Move incrementing {active,total}_daemons from make_child() for symmetry,
  given that make_child() calls event_note_child_started(). Log the current
  number/state of daemons at APLOG_DEBUG level for each child started.

* server/mpm/event/event.c(perform_idle_server_maintenance):
  Fix possible miscounting of retained->max_daemon_used accross the multiple
  calls to perform_idle_server_maintenance() if ListenCoresBucketsRatio > 0.
  Pass an int *max_daemon_used which starts at zero and is bumped consistently
  for all the buckets, while retained->max_daemon_used is updated only after
  all the buckets have been maintained.

* server/mpm/event/event.c(perform_idle_server_maintenance):
  Use event_note_child_stopped() to handle exited children processes.

Fixes: BZ 66004

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1899777 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""8cda08cd9425057b8a9c6c47e01d5b9b9246d34e"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-04-12T12:08:02Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-04-13T13:57:32Z""}}"
313,Revise,2022-04-13 13:57:32,ylavic,fork_close,"Follow up to r1899777: CHANGES entry [skip ci].

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1899786 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""ff6ab805493c8e44fc108a3f3c5f3577adc5996c"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-04-12T17:43:20Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-04-13T13:57:32Z""}}"
313,Revise,2022-04-13 13:57:32,ylavic,fork_close,"mpm_event: Follow up to r1899777: Fix max_daemon_used.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1899812 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""332b5bb23a1fdd955793a0f2b64058c3334a3336"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-04-13T13:51:04Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-04-13T13:57:32Z""}}"
313,HeadRefForcePushed,2022-04-13 13:58:23,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6427637969"", ""commit_url"": null}"
313,IssueCommentSupplement,2022-05-24 12:11:17,ylavic,fork_close,Backported to 2.4.x (r1901199 / 138691a51ced29d2717b98784080bc50e9a0610a),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1135839956"", ""author_association"": ""MEMBER""}"
313,ClosePR,2022-05-24 12:11:17,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6668520109"", ""commit_url"": null}"
313,DeleteBranch,2022-06-03 09:52:42,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6735133012"", ""commit_url"": null}"
314,SubmitCommit,2022-04-15 11:22:50,rpluem,fork_close,"* Close the connection in case an EOC bucket was seen

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1899451 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 5d443ed4fdb9907cf3f436cb852f85c89f9f38ac)","{""sha"": ""05e1e9791f20f624b1ff79d8304ff2bb30ae43d5"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2022-03-31T19:39:17Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2022-04-15T11:22:50Z""}}"
314,SubmitCommit,2022-04-15 11:22:50,rpluem,fork_close,"* In case we see an EOC bucket and there was an error bucket before, use its
  status as status for the request. This should ensure proper status logging
  in the access log.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1899454 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 885a08dc2eadbca9182a89e75ef6028b65827ff9)","{""sha"": ""3e9975265d4d1fa68859bd7c1dc654ae177152db"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2022-03-31T20:10:21Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2022-04-15T11:22:50Z""}}"
314,SubmitCommit,2022-04-15 11:30:42,rpluem,fork_close,"* We need to set r->status on each call after we noticed an EOC as
  data bucket generators like ap_die might have changed the status
  code. But we know better in this case and insist on the status
  code that we have seen in the error bucket.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1899562 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 4816f954d8f7536c3b5947f711e52c2c39efacbf)","{""sha"": ""f3161a53a6e48086297fa19d32573b06f7df8700"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2022-04-04T15:48:06Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2022-04-15T11:30:42Z""}}"
314,SubmitCommit,2022-04-15 11:31:26,rpluem,fork_close,"* Keep track of the number of keepalives we processed on this connection.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1899564 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 82a1d00f9bafd975c4036d570f41dcc92b96a50a)","{""sha"": ""7103643ae504a5c1f27d9b578c827b7bac17a300"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2022-04-04T16:00:58Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2022-04-15T11:31:26Z""}}"
314,SubmitCommit,2022-04-15 11:31:26,rpluem,fork_close,"* Report a broken backend in case reading the response line failed on the
  first request on this connection otherwise we assume we have just run
  into a keepalive race and the backend is still healthy.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1899584 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 4e6d9a6618e223b7177c93d4669b01341f24c652)","{""sha"": ""8feef338d6229f77e1d4cb8fb6b5e56f137fdf1d"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2022-04-05T14:18:09Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2022-04-15T11:31:26Z""}}"
314,OpenPR,2022-04-15 11:31:30,rpluem,fork_close,,
314,Revise,2022-04-15 11:44:51,rpluem,fork_close,"* Add Changelog for r1899451, r1899454, r1899562, r1899564, r1899584

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1899886 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 716d664f7ddde04a41303adba2679cfb92b3a6a4)","{""sha"": ""93c7ebfc7d345b761251eae451190ff6cbff8aa2"", ""author"": {""name"": ""Ruediger Pluem"", ""email"": ""rpluem@apache.org"", ""date"": ""2022-04-15T11:42:58Z""}, ""committer"": {""name"": ""Ruediger Pluem"", ""email"": ""r.pluem@gmx.de"", ""date"": ""2022-04-15T11:44:51Z""}}"
314,Referenced,2022-05-09 18:02:15,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6575198870"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/5c66d1b9819b4c79d06d236c5a4b23867724cdc5""}"
314,ClosePR,2022-05-10 13:17:57,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6581881503"", ""commit_url"": null}"
314,DeleteBranch,2022-05-10 13:18:01,rpluem,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6581881871"", ""commit_url"": null}"
316,SubmitCommit,2022-04-26 15:59:20,notroj,fork_close,"* modules/ssl/ssl_engine_io.c:
  Drop noop functions for BIO methods mod_ssl doesn't implement.
  OpenSSL handles missing BIO methods internally in BIO_xxxx() wrappers.
  Consistently log at TRACE4 unhandled _ctrl commands, but note
  these are not a ""BUG"" as in previous log message.

PR: 66028","{""sha"": ""28a68f5f2e91c00bd8c7fda71532ba40f9ced8bc"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2022-04-26T15:57:05Z""}, ""committer"": {""name"": ""Joe Orton"", ""email"": ""jorton@redhat.com"", ""date"": ""2022-04-26T15:59:20Z""}}"
316,OpenPR,2022-04-26 16:00:44,notroj,fork_close,,
316,ClosePR,2022-04-27 07:45:11,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6504625321"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/33a168cc58c8315f6cb4ffc688b8a06ed0300afa""}"
316,DeleteBranch,2022-04-27 07:47:44,notroj,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6504643335"", ""commit_url"": null}"
318,SubmitCommit,2022-05-03 09:33:18,mathiasbynens,fork_close,"Correct JavaScript MIME types + extensions per RFC 9239

This patch updates the MIME type configuration per RFC 9239.
https://www.rfc-editor.org/rfc/rfc9239

First, the recommended MIME type is now `text/javascript`:

> The most widely supported media type in use is `text/javascript`; all
> others are considered historical and obsolete aliases of `text/javascript`.

Second, the `.mjs` extension is now explicitly registered:

> The `.mjs` file extension signals that the file represents a JavaScript
> module. Execution environments that rely on file extensions to
> determine how to process inputs parse `.mjs` files using the Module
> grammar of [ECMA-262].

IANA template: https://www.iana.org/assignments/media-types/text/javascript

Bug: https://bz.apache.org/bugzilla/show_bug.cgi?id=61383","{""sha"": ""223bb1a713533d517679a65073a2e4b612a1da08"", ""author"": {""name"": ""Mathias Bynens"", ""email"": ""mathias@qiwi.be"", ""date"": ""2022-03-09T08:26:53Z""}, ""committer"": {""name"": ""Mathias Bynens"", ""email"": ""mathias@qiwi.be"", ""date"": ""2022-05-03T09:33:18Z""}}"
318,OpenPR,2022-05-07 08:25:06,mathiasbynens,fork_close,,
318,IssueComment,2022-05-07 08:31:15,mathiasbynens,fork_close,"Related PRs:

- [nginx/nginx PR](https://github.com/nginx/nginx/pull/77)
- [jshttp/mime-db PR](https://github.com/jshttp/mime-db/pull/262)
- [python/cpython PR](https://github.com/python/cpython/pull/92627)","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1120165549"", ""author_association"": ""NONE""}"
318,CrossReferenced,2022-05-07 08:31:46,mathiasbynens,fork_close,Correct JavaScript MIME types + extensions per RFC 9239,"{""reference"": {""url"": ""https://api.github.com/repos/nginx/nginx/issues/77"", ""is_pull_request"": true}}"
318,CrossReferenced,2022-05-07 08:31:55,mathiasbynens,fork_close,Correct JavaScript MIME types + extensions per RFC 9239,"{""reference"": {""url"": ""https://api.github.com/repos/jshttp/mime-db/issues/262"", ""is_pull_request"": true}}"
318,IssueComment,2022-05-26 08:03:01,icing,fork_close,"Thanks for you PR. I see no problem with adding `.mjs` to the list. However, redefining `.js` to another mime type has potential to break existing deployments (not of Apache itself, but for software that was coded to expect a certain Content-Type).

We can take in that change into our `trunk`, but I would hesitate to add the redefinition to a 2.4.x release.

What are your expectations?","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1138273657"", ""author_association"": ""CONTRIBUTOR""}"
318,IssueComment,2022-05-26 08:14:44,mathiasbynens,fork_close,"Browsers continue to support all JavaScript MIME types equally: https://mimesniff.spec.whatwg.org/#javascript-mime-type It's just that `text/javascript` is the recommended default. This has been the case for many years [in the HTML Standard](https://html.spec.whatwg.org/multipage/scripting.html#scriptingLanguages):

> Servers should use [text/javascript](https://html.spec.whatwg.org/multipage/indices.html#text/javascript) for JavaScript resources. Servers should not use other [JavaScript MIME types](https://mimesniff.spec.whatwg.org/#javascript-mime-type) for JavaScript resources, and must not use non-[JavaScript MIME types](https://mimesniff.spec.whatwg.org/#javascript-mime-type). [[RFC9239]](https://html.spec.whatwg.org/multipage/references.html#refsRFC9239)

The new RFC finally makes this reality official at the IETF level as well.

So it's exactly like you said: the switch from `application/javascript` to `text/javascript` has no observable behaviors, other than the MIME type itself. This would only break e.g. unit tests that are hardcoded to expect the outdated type -- that is breakage that's unavoidable at one point anyway, unless you decide not to implement RFC 9239.

I don't have any strong opinions on which version this patch should make it into. I would understand if you'd rather wait for a minor release (v2.5.0?). I trust the Apache team to make that decision. My main concern is simply the timing: waiting ""too long"" to land this could cause more deployments to diverge from what is now a cross-standard MIME type agreement.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1138283572"", ""author_association"": ""NONE""}"
318,IssueComment,2022-05-26 08:43:36,icing,fork_close,"> The new RFC finally makes this reality official at the IETF level as well.

It's good to define that clearly going forward, I agree.

> So it's exactly like you said: the switch from `application/javascript` to `text/javascript` has no observable behaviors, other than the MIME type itself. This would only break e.g. unit tests that are hardcoded to expect the outdated type -- that is breakage that's unavoidable at one point anyway, unless you decide not to implement RFC 9239.

I envy your optimism. In my experience, I would expect several enterprise proxies to break on such a mime type change.

> I don't have any strong opinions on which version this patch should make it into. I would understand if you'd rather wait for a minor release (v2.5.0?). I trust the Apache team to make that decision. My main concern is simply the timing: waiting ""too long"" to land this could cause more deployments to diverge from what is now a cross-standard MIME type agreement.

Ok, added to trunk in r1901273.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1138306722"", ""author_association"": ""CONTRIBUTOR""}"
318,IssueComment,2022-05-26 08:46:08,mathiasbynens,fork_close,"> Ok, added to trunk in r1901273.

Thank you! f4230a5e7d27ddddad44172657356f2c5f762331

Should we close this PR now?","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1138308635"", ""author_association"": ""NONE""}"
318,IssueCommentSupplement,2022-05-26 09:18:03,icing,fork_close,Indeed. Thanks for making the PR!,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1138333710"", ""author_association"": ""CONTRIBUTOR""}"
318,ClosePR,2022-05-26 09:18:03,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6684166180"", ""commit_url"": null}"
318,DeleteBranch,2022-05-26 12:28:22,mathiasbynens,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6685271391"", ""commit_url"": null}"
318,IssueCommentSupplement,2022-05-29 06:26:47,reschke,fork_close,"> Browsers continue to support all JavaScript MIME types equally: https://mimesniff.spec.whatwg.org/#javascript-mime-type

FWIW, not all user agents are browsers.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1140386736"", ""author_association"": ""NONE""}"
318,CrossReferenced,2023-01-31 16:32:17,Nipheris,fork_close,Added proper support for ES module exports (with some fixes for NodeJS context),"{""reference"": {""url"": ""https://api.github.com/repos/tradingview/lightweight-charts/issues/613"", ""is_pull_request"": true}}"
319,OpenPR,2022-05-30 16:25:19,ylavic,fork_close,,
319,HeadRefForcePushed,2022-05-31 15:56:26,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6710928500"", ""commit_url"": null}"
319,HeadRefForcePushed,2022-06-01 08:49:49,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6716715965"", ""commit_url"": null}"
319,HeadRefForcePushed,2022-06-01 12:54:39,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6718748338"", ""commit_url"": null}"
319,HeadRefForcePushed,2022-06-01 12:59:58,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6718795555"", ""commit_url"": null}"
319,Revise,2022-06-02 12:33:18,ylavic,fork_close,"mod_proxy_http: Avoid 417 responses for non forwardable 100-continue. PR 65666.

Stop returning 417 when mod_proxy has to forward an HTTP/1.1 request with both
""Expect: 100-continue"" and ""force-proxy-request-1.0"" set, mod_proxy can instead
handle the 100-continue by itself before forwarding the request, like in the
""Proxy100Continue Off"" case.

Note that this does not change the behaviour of httpd receiving an HTTP/1.0
request with an Expect header, ap_check_request_header() will still correctly
return 417 in this case.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1901420 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""2e606943c938811d90953a73d30efc7ed1ef316e"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-05-30T15:54:34Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-06-02T12:33:18Z""}}"
319,Revise,2022-06-02 12:33:18,ylavic,fork_close,"mod_proxy_http: Follow up to r1901420: consistent 100-continue checks.

Let proxy_http_handler() tell ap_proxy_create_hdrbrgd() whether to add or
preserve Expect header or not, through the ""proxy-100-continue"" note.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1901446 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""271609f3f39f8f4d69ed91a7b03b7ec09b774e07"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-05-31T11:05:41Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-06-02T12:33:18Z""}}"
319,Revise,2022-06-02 12:33:18,ylavic,fork_close,"mod_proxy: Let fixup hooks know about the Host header (and eventually overwrite it).

If proxy_run_fixups() sets a Host header there will be two ones sent to the
origin server.

Instead, let the hooks know about the Host by setting it in the r->headers_in
passed to proxy_run_fixups(), and use the actual value afterwards.
Note: if proxy_run_fixups() unsets the Host we'll keep ours.

Suggested by: rpluem

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1901485 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d733e467dc5534623ab1870ac2ea734e598ff020"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-06-01T09:56:43Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-06-02T12:33:18Z""}}"
319,Revise,2022-06-02 12:33:18,ylavic,fork_close,"mod_proxy: Follow up to r1901485: Don't shadow upper 'val' variable.



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1901486 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""d412e26da9bc6bd9398e4a0ecc0716066ca8a5ec"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-06-01T10:23:31Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-06-02T12:33:18Z""}}"
319,HeadRefForcePushed,2022-06-02 12:34:58,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6728014021"", ""commit_url"": null}"
319,IssueCommentSupplement,2022-06-03 09:50:56,ylavic,fork_close,Merged in [r1901584](https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1901584),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1145795554"", ""author_association"": ""MEMBER""}"
319,ClosePR,2022-06-03 09:50:56,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6735122725"", ""commit_url"": null}"
319,DeleteBranch,2022-06-03 09:51:04,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6735123493"", ""commit_url"": null}"
320,OpenPR,2022-05-31 15:46:13,ylavic,fork_close,,
320,Revise,2022-05-31 15:47:30,ylavic,fork_close,"mod_proxy: ap_proxy_create_hdrbrgd() to clear hop-by-hop first and fixup last.

So that ap_proxy_clear_connection() runs on the original headers only and
proxy_run_fixups() on the final ones.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1901461 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""316e87fece5f781bb7f8a014663e8fae39990038"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-05-31T15:26:12Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-05-31T15:47:30Z""}}"
320,HeadRefForcePushed,2022-05-31 15:47:42,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6710864305"", ""commit_url"": null}"
320,Referenced,2022-06-01 07:51:10,asfgit,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6716200603"", ""commit_url"": ""https://api.github.com/repos/apache/httpd/commits/956f708b094698ac9ad570d640d4f30eb0df7305""}"
320,IssueCommentSupplement,2022-06-01 08:45:25,ylavic,fork_close,Merged in r1901461 (956f708b094698ac9ad570d640d4f30eb0df7305),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1143308761"", ""author_association"": ""MEMBER""}"
320,ClosePR,2022-06-01 08:45:25,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6716678915"", ""commit_url"": null}"
320,DeleteBranch,2022-06-03 09:52:18,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6735130808"", ""commit_url"": null}"
320,IssueCommentSupplement,2022-06-10 13:42:40,kirotawa,fork_close,this issue has CVE-2022-31813 assigned to it. ,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1152377241"", ""author_association"": ""NONE""}"
321,SubmitCommit,2022-06-01 12:07:22,notroj,fork_close,"* modules/ssl/ssl_engine_init.c (ssl_init_Module): Avoid some bogus
  gcc -Wmaybe-uninitialized warnings in (slightly odd) SSLFIPS
  handling.


git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1874005 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""4a0cd8538c55ca252d36058760c0d844b5533dd5"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-02-14T08:53:21Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-06-01T12:07:22Z""}}"
321,SubmitCommit,2022-06-01 12:08:46,notroj,fork_close,"Move FIPS mode config option to SSLModConfigRec since it is a global
SSL library setting.  Additionally, always log the FIPS mode since it
can be set outside of the httpd config.

* modules/ssl/ssl_private.h (SSLModConfigRec): Move fips field here.
  (SSLSrvConfigRec): ... from here.

* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLFIPS): Adjust for fips
  field move.

* modules/ssl/ssl_engine_init.c (ssl_init_Module): Adjust for fips
  field move.  Always log the OpenSSL FIPS mode state even if SSLFIPS
  is not used.

git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1877261 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""88eda04064201a6d18203a3a5cd340aab3b85ea6"", ""author"": {""name"": ""Joe Orton"", ""email"": ""jorton@apache.org"", ""date"": ""2020-05-01T15:15:59Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-06-01T12:08:46Z""}}"
321,SubmitCommit,2022-06-01 12:08:47,ylavic,fork_close,"mod_ssl: SSLFIPS compatible with OpenSSL 3.0.  PR 66063.

* modules/ssl/ssl_private.h():
  #define modssl_fips_is_enabled() and modssl_fips_enable() to wrap the
  native OpenSSL FIPS functions available on OPENSSL_VERSION_NUMBER.

* modules/ssl/ssl_engine_init.c(ssl_init_Module, modssl_fips_cleanup):
  Use the new wrappers instead of the OPENSSL_VERSION_NUMBER < 3.0 functions.


Submitted by: Petr Sumbera <petr.sumbera oracle.com>, ylavic



git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@1901470 13f79535-47bb-0310-9956-ffa450edef68","{""sha"": ""eaadfe87f24a2f4cc8fd68fd7d105367c0b4ca95"", ""author"": {""name"": ""Yann Ylavic"", ""email"": ""ylavic@apache.org"", ""date"": ""2022-05-31T23:01:24Z""}, ""committer"": {""name"": ""ylavic"", ""email"": ""ylavic.dev@gmail.com"", ""date"": ""2022-06-01T12:08:47Z""}}"
321,OpenPR,2022-06-01 12:10:48,ylavic,fork_close,,
321,IssueCommentSupplement,2022-06-03 09:51:54,ylavic,fork_close,Merged in [r1901586](https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x@1901586),"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1145796341"", ""author_association"": ""MEMBER""}"
321,ClosePR,2022-06-03 09:51:54,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6735128263"", ""commit_url"": null}"
321,DeleteBranch,2022-06-03 09:51:57,ylavic,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6735128556"", ""commit_url"": null}"
323,SubmitCommit,2022-05-23 13:17:05,Stefan Eissing,fork_close," *) mod_http2: re-implementation of h2_workers using APR rings in
    the manner of apr_thread_pool. h2 connections register as
    a producer of connections to process.
    In this design, h2_workers can migrate from a h2 specific
    component to general httpd mpm functionality.","{""sha"": ""0742abe2eb6adaec45fc1332511e9c759e528829"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-23T13:17:05Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-23T13:17:05Z""}}"
323,SubmitCommit,2022-05-24 11:02:29,Stefan Eissing,fork_close," * wip: assessing busy workers regularly to detect long running threads
   and adjust number of active workers accordingly. The idea is to
   keep a certain amount of workers for ""fast"" requests in the presence
   of requests that take much longer.","{""sha"": ""19614c5a0ad53b0c31f2d2d965e368b5fddaa49d"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-24T11:02:29Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-24T11:02:29Z""}}"
323,SubmitCommit,2022-05-26 11:25:26,Stefan Eissing,fork_close,"  *) mod_http2: wip regarding h2 worker dynamics.
     h2 now has a softcap on ""desired"" number of workers and
     regularly inspects ongong work to detect long runners.
     long runners raise this soft cap, and on disappearing lower
     it again.","{""sha"": ""67e74bac5fc354cece72a03b3243abd667050057"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-26T11:25:26Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-26T11:25:26Z""}}"
323,SubmitCommit,2022-05-27 11:00:20,Stefan Eissing,fork_close,"  *) mod_http2: adaptive tuning of active workers reacts now
     immediately on necessary increases, but delayed on decrease.","{""sha"": ""49df86bc988e659967afd91ccbfc4c83a4a808d5"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-27T11:00:20Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-27T11:00:20Z""}}"
323,SubmitCommit,2022-05-27 11:59:10,Stefan Eissing,fork_close,"  *) mod_http2: only run tuner when paramters for workers are
     dynamic (min < max).","{""sha"": ""4c91ab2b082dcd2a0f256d41cc2a4e0260c33bfe"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-27T11:59:10Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-05-27T11:59:10Z""}}"
323,SubmitCommit,2022-06-02 12:07:53,Stefan Eissing,fork_close,"  *) mod_http2: add configuration for fast workers:
     H2FastWorkers count [ time_limit ]","{""sha"": ""76f7fb1dcb6da54842e12eedabb5860d0a14f440"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-02T12:07:53Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-02T12:07:53Z""}}"
323,SubmitCommit,2022-06-10 09:31:37,Stefan Eissing,fork_close,Merge branch 'trunk' into h2-worker-pool,"{""sha"": ""8448c6b83dc4713da5a7f4379f084f7b435a1c0e"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-10T09:31:37Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-10T09:31:37Z""}}"
323,SubmitCommit,2022-06-10 13:07:00,Stefan Eissing,fork_close,"  *) mod_http2: setup/destroy separate pools for worker slots.
     Change long_runner detection to assume only half of them
     have been found in calculating active worker soft limit.","{""sha"": ""c3f34e49ce7c94d2d0442c4320435aefbcb4877f"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-10T13:07:00Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-10T13:07:00Z""}}"
323,SubmitCommit,2022-06-15 09:49:23,Stefan Eissing,fork_close,"  *) mod_http2: remove fast workers config and handling
     remove workers tuner thread","{""sha"": ""2f1b6e54b4b962e25433c5a5ff5010b522a59396"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-15T09:49:23Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-15T09:49:23Z""}}"
323,SubmitCommit,2022-06-15 11:19:41,Stefan Eissing,fork_close,"  *) mod_http2: producers auto-activate when a connection
     has been handled, no need for explicit calling.
     processing limit per connection is checked against
     max streams.","{""sha"": ""ae5fca37cc830a8162be9d834958844bc22d7b8b"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-15T11:19:41Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-15T11:19:41Z""}}"
323,SubmitCommit,2022-06-15 15:13:40,Stefan Eissing,fork_close,"  *) mod_http2: fix a read after free on purging streams c2
     instance and their transit pool.","{""sha"": ""057efd2e7afad2abbbed8a2f80cfc7d6c2e9124c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-15T15:13:40Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-15T15:13:40Z""}}"
323,SubmitCommit,2022-06-16 08:56:58,Stefan Eissing,fork_close,  *) mod_http2: wake pollset only on first c2 io event.,"{""sha"": ""2c79f1f7d4fbef578e1ad012fae60f3e1bc739a3"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-16T08:56:58Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-16T08:56:58Z""}}"
323,SubmitCommit,2022-06-16 10:16:48,Stefan Eissing,fork_close,"  *) mod_http2: pass c1 output in larger chunks
     go from idle to keepalive without grace period, but
     check availability of input.","{""sha"": ""9b876a4a5fdb56219bf86e366fa626458e2cfd8b"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-16T10:16:48Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-16T10:16:48Z""}}"
323,SubmitCommit,2022-06-16 10:37:25,Stefan Eissing,fork_close,  *) mod_http2: flush c1 output when needed during nghttp2 sends.,"{""sha"": ""af35986c3061d6399f868166e7c57461d3f57bb9"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-16T10:37:25Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-16T10:37:25Z""}}"
323,SubmitCommit,2022-06-17 08:25:33,Stefan Eissing,fork_close,Merge branch 'trunk' into h2-worker-pool,"{""sha"": ""2c8cd821b719d3bac1a066759a5eb4edee159c2c"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-17T08:25:33Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-17T08:25:33Z""}}"
323,SubmitCommit,2022-06-17 09:07:47,Stefan Eissing,fork_close,Merge branch 'trunk' into h2-worker-pool,"{""sha"": ""050b59cab431201ae378a7cceebdef0ea0bc4799"", ""author"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-17T09:07:47Z""}, ""committer"": {""name"": ""Stefan Eissing"", ""email"": ""stefan.eissing@greenbytes.de"", ""date"": ""2022-06-17T09:07:47Z""}}"
323,OpenPR,2022-06-17 09:14:50,icing,fork_close,,
323,IssueCommentSupplement,2022-06-17 09:25:12,icing,fork_close,Merged as r1902005.,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1158684259"", ""author_association"": ""CONTRIBUTOR""}"
323,ClosePR,2022-06-17 09:25:12,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/6827535558"", ""commit_url"": null}"
323,DeleteBranch,2022-10-17 11:57:23,icing,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7601400838"", ""commit_url"": null}"
328,SubmitCommit,2022-08-30 13:26:08,dhrubasaha08,fork_close,"Add php script support inside html[Optional]

Added option to enable php scripts support inside html files by processing the html files with php engine !","{""sha"": ""fd63812d5fcecab9d664de97ee639bb2a7bfac28"", ""author"": {""name"": ""Dhruba Saha"", ""email"": ""78276433+dhrubasaha08@users.noreply.github.com"", ""date"": ""2022-08-30T13:26:08Z""}, ""committer"": {""name"": ""GitHub"", ""email"": ""noreply@github.com"", ""date"": ""2022-08-30T13:26:08Z""}}"
328,OpenPR,2022-08-30 13:28:36,dhrubasaha08,fork_close,,
328,IssueComment,2022-08-30 13:59:19,covener,fork_close,"PHP project doesn't recommend AddType for some time: https://www.php.net/manual/en/install.unix.apache2.php
(addtype is for actual content types)

However, I still don't think we should have example AddHandler/SetHandler for a third-party module in the default configuration.","{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1231709954"", ""author_association"": ""MEMBER""}"
328,IssueCommentSupplement,2022-08-30 14:10:17,dhrubasaha08,fork_close,okay thanks !,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/comments/1231723820"", ""author_association"": ""NONE""}"
328,ClosePR,2022-08-30 14:10:17,dhrubasaha08,fork_close,,"{""url"": ""https://api.github.com/repos/apache/httpd/issues/events/7287993923"", ""commit_url"": null}"
